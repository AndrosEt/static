import{j as o,cA as No,u as c,A as Qt,r as h,bc as mf,bi as Ul,x as E,cu as lr,N as F,aN as po,aC as ce,E as re,cB as Yo,cp as hf,$ as St,bz as gf,aT as es,cC as xf,cr as bf,cD as ff,bb as Sf,bE as Wp,b4 as Kl,aF as yf,cq as Op,K as Fe,cE as jf,cF as kf,a as Z,g as $,f as D,d as L,b as Se,k as cr,ch as vo,ap as Me,cG as jn,m as R,e as C,o as dr,c as b,a9 as Us,av as Bl,cH as Et,h as ie,as as bt,ag as zp,Q as fe,O as $n,y as Le,q as Ka,a5 as Tf,bW as Np,I as z,J as vf,aY as Vp,cI as Cf,p as en,aI as ur,bF as _p,cJ as Ep,aD as Af,t as Lp,cx as Ie,cK as wf,aB as Ss,G as Jt,a8 as Ga,ah as tn,aW as ae,aK as _e,aL as tt,bX as $f,cL as qp,bu as Pf,ao as Gl,cM as Es,ad as Bf,aM as Ht,M as Rt,cm as ts,S as Co,cN as Mf,cO as Rf,Z as Ao,Y as wo,cn as Zl,a1 as pr,bO as Hp,cP as Yl,B as Ql,a2 as Ut,ay as Ff,R as Df,ak as Jl,aj as He,aV as Xl,aA as If,cQ as Wf,aX as Up,P as ys,bv as js,aU as _n,c1 as Kp,b7 as Za,V as Of,cR as ec,U as Ya,cS as zf,cv as Qa,cT as Te,ba as Gp,cU as Nf,aG as lt,aH as zt,cV as Vf,ar as Zp,cW as _f,cX as Ef,cc as Lf,bZ as mr,D as qf,cs as Yp,cY as tc,aO as Ja,bR as oc,b3 as Hf,cj as Ml,ck as Rl,cZ as Zd,c_ as Yd,bD as Qp,c$ as Uf,bx as Kf,d0 as Gf,d1 as Zf,b$ as Yf,ct as Qf,d2 as nc,cf as sc,s as rc,v as Ye,ci as Jf,L as Xf,b1 as ac,d3 as Jp,H as Xa,bH as ic,b6 as eS,d4 as tS,d5 as oS,d6 as nS,d7 as Aa,at as sS,ce as rS}from"./index-tEWTe_cM.js";import{g as me,r as I,m as kt,a as Xe,b as T,u as ne,c as Xp,d as aS,e as em,f as tm,h as om,p as mo,i as iS,j as lS,k as nm,l as sm,M as rm,n as cS,o as dS,R as am,t as uS}from"./ModalGraph-hPaCunFZ.js";import{d as he,a as lc,b as Xt}from"./use-onclickoutside.browser.esm-BisD5Fdu.js";import{i as Qd,p as pS,q as mS,f as N,c as cc,s as im,t as dc,r as uc,o as ks,L as lm}from"./useAutoPlay-8WOcIzK4.js";import{d as Ct,U as hS,E as gS,L as ho,c as cm,e as Ts,f as pc,K as xS,h as mc,j as dm,k as hc}from"./SearchGraphModal-8Lh4F5Sv.js";import{a3 as Qo,t as Be,J as ga,e as $e,h as ke,k as bS,T as hr,g as gr,E as At,a7 as xa,Q as kn,P as We,l as wa,s as $a,d as gc,a6 as xc,a8 as fS,a9 as SS,aa as yS,N as um,a0 as ei}from"./Learn-ZI4QJ8Ms.js";import{b as jS,A as kS}from"./store-716jCCs7.js";import{l as TS,u as pm,a as bc,S as ti,c as vS,L as mm,A as fc,B as CS,U as hm}from"./RecommendedPlanUpsellButton-l-ByuByL.js";import{S as gm,l as xm}from"./StatusChip-EV3h8ZPz.js";import{c as ht}from"./index-7v7JHEmS.js";import{s as Lo,a as Sc}from"./index-LRGnzDUH.js";import{C as AS,f as os,H as bm,s as Ft,e as Jo,g as Dt,h as Lt,a as Ys,d as wS,P as $S,R as PS,N as BS,j as fm}from"./middleware-6VZ1FcKb.js";import{s as io}from"./index-ECFt0NIj.js";import{e as jo,s as Jd,a as MS}from"./index-Odw5cPaJ.js";import{W as RS,a as Cn,b as mt,D as Sm,s as FS,g as Qs,c as ns,d as DS,P as IS}from"./WidthLimitedTagsValue-Gph_9FLc.js";import{a as Pn,d as WS}from"./index-jbA-UQjt.js";import{d as OS}from"./index-kbVOAPQe.js";import{g as xr}from"./index-Ca0BkoYE.js";import{C as br,u as yc}from"./useChartLegend-7ulLO1yV.js";import{u as zS,N as NS,l as VS}from"./NewRadio-DIL_Ez7J.js";import{m as _S,M as ES,g as LS,s as ym}from"./Minmax-3Xn6G6oy.js";import{S as qS}from"./ShowMore-8vjsJqT8.js";import{o as pt}from"./omit-4vqdCSiw.js";import{u as HS,T as Fl,a as US,I as jc}from"./IconMarketplaceSelect-LFYJVjQs.js";import{b as KS,a as kc,N as Zn,A as Tc}from"./AddToMyListDropdown-lgmjWp6o.js";import{L as Pa}from"./LockedTitle-zD5OrXLs.js";import{u as GS,c as ZS,T as oi,F as ni}from"./getUpsellData-siUtjfVt.js";import{l as jm}from"./lodash-X79ICV_1.js";import{M as fr}from"./MarketplaceSingleSelect-J9Q4NESj.js";import{C as Gr}from"./ChoiceBadge-QiiTIx6Y.js";import{a as ss,A as km}from"./EditProductIdeaName-KItQ9rLb.js";import{E as vs}from"./ExtendedProductSummary-Rm3yeme_.js";import{r as vc}from"./server.browser-DFoAq_e7.js";import{c as Tm}from"./index-JL-77yQX.js";import{P as si}from"./OptimalData-cuY_CBe9.js";import{u as YS}from"./useWindowSize-Dk6_GUbk.js";import{A as ri}from"./AboveTable-n7zPUc2F.js";import{u as QS}from"./useTableComponents-2Hwd8mSP.js";import{A as JS}from"./react-alice-carousel-QMWN8gi9.js";import{u as XS,I as vm,H as Cm}from"./IDASHUpsellModal-9iMRBwwd.js";import{T as Am,u as ey,G as ty}from"./useTrackCompetitorsOnClick-DO7Nu69z.js";import{C as oy}from"./highcharts-react.min-X0EFkdtl.js";import{C as ny}from"./Chart-x9jYX_B3.js";import{A as on}from"./AboveTableSkeleton-Lgx9__nY.js";import{C as sy}from"./ChartExport-1KlP8bAy.js";import{S as ry}from"./SubAccountDoNotHaveAccess-W5XV8oJ4.js";import{T as ay}from"./ToastContainer-G5qnX7eh.js";const qo=e=>({dangerouslySetInnerHTML:{__html:e}}),nn=()=>o.jsxs(iy,{children:[o.jsx(No,{builder:[{size:"medium",width:57,bottom:24}]}),o.jsx(ly,{children:o.jsx(cy,{children:Array(5).fill(null).map((e,t)=>o.jsx(dy,{children:o.jsx(No,{builder:[{size:"small",width:80},{size:"large",direction:"row",count:2}]})},t))})}),o.jsxs(uy,{children:[o.jsx(No,{builder:[{size:"small",width:96,bottom:0}]}),o.jsx(py,{}),o.jsx(No,{builder:[{size:"large",width:53,bottom:0}]}),o.jsx(my,{children:o.jsx(No,{builder:[{size:"large",width:101,bottom:0}]})})]})]}),iy=c.div`
  display: flex;
  flex-direction: column;
  width: 100%;
`,ly=c.div`
  height: 54px;
  overflow: hidden;
`,cy=c.div`
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
  grid-gap: ${({theme:e})=>e.spacing.sp32};
  margin-bottom: 12px;
`,dy=c.div``,uy=c.div`
  display: grid;
  grid-template-columns: 96px 1fr 53px minmax(53px, 101px);
  align-items: center;
  margin-top: ${({theme:e})=>e.spacing.sp16};
`,py=c.div``,my=c.div`
  margin-left: ${({theme:e})=>e.spacing.sp12};
`,nt=({statuses:e,skeleton:t,builder:n,children:s})=>{const{status:r}=ee();return o.jsx(o.Fragment,{children:(e.length?e:["loading"]).includes(r)?t||o.jsx(No,{builder:n}):s})},ee=Qt((e,t)=>({status:"",setStatus:n=>e({status:n})}));var hy=function(){var e=KS(function(){return{x:Qd?window.pageXOffset:0,y:Qd?window.pageYOffset:0}}),t=e[0],n=e[1];return h.useEffect(function(){var s=function(){n(function(r){var a=window.pageXOffset,i=window.pageYOffset;return r.x!==a||r.y!==i?{x:a,y:i}:r})};return s(),pS(window,"scroll",s,{capture:!1,passive:!0}),function(){mS(window,"scroll",s)}},[]),t};const ai=e=>{const{offsetStart:t,size:n,buttonType:s,icon:r,onClick:a,className:i,children:l}=e,{t:u}=mf(),[d,p]=h.useState(0),m=(t&&d>t)??d>400,g=Ul(()=>{p(window.scrollY)},10),x=()=>{window.scrollTo(0,0),a==null||a()};return h.useEffect(()=>(window.addEventListener("scroll",g,{passive:!0}),()=>{window.removeEventListener("scroll",g)}),[g]),o.jsx(gy,{className:i,buttonType:s,size:n,icon:r??o.jsx(E,{icon:lr}),onClick:x,$isVisible:!!m,children:l??u("buttons.backToTop")})},gy=c(F)`
  position: fixed;
  z-index: 101;
  left: 48px;
  bottom: 24px;
  visibility: ${({$isVisible:e})=>e?"visible":"hidden"};
`,xy=({keyword:e,marketplace:t})=>{const{isOverflown:n,checkOverflown:s}=po(),{platform:r,domain:a}=ce("store",t),i=gf[a];return o.jsxs(fy,{children:[o.jsx(Sy,{children:by[r]}),o.jsx(yy,{children:i}),o.jsx(re,{content:e,maxWidth:500,delay:0,disabled:n,children:o.jsx(jy,{onMouseEnter:s,children:e})})]})},by={w:o.jsx(Yo,{}),a:o.jsx(Qo,{}),WALMART:o.jsx(Yo,{}),AMAZON:o.jsx(Qo,{})},fy=c.div`
  display: flex;
  align-items: center;
`,Sy=c.div`
  display: flex;
  align-items: center;
`,yy=c(hf)`
  margin-left: ${e=>e.theme.spacing.sp12};
  margin-right: ${e=>e.theme.spacing.sp12};
`,jy=c.div`
  ${St};
  color: ${e=>e.theme.systemColors.black};
  overflow: hidden;
  text-overflow: ellipsis;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  white-space: normal;
  word-break: break-word;
`,ky=({text:e})=>o.jsx(Ty,{children:e}),Ty=c.div`
  font-size: 16px;
  line-height: 24px;
  font-weight: bold;
  padding: ${e=>e.theme.spacing.sp8};
  color: ${e=>e.theme.systemColors.grey800};
`,wm=({onExpand:e,...t})=>o.jsx(vy,{renderValue:RS,renderHeader:n=>n.autocomplete?o.jsx(AS,{}):null,renderOptions:n=>o.jsx(Cy,{...n,onExpand:e}),...t}),vy=c(es)`
  ${es.Control} {
    padding-left: 4px;
  }
`,Cy=e=>{const{options:t,size:n,onExpand:s,onChange:r,value:a}=e,{debounceSearch:i}=h.useContext(xf),{itemIsActive:l,selectItem:u}=HS({onChange:r,itemTree:t,value:a,getItemByValue:p=>e.optionsMap[p],getChildren:p=>p.children,getValue:p=>p.value,getChildCount:p=>{var m;return p.childCount||((m=p.children)==null?void 0:m.length)||0},getPathById:p=>p.pathById||[]}),d=()=>t==null?void 0:t.map(p=>{var g;const m={option:p,size:n,hover:p.hover,active:p.active,onClick:p.onClick};return o.jsx(h.Fragment,{children:((g=p==null?void 0:p.render)==null?void 0:g.call(p,m))||o.jsx($m,{search:i,onExpand:s,option:p,level:0,onSelect:u,getIsActive:l,parentActive:Fl.NONE})},p.key||p.value)});return o.jsx("div",{children:d()})},Ay=e=>{var f,v;const{option:t,size:n=Op,hover:s,onMouseEnter:r,getIsActive:a,parentActive:i,onSelect:l,level:u,onExpand:d,search:p,disabled:m}=e,[g,x]=h.useState(t.defaultOpen||!1);h.useEffect(()=>x(t.defaultOpen||!1),[p]);const S=h.useMemo(()=>{var k;return g&&(((k=t.children)==null?void 0:k.length)||0)>0},[g,(f=t.children)==null?void 0:f.length]),j=h.useMemo(()=>a(t,i),[a,t,i]);return o.jsxs(o.Fragment,{children:[o.jsxs(Py,{$disabled:m,$size:n,$hover:s,$level:u,role:"option","data-value":t.value,onClick:()=>m||l==null?void 0:l(t,j),onMouseEnter:r,children:[o.jsx(ff,{disabled:m,active:j!==Fl.NONE,icon:j===Fl.HAS_ACTIVE_CHILDREN?Sf:void 0}),t.children&&(typeof d=="function"?o.jsx($y,{isOpen:S,onOpen:x,option:t,onExpand:d}):o.jsx(wy,{isOpen:S,onOpen:x})),o.jsx(By,{children:t.label})]}),S&&o.jsx(o.Fragment,{children:(v=t.children)==null?void 0:v.map(k=>o.jsx($m,{search:p,level:u+1,option:k,parentActive:j,getIsActive:a,onSelect:l,onExpand:d},k.key||k.value))})]})},$m=h.memo(Ay),wy=({isOpen:e,onOpen:t})=>{const n=h.useCallback(s=>{s.preventDefault(),s.stopPropagation(),t(r=>!r)},[t]);return o.jsx(Pm,{buttonType:"icon",icon:o.jsx(E,{icon:e?Wp:Kl}),size:"50",$active:e,onClick:n})},$y=({isOpen:e,option:t,onExpand:n,onOpen:s})=>{const r=h.useCallback(async a=>{a.preventDefault(),a.stopPropagation(),typeof n=="function"&&!e&&n(t),s(!e)},[e,n,t,s]);return o.jsx(Pm,{buttonType:"icon",icon:o.jsx(E,{icon:t.status==="loading"?yf:e?Wp:Kl,spin:t.status==="loading"}),size:"50",$active:e,onClick:r})},Py=c(bf)`
  padding-left: ${e=>e.$level*32+8}px;
`,Pm=c(F)`
  margin-left: 4px;
  width: 20px;
  height: 20px;
  border-radius: 4px;
  ${e=>e.$active?`color: ${e.theme.systemColors.blue600}`:""}
`,By=c.div`
  display: flex;
  margin-left: 8px;
  align-items: center;
`,at=e=>e.getBoundingClientRect(),My=(e,t)=>({get collidedTop(){return at(e).top<at(t).top},get collidedBottom(){return at(e).bottom>at(t).bottom},get collidedLeft(){return at(e).left<at(t).left},get collidedRight(){return at(e).right>at(t).right},get overflowTop(){return at(t).top-at(e).top},get overflowBottom(){return at(e).bottom-at(t).bottom},get overflowLeft(){return at(t).left-at(e).left},get overflowRight(){return at(e).right-at(t).right}}),Ry=(e,t)=>{if(e&&t&&e.children.length>0){let n=0;return Array.from(e==null?void 0:e.children).forEach(s=>{My(s,t).collidedRight||(n+=1)}),n}return 0},Fy=e=>e.map(t=>o.jsx(Wy,{children:t.label},t.key||t.value)),Dy=({disabled:e,items:t,size:n})=>t.map(s=>o.jsx(os,{size:n,disabled:e,onRemove:()=>!0,icon:s.icon,children:s.label},s.key||s.value)),Iy=({size:e=Op,value:t,disabled:n,placeholder:s,onRemove:r,renderItems:a=Fy,renderMainItems:i,error:l})=>{const u=h.useMemo(()=>t||[],[t]),{width:d}=YS(800),p=h.useRef(null),m=h.useRef(null),[g,x]=h.useState(-1),{isOverflown:S,checkOverflown:j}=po(),f=g!==-1&&g<u.length?u.length-g:0,v=h.useMemo(()=>g===-1?[]:u.slice(0,u.length-f),[g,f,u]),k=h.useMemo(()=>{const P=f>0?u.slice(-f):[];return a(P)},[f,u,a]),y=h.useMemo(()=>JSON.stringify(u.map(P=>P.value)),[u]);h.useEffect(()=>{const P=setTimeout(()=>{const A=Ry(m.current,m.current);x(A)},0);return()=>clearTimeout(P)},[m,y,d]);const w={items:u.slice(0,100),disabled:n,size:e};return o.jsxs(zy,{ref:p,$multiple:u.length>1,children:[u.length===0&&o.jsx(Oy,{$error:l,children:s}),o.jsx(Ny,{ref:m,children:(i==null?void 0:i(w))||Dy(w)}),(i==null?void 0:i({items:v,disabled:n,size:e}))||v.map((P,A)=>A===0?o.jsx(re,{content:P.label,appendTo:document.body,disabled:S,placement:"bottom",children:o.jsx(os,{defaultValue:P.value,"data-tag":!0,size:e,disabled:n,onRemove:r,icon:P.icon,checkOverflown:j,children:P.label})},P.key||P.value):o.jsx(os,{defaultValue:P.value,"data-tag":!0,size:e,disabled:n,onRemove:r,icon:P.icon,children:P.label},P.key||P.value)),f>0?o.jsx(bm,{size:e,items:k,disabled:n,count:"+"+f}):null]})},Wy=c.div`
  ${Fe};
  padding: 8px;
`,Oy=c(jf)`
  ${kf};
  left: 5px;
`,zy=c.div`
  position: relative;
  display: flex;
  align-items: center;
  overflow: hidden;
  width: 100%;
  min-height: 100%;
  max-width: 100%;
  gap: 4px;

  ${os.Wrapper} {
    flex-shrink: 0;

    ${e=>e.$multiple?Z`
            max-width: calc(100% - 44px);
          `:Z`
            max-width: 100%;
          `}
  }
`,Ny=c.div`
  position: absolute;
  top: 0;
  left: 0;
  right: 40px;
  height: 100%;
  display: flex;
  align-items: center;
  overflow: hidden;
  opacity: 0;
  pointer-events: none;
  visibility: hidden;
`,Cc=(e,t)=>h.useMemo(()=>e!=null&&e.domain?(ii[e.domain]||[]).map(({id:n,searchId:s})=>({id:n,...t?{onClick:()=>t(n)}:{url:$(`./${e.platform==="WALMART"?"walmart":"amazon"}/view/${s}`,{})}})):[],[e==null?void 0:e.domain,e==null?void 0:e.platform,t]),ii={"amazon.com":[{id:"B00G5M75UK",searchId:"100000230"},{id:"B00MWENGGM",searchId:"100000231"},{id:"B01MUXL5V8",searchId:"100000259"}],"amazon.ca":[{id:"B0711Y9XTF",searchId:"100752408"},{id:"B08YYRW4BL",searchId:"100752488"},{id:"B07ZHYZWQM",searchId:"100752501"}],"amazon.com.mx":[{id:"B00PQ5UH0C",searchId:"100752545"},{id:"B01IEN2SDQ",searchId:"100752553"},{id:"B06XY1T7M9",searchId:"100752566"}],"amazon.de":[{id:"B000NV8940",searchId:"100752637"},{id:"B00ZVUZVFI",searchId:"100752639"},{id:"B07T7LN3MN",searchId:"100752645"}],"amazon.es":[{id:"B000HHQ3AM",searchId:"100752698"},{id:"B00ZVUZVFI",searchId:"100752713"},{id:"B08SBY4HH7",searchId:"100752724"}],"amazon.it":[{id:"B000HHQ3AM",searchId:"100753178"},{id:"B07SQFWQKS",searchId:"100753202"},{id:"B01M1CCIWH",searchId:"100753218"}],"amazon.fr":[{id:"B075CPJ29B",searchId:"100752849"},{id:"B07N41CT82",searchId:"100752857"},{id:"B07Q7TN5JL",searchId:"100752866"}],"amazon.co.uk":[{id:"B00GPVYX9W",searchId:"100752899"},{id:"B07T3Q1DGQ",searchId:"100752909"},{id:"B07SW68GKX",searchId:"100752911"}],"amazon.in":[{id:"B08FJ12KNW",searchId:"100752988"},{id:"B01D8ZU2LU",searchId:"100752996"},{id:"B07D7WGBBR",searchId:"100756201"}],"amazon.nl":[{id:"B07GBCMZWN",searchId:"100753018"},{id:"B08V89FK57",searchId:"100753042"},{id:"B08C1XSWJY",searchId:"100753056"}],"amazon.com.au":[{id:"B000HHQ3AM",searchId:"100753109"},{id:"B07KNTT2HN",searchId:"100753121"},{id:"B06XHLQR6D",searchId:"100753127"}],"amazon.co.jp":[{id:"B091PS1GKG",searchId:"100753139"},{id:"B07F6JPJWQ",searchId:"100753143"},{id:"B07VZQ56F3",searchId:"100753149"}],"walmart.com":[{id:"50290129",searchId:"100000227"},{id:"363700063",searchId:"100000228"},{id:"852998837",searchId:"100000229"}],"amazon.ae":[{id:"B07RJV9SL9",searchId:"105733090"},{id:"B07H331J4R",searchId:"105733104"},{id:"B00CPDWT2M",searchId:"105733112"}],"amazon.com.br":[{id:"B0BFRBLVZ6",searchId:"124255163"},{id:"B08BG687L9",searchId:"124255198"},{id:"B09FYKWCKR",searchId:"124255217"}]},Ac=Object.values(ii).reduce((e,t)=>(t.forEach(n=>{e[n.searchId]=!0}),e),{}),wc=(e,t)=>h.useMemo(()=>e!=null&&e.domain?(Bm[e.domain]||[]).map(({id:n,searchId:s})=>({id:n,...t?{onClick:()=>t(n)}:{url:$(`${me()}/${e.platform==="WALMART"?"walmart":"amazon"}/view/${s}`,{})}})):[],[e==null?void 0:e.domain,e==null?void 0:e.platform,t]),Bm={"amazon.com":[{id:"pencil",searchId:"100000047"},{id:"balloon",searchId:"100000224"},{id:"satchel",searchId:"100000049"}],"amazon.ae":[{id:"home decor",searchId:"101370562"},{id:"pencil",searchId:"101370560"},{id:"balloon",searchId:"101370557"}],"amazon.ca":[{id:"pencil",searchId:"100000050"},{id:"balloon",searchId:"100000225"},{id:"satchel",searchId:"100000052"}],"amazon.com.mx":[{id:"pencil",searchId:"100000053"},{id:"balloon",searchId:"100000226"},{id:"satchel",searchId:"100000055"}],"amazon.de":[{id:"pencil",searchId:"100000056"},{id:"balloon",searchId:"100000227"},{id:"satchel",searchId:"100000058"}],"amazon.es":[{id:"pencil",searchId:"100000059"},{id:"balloon",searchId:"100000228"},{id:"satchel",searchId:"100000061"}],"amazon.it":[{id:"pencil",searchId:"100000065"},{id:"balloon",searchId:"100000231"},{id:"satchel",searchId:"100000067"}],"amazon.fr":[{id:"pencil",searchId:"100000062"},{id:"balloon",searchId:"100000229"},{id:"satchel",searchId:"100000064"}],"amazon.co.uk":[{id:"pencil",searchId:"100000068"},{id:"balloon",searchId:"100000230"},{id:"satchel",searchId:"100000070"}],"amazon.in":[{id:"pencil",searchId:"100000073"},{id:"balloon",searchId:"100000233"},{id:"satchel",searchId:"100000075"}],"amazon.nl":[{id:"pencil",searchId:"100000071"},{id:"balloon",searchId:"100000232"},{id:"camera",searchId:"100000223"}],"amazon.com.au":[{id:"pencil",searchId:"100000083"},{id:"balloon",searchId:"100000235"},{id:"satchel",searchId:"100000085"}],"amazon.co.jp":[{id:"pencil",searchId:"100000080"},{id:"balloon",searchId:"100000234"},{id:"satchel",searchId:"100000082"}],"walmart.com":[{id:"pencil",searchId:"100000044"},{id:"balloon",searchId:"100000236"},{id:"satchel",searchId:"100000046"}],"amazon.com.br":[{id:"smartwatch",searchId:"111485661"},{id:"tv",searchId:"111485673"}]},$c=Object.values(Bm).reduce((e,t)=>(t.forEach(n=>{e[n.searchId]=!0}),e),{}),ue="cpc",Vo="lowCpc",_o="highCpc",Vy=ue,_y=0,Ey=void 0,lo=ue,Ba="cpcChart",Mm='User click "PPC"',Ly="PPC Bid Graph Clicked",Rm=async({project:e})=>D({url:$(`${I}/api/${e==="blackBoxProducts"?"blackbox":e}/v1/restricted-actions`,{}),method:"GET",useSessionAccountId:!0}),tl=["sorting","filtering","commonWords","deletedWords","competitors","googleTrendChart","japanSortingByPhrase","japanWordFrequency","pagination"],Xd={},Fm=L("searchId/set"),Dm=L("searchId/reset"),qy=Se("searchIdSelector",Xd,e=>{e(Fm,(t,n)=>n),e(Dm,()=>Xd)}),ro={atom:qy,actions:{set:Fm,reset:Dm}},Hy={data:{amazon:[],walmart:[],common:[]}},rs=he("restrictedActions",async e=>e!=="eliteAnalytics"&&e!=="blackBoxProducts"?Rm({project:e}):Hy),Im=e=>jn("/cerebro/*",(e==null?void 0:e.pathname)||"")?"cerebro":jn("/magnet/*",(e==null?void 0:e.pathname)||"")?"magnet":jn("/elite-analytics/*",(e==null?void 0:e.pathname)||"")?"eliteAnalytics":jn("/black-box/products/*",(e==null?void 0:e.pathname)||"")?"blackBoxProducts":null,Wm=e=>({amazon:e.amazon.filter(t=>!tl.includes(t)),walmart:e.walmart.filter(t=>!tl.includes(t)),common:e.common.filter(t=>!tl.includes(t))}),Uo=e=>{var d;const t=cr.getState().location,n=t?Im(t):null,s=e(ro.atom),a=(()=>{if(s.id){if(n==="cerebro")return Ac[s.id]||!1;if(n==="magnet")return $c[s.id]||!1}return null})()??!1,i=e(rs.atom),u=((vo(Me.getState())||"free")==="free"&&a&&i.content?Wm(i.content.data):(d=i.content)==null?void 0:d.data)||null;return{isDemo:a,restrictions:u}},Uy=e=>D({method:"GET",url:$(`${kt}/api/v1/customers/uses/upsell-info`,e),withCredentials:0}),Ma=he("getUpsellInfo",async e=>Uy({moduleId:e})),go=R(Ma.atom,e=>{var t;return((t=e.content)==null?void 0:t.results.isChinesePlans)||!1}),li=e=>{const t=C(rs.actions.pending),n=C(Ma.actions.pending),s=Me(l=>l.main.token),{accountId:r}=dr();h.useEffect(()=>{s&&r&&(t(e),n(Ky[e]))},[t,s,r,e,n]);const a=b(rs.atom,l=>!!l.content,[]),i=b(Ma.atom,l=>!!l.content,[]);return{token:s,accountId:r,loaded:a||i}},Ky={cerebro:"cerebro",magnet:"keywordresearch",eliteAnalytics:"opportunity-finder",blackBoxProducts:"keywordresearch",blackboxAba:"keywordresearch"},Pc=L("setProgress"),Om=L("stopFakeProgress"),zm=L("startFakeProgress",(e,{getState:t,dispatch:n})=>{const s=setInterval(()=>{const r=t(Nm);r!==null?n(Pc(r+(100-r)/40)):clearInterval(s)},100)}),Nm=Se("progressAtom",null,e=>{e(Pc,(t,n)=>n),e(zm,()=>0),e(Om,()=>null)}),wt={atom:Nm,set:Pc,startFakeProgress:zm,stopFakeProgress:Om},Gy=async({searchId:e,phrases:t})=>D({url:$(`${I}/api/cerebro/v1/search/${e}/phrases/temporarily-removed/bulk-update`,{}),method:"PATCH",params:{temporarilyRemoved:t},useSessionAccountId:!0}),Zy=async({searchId:e,...t})=>D({url:$(`${I}/api/cerebro/v1/search/${e}/phrases/temporarily-removed/bulk-delete`,{}),method:"POST",params:t,useSessionAccountId:!0}),Yy=async({searchId:e})=>D({url:$(`${I}/api/cerebro/v1/search/${e}/phrases/temporarily-removed`,{}),method:"GET",useSessionAccountId:!0}),H=e=>{D({url:$(`${I}/api/site/track-event`,{}),method:"POST",params:e,useSessionAccountId:!0}).then()},ci=e=>{D({url:$(`${I}/api/site/track-event`,{}),method:"POST",params:e,useSessionAccountId:!0}).then()},Ge={free:Us.Free,starter:Us.Starter,platinum:Us.StartYourBusiness,diamond:Us.ScaleYourBusiness},eu={titleKey:"upgradePlan.titles.modalCommon",subtitleKey:"upgradePlan.subtitles.modalCommon"},tu={acceptButton:"upgradePlan.AMAZON_features.upgradeButton",declineButton:"upgradePlan.AMAZON_features.declineButton"},ou={},En={anyPlanGroup:{page:ou,modal:{...eu,...tu,featuresOrder:["upgradePlan.featuresModal.ppcBid","upgradePlan.featuresModal.abadNew","upgradePlan.featuresModal.walmartCerebroMagnet","upgradePlan.featuresModal.adtomic","upgradePlan.featuresModal.businessValuation","upgradePlan.featuresModal.listingAnalyzerUses"]},betterPlan:Ge.diamond},platinum:{page:ou,modal:{...eu,...tu,featuresOrder:["upgradePlan.featuresModal.ppcBid","upgradePlan.featuresModal.abadNew","upgradePlan.featuresModal.walmartCerebroMagnet","upgradePlan.featuresModal.adtomic","upgradePlan.featuresModal.listingAnalyzerUses"]},betterPlan:Ge.diamond}},Ln={titleKey:"upgradePlan.titles.keywordSales",subtitleKey:"upgradePlan.subtitles.modalCommon"},ol={acceptButton:"upgradePlan.AMAZON_features.upgradeButton",declineButton:"upgradePlan.AMAZON_features.declineButton"},nl={acceptButton:"upgradePlan.upgradeButton",declineButton:"upgradePlan.AMAZON_tools.declineButton"},Zr={anyPlanGroup:{page:{...Ln,...nl,featuresOrder:["upgradePlan.featuresModal.salesByKeyword","upgradePlan.featuresModal.blackBoxUses","upgradePlan.featuresModal.cerebroUses","upgradePlan.featuresModal.magnetUses","upgradePlan.featuresModal.xrayUses"]},modal:{...Ln,...ol,featuresOrder:["upgradePlan.featuresModal.salesByKeyword","upgradePlan.featuresModal.blackBoxUses","upgradePlan.featuresModal.cerebroUses","upgradePlan.featuresModal.magnetUses","upgradePlan.featuresModal.xrayUses"]},betterPlan:Ge.diamond},starter:{page:{...Ln,...nl,featuresOrder:["upgradePlan.featuresModal.salesByKeyword","upgradePlan.featuresModal.blackBoxUses","upgradePlan.featuresModal.cerebroUses","upgradePlan.featuresModal.magnetUses","upgradePlan.featuresModal.keywordTracker2Uses"]},modal:{...Ln,...ol,featuresOrder:["upgradePlan.featuresModal.salesByKeyword","upgradePlan.featuresModal.blackBoxUses","upgradePlan.featuresModal.cerebroUses","upgradePlan.featuresModal.magnetUses","upgradePlan.featuresModal.keywordTracker2Uses"]},betterPlan:Ge.diamond},platinum:{page:{...Ln,...nl,featuresOrder:["upgradePlan.featuresModal.salesByKeyword","upgradePlan.featuresModal.magnetWalmart","upgradePlan.featuresModal.followUpUses","upgradePlan.featuresModal.keywordTrackerUses"]},modal:{...Ln,...ol,featuresOrder:["upgradePlan.featuresModal.salesByKeyword","upgradePlan.featuresModal.magnetWalmart","upgradePlan.featuresModal.followUpUses","upgradePlan.featuresModal.keywordTrackerUses"]},betterPlan:Ge.diamond}},Qy={cerebro:{AMAZON:{anyRestriction:{anyPlanGroup:{modal:{titleKey:"upgradePlan.AMAZON_features.cerebro.title",subtitleKey:"upgradePlan.subtitles.modalCommon",acceptButton:"upgradePlan.AMAZON_features.upgradeButton",declineButton:"upgradePlan.AMAZON_features.declineButton",featuresOrder:["upgradePlan.featuresModal.singleProductSearch2Uses","upgradePlan.featuresModal.multiProductSearch","upgradePlan.featuresModal.multiplePagesResults","upgradePlan.featuresModal.filterResults","upgradePlan.featuresModal.getCompetitors","upgradePlan.featuresModal.history","upgradePlan.featuresModal.export"]},page:{titleKey:"upgradePlan.AMAZON_tools.cerebro.titleNew",subtitleKey:"upgradePlan.subtitles.pageCommon",acceptButton:"upgradePlan.upgradeButton",declineButton:"upgradePlan.AMAZON_tools.declineButton",featuresOrder:["upgradePlan.featuresPage.cerebroForAmazonUses","upgradePlan.featuresPage.magnetForAmazonUses","upgradePlan.featuresPage.xrayForAmazonUses","upgradePlan.featuresPage.keywordTrackerForAmazonUses"]},betterPlan:Ge.platinum}},seeMonthlySalesColumn:Zr,brandAnalytics:En,[lo]:En,[Ba]:En},WALMART:{anyRestriction:{anyPlanGroup:{modal:{titleKey:"upgradePlan.WALMART_features.cerebro.title",subtitleKey:"upgradePlan.subtitles.modalCommon",acceptButton:"upgradePlan.upgradeButton",declineButton:"upgradePlan.WALMART_features.declineButton",featuresOrder:["upgradePlan.featuresModal.singleProductSearchUses","upgradePlan.featuresModal.multiProductSearch","upgradePlan.featuresModal.multiplePagesResults","upgradePlan.featuresModal.filterResults","upgradePlan.featuresModal.getCompetitors","upgradePlan.featuresModal.history","upgradePlan.featuresModal.export"]},page:{titleKey:"upgradePlan.WALMART_tools.cerebro.titleNew",subtitleKey:"upgradePlan.subtitles.pageCommon",acceptButton:"upgradePlan.upgradeButton",declineButton:"upgradePlan.WALMART_tools.declineButton",featuresOrder:["upgradePlan.featuresPage.cerebroForWalmartUses","upgradePlan.featuresPage.magnetForWalmartUses","upgradePlan.featuresPage.xrayForWalmartUses","upgradePlan.featuresPage.profitsForWalmartUses"]},betterPlan:Ge.diamond}},seeMonthlySalesColumn:Zr}},magnet:{AMAZON:{anyRestriction:{anyPlanGroup:{modal:{titleKey:"upgradePlan.AMAZON_features.magnet.title",subtitleKey:"upgradePlan.subtitles.modalCommon",acceptButton:"upgradePlan.AMAZON_features.upgradeButton",declineButton:"upgradePlan.AMAZON_features.declineButton",featuresOrder:["upgradePlan.featuresModal.singleProductSearch2Uses","upgradePlan.featuresModal.multiProductSearch","upgradePlan.featuresModal.multiplePagesResults","upgradePlan.featuresModal.filterResults","upgradePlan.featuresModal.export","upgradePlan.featuresModal.history"]},page:{titleKey:"upgradePlan.AMAZON_tools.magnet.titleNew",subtitleKey:"upgradePlan.subtitles.pageCommon",acceptButton:"upgradePlan.upgradeButton",declineButton:"upgradePlan.AMAZON_tools.declineButton",featuresOrder:["upgradePlan.featuresPage.magnetForAmazonUses","upgradePlan.featuresPage.cerebroForAmazonUses","upgradePlan.featuresPage.xrayForAmazonUses","upgradePlan.featuresPage.keywordTrackerForAmazonUses"]},betterPlan:Ge.platinum},starter:{modal:{titleKey:"upgradePlan.AMAZON_features.magnet.title",subtitleKey:"upgradePlan.subtitles.modalCommon",acceptButton:"upgradePlan.AMAZON_features.upgradeButton",declineButton:"upgradePlan.AMAZON_features.declineButton",featuresOrder:["upgradePlan.featuresModal.singleProductSearch2Uses","upgradePlan.featuresModal.multiProductSearch","upgradePlan.featuresModal.multiplePagesResults","upgradePlan.featuresModal.filterResults","upgradePlan.featuresModal.export","upgradePlan.featuresModal.history"]},page:{titleKey:"upgradePlan.AMAZON_tools.magnet.titleNew",subtitleKey:"upgradePlan.subtitles.pageCommon",acceptButton:"upgradePlan.upgradeButton",declineButton:"upgradePlan.AMAZON_tools.declineButton",featuresOrder:["upgradePlan.featuresPage.magnetForAmazonUses","upgradePlan.featuresPage.cerebroForAmazonUses","upgradePlan.featuresPage.keywordTrackerForAmazonUses"]},betterPlan:Ge.platinum}},uses:{anyPlanGroup:{modal:{titleKey:"upgradePlan.AMAZON_features.magnet.titleHistory",subtitleKey:"upgradePlan.subtitles.modalUnlimitedCommon",acceptButton:"upgradePlan.AMAZON_features.upgradeButton",declineButton:"upgradePlan.AMAZON_features.declineButton",featuresOrder:["upgradePlan.featuresModal.singleProductSearch2Uses","upgradePlan.featuresModal.multiProductSearch","upgradePlan.featuresModal.multiplePagesResults","upgradePlan.featuresModal.filterResults","upgradePlan.featuresModal.export","upgradePlan.featuresModal.history"]},page:{titleKey:"upgradePlan.AMAZON_tools.magnet.title",subtitleKey:"upgradePlan.subtitles.pageCommon",acceptButton:"upgradePlan.upgradeButton",declineButton:"upgradePlan.AMAZON_tools.declineButton",featuresOrder:["upgradePlan.featuresPage.magnetForAmazonUses","upgradePlan.featuresPage.cerebroForAmazonUses","upgradePlan.featuresPage.xrayForAmazonUses","upgradePlan.featuresPage.keywordTrackerForAmazonUses"]},betterPlan:Ge.platinum},starter:{modal:{titleKey:"upgradePlan.AMAZON_features.magnet.titleHistory",subtitleKey:"upgradePlan.subtitles.modalUnlimitedCommon",acceptButton:"upgradePlan.AMAZON_features.upgradeButton",declineButton:"upgradePlan.AMAZON_features.declineButton",featuresOrder:["upgradePlan.featuresModal.singleProductSearch2Uses","upgradePlan.featuresModal.multiProductSearch","upgradePlan.featuresModal.multiplePagesResults","upgradePlan.featuresModal.filterResults","upgradePlan.featuresModal.export","upgradePlan.featuresModal.history"]},page:{titleKey:"upgradePlan.AMAZON_tools.magnet.title",subtitleKey:"upgradePlan.subtitles.pageCommon",acceptButton:"upgradePlan.upgradeButton",declineButton:"upgradePlan.AMAZON_tools.declineButton",featuresOrder:["upgradePlan.featuresPage.magnetForAmazonUses","upgradePlan.featuresPage.cerebroForAmazonUses","upgradePlan.featuresPage.keywordTrackerForAmazonUses"]},betterPlan:Ge.platinum}},seeMonthlySalesColumn:Zr,brandAnalytics:En,[lo]:En,[Ba]:En},WALMART:{anyRestriction:{anyPlanGroup:{modal:{titleKey:"upgradePlan.WALMART_features.magnet.title",subtitleKey:"upgradePlan.subtitles.modalCommon",acceptButton:"upgradePlan.upgradeButton",declineButton:"upgradePlan.WALMART_features.declineButton",featuresOrder:["upgradePlan.featuresModal.singleProductSearchUses","upgradePlan.featuresModal.multiProductSearch","upgradePlan.featuresModal.multiplePagesResults","upgradePlan.featuresModal.filterResults","upgradePlan.featuresModal.export","upgradePlan.featuresModal.history"]},page:{titleKey:"upgradePlan.WALMART_tools.magnet.titleNew",subtitleKey:"upgradePlan.subtitles.pageCommon",acceptButton:"upgradePlan.upgradeButton",declineButton:"upgradePlan.WALMART_tools.declineButton",featuresOrder:["upgradePlan.featuresPage.magnetForWalmartUses","upgradePlan.featuresPage.cerebroForWalmartUses","upgradePlan.featuresPage.xrayForWalmartUses","upgradePlan.featuresPage.profitsForWalmartUses"]},betterPlan:Ge.diamond}},uses:{anyPlanGroup:{modal:{titleKey:"upgradePlan.WALMART_features.magnet.titleHistory",subtitleKey:"upgradePlan.subtitles.modalUnlimitedCommon",acceptButton:"upgradePlan.upgradeButton",declineButton:"upgradePlan.WALMART_features.declineButton",featuresOrder:["upgradePlan.featuresModal.singleProductSearchUses","upgradePlan.featuresModal.multiProductSearch","upgradePlan.featuresModal.multiplePagesResults","upgradePlan.featuresModal.filterResults","upgradePlan.featuresModal.export","upgradePlan.featuresModal.history"]},page:{titleKey:"upgradePlan.WALMART_tools.magnet.titleNew",subtitleKey:"upgradePlan.subtitles.pageCommon",acceptButton:"upgradePlan.upgradeButton",declineButton:"upgradePlan.WALMART_tools.declineButton",featuresOrder:["upgradePlan.featuresPage.magnetForWalmartUses","upgradePlan.featuresPage.cerebroForWalmartUses","upgradePlan.featuresPage.xrayForWalmartUses","upgradePlan.featuresPage.profitsForWalmartUses"]},betterPlan:Ge.diamond}},seeMonthlySalesColumn:Zr}},eliteAnalytics:{AMAZON:{anyRestriction:{anyPlanGroup:{modal:{titleKey:"upgradePlan.AMAZON_features.opportunity.title",subtitleKey:"upgradePlan.subtitles.modalCommon",acceptButton:"upgradePlan.AMAZON_features.upgradeButton",declineButton:"upgradePlan.AMAZON_features.declineButton",featuresOrder:["upgradePlan.featuresModal.singleProductSearch2Uses","upgradePlan.featuresModal.multiProductSearch","upgradePlan.featuresModal.multiplePagesResults","upgradePlan.featuresModal.filterResults","upgradePlan.featuresModal.getCompetitors","upgradePlan.featuresModal.history"]},page:{titleKey:"upgradePlan.AMAZON_tools.opportunity.title",subtitleKey:"upgradePlan.subtitles.pageCommon",acceptButton:"upgradePlan.upgradeButton",declineButton:"upgradePlan.AMAZON_tools.declineButton",featuresOrder:["upgradePlan.featuresPage.cerebroForAmazonUses","upgradePlan.featuresPage.magnetForAmazonUses","upgradePlan.featuresPage.xrayForAmazonUses","upgradePlan.featuresPage.keywordTrackerForAmazonUses"]},betterPlan:Ge.diamond}}},WALMART:{anyRestriction:{anyPlanGroup:{modal:{titleKey:"upgradePlan.WALMART_tools.opportunity.title",subtitleKey:"upgradePlan.subtitles.modalCommon",acceptButton:"upgradePlan.upgradeButton",declineButton:"upgradePlan.WALMART_tools.declineButton",featuresOrder:["upgradePlan.featuresModal.singleProductSearchUses","upgradePlan.featuresModal.multiProductSearch","upgradePlan.featuresModal.multiplePagesResults","upgradePlan.featuresModal.filterResults","upgradePlan.featuresModal.getCompetitors","upgradePlan.featuresModal.history"]},page:{titleKey:"upgradePlan.WALMART_features.opportunity.title",subtitleKey:"upgradePlan.subtitles.pageCommon",acceptButton:"upgradePlan.upgradeButton",declineButton:"upgradePlan.WALMART_features.declineButton",featuresOrder:["upgradePlan.featuresPage.cerebroForWalmartUses","upgradePlan.featuresPage.magnetForWalmartUses","upgradePlan.featuresPage.xrayForWalmartUses","upgradePlan.featuresPage.profitsForWalmartUses"]},betterPlan:Ge.diamond}}}},blackBoxProducts:{AMAZON:{anyRestriction:{anyPlanGroup:{modal:{titleKey:"upgradePlan.titlesModal.blackBoxProductsLimit.title",subtitleKey:"upgradePlan.titlesModal.blackBoxProductsLimit.subtitleCommon",acceptButton:"upgradePlan.titlesModal.blackBoxProductsLimit.upgradeButton",declineButton:"upgradePlan.AMAZON_features.declineButton",featuresOrder:["upgradePlan.featuresModal.blackBoxProductsUses","upgradePlan.featuresModal.blackBoxProductsCerebro","upgradePlan.featuresModal.blackBoxProductsMagnet"]},page:{},betterPlan:Ge.platinum}},salesChart:{anyPlanGroup:{modal:{titleKey:"upgradePlan.titlesModal.blackBoxSalesChartAmazon.title",subtitleKey:"upgradePlan.titlesModal.blackBoxSalesChartAmazon.subtitle",acceptButton:"upgradePlan.titlesModal.blackBoxProductsLimit.upgradeButton",declineButton:"upgradePlan.AMAZON_features.declineButton",featuresOrder:["upgradePlan.featuresModal.salesHistoricalChart","upgradePlan.featuresModal.blackBoxProductsCerebro","upgradePlan.featuresModal.blackBoxProductsMagnet"]},page:{},betterPlan:Ge.platinum}}},WALMART:{}},blackboxAba:{AMAZON:{anyRestriction:{anyPlanGroup:{modal:{featuresOrder:[]}}}},WALMART:{}}},Jy={free:0,starter:39,platinum:99,diamond:249},Xy={free:0,starter:39,platinum:69,diamond:149},e0=(e,t)=>t?Xy[e]:Jy[e],Vm=({plan:e,localizationKey:t,isChinese:n,isPage:s})=>{var i,l,u,d;const r=t.split("."),a=r[r.length-1].replace("Uses","");return n?s?(d=s0[a])==null?void 0:d[e]:(u=n0[a])==null?void 0:u[e]:s?(l=o0[a])==null?void 0:l[e]:(i=t0[a])==null?void 0:i[e]},t0={singleProductSearch:{Helium10_Starter:2,Helium10_Start_Your_Business:2},singleProductSearch2:{Helium10_Starter:2},followUp:{Helium10_Free:2e3,Helium10_Scale_Your_Business:1e4},keywordTracker:{Helium10_Free:20,Helium10_Start_Your_Business:500,Helium10_Scale_Your_Business:5e3},blackBox:{Helium10_Starter:20,Helium10_Start_Your_Business:20},cerebro:{Helium10_Start_Your_Business:2,Helium10_Starter:2},magnet:{Helium10_Start_Your_Business:2,Helium10_Starter:2},keywordTracker2:{Helium10_Starter:20,Helium10_Start_Your_Business:500,Helium10_Scale_Your_Business:5e3},xray:{Helium10_Free:50},blackBoxProducts:{Helium10_Free:5,Helium10_Starter:20},listingAnalyzer:{Helium10_Free:2,Helium10_Starter:2,Helium10_Start_Your_Business:2,Helium10_Scale_Your_Business:50}},o0={cerebroForWalmart:{Helium10_Start_Your_Business:2,Helium10_Starter:2},magnetForWalmart:{Helium10_Start_Your_Business:2,Helium10_Starter:2},xrayForWalmart:{Helium10_Start_Your_Business:50,Helium10_Starter:50,Helium10_Free:50},profitsForWalmart:{Helium10_Start_Your_Business:90,Helium10_Starter:90,Helium10_Free:90},cerebroForAmazon:{Helium10_Starter:2},magnetForAmazon:{Helium10_Starter:2},xrayForAmazon:{Helium10_Free:50,Helium10_Starter:50},keywordTrackerForAmazon:{Helium10_Free:20,Helium10_Starter:20,Helium10_Start_Your_Business:500}},n0={singleProductSearch:{Helium10_Starter:2,Helium10_Start_Your_Business:5},singleProductSearch2:{Helium10_Starter:2},followUp:{Helium10_Free:-1,Helium10_Scale_Your_Business:2e3},keywordTracker:{Helium10_Free:20,Helium10_Start_Your_Business:500,Helium10_Scale_Your_Business:5e3},blackBox:{Helium10_Starter:20,Helium10_Start_Your_Business:200},cerebro:{Helium10_Start_Your_Business:5,Helium10_Starter:2},magnet:{Helium10_Start_Your_Business:2,Helium10_Starter:2},keywordTracker2:{Helium10_Starter:20,Helium10_Start_Your_Business:500,Helium10_Scale_Your_Business:5e3},xray:{Helium10_Free:50},blackBoxProducts:{Helium10_Free:5,Helium10_Starter:20},listingAnalyzer:{Helium10_Free:2,Helium10_Starter:2,Helium10_Start_Your_Business:10,Helium10_Scale_Your_Business:20}},s0={cerebroForWalmart:{Helium10_Start_Your_Business:5,Helium10_Starter:2},magnetForWalmart:{Helium10_Start_Your_Business:5,Helium10_Starter:2},xrayForWalmart:{Helium10_Start_Your_Business:50,Helium10_Starter:50,Helium10_Free:50},profitsForWalmart:{Helium10_Start_Your_Business:90,Helium10_Starter:90,Helium10_Free:90},cerebroForAmazon:{Helium10_Starter:2},magnetForAmazon:{Helium10_Starter:2},xrayForAmazon:{Helium10_Free:50,Helium10_Starter:-1},keywordTrackerForAmazon:{Helium10_Free:20,Helium10_Starter:20,Helium10_Start_Your_Business:500}},_m=({t:e,platform:t,restriction:n,planGroup:s,isPage:r,project:a,isChinese:i=!1})=>{if(!t||!n||!s)return null;const l=Em({planGroup:s,project:a,platform:t,restriction:n}),{titleKey:u,subtitleKey:d,acceptButton:p,declineButton:m,featuresOrder:g}=r?l.page:l.modal,x=g.map(y=>({localizationKey:y,localizedValue:e(y)})),S=s==="alacarte"?"free":s,j=Bl[l.betterPlan]||"free",f=i?"Chinese":"",v=e(`upgradePlan.plans.${j}${f}`),k=Vm({localizationKey:a==="cerebro"?"cerebroForWalmart":"magnetForWalmart",plan:Ge[S]||"free",isChinese:i,isPage:r});return{title:e(u,{plan:v,uses:k||2}),subtitle:e(d,{plan:v}),features:x.map(({localizationKey:y,localizedValue:w})=>({title:w.title,subtitle:w.subtitle,values:Object.entries(w.values||{}).reduce((P,[A,W])=>({...P,[A]:r0({value:W,localizationKey:y,plan:A,isPage:r,isChinese:i})}),{})})),plans:x.length>0?[{id:Ge[S]||"free",label:e(`upgradePlan.plans.${S}${f}`)},{id:l.betterPlan,label:v,price:e("upgradePlan.prices.commonMonth",{price:e0(j,i)}),isBest:!0}]:[],footer:{label:null,labelWithCoupon:null,acceptButton:e(p,{plan:v}),declineButton:e(m)},betterPlanGroup:Bl[l.betterPlan],currentPlanGroup:S}},Em=({project:e,platform:t,restriction:n,planGroup:s})=>{const r=Qy[e],a=t?r[t]:r.AMAZON,i=n&&a[n]&&a[n]||a.anyRestriction;return s&&i[s]&&i[s]||i.anyPlanGroup},r0=({value:e,localizationKey:t,plan:n,isChinese:s,isPage:r})=>{const a=Vm({localizationKey:t,plan:n,isChinese:s,isPage:r});return a!==-1?e.replace("{uses}",N({value:a})):""},we=Ct("upgradePlan",null,{reaction:e=>{var t,n,s,r,a;if(e.type==="OPEN"){const i=(t=e.payload)==null?void 0:t.restriction,l=(n=e.payload)==null?void 0:n.trigger,u=(s=e.payload)==null?void 0:s.project,d=vo(Me.getState());if(!u||!d)return null;const p=Em({planGroup:d,project:u,restriction:i,platform:(r=e.payload)==null?void 0:r.platform}),m=Et(Bl[p.betterPlan]),g=Et(d),x=Et(u);if((a=e==null?void 0:e.payload)!=null&&a.skipSegmentEvent)return;i==="uses"&&l==="banner"?H({eventName:"Upgrade Modal Fired",eventProperties:{userCurrentPlan:g,upsellPlan:m,tool:x,trigger:'User click the "Upgrade for Unlimited"'}}):i==="history"?H({eventName:"Upgrade Modal Fired",eventProperties:{userCurrentPlan:g,upsellPlan:m,tool:x,trigger:'User click "History"'}}):i==="commonWords"?H({eventName:"Upgrade Modal Fired",eventProperties:{userCurrentPlan:g,upsellPlan:m,tool:x,trigger:'User click "Common Words"'}}):i==="competitors"?H({eventName:"Upgrade Modal Fired",eventProperties:{userCurrentPlan:g,upsellPlan:m,tool:x,trigger:'User click "Get Competitors"'}}):i==="pagination"?H({eventName:"Upgrade Modal Fired",eventProperties:{userCurrentPlan:g,upsellPlan:m,tool:x,trigger:l}}):i==="sorting"?H({eventName:"Upgrade Modal Fired",eventProperties:{userCurrentPlan:g,upsellPlan:m,tool:x,trigger:"User click sort table column"}}):i==="filtering"?H({eventName:"Upgrade Modal Fired",eventProperties:{userCurrentPlan:g,upsellPlan:m,tool:x,trigger:"User click filter"}}):i==="deletedWords"?H({eventName:"Upgrade Modal Fired",eventProperties:{userCurrentPlan:g,upsellPlan:m,tool:x,trigger:'User click "Deleted Words"'}}):i==="seeMonthlySalesColumn"?H({eventName:"Upgrade Modal Fired",eventProperties:{userCurrentPlan:g,upsellPlan:m,tool:x,trigger:l}}):i==="brandAnalytics"?H({eventName:"Upgrade Modal Fired",eventProperties:{userCurrentPlan:g,upsellPlan:m,tool:x,trigger:l}}):i===lo&&H({eventName:"Upgrade Modal Fired",eventProperties:{userCurrentPlan:g,upsellPlan:m,tool:x,trigger:l}})}}}),Lm=({project:e,userCurrentPlan:t,upsellPlan:n},s)=>{H({eventName:"Upgrade Modal Fired",eventProperties:{userCurrentPlan:Et(t||""),upsellPlan:Et(n||""),tool:qm[e],trigger:s?"After reaching 2 times limited, user clicks to upgrade to platinum":'User click "Learn About Plan"'}})},di=({project:e,userCurrentPlan:t,upsellPlan:n,trigger:s='User click "Learn About Plan"'})=>{H({eventName:"Upgrade Modal Fired",eventProperties:{userCurrentPlan:Et(t||""),upsellPlan:Et(n||""),tool:qm[e],trigger:s}})},qm={cerebro:"Cerebro",magnet:"Magnet",blackBoxProducts:"Black Box",eliteAnalytics:"Black Box",listingAnalyzer:"Listing Analyzer",blackboxAba:"Black Box"},Nt=L("open/TAHD/upgradeModal",({tool:e,trigger:t},{dispatch:n})=>{n(we.open({project:e==="Cerebro"?"cerebro":"magnet",platform:"AMAZON",restriction:"uses",isHistorical:!0,skipSegmentEvent:!0,trigger:t}));const s=vo(Me.getState());s&&ci({eventName:"Upsell Modal Fired",eventProperties:{CurrentPlan:Et(s),Location:e,Place:"Main",Trigger:t,UpsellPlan:"Diamond"}})}),a0=L("open/TAHD/upgradeModal",(e,{dispatch:t})=>{t(we.open({project:"blackboxAba",platform:"AMAZON",restriction:"uses",skipSegmentEvent:!0}));const n=vo(Me.getState());n&&ci({eventName:"Upsell Modal Fired",eventProperties:{CurrentPlan:Et(n),Location:"BB_ABA_Banner_Upgrade",Place:"Banner",Trigger:"Upgrade to Diamond",UpsellPlan:"Diamond"}})}),i0=L("open/TAHD/upgradeModal",(e,{dispatch:t})=>{t(we.open({project:"blackboxAba",platform:"AMAZON",restriction:"uses",skipSegmentEvent:!0}));const n=vo(Me.getState());n&&ci({eventName:"Upsell Modal Fired",eventProperties:{CurrentPlan:Et(n),Location:"BB_ABA_Progress_Bar",Place:"ProgressBar",Trigger:"Upgrade to Diamond",UpsellPlan:"Diamond"}})}),l0=L("open/TAHD/upgradeModal",(e,{dispatch:t})=>{t(we.open({project:"blackboxAba",platform:"AMAZON",restriction:"uses",skipSegmentEvent:!0}));const n=vo(Me.getState());n&&ci({eventName:"Upsell Modal Fired",eventProperties:{CurrentPlan:Et(n),Location:"BB_ABA_Platinum_Limit_Banner",Place:"PlatinumLimitBanner",Trigger:"Upgrade to Diamond",UpsellPlan:"Diamond"}})}),Bn=(e,t,n)=>!!(e!=null&&e[t==="WALMART"?"walmart":"amazon"].includes(n)),it=({name:e,getPlatform:t,restriction:n,actionAfterCheck:s,getPlatformFromStore:r,getExtraUpgradeProps:a})=>L(e,(i,{getState:l,dispatch:u})=>{const{restrictions:d}=Uo(l);if(d){const p=(t==null?void 0:t(i))||(r==null?void 0:r(l))||"AMAZON";if(Bn(d,p,n)){const g=a==null?void 0:a(i);u(n!=="seeMonthlySalesColumn"?we.open({platform:p,restriction:n,...g}):Nt({trigger:'User click "Keyword Sales"',tool:(g==null?void 0:g.project)==="magnet"?"Magnet":"Cerebro",isABA:!0}));return}}else return;s?u(s(i)):i.afterCheckSuccess&&i.afterCheckSuccess(i)}),Hm=it({name:"openSearchVolumeChart",restriction:"searchVolumeChart",getPlatform:({isWalmart:e})=>e?"WALMART":"AMAZON"}),Bc=it({name:"seeMonthlySalesColumn",restriction:"seeMonthlySalesColumn",getPlatform:()=>"AMAZON",getExtraUpgradeProps:({project:e})=>({project:e,trigger:'User click "Keyword Sales"'})}),sn=it({name:"useFilterLibrary",restriction:"filterLibrary",getPlatform:({isWalmart:e})=>e?"WALMART":"AMAZON",getExtraUpgradeProps:({project:e})=>({project:e,trigger:"Filter library"})}),je=e=>{var t;if((e==null?void 0:e.responseStatus)!==401){const n=Xe.getState().translation;if(n){const{t:s}=n,r=s(`errorCodes.${(t=e==null?void 0:e.result)==null?void 0:t.errorCode}`)||s(`errors.common.${e==null?void 0:e.responseStatus}`)||s("errorCodes.unknown");Be.error(r)}}},Mc=({getDataRequest:e,addItemRequest:t,deleteItemRequest:n})=>{const s=L("deleteAllTemporarilyRemovedPhrases",({searchId:u,onSuccess:d,deletedIds:p},{getState:m,dispatch:g})=>{var S;const x=(((S=m(l.atom).content)==null?void 0:S.data)||[]).filter(j=>p.includes(j.id)).map(j=>j.phrase);g(r.actions.pending({searchId:u,phrases:x,onSuccess:d}))}),r=he("deleteTemporarilyRemovedPhrases",async u=>n(u),{initialStatus:"init",fulfilledReaction:({params:{onSuccess:u}})=>{u==null||u()},rejectedReaction:({fetchError:u})=>je(u)}),a=he("addTemporarilyRemovedPhrases",async u=>t({...u,phrases:u.phrases.map(d=>({id:d.id,phrase:d.phrase}))}),{initialStatus:"init",fulfilledReaction:({params:{searchId:u,phrases:d,onSuccess:p}},{dispatch:m})=>{m(l.actions.pending({searchId:u})),p==null||p(d.length)},rejectedReaction:({fetchError:u})=>je(u)}),i=it({name:"addWithRestrictionCheck",restriction:"deletedWords",getPlatform:({platform:u})=>u,actionAfterCheck:u=>a.actions.pending(u)}),l=he("getDeletedWords",async u=>e(u),{reducers:u=>{u(r.actions.fulfilled,(d,{params:{phrases:p}})=>({...d,content:d.content?{...d.content,data:d.content.data.filter(m=>p.indexOf(m.phrase)===-1)}:null}))},rejectedReaction:({fetchError:u})=>je(u)});return{getRequest:l,addRequest:a,addWithRestrictionCheck:i,deleteRequest:r,deleteAllAction:s}},ot=Mc({addItemRequest:Gy,deleteItemRequest:Zy,getDataRequest:Yy}),Um=ie("cerebro/rootStore",{searchProgress:wt.atom,getTemporarilyRemovedPhrasesCerebro:ot.getRequest.atom}),c0=async({searchId:e,phrases:t})=>D({url:$(`${I}/api/magnet/v1/search/${e}/phrases/temporarily-removed/bulk-update`,{}),method:"PATCH",params:{temporarilyRemoved:t},useSessionAccountId:!0}),d0=async({searchId:e,...t})=>D({url:$(`${I}/api/magnet/v1/search/${e}/phrases/temporarily-removed/bulk-delete`,{}),method:"DELETE",params:t,useSessionAccountId:!0}),u0=async({searchId:e})=>D({url:$(`${I}/api/magnet/v1/search/${e}/phrases/temporarily-removed`,{}),method:"GET",useSessionAccountId:!0}),Tt=Mc({addItemRequest:c0,deleteItemRequest:d0,getDataRequest:u0}),p0=ie("magnet/rootStore",{searchProgress:wt.atom,getTemporarilyRemovedPhrasesMagnet:Tt.getRequest.atom}),ui=e=>D({method:"GET",url:$(`${kt}/api/v1/customers/uses/get-uses-remaining`,e),withCredentials:0}),Km=lc("getUsesRequest",async e=>ui({moduleId:e})),m0={AMAZON:null,WALMART:null},Sr=Se("usesAtom",m0,e=>{e(Km.fulfilled,(t,{result:n,params:s})=>{const r=n.results.balance??null,a=s.includes("walmart")?"WALMART":"AMAZON";return{...t,[a]:r}})}),Rc=L("getUses",({project:e,isWalmart:t},{dispatch:n})=>{const s=vo(Me.getState());if(s){const r=h0[e][t?"walmart":"amazon"][s];r&&n(Km.pending(r))}}),h0={cerebro:{amazon:{alacarte:null,enterprise:null,elite:null,diamond:null,platinum:null,gold:null,starter:"cerebro",free:"cerebro"},walmart:{alacarte:null,enterprise:null,elite:null,diamond:null,platinum:"cerebro-walmart",gold:"cerebro-walmart",starter:"cerebro-walmart",free:"cerebro-walmart"}},magnet:{amazon:{alacarte:null,enterprise:null,elite:null,diamond:null,platinum:null,gold:"keywordresearch",starter:"keywordresearch",free:"keywordresearch"},walmart:{alacarte:null,enterprise:null,elite:null,diamond:null,platinum:"keywordresearch-walmart",gold:"keywordresearch-walmart",starter:"keywordresearch-walmart",free:"keywordresearch-walmart"}},eliteAnalytics:{amazon:{alacarte:null,enterprise:null,elite:null,diamond:null,platinum:null,gold:null,starter:"cerebro",free:"cerebro"},walmart:{alacarte:null,enterprise:null,elite:null,diamond:null,platinum:"cerebro-walmart",gold:"cerebro-walmart",starter:"cerebro-walmart",free:"cerebro-walmart"}},blackBoxProducts:{amazon:{alacarte:null,enterprise:null,elite:null,diamond:null,platinum:null,gold:null,starter:"blackbox",free:"blackbox"},walmart:{alacarte:null,enterprise:null,elite:null,diamond:null,platinum:null,gold:null,starter:null,free:null}},blackboxAba:{amazon:{alacarte:null,enterprise:null,elite:null,diamond:null,platinum:null,gold:null,starter:null,free:null},walmart:{alacarte:null,enterprise:null,elite:null,diamond:null,platinum:null,gold:null,starter:null,free:null}}},Fc="cerebroMagnetMarketplace";let ba=localStorage.getItem(Fc);ba||(ba="amazon.com",localStorage.setItem(Fc,ba));const Mn=L("setMarketplaceSelect",e=>{e&&localStorage.setItem(Fc,e)}),Ue=Se("marketplaceSelect",ba,e=>{e(Mn,(t,n)=>n)}),st=R("marketplaceDataSelector",Ue,e=>e&&ce("domain",e)||null),g0=async()=>D({url:$(`${kt}/api/v1/customers/connections/list`,{}),method:"GET",withCredentials:0}),Dc=he("connectionsList",async e=>await g0());R("userHasTokenSelector",Dc.atom,e=>e.content?e.content.results.amazon.mws.length>0:!1);const Gm=L("setAddKeywordsToMyList"),Cs=Se("addKeywordsToMyList",[],e=>{e(Gm,(t,n)=>n)}),x0=it({name:"addToMyList",restriction:"myList",getPlatform:({platform:e})=>e}),Zm=({name:e,initValue:t,action:n,actions:s,reducers:r,isWalmart:a=!1,disableReactionsSelector:i})=>{const l=L(`filter/set/${e}`,(S,{dispatch:j,getState:f})=>{i&&f(i)||(n&&(j(n()),s&&s.forEach(k=>{j(k())})),ee.getState().setStatus("filter"))}),u=L(`filter/setSilent/${e}`),d=L(`filter/clear/${e}`),p=L(`filter/reset/${e}`,({disableReaction:S},{dispatch:j,getState:f})=>{i&&f(i)||S||(n&&j(n()),s&&s.forEach(k=>{j(k())}),ee.getState().setStatus("filter"))}),m=Se(`filter/${e}Atom`,t,S=>{S(l,(j,f)=>f),S(u,(j,f)=>f),S(p,()=>t),S(d,()=>t),r==null||r(S)}),g=it({name:"setFilterWithCheck",restriction:"filtering",actionAfterCheck:l,getPlatform:()=>a?"WALMART":"AMAZON"}),x=it({name:"setFilterWithCheckSilent",restriction:"filtering",actionAfterCheck:u,getPlatform:()=>a?"WALMART":"AMAZON"});return{atom:m,actions:{set:g,reset:p,clear:d,setWithoutCheck:l,setSilent:x,setSilentWithoutCheck:u}}},Ym=L("setUrlFilter"),Qm=L("clearUrlFilter"),Jm=Se("urlFilterAtom",null,e=>{e(Ym,(t,n)=>n),e(Qm,()=>null)}),Xm=(e,t)=>{const n=dr({arrayFormat:"index"}),s=C(Ym);h.useEffect(()=>{const r=e.reduce((l,u)=>{if(n[u]){const d=t.indexOf(u)!==-1;l[u]=d?n[u]==="1":n[u]}return l},{}),{includeAny:a,...i}=r||{};s({...i,...a!=null?{"include-all":a?"0":"1","include-any":a?"1":"0",include:a?"any":"all"}:{}})},[n,s])},b0=ie("rootStore",{addKeywordsToMyList:Cs,upgradeModal:we.atom,searchGraph:jS.atom,uses:Sr,marketplaceSelect:Ue,restrictedActions:rs.atom,urlFilter:Jm,listingAnalyzerLimitUpsellModal:TS.atom,getUpsellInfo:Ma.atom,connectionsListRequest:Dc.atom}),eh=()=>b(Ue,e=>bt(e!=null&&e.startsWith("amazon")?"AM":"WM","domain",e||"amazon.com"),[]),f0=e=>{const t=e.replace(/([A-Z])/g," $1");return t.charAt(0).toUpperCase()+t.slice(1)},S0={landing:"/",amazonFromExtension:"index-extension",walmartFromExtension:"index-walmart-extension",amazonSingleResult:"amazon/view/:id",amazonMultiResult:"amazon/view-multi-search/:id",walmartSingleResult:"walmart/view/:id",walmartMultiResult:"walmart/view-multi-search/:id"},th=()=>{const e=me();return Object.entries(S0).reduce((t,[n,s])=>jn(`${e}/${s}`,window.location.pathname)||!1?f0(n):t,null)||"N/A"},yr="seasonalSearchVolume",y0="q4MetricsDisabled",As=2022,pi=["octoberSeasonalSearchVolume","novemberSeasonalSearchVolume","decemberSeasonalSearchVolume"],nu={octoberSeasonalSearchVolume:"Oct",novemberSeasonalSearchVolume:"Nov",decemberSeasonalSearchVolume:"Dec"},j0="https://re-cdn.helium10.com/container/static/cerebro-watch-video-vC84OMOz.png",k0="https://re-cdn.helium10.com/container/static/magnet-watch-video-Tv3Izj1S.jpg",oh=h.memo(({project:e,learnProject:t})=>{const{t:n}=T();return o.jsxs(C0,{children:[o.jsx(A0,{src:k0}),o.jsxs(w0,{children:[o.jsx($0,{children:n(`landing.notSure.${e}`)}),o.jsx(mi,{snowIcon:!0,learnProject:t})]})]})}),T0=h.memo(({project:e,learnProject:t})=>{const{t:n}=T();return o.jsxs(P0,{children:[o.jsx(B0,{children:o.jsx(M0,{children:n(`landing.notSure.${e}`)})}),o.jsx(v0,{learnProject:t})]})}),mi=({videoHash:e,snowIcon:t,learnProject:n,children:s,buttonType:r,...a})=>{const{t:i}=T(),l=C(()=>e!=null?cc(e):void 0),u=C(d=>{var p;return(p=a.onClick)==null||p.call(a,d),im({name:"Learn Button Clicked",properties:{resourceType:"learnDrawer",source:n==="Cerebro"?"cerebro":"magnet"}}),l(),dc(!0)},[]);return o.jsx(I0,{isText:r==null||r==="text",buttonType:r??"text",size:"100",icon:t?o.jsx(E,{icon:zp}):void 0,...a,onClick:u,children:s||i("magnet.landingWatchVideo")})},v0=({videoHash:e,learnProject:t,...n})=>{const s=C(()=>e!=null?cc(e):void 0),r=C(a=>{var i;return(i=n.onClick)==null||i.call(n,a),im({name:"Learn Button Clicked",properties:{resourceType:"learnDrawer",source:t==="Cerebro"?"cerebro":"magnet"}}),s(),dc(!0)},[]);return o.jsxs(R0,{children:[o.jsx(F0,{src:j0}),o.jsx(D0,{onClick:r})]})},C0=c.div`
  display: flex;
  border-radius: 6px;
  background-color: ${({theme:e})=>e.systemColors.grey100};
  width: 100%;
  overflow: hidden;
`,A0=c.img`
  width: 128px;
  min-height: 100%;
  object-fit: cover;
  border-radius: 6px;
  overflow: hidden;
  flex: 0 0 auto;
`,w0=c.div`
  padding: ${({theme:{spacing:{sp16:e,sp24:t}}})=>`${e} ${t}`};
  flex: 1;
`,$0=c.div`
  ${fe};
  white-space: nowrap;
`,P0=c.div`
  max-width: 400px;
`,B0=c($n)`
  background-color: ${e=>e.theme.systemColors.grey100};
  border-radius: 6px 6px 0 0;
`,M0=c.h5`
  ${Le};
  color: ${e=>e.theme.systemColors.grey600};
`,R0=c.div`
  display: flex;
  position: relative;
  max-height: 224px;
  overflow: hidden;
  border-radius: 0 0 6px 6px;
`,F0=c.img`
  max-width: 100%;
  object-fit: cover;
  object-position: center;
`,D0=c.button`
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  cursor: pointer;
  transition: background-color 0.2s;
  background-color: rgba(103, 132, 162, 0.3);
  border: none;
  padding: 0;

  &:hover {
    background: rgba(103, 132, 162, 0.2);
  }
`,I0=c(F)`
  ${e=>e.isText&&Z`
      margin-top: ${({theme:t})=>t.spacing.sp4};
      // TODO Figure out with design, this button not match with it
      padding: 1px 0;
      min-height: auto;
    `}
  white-space: nowrap;
`,ge=()=>{const e=Ka(),t=Im(e),n=b(ro.atom);return{isDemo:h.useMemo(()=>{if(n.id){if(t==="cerebro")return Ac[n.id]||!1;if(t==="magnet")return $c[n.id]||!1}return null},[t,n.id])??!1}},W0=R(ro.atom,e=>{if(e==null)return!1;const t=window.location.href,n=t.includes("cerebro"),s=t.includes("magnet"),r=n?"cerebro":s?"magnet":null;if(e.id)switch(r){case"cerebro":return Ac[e.id]!=null;case"magnet":return $c[e.id]!=null;default:return!1}return!1}),V=(e,t)=>{var i;const n=b(rs.atom),{isDemo:s}=ge(),{planGroup:r}=ne(),a=(r==="free"&&s&&n.content?Wm(n.content.data):(i=n.content)==null?void 0:i.data)||null;return Bn(a,e,t)},jr=e=>{const{planGroup:t}=ne();return V(e,y0)||t=="free"},su="HIDE_CEREBRO_SEASONAL_BANNER",O0=({handleCloseDrawer:e})=>{const t=localStorage.getItem(su),n=Tf(),s=t!=null?JSON.parse(t):null,r=s==null?void 0:s[n],[a,i]=h.useState(!r),l=()=>{i(!1),localStorage.setItem(su,JSON.stringify({...s??{},[n]:!0}))},u=!jr("AMAZON"),{t:d}=T(),p=h.useCallback(()=>{e(),H({eventName:"Cerebro Seasonal SV Video Clicked",eventProperties:{Place:"TAHD Banner"}})},[e]);return!a||!u?null:o.jsxs(z0,{children:[o.jsx("div",{}),o.jsxs(N0,{children:[o.jsx(V0,{dangerouslySetInnerHTML:{__html:d("cerebroSeasonal.banner.title",{year:As})}}),o.jsx(mi,{learnProject:"Cerebro",buttonType:"primary",videoHash:"osjtqm8jyn",onClick:p,children:d("cerebroSeasonal.banner.button")})]}),o.jsx(F,{type:"button",buttonType:"icon",icon:o.jsx(E,{icon:Np}),onClick:l})]})},z0=c.div`
  display: grid;
  align-items: center;
  grid-gap: ${e=>e.theme.spacing.sp12} ${e=>e.theme.spacing.sp24};
  grid-template-columns: 32px 1fr 32px;
  background-color: ${e=>e.theme.systemColors.blue50};
  padding: ${e=>e.theme.spacing.sp12} ${e=>e.theme.spacing.sp24};
  margin: -${e=>e.theme.spacing.sp8} -${e=>e.theme.spacing.sp24} 0;
`,N0=c.div`
  display: flex;
  align-items: center;
  justify-content: center;
  gap: ${e=>e.theme.spacing.sp24};
`,V0=c.div`
  ${Fe};
  text-align: end;
`,_0=({project:e})=>{const{t}=T(),n=b(we.atom,a=>a.data,[]),s=b(go),{planGroup:r}=ne();return h.useMemo(()=>_m({t,platform:n==null?void 0:n.platform,restriction:n==null?void 0:n.restriction,planGroup:r,project:(n==null?void 0:n.project)||e,isChinese:s}),[t,n==null?void 0:n.platform,n==null?void 0:n.restriction,n==null?void 0:n.project,r,e,s])},hi=h.memo(({project:e})=>{const t=_0({project:e}),n=b(we.atom,m=>m.isOpen,[]),s=b(we.atom,m=>m.data,[]),r=(s==null?void 0:s.restriction)==="uses"?"usesLimitReached":"featureLocked",a=C(we.close),i=h.useCallback(()=>Lm({project:e,userCurrentPlan:(t==null?void 0:t.currentPlanGroup)||null,upsellPlan:(t==null?void 0:t.betterPlanGroup)||null}),[e,t==null?void 0:t.currentPlanGroup,t==null?void 0:t.betterPlanGroup]),u=eh().platform==="WALMART"?"Walmart":"",d={cerebro:`cerebro${u}`,blackBoxProducts:"blackBoxProducts",magnet:`magnet${u}`,blackboxAba:"blackboxAba"};let p;return e==="cerebro"&&(p={location:th(),trigger:(s==null?void 0:s.trigger)==="banner"?"upsellBannerClicked":s==null?void 0:s.trigger}),o.jsx(hS,{data:{type:r,toolTitle:E0[e],tool:s!=null&&s.isHistorical?"historicalTrends":d==null?void 0:d[e]},segmentProps:p,modalProps:{isOpen:n},onBeforeAccept:i,onDecline:a})}),E0={blackBoxProducts:"Black Box",cerebro:"Cerebro",eliteAnalytics:"Elite Analytics",magnet:"Magnet",blackboxAba:"Black Box ABA"},nh=({title:e,description:t,children:n})=>o.jsxs(L0,{children:[o.jsxs(q0,{children:[o.jsx(H0,{children:e}),o.jsx(U0,{children:t})]}),o.jsx(K0,{children:n})]}),L0=c.div`
  min-width: 0;
  display: grid;
  grid-template-columns: 1fr;
  grid-column-gap: ${({theme:e})=>e.spacing.sp32};
  grid-row-gap: ${({theme:e})=>e.spacing.sp16};

  ${z.laptop} {
    grid-template-columns: 1fr auto;
  }

  padding: 32px 0 24px;
  justify-content: space-between;
`,q0=c.div``,H0=c.h1`
  ${vf};
  margin: ${({theme:e})=>e.spacing.sp4} 0 0;
`,U0=c.h2`
  ${Fe};
  margin: ${({theme:e})=>e.spacing.sp4} 0 0;
`,K0=c.div`
  display: flex;
  align-self: flex-end;
  flex-wrap: wrap;

  ${z.laptop} {
    margin-bottom: ${({theme:e})=>e.spacing.sp8};
  }

  & > button {
    white-space: nowrap;
    margin-bottom: ${({theme:e})=>e.spacing.sp8};
  }

  & > :not(:last-child) {
    margin-right: ${({theme:e})=>e.spacing.sp8};
  }

  ${F} {
    height: 32px;
  }
`,sh=({name:e,initValue:t,action:n,reducers:s})=>{const r=L(`filter/set/${e}`,(l,{dispatch:u})=>{n&&u(n())}),a=L(`filter/reset/${e}`,(l,{dispatch:u})=>{n&&u(n())});return{atom:Se(`filter/${e}Atom`,t,l=>{l(r,(u,d)=>d),l(a,()=>t),s==null||s(l)}),actions:{set:r,reset:a}}},Dl=sh({name:"blackBoxTab",initValue:"eliteAnalytics"}),sl={products:{path:Xp,hasTooltip:!0},keywords:{link:$(`${kt}${aS}`,{}),hasTooltip:!0},abaTopSearchTerms:{path:em,hasTooltip:!1,isNew:o.jsx(gm,{type:"new",icon:o.jsx(E,{icon:Vp}),children:"New"}),onClick:()=>{H({eventName:"BB ABA Tab Clicked"})}},competitors:{link:$(`${kt}/black-box/suggested-competitors`,{}),hasTooltip:!0},niche:{link:$(`${kt}/black-box/niche`,{}),hasTooltip:!0},productTargeting:{link:$(`${kt}/black-box/target-search`,{}),hasTooltip:!0},eliteAnalytics:{path:tm,icon:Cf,hasTooltip:!1}},G0=()=>{const{t:e}=T(),t=en(),n=b(Dl.atom),s=h.useMemo(()=>Object.keys(sl).reduce((i,l)=>{const u=sl[l];return[...i,{tabId:l,tooltip:u!=null&&u.hasTooltip?e(`blackBox.tabs.${l}.tooltip`):void 0,title:o.jsxs(Y0,{children:[u.isNew&&o.jsx(gm,{type:"new",icon:o.jsx(E,{icon:Vp}),children:"New"}),u.icon&&o.jsx(Q0,{icon:u==null?void 0:u.icon,fontSize:16}),e(`blackBox.tabs.${l}.name`)]})}]},[]),[e]),r=C(Dl.actions.set),a=h.useCallback(i=>{var u;r(i);const l=sl[i];(u=l.onClick)==null||u.call(l),l!=null&&l.path?t($(l.path,{})):l!=null&&l.link&&window.location.assign(l.link)},[t,r]);return o.jsx(Z0,{clickable:!0,activeTab:n,tabs:s,onTabChange:a,leftElement:o.jsx(ky,{text:e("blackBox.tabsTitle")})})},Z0=c(ga)`
  margin-top: -${({theme:e})=>e.spacing.sp8};
  align-items: center;
  overflow-x: auto;
  height: fit-content;

  ${ga.LeftElementContainer} {
    white-space: nowrap;
  }
  > ${ga.TabsContainer} {
    white-space: nowrap;
  }
`,Y0=c.div`
  display: flex;
  align-items: center;
  gap: ${e=>e.theme.spacing.sp4};
`,Q0=c(E)`
  margin-right: 2px;
`,ws=({description:e,children:t,buttons:n})=>{const{t:s}=T();return o.jsxs(J0,{children:[o.jsx(nh,{title:s("blackBox.title"),description:e,children:n}),o.jsx(G0,{}),o.jsx(X0,{children:t})]})},J0=c.div`
  display: flex;
  flex-direction: column;
  flex: 1;
`,X0=c.div`
  display: flex;
  flex-direction: column;
  flex: 1;
`,ej=()=>{const[e,t]=h.useState(1),[n,s]=h.useState(ru());return h.useEffect(()=>{if(!n){if(e>=au)return;setTimeout(()=>{const r=ru();s(r),t(a=>r?au:a+1)},1e3)}},[n,e]),n},rh=window,ru=()=>{var e;return typeof((e=rh.Appcues)==null?void 0:e.show)=="function"},au=20,tj="741b6f05-36ae-4639-996a-264a495e1b8e",oj=h.memo(({hidden:e})=>{const{t}=T();return!ej()||e?null:o.jsx(F,{type:"button",buttonType:"tertiary",onClick:()=>{var s;return(s=rh.Appcues)==null?void 0:s.show(tj)},children:t("buttons.viewWalkthrough")})}),Ra=Ct("amazonBrandRegistryModal",{}),gi=ht(e=>{var t;return(t=e.checkLogin)==null?void 0:t.amazonTokens},e=>!!e&&e.length>0&&e.some(t=>t.brandAnalyticsMarketplaces.length&&t.brandAnalyticsMarketplaces.length>0)),xi=ht(e=>{var t;return(t=e.checkLogin)==null?void 0:t.amazonTokens},e=>!!e&&e.length>0),nj=["diamond","elite","enterprise"],sj=()=>{const{planGroup:e}=ne(),{useUses:t}=ur.useSingleton(),n=t("blackbox-aba"),s=n&&(n==null?void 0:n.balance)>0,r=e==="platinum"&&s,a=h.useMemo(()=>nj.includes(e)||r,[r,e]),i=Me(xi),l=Me(gi);return _p(d=>d.status)==="loading"?"loading":a?i?l?"available":"noABAToken":"noToken":"unavailable"},Ic=["amazon.com.au","amazon.co.jp"],Wc=()=>["amazon.com","amazon.ca","amazon.com.mx","amazon.de","amazon.es","amazon.it","amazon.fr","amazon.co.uk","amazon.in","amazon.nl","amazon.com.au","amazon.co.jp","amazon.ae","amazon.com.br"],bi=()=>[...Wc(),"walmart.com"].map(e=>Ep.find(({value:t})=>t===e)).filter(e=>e!=null),kr=()=>Wc().map(e=>Af.find(({value:t})=>t===e)).filter(e=>e!=null),qe=(e,t)=>t!=="JPY"?e/100:e,rl=(e,t)=>t!=="JPY"?Math.round(e*100):e,gt=({filter:e,minmaxFields:t,priceFields:n,currency:s,roundingSettings:r,excludeFields:a=[]})=>({...Object.keys(e).filter(u=>!a.includes(u)).filter(u=>!t.includes(u)&&!!e[u]&&(Array.isArray(e[u])?e[u].length>0:!0)).reduce((u,d)=>d==="same-origin"?{...u,"include-all":e[d]==="all"?1:0,"include-any":e[d]==="any"?1:0}:{...u,[d]:typeof e[d]!="boolean"?(n||[]).includes(d)?rl(e[d],s||"USD"):e[d]:e[d]?1:0},{}),...t.reduce((u,d)=>{var p,m,g,x,S,j,f,v;return{...u,...((p=e[d])==null?void 0:p[0])!=null&&!isNaN((m=e[d])==null?void 0:m[0])?{[`${d}From`]:iu({key:d,type:"from",value:(n||[]).includes(d)?rl((g=e[d])==null?void 0:g[0],s||"USD"):(x=e[d])==null?void 0:x[0],roundingSettings:r})}:{},...((S=e[d])==null?void 0:S[1])!=null&&!isNaN((j=e[d])==null?void 0:j[1])?{[`${d}To`]:iu({key:d,type:"to",value:(n||[]).includes(d)?rl((f=e[d])==null?void 0:f[1],s||"USD"):(v=e[d])==null?void 0:v[1],roundingSettings:r})}:{}}},{})}),rj=({filter:e,currency:t,priceFields:n})=>t==="JPY"?e:Object.keys(e).reduce((s,r)=>{const a=e[r]&&!isNaN(e[r])&&n.includes(r)?Math.round(e[r]*100):e[r];return{...s,[r]:a}},{}),iu=({key:e,type:t,value:n,roundingSettings:s})=>{var i;const r=s[e],a=((i=n.toString().split(".")[1])==null?void 0:i.length)||0;if(typeof n=="number"&&r!=null&&a<=r)switch(t){case"from":return n-.5/Math.pow(10,r);case"to":return n+.49999999999/Math.pow(10,r);default:return n}else return n},So={products:void 0,keyword:void 0,phraseExcludeKeyword:"",phraseIncludeKeyword:"","include-all":1,"include-any":0,include:"all",searchVolume:[],searchVolumeTrend:[],searchFrequencyRank:[],searchFrequencyRankTrend:[],wordsCount:[],averageMonthlyAge:[],totalClickShareAsin:[],totalConversionShareAsin:[],totalSalesAsin:[],totalRevenueAsin:[],totalReviewCountAsin:[],averageRatingAsin:[],ageAsin:[],cpc:[],clickShareAsinNumberOfAsins:void 0,clickShareAsinOperator:void 0,clickShareAsinValue:void 0,conversionShareAsinNumberOfAsins:void 0,conversionShareAsinOperator:void 0,conversionShareAsinValue:void 0,clickAndConversionShareOperator:"and"},ah=e=>{const t=new Date;if(e==="Weekly"){const n=Lo(t,2);return[Ft(io(n)),Jo(jo(n))]}else{const n=Cn(t,1);return[Ft(mt(n)),Jo(Dt(n))]}},lu=5,Yr=0,aj=(e,t)=>{const n=e[0]??new Date;if(t==="Weekly"){const s=Lo(n,lu+Yr-1),r=Lo(n,Yr);return[Ft(io(s)),Jo(jo(r))]}else{const s=Cn(n,lu+Yr-1),r=Cn(n,Yr);return[Ft(mt(s)),Jo(Dt(r))]}},ij=async e=>D({url:$(`${I}/api/blackbox/v1/search/aba`,{}),method:"POST",params:e,useSessionAccountId:!0}),lj=[">",">=","=","<","<="],ih=["searchVolume","searchVolumePrevious","searchFrequencyRank","searchFrequencyRankPrevious","wordsCount","totalClickShareAsin","totalConversionShareAsin","averageMonthlyAge","totalSalesAsin","totalRevenueAsin","totalReviewCountAsin","averageRatingAsin","ageAsin","cpc","searchVolumeTrend","searchFrequencyRankTrend","exactTitleMatchProductsCount","resultsNumber"],cj=["totalRevenueAsin","cpc"],Oc=({sortField:e,sortDirection:t})=>`${t==="DESC"?"-":""}${e!=="id"?e:"default"}`,Xo=e=>{const t=e.getTimezoneOffset();return Pn(e,t)},lh=20,dj=({width:e,height:t,lineName:n,data:s,periodRange:r,periodRangesCount:a,endDate:i})=>{const l=h.useMemo(()=>s.map(x=>x.date),[s]),u=h.useMemo(()=>s.map(x=>({x:Ft(Sc(Xo(new Date(x.date)),lh)).getTime(),y:x.value})),[s]),d=uj({periodRange:r,periodRangesCount:a,endDate:i}),p=h.useMemo(()=>d.map(x=>{var S;return{x,y:((S=u.filter(j=>j.x===x)[0])==null?void 0:S.y)||null}}).map((x,S,j)=>({x:x.x,y:x.y,marker:{enabled:!(S>0&&j[S-1].y!=null||S<j.length-1&&j[S+1].y!=null),symbol:"circle",radius:2},description:String(x.x)})),[u,d]),m=h.useMemo(()=>[{name:n,data:p,color:"#0A6FE8",type:"spline",format:"number",dashStyle:"Solid"}],[p,n]),g=bj(r);return o.jsx(fj,{$width:e,children:o.jsx(br,{height:t,plotOptions:xj,categories:l,lines:m,header:null,currency:"USD",xAxis:mj,yAxis:hj,time:gj,chart:pj,tooltip:g})})},uj=({periodRange:e,periodRangesCount:t,endDate:n})=>h.useMemo(()=>{const s=Ft(Sc(Xo(n??new Date),lh)),r=e==="Weekly"?io:mt,a=e==="Weekly"?Lo:Cn,i=r(s,{weekStartsOn:0});return[...new Array(t)].map((l,u)=>Ft(a(i,u)).getTime()).reverse()},[n,e,t]),pj={backgroundColor:"transparent",margin:4},mj={categories:void 0,type:"datetime",visible:!1,maxPadding:0,margin:0},hj={id:"number",title:{text:null},reversed:!0,visible:!1,maxPadding:0,margin:0},gj={timezoneOffset:new Date().getTimezoneOffset()},xj={series:{marker:{enabled:!1,radius:3,states:{hover:{fillColor:void 0,radius:4}},symbol:"circle"},states:{inactive:{opacity:1}}}},bj=e=>{const{t}=T();return h.useMemo(()=>({hideDelay:0,style:{width:e==="Weekly"?290:240,opacity:0},useHTML:!0,outside:!0,shared:!0,shape:"square",className:"customTooltip",formatter:function(){const n=new Date(this.x);let s=$e(n,"standard");switch(e){case"Weekly":{s=`${t("common.week")} ${xr(n)}, ${$e(io(n),"standard")} - ${$e(jo(n),"standard")}`;break}case"Monthly":{s=$e(n,"completeShort");break}}return vc(o.jsx(Lp,{theme:Ie,children:o.jsx(Sj,{date:s,value:this.y})}))}}),[e,t])},fj=c.div`
  width: ${e=>e.$width}px;
`,Sj=({date:e,value:t})=>o.jsxs(yj,{children:[o.jsx(jj,{children:e}),o.jsx(kj,{children:N({value:t})})]}),yj=c.div`
  ${wf};
  border: 1px solid ${({theme:e})=>e.systemColors.grey300};
  background-color: rgba(255, 255, 255, 0.95);
  border-radius: 6px;
  padding: ${({theme:e})=>e.spacing.sp16};
  display: flex;
  flex-direction: column;
  gap: ${e=>e.theme.spacing.sp8};
`,jj=c.div`
  ${fe};
  white-space: nowrap;
`,kj=c.div`
  ${St};
  color: ${e=>e.theme.systemColors.black};
`,ch=e=>{const t=e.split("-"),n=t[0],s=t[1];return[t[2],s,n].join("-")},Tj=Tm(e=>{var t;return(t=e.data)==null?void 0:t.data.searchFrequencyRank},(e,t)=>t,(e,t)=>{var s,r;const n=((s=e==null?void 0:e.find(a=>String(a.Phrase_id)===t))==null?void 0:s.data)??{};return(r=Object.entries(n))==null?void 0:r.map(([a,i])=>({date:ch(a),value:i}))})((e,t)=>`${t}`),vj=Tm(e=>e.params,(e,t)=>t,(e,t)=>{var n;return e!=null?{...e,phraseId:t,phrase:((n=e.phrases.find(s=>s.phraseId===t))==null?void 0:n.phrase)||""}:null})((e,t)=>`${t}`),dh=async e=>D({url:$(`${I}/api/v1/brand-analytics/search-frequency-rank-chart`,e,{arrayFormat:"bracket"}),method:"GET",useSessionAccountId:!0}),Je=Qt(()=>({params:null,data:null,modalParams:{marketplace:null,period:null,reportingRange:null,phrase:null,phraseId:null},modalData:null})),Cj=Ss(Je,"params"),zc=Jt(Je,"modalData",async e=>{var n;const t=Je.getState().modalParams;if(t!=null&&t.marketplace&&(t!=null&&t.period)&&t.phraseId&&t.reportingRange){const s=t.reportingRange==="Weekly"?jo:Dt;return((n=(await dh({marketplaceId:ce("domain",t==null?void 0:t.marketplace).id,phraseIds:[t.phraseId],periodFrom:ke(t.period[0],"yyyy-MM-dd"),periodTo:ke(s(t.period[1]),"yyyy-MM-dd"),reportingRange:t.reportingRange})).data.searchFrequencyRank[0])==null?void 0:n.data)??null}else return null},{initialStatus:"loading"}),Fa=Ga(Je,"modalParams"),Aj=tn(Je,"modalParams.period",{sideEffect:()=>{zc.action()}}),wj=tn(Je,"modalParams.reportingRange"),uh=Jt(Je,"data",async e=>(Cj.set(e),dh({marketplaceId:ce("domain",e.marketplace).id,phraseIds:e.phrases.map(t=>t.phraseId),periodFrom:ke(e.period[0],"yyyy-MM-dd"),periodTo:ke(e.period[1],"yyyy-MM-dd"),reportingRange:e.reportingRange})),{rejected:()=>{}}),$j=({phraseId:e})=>{const t=Je(i=>Tj(i,`${e}`)),n=Je(i=>{var l;return((l=i.params)==null?void 0:l.reportingRange)??"Weekly"}),s=uh(i=>i.status),r=Je(i=>i.params),a=Je(i=>vj(i,e));return o.jsx(Pj,{onClick:()=>{a&&Fa.open(a),H({eventName:"BB ABA Graph Preview Clicked",eventProperties:{graphType:"ABA SFR"}})},children:s!=="loading"?o.jsx(o.Fragment,{children:t.length>0&&o.jsx(dj,{data:t,width:64,height:24,lineName:"",periodRange:n,periodRangesCount:(r==null?void 0:r.periodRangesCount)??5,endDate:r==null?void 0:r.endDate})}):o.jsx(Bj,{})})},Pj=c.div``,Bj=c(ae)`
  width: 64px;
  height: 24px;
`,Mj=async e=>D({url:$(`${I}/api/blackbox/v1/search/aba/${e.searchId}/results`,e,{arrayFormat:"bracket"}),method:"GET",useSessionAccountId:!0}),Rj=e=>{try{const t=localStorage.getItem(e);return t?JSON.parse(t):null}catch{return null}},Fj=(e,t)=>{const n=JSON.stringify(t);localStorage.setItem(e,n)},Dj=e=>{localStorage.removeItem(e)},as={get:Rj,set:Fj,remove:Dj},ph="ABA_TST",mh="ABA_TST_MODE",hh=[25,50,75,100],gh="aba_advanced_filter_is_expanded",Ij=()=>localStorage.getItem(gh)==="true",Wj=e=>{localStorage.setItem(gh,JSON.stringify(e))},xh={get:Ij,set:Wj},Oj=()=>({count:bS(ph)||hh[0],page:1,search:"",sortDirection:"DESC",sortField:"searchVolume"}),K=Qt(()=>{var e;return{mode:((e=as.get(mh))==null?void 0:e.mode)??"advanced",search:null,data:null,categories:null,exportData:null,selected:[],delete:null,marketplace:"amazon.com",reportingRange:"Weekly",period:ah("Weekly"),tableFilter:Oj(),filter:So,addToMyList:null,addToKeywordTracker:null,advancedFilterExpanded:xh.get()}}),zj=tn(K,"selected");tn(K,"mode",{sideEffect:({next:e})=>{as.set(mh,{mode:e})}});const Il=Ga(K,"addToMyList"),Nc=Ss(K,"addToKeywordTracker"),Nj=tn(K,"advancedFilterExpanded",{sideEffect:e=>{xh.set(e.next)}}),Rn=xm(K,"data",async e=>{const{search:t,tableFilter:n}=K.getState(),s=t==null?void 0:t.data.id;if(s==null)return null;const r=await Mj({searchId:s,page:n.page,per_page:n.count,sort:Oc(n)});return{...r,data:{...r.data,tableData:r.data.tableData.map(a=>({...a,id:String(a.Phrase_id),brands:[{asinNumber:1,title:a.brand1??null},{asinNumber:2,title:a.brand2??null},{asinNumber:3,title:a.brand3??null}],categories:[{asinNumber:1,title:a.categoryTitle1??null,url:a.categoryUrl1??null},{asinNumber:2,title:a.categoryTitle2??null,url:a.categoryUrl2??null},{asinNumber:3,title:a.categoryTitle3??null,url:a.categoryUrl3??null}]}))}}},{fulfilled:({result:e})=>{const t=K.getState(),n=t.marketplace,s=t.period,r=t.reportingRange,a=aj(s,r);((e==null?void 0:e.data.tableData)??[]).map(l=>({phrase:l.phrase,phraseId:l.Phrase_id})).length>0&&uh.action({marketplace:n,period:a,reportingRange:r,phrases:((e==null?void 0:e.data.tableData)??[]).map(l=>({phrase:l.phrase,phraseId:l.Phrase_id})),periodRangesCount:5,endDate:s[0]}),ur.getSingleton().getData("blackbox-aba")},rejected:()=>{}}),Vj=Rn.createFilter("tableFilter",{sideEffect:({prev:e,next:t})=>e.search!==t.search||e.count!==t.count?{tableFilter:{...t,page:1}}:{}}),fi=Ss(K,"tableFilter"),$s=xm(K,"search",async e=>{const t=K.getState(),n=t.marketplace,{id:s,currency:r}=ce("domain",n),{period:a,reportingRange:i}=t,l=t.filter,u=l.clickShareAsinNumberOfAsins==null||l.clickShareAsinOperator==null||l.clickShareAsinValue==null,d=l.conversionShareAsinNumberOfAsins==null||l.conversionShareAsinOperator==null||l.conversionShareAsinValue==null,p=["period","reportingRange",...u?["clickShareAsinNumberOfAsins","clickShareAsinOperator","clickShareAsinValue"]:[],...d?["conversionShareAsinNumberOfAsins","conversionShareAsinOperator","conversionShareAsinValue"]:[],...u||d?["clickAndConversionShareOperator"]:[]],m=gt({filter:l,minmaxFields:[...ih],roundingSettings:{},excludeFields:p,currency:r,priceFields:cj});return ij({filters:{...m,periodFrom:ke(a[0],"yyyy-MM-dd"),periodTo:ke(a[1],"yyyy-MM-dd"),rangeType:i==="Monthly"?"monthly":"weekly"},marketplaceId:s,sortBy:"default"})},{fulfilled:()=>{Rn.action()},rejected:()=>{}}),bh=$s.createFilter("marketplace",{sideEffect:()=>{Si(K.getState()),fi.patch({page:1})}}),_j=$s.createFilter("reportingRange",{patchEffect:e=>({period:ah(e)}),sideEffect:()=>{Si(K.getState()),fi.patch({page:1})}}),Vc=$s.createFilter("period",{sideEffect:()=>{Si(K.getState()),fi.patch({page:1})}});tn(K,"period");const _c=$s.createFilter("filter",{sideEffect:()=>{Si(K.getState()),fi.patch({page:1})}}),Ej=()=>{_c.set(Lj())},Lj=()=>{const{period:e,reportingRange:t}=K.getState();return{...So,period:e,reportingRange:t}},qj=Ss(K,"filter"),Si=e=>{const t=e.filter,n=Object.entries(t).filter(([s,r])=>r!=null&&JSON.stringify(So[s])!==JSON.stringify(r)).map(([s])=>Hj[s]).filter(s=>s!=null).filter((s,r,a)=>a.indexOf(s)===r).map(s=>s);H({eventName:"BB ABA Search Button Clicked",eventProperties:{dateRange:e.reportingRange==="Weekly"?"week":"month",filters:n,filtersView:e.advancedFilterExpanded?"advanced":"simple",marketplace:e.marketplace}})},Hj={ageAsin:"Top 3 Clicked ASINs Monthly Average Age",clickShareAsinNumberOfAsins:"Click Share",clickShareAsinOperator:"Click Share",clickShareAsinValue:"Click Share",conversionShareAsinNumberOfAsins:"Conv. Share",conversionShareAsinOperator:"Conv. Share",conversionShareAsinValue:"Conv. Share",cpc:"Suggested PPC Bid",include:"Include All / Any",keyword:"Keyword",products:"Products",phraseExcludeKeyword:"Exclude Phrases Containing",phraseIncludeKeyword:"Phrases Containing",wordsCount:"Word Count",searchFrequencyRank:"Search Frequency Rank",searchFrequencyRankPrevious:"Search Frequency Rank Trend",searchVolume:"Search Volume",searchVolumePrevious:"Search Volume Trend",totalClickShareAsin:"ABA Top 3 ASINs Total Click Share",totalConversionShareAsin:"ABA Top 3 ASINs Total Conv. Share",averageRatingAsin:"Top 3 Clicked ASINs Average Rating",totalRevenueAsin:"Top 3 Clicked ASINs Total Monthly Revenue",totalReviewCountAsin:"Top 3 Clicked ASINs Total Review Count",totalSalesAsin:"Top 3 Clicked ASINs Total Monthly Sales"},Uj=()=>{const e=Xt();h.useEffect(()=>{const t=e.getState(Ue);kr().map(n=>n.value).includes(t||"amazon.com")||bh.set("amazon.com")},[])},O=({name:e,noValidate:t=!0,showEmptyValue:n,disabled:s,...r})=>{const{t:a}=T(),{control:i}=_e();return o.jsx(tt,{name:e,control:i,rules:{...t?{}:{validate:l=>_S([(l==null?void 0:l[0])||0,(l==null?void 0:l[1])||0])}},render:({field:l,formState:u})=>{var d,p;return o.jsx(ES,{...r,disabled:s||n,value:n?void 0:l.value,onChange:m=>{const g=m==null?void 0:m[0],x=m==null?void 0:m[1],S=g==null||isNaN(g)?null:g,j=x==null||isNaN(x)?null:x,f=[];S!=null?f.push(S):j!=null&&f.push(void 0),j!=null?f.push(j):S!=null&&f.push(void 0),l.onChange(f)},error:(d=u.errors[e])!=null&&d.message?a(`errors.${(p=u.errors[e])==null?void 0:p.message}`):void 0,onKeyDown:m=>{Gj.includes(m.code)&&m.preventDefault(),r.min!=null&&r.min>=0&&Kj.includes(m.code)&&m.preventDefault()}})}})},Kj=["Minus","NumpadSubtract"],Gj=["KeyE","Equal","NumpadAdd"],Ps=()=>{const{t:e}=T(),t=b(go);return e(`upgradePlan.plans.diamond${t?"Chinese":""}`)},xo=({onClick:e,disabled:t})=>o.jsx(F,{type:"button",buttonType:"icon",size:"50",icon:o.jsx(E,{icon:$f}),onClick:e,disabled:t}),Js=({onClick:e,disabledChart:t})=>{const{t:n}=T();return o.jsxs(Zj,{onClick:e,children:[o.jsx(Yj,{children:n("upgradePlan.getPlan")}),t&&o.jsx(xo,{disabled:!0})]})},Zj=c.div`
  flex: 1;
  display: flex;
  justify-content: flex-end;
  gap: ${({theme:e})=>e.spacing.sp8};

  margin: ${({theme:{spacing:{sp8:e,sp16:t}}})=>`-${e} -${t}`};
  padding: ${({theme:{spacing:{sp8:e,sp16:t}}})=>`${e} ${t}`};
`,Yj=c.div`
  filter: blur(4px);
`,Da=({title:e,locked:t})=>o.jsxs(o.Fragment,{children:[t&&o.jsx(qp,{type:"tertiary"}),e]}),Qj=async e=>await D({url:$(`${I}/api/cerebro/v1/amazon/brand-analytics/top-three-asins-overview`,{}),params:e,method:"GET",useSessionAccountId:!0}),Ia=Ct("connectTokenModal",{}),Ze=Ct("ABADDrawer",{moduleId:"cerebro"}),fh=L("openABADDrawerModalWithCheck",(e,{dispatch:t})=>{e.moduleId!=="blackbox"?H({eventName:e.moduleId==="cerebro"?"Cerebro ABA Clicked":"Magnet ABA Clicked",eventProperties:{}}):H({eventName:"BB ABA Graph Preview Clicked",eventProperties:{graphType:"ABA Drawer"}});const n=xi(Me.getState()),s=gi(Me.getState());t(n&&s?Ze.open(e):n?Ra.open({}):Ia.open({}))}),Jj=e=>C(()=>fh(e),[e]),Tr=()=>{const e=Me(xi),t=Me(gi);return e&&t},Wl=L("clickABADDrawerModalWithNoTokens",(e,{dispatch:t})=>{H({eventName:e.moduleId==="cerebro"?"Cerebro ABA Clicked":"Magnet ABA Clicked",eventProperties:{}});const n=xi(Me.getState()),s=gi(Me.getState());n?s||t(Ra.open({})):t(Ia.open({}))}),Ks=he("getTop3AsinsOverviewRequest",async e=>Qj(e),{fulfilledReaction:(e,{dispatch:t})=>{e.params.platinumParams&&t(Ze.open(e.params.platinumParams))},rejectedReaction:(e,t)=>{var n;if(((n=e.fetchError)==null?void 0:n.responseStatus)===402){t.dispatch(Ze.close({}));const s=t.getState(Ze.atom).data.moduleId;t.dispatch(Nt({trigger:"ABA Total Click/Conv. Share",tool:s==="keywordresearch"?"Magnet":"Cerebro",isABA:!0}))}else je(e.fetchError)}}),Sh=L("getTop3AsinsOverviewAction",(e,{dispatch:t,getState:n})=>{const{phraseId:s,marketplaceId:r,periodFrom:a,periodTo:i,reportingRange:l}=e,u=n(yh)[s];if(u&&u.params.marketplaceId===r&&u.params.periodFrom===a&&u.params.periodTo===i&&u.params.reportingRange===l){e.platinumParams&&t(Ks.actions.pending(e));return}t(Ks.actions.pending(e))}),yh=Se("top3AsinsOverviewAtom",{},e=>{e(Ks.actions.pending,(t,{platinumParams:n,...s})=>({...t,[s.phraseId]:{status:"loading",content:null,params:s}})),e(Ks.actions.fulfilled,(t,{params:{platinumParams:n,...s},result:r})=>({...t,[s.phraseId]:{status:"loaded",content:r,params:s}})),e(Ks.actions.rejected,(t,{params:{platinumParams:n,...s}})=>({...t,[s.phraseId]:{status:"error",content:null,params:s}}))}),al=e=>e.replace(" ","T")+"Z",Ec=R(ie([yh,Ze.atom]),([e,t])=>{var r,a,i;const{phraseId:n}=t.data;if(!n||!e[n])return{status:"error",state:[],chart:{clickedRate:[],conversionRate:[],frequencyRank:[]}};const s=e[n];return{status:s.status,chart:{clickedRate:(((r=s.content)==null?void 0:r.data)||[]).map((l,u)=>({item:l,x:+new Date(al(l.periodTo)),y:+(l.clickShareAsin1+l.clickShareAsin2+l.clickShareAsin3).toFixed(2)})),conversionRate:(((a=s.content)==null?void 0:a.data)||[]).map((l,u)=>({item:l,x:+new Date(al(l.periodTo)),y:+(l.conversionShareAsin1+l.conversionShareAsin2+l.conversionShareAsin3).toFixed(2)})),frequencyRank:(((i=s.content)==null?void 0:i.data)||[]).map((l,u)=>({item:l,x:+new Date(al(l.periodTo)),y:l.searchFrequencyRank}))}}}),Xj=async e=>{const t=await D({url:$(`${I}/api/cerebro/v1/amazon/brand-analytics/top-three-asins`,{}),params:e,method:"GET",useSessionAccountId:!0});return{...t,data:ek(t.data)}},ek=e=>e.map(({periodFrom:t,periodTo:n,reportingRange:s,...r},a)=>({date:t,periodFrom:t,periodTo:n,reportingRange:s,id:a.toString(),asinsData:[{asin:r.asin1,clickRate:r.clickShareAsin1,conversionRate:r.conversionShareAsin1,id:"1",organicRank:r.organicPositionAvg1,sponsoredRankAvg:r.sponsoredPositionAvg1},{asin:r.asin2,clickRate:r.clickShareAsin2,conversionRate:r.conversionShareAsin2,id:"2",organicRank:r.organicPositionAvg2,sponsoredRankAvg:r.sponsoredPositionAvg2},{asin:r.asin3,clickRate:r.clickShareAsin3,conversionRate:r.conversionShareAsin3,id:"3",organicRank:r.organicPositionAvg3,sponsoredRankAvg:r.sponsoredPositionAvg3}]})),fa=he("getTop3AsinsRequest",async e=>Xj(e),{rejectedReaction:({fetchError:e})=>je(e)}),tk=L("getTop3AsinsAction",(e,{dispatch:t,getState:n})=>{const{phraseId:s,marketplaceId:r}=e,a=n(jh)[s];a&&a.params.marketplaceId===r||t(fa.actions.pending(e))}),jh=Se("top3AsinsAtom",{},e=>{e(fa.actions.pending,(t,n)=>({...t,[n.phraseId]:{status:"loading",content:null,params:n}})),e(fa.actions.fulfilled,(t,{params:n,result:s})=>({...t,[n.phraseId]:{status:"loaded",content:s,params:n}})),e(fa.actions.rejected,(t,{params:n})=>({...t,[n.phraseId]:{status:"error",content:null,params:n}}))}),Lc=R(ie([jh,Ze.atom]),([e,{data:{phraseId:t}}])=>{const n=[].map((s,r)=>({date:`2022-0${r+1}-01`,index:r,asinsData:[]}));if(t){const s=[...new Array(3)].map((u,d)=>({date:ke(mt(Lt(new Date,-d-1)),"yyyy-MM-dd"),index:d,asinsData:[]})).sort((u,d)=>new Date(d.date).getTime()-new Date(u.date).getTime()),r=e[t],i=((r==null?void 0:r.content)!=null?r.content.data.sort((u,d)=>new Date(Ol(d.date)).getTime()-new Date(Ol(u.date)).getTime()):[]).map((u,d)=>({...u,date:ke(new Date(u.periodFrom),"yyyy-MM-dd"),index:d,asinsData:[...(u.asinsData||[]).map((p,m)=>({...p,id:m+1})),{id:"subtotal",asin:"subtotal",clickRate:(u.asinsData||[]).reduce((p,m)=>p+(m.clickRate||0),0),conversionRate:(u.asinsData||[]).reduce((p,m)=>p+(m.conversionRate||0),0),organicRank:(u.asinsData||[]).reduce((p,m)=>p+(m.organicRank||0),0)/(u.asinsData.length||1),sponsoredRankAvg:(u.asinsData||[]).reduce((p,m)=>p+(m.sponsoredRankAvg||0),0)/(u.asinsData.length||1)}]})).sort((u,d)=>new Date(d.date).getTime()-new Date(u.date).getTime()),l=s.map(u=>{const d=i.find(p=>p.date===u.date);return d||u});return{...r,content:l.length>0?l:s}}else return{status:"loading",content:n,params:{}}}),Ol=e=>{const t=e.slice(0,2),n=e.slice(3,5);return`${e.slice(6,10)}-${n}-${t}`},cu=new Date,du=[mt(Lt(cu,-6)),Dt(Lt(cu,-1))],kh=L("mainABADOverviewPeriod"),Th=L("mainABADOverviewPeriod"),qc=Se("mainABADPeriodAtom",du,e=>{e(kh,(t,n)=>n),e(Th,()=>du)}),vh=L("setMainABADPeriodReportingRange"),Ch=L("resetMainABADPeriodReportingRange"),vr=Se("mainABADPeriodReportingRangeAtom","Monthly",e=>{e(vh,(t,n)=>n),e(Ch,()=>"Monthly")}),ok=R(qc,e=>e),Ah=R("mainABADPeriodForApiSelector",ie([qc,vr]),([e,t])=>{const n=e.sort((r,a)=>r.getTime()-a.getTime()),s=t==="Monthly"?Dt:r=>r;return{periodFrom:ke(Ft(n[0]),"yyyy-MM-dd"),periodTo:ke(s(Jo(n[1])),"yyyy-MM-dd")}}),is=["impressionExact30","iq","organicPosition","wordsCount","exactTitleMatchProductsCount","amzSuggestedPosition","sponsoredPosition","resultsNumber","searchVolumeTrend30","monthlySales","clickShareRate","conversionShareRate","searchFrequencyRank","octoberSeasonalSearchVolume","novemberSeasonalSearchVolume","decemberSeasonalSearchVolume",ue],An=[...is,"rank","relativeRank","sponsoredAvg","sponsoredCount","amzSuggestedAvg","amzSuggestedCount","competitiveAvg","rankingCompetitors","competitorPerformanceScore","considerRankAsin","considerRank"],ls=["wordsCount","amazonSearchVolume","organicPosition","sponsoredPosition","resultsNumber","quantitativeSearchVolume",ue],Xs=[...ls,"rank","competitorPerformanceScore","competingProducts","relativeRank","sponsoredAvg","sponsoredCount","competitiveAvg","rankingCompetitors","considerRankProduct","considerRank"],yi=async({id:e},t=!1)=>D({url:$(`${I}/api/${t?"magnet":"cerebro"}/v1/amazon/search/${e}/sponsored-data`,{}),method:"POST",useSessionAccountId:!0}),ji=async(e,t=!1)=>D({url:$(`${I}/api/${t?"magnet":"cerebro"}/v1/amazon/search/sponsored-data`,{}),method:"POST",params:e,useSessionAccountId:!0}),ki=async({id:e},t=!1)=>D({url:$(`${I}/api/${t?"magnet":"cerebro"}/v1/amazon/search/${e}/sponsored-data`,{}),method:"GET",useSessionAccountId:!0}),rn=()=>{const{id:e}=Pf();return[e||""]},cs=sh({name:"magnetTab",initValue:"single"}),nk=[50,100,150],Gn={count:nk[0],page:1,search:"",sortField:"default",sortDirection:"ASC"},Hc=({name:e,action:t,reducers:n,isWalmart:s,project:r,initialState:a,restoreItemsPerPage:i})=>{let l=a||Gn;if(i){const k=Number(localStorage.getItem("blackBoxItemsPerPage"));!isNaN(k)&&k!==0&&(l={...l,count:k})}const u=L(`tableFilter-${e}/set`,(k,y)=>{const{dispatch:w,getState:P}=y;localStorage.setItem("blackBoxItemsPerPage",String(k.count));const A=P(Sa);ee.getState().setStatus(A?"loading":"table"),t&&w(t(k,y))}),d=L(`tableFilter-${e}/setSilent`),p=L(`tableFilter-${e}/setPartial`,({count:k})=>{k!=null&&localStorage.setItem("blackBoxItemsPerPage",String(k))}),m=L(`tableFilter-${e}/reset`,(k,y)=>{const{dispatch:w,getState:P}=y;(l==null?void 0:l.count)!=null&&localStorage.setItem("blackBoxItemsPerPage",String(l==null?void 0:l.count));const A=P(Sa);ee.getState().setStatus(A?"loading":"table"),t&&w(t(l,y))}),g=L(`tableFilter-${e}/reset`,(k,y)=>{const{dispatch:w,getState:P}=y,A=P(Sa),W=P(S);ee.getState().setStatus(A?"loading":"table"),t&&w(t(W,y))}),x=L(`tableFilter-${e}/reset-page-silent`),S=Se(`tableFilter-${e}/`,l,k=>{k(u,(y,w)=>w),k(d,(y,w)=>w),k(p,(y,w)=>({...y,...w})),k(m,()=>l),k(g,y=>({...y,page:1})),k(x,y=>({...y,page:1})),n==null||n(k)}),j=it({name:"setPagination",restriction:"pagination",actionAfterCheck:u,getPlatform:()=>s?"WALMART":"AMAZON"}),f=it({name:"lockPagination",restriction:"pagination",getPlatform:()=>s?"WALMART":"AMAZON",getExtraUpgradeProps:()=>({project:r,trigger:"User click the pagination"})}),v=it({name:"lockSort",restriction:"sorting",getPlatform:()=>s?"WALMART":"AMAZON",getExtraUpgradeProps:()=>({project:r,trigger:"User click sorting"})});return{atom:S,actions:{set:j,setSilent:d,setPartial:p,reset:m,resetPage:g,resetPageSilent:x,onLockedPagination:f,onLockedSorting:v,setWithoutCheck:u}}},Wa=L("setIsFirstRequestForTable"),Sa=Se("isFirstRequestForTable",!0,e=>{e(Wa,(t,n)=>n)}),sk=()=>{const[e]=rn(),t=C(Wa);b(Sa,()=>null,[]),h.useEffect(()=>{t(!0)},[t,e])},rk=({lastFilter:e,priceFields:t=[],currency:n})=>{const s=Object.keys(e).filter(d=>e[d]).filter(d=>d!=="include-all"&&d!=="include-any"&&d!=="sort"&&d!=="searchKeyword"),a=s.filter(d=>!d.endsWith("From")&&!d.endsWith("To")).reduce((d,p)=>{const m=e[p];return{...d,[p]:t.includes(p)&&typeof m=="number"?qe(m,n||"USD"):m}},{}),i=s.filter(d=>d.endsWith("From")||d.endsWith("To")),u=[...new Set(i.map(d=>d.slice(0,d.endsWith("From")?-4:-2)))].reduce((d,p)=>{const m=t.includes(p),g=Number(e[`${p}From`]),x=Number(e[`${p}To`]);return{...d,[p]:[m?qe(g,n||"USD"):g,m?qe(x,n||"USD"):x]}},{});return{include:e["include-all"]==="1"?"all":"any",...a,...u}},ak=e=>{if(Array.isArray(e))return{};{const t=(e==null?void 0:e.sort)||"",n=t.startsWith("-"),s=n?"DESC":"ASC",r=t&&n?t.slice(1):t,a=e.searchKeyword||"";return r!==Gn.sortField||s!==Gn.sortDirection||a!==Gn.search?{page:1,...r?{sort:{field:r,direction:s}}:{},...a?{search:a}:{}}:Gn}},wh=L("setCurrentWord",e=>{var n;H({eventName:"Word Frequency Clicked",eventProperties:{word:e}});const t=(n=Xe.getState().translation)==null?void 0:n.t;t&&Be.warning(o.jsxs("div",{children:[o.jsx(hr,{children:t("cerebro.wordFrequency.setToast.title")}),o.jsx(gr,{children:t("cerebro.wordFrequency.setToast.text",{keyword:e})})]}))}),ik=Se("currentWord","",e=>{e(wh,(t,n)=>n)}),lk=L("setCurrentTag"),ds=L("setCurrentTags"),ck=Se("currentTagsAtom",[],e=>{e(lk,(t,n)=>[...new Set([...t,n])]),e(ds,(t,n)=>n)}),dk=R(ck,e=>JSON.stringify(e)),an=({name:e,table:t,sponsoredColumn:n,search:s,isMagnet:r,isWalmart:a,initFilterValue:i,minmaxFields:l,priceFields:u,temporarilyRemovedController:d,disableFilterReactionsSelector:p,getFBTAction:m,mainProductIdExtractionFunction:g})=>{const x=he(`getSearch/${e}`,async({id:M},{getState:B})=>{const{id:Y}=B(ro.atom),{restrictions:Q,isDemo:xe}=Uo(B),Oe=Bn(Q,a?"WALMART":"AMAZON","pagination"),dt=B(Jm),ut=await s.getSearchData({id:M||Y||"0",demo:xe}),Vn=ce("store",ut.data.marketplace).currency;return{...ut,initialFilter:dt&&Object.keys(dt).length>0?dt:void 0,demo:xe,paginationLocked:Oe,currency:Vn}},{rejectedReaction:({fetchError:M})=>je(M),fulfilledReaction:({result:M},{dispatch:B})=>{var Q;const Y=M.data.marketplace;if(B(d.getRequest.actions.pending({searchId:Number(M.data.id)})),B(W.actions.pending({id:M.data.id})),Y){const xe=(Q=ce("store",Y))==null?void 0:Q.domain;xe&&B(Mn(xe))}B(Rc({project:r?"magnet":"cerebro",isWalmart:a})),B(cs.actions.set(M.data.historyType===2?"multiple":"single"))},resolvedReaction:(M,{dispatch:B})=>{B(Qm())}}),S=Zm({name:e,initValue:i,isWalmart:a,action:()=>W.actions.pending({isFilter:!0}),disableReactionsSelector:p,reducers:M=>{M(x.actions.fulfilled,(B,{result:Y})=>({...i,...Y.initialFilter?Y.initialFilter:Y.data.lastFilter?rk({lastFilter:Y.data.lastFilter||{},priceFields:u,currency:Y.currency}):i}))}}),j=Hc({name:e,action:()=>W.actions.pending({}),isWalmart:a,project:r?"magnet":"cerebro",reducers:M=>{M(x.actions.fulfilled,(B,Y)=>{const Q=!Y.result.demo&&Y.result.paginationLocked?"phrase":"default";return{...Gn,...ak(Y.result.data.lastFilter||{}),sortField:Q}}),M(S.actions.set,B=>({...B,page:1})),M(S.actions.setWithoutCheck,B=>({...B,page:1}))}}),f=lc(`createSponsoredDataTask/${e}`,async M=>n.createTaskQuery(M,r),{rejectedReaction:({fetchError:M})=>je(M)}),v=L("setSponsoredStatus"),k=L(`startSponsoredStatus/${e}`,async(M,{dispatch:B})=>{let Y=-1;try{for(;Y!==101;){await Gl(5e3);const{data:Q}=await n.getTaskDataQuery(M,r);Q.sponsoredStatus!==Y&&(Y=Q.sponsoredStatus,B(v({data:{sponsoredStatus:Y}})))}}catch{}}),y=L("clearSponsoredData"),w=he(`getSponsoredData/${e}`,async M=>n.getDataQuery(M,r),{reducers:M=>{M(y,B=>({...B,content:null}))},rejectedReaction:({fetchError:M})=>je(M)}),P=R(`searchSelector/${e}`,x.atom,M=>{var B;return((B=M.content)==null?void 0:B.data)||null}),A=R(`searchIdSelector/${e}`,P,M=>(M==null?void 0:M.id)||null),W=he(`getTableData/${e}`,async(M,{getState:B})=>{var Ud,Kd;const{id:Y,isFilter:Q}=M,{id:xe}=B(ro.atom),de=B(S.atom),Oe=B(j.atom),dt={...Oe,page:Q?1:Oe.page},ut=Uo(B),Vn=Y||xe||0,oo=((Ud=B(x.atom).content)==null?void 0:Ud.currency)||"USD",Ke=await t.getDataQuery({id:Vn.toString(),tableFilter:dt,filter:de,demo:!!ut.isDemo,currency:oo}),Kr=g?g(Ke.data.productDetails):null;if(m&&M.id&&Kr){const Gd=(Kd=B(x.atom).content)==null?void 0:Kd.data.marketplace;Gd&&m({searchId:M.id,productId:Kr,marketplace:Gd})}return{...Ke,data:{...Ke.data,tableData:Ke.data.tableData}}},{fulfilledReaction:({result:M},{dispatch:B,getState:Y})=>{var dt,ut,Vn;const{isDemo:Q}=Uo(Y);ee.getState().setStatus("loaded"),B(Wa(!1));const xe=M==null?void 0:M.data.searchId.toString();if((M==null?void 0:M.data.sponsoredStatus)!==101&&!Q&&B(k({id:xe})),(M==null?void 0:M.data.sponsoredStatus)===0&&!Q){B(f.pending({id:xe}));const oo=Y(Ae),Ke=(dt=Y(P))==null?void 0:dt.marketplace;oo.length>0&&Ke&&B(w.actions.pending({phrasesIds:oo,marketplace:Ke}))}const de=M==null?void 0:M.data.productDetails;if(de){let oo;if(Array.isArray(de))oo=de.sort((Ke,Kr)=>(Kr.main?1:-1)-(Ke.main?1:-1)).map(Ke=>Ke.asin?Ke.asin:Ke.productId);else{const Ke=de;oo=[Ke.asin?Ke.asin:Ke.productId]}B(ds(oo))}const Oe=(Vn=(ut=Y(x.atom).content)==null?void 0:ut.data)==null?void 0:Vn.keyword;if(Oe){const oo=Oe.split(",").map(Ke=>Ke.trim());setTimeout(()=>B(ds(oo)),0)}},rejectedReaction:(M,B)=>{B.dispatch(Wa(!1)),je(M.fetchError)},reducers:M=>{M(f.fulfilled,(B,{result:Y})=>{var Q;return((Q=B.content)==null?void 0:Q.data.sponsoredStatus)!==Y.data.sponsoredStatus?{...B,content:B.content?{...B.content,data:{...B.content.data,sponsoredStatus:Y.data.sponsoredStatus}}:B.content}:B}),M(v,(B,Y)=>{var Q;return((Q=B.content)==null?void 0:Q.data.sponsoredStatus)!==Y.data.sponsoredStatus?{...B,content:B.content?{...B.content,data:{...B.content.data,sponsoredStatus:Y.data.sponsoredStatus}}:B.content}:B}),M(d.addRequest.actions.pending,(B,Y)=>{var Q;return{...B,content:B.content?{...B.content,data:{...B.content.data,tableData:(Q=B.content)==null?void 0:Q.data.tableData.filter(xe=>xe[t.phraseIdKey]&&Y.phrases.map(({id:de})=>de).indexOf(String(xe[t.phraseIdKey]))===-1)}}:B.content}})}}),_=he(`getExportData/${e}`,async(M,{getState:B})=>{var ut;const{id:Y}=M,{id:Q}=B(ro.atom),xe=B(S.atom),de=B(j.atom),Oe=Y||Q||0,dt=((ut=B(x.atom).content)==null?void 0:ut.currency)||"USD";return t.getExportDataQuery({id:Oe.toString(),tableFilter:de,filter:xe,onSuccess:M.onSuccess,demo:M.demo,currency:dt})},{initialStatus:"init",fulfilledReaction:({params:{onSuccess:M},result:B})=>{B!=null&&B.data&&M(B.data)},rejectedReaction:({fetchError:M})=>je(M)}),G=he(`putExportedKeywords/${e}`,async(M,{getState:B})=>{var ut;const{id:Y}=M,{id:Q}=B(ro.atom),xe=B(S.atom),de=B(j.atom),Oe=Y||Q||0,dt=(ut=B(x.atom).content)==null?void 0:ut.currency;return t.putExportedKeywordsQuery({id:Oe.toString(),tableFilter:de,filter:xe,demo:M.demo},l,u,dt||"USD")},{initialStatus:"init",fulfilledReaction:({params:{onSuccess:M},result:B})=>{B!=null&&B.data&&M(B.data.hash)},rejectedReaction:M=>{var B;if(((B=M.fetchError)==null?void 0:B.responseStatus)===400){const Y=Xe.getState().translation;Y&&Be.error(Y.t("errors.frankenstein.limitIsExceeded"))}else je(M.fetchError)}}),q=R(ie([_.atom,G.atom]),([M,B])=>M.status==="loading"||B.status==="waiting"||B.status==="loading"),U=R(`getSearchDataByIdSelector/${e}`,ie([R(W.atom,M=>{var B;return((B=M.content)==null?void 0:B.data.tableData)||null}),R(P,M=>(M==null?void 0:M.marketplace)||null),w.atom]),([M,B,Y])=>{var Q,xe;return Y.status==="loaded"&&((Q=Y.content)!=null&&Q.data)&&((xe=Y.content)==null?void 0:xe.data.length)>0&&M?{tableData:M.map(de=>{var dt;const Oe=(((dt=Y.content)==null?void 0:dt.data)||[]).find(({phraseId:ut})=>ut===de[t.phraseIdKey]);return Oe?{...de,[B!=null&&B.includes("WALMART")?"sponsoredProducts":"sponsoredAsins"]:Oe.sponsored}:de}),marketplace:B}:{tableData:M,marketplace:B}}),ye=R(W.atom,M=>{var B;return((B=M.content)==null?void 0:B.data.sponsoredStatus)||null}),pe=R(W.atom,M=>{var B;return((B=M.content)==null?void 0:B.data.sponsoredStatus)??-1}),le=R(pe,M=>M===101),Ae=R(W.atom,M=>{var B;return(((B=M.content)==null?void 0:B.data.tableData)||[]).map(Y=>Y[t.phraseIdKey])}),Pe=R(W.atom,M=>{var B;return((B=M.content)==null?void 0:B.data.wordFrequency)||[]}),De=R(W.atom,M=>{var B;return((B=M.content)==null?void 0:B.data.count)||0}),ze=R(x.atom,M=>{var B;return ce("store",((B=M.content)==null?void 0:B.data.marketplace)||"")}),Re=R(x.atom,M=>{var B;return(B=M.content)!=null&&B.data.marketplace?ce("store",M.content.data.marketplace):null});return{dataRequest:W,searchRequest:x,exportRequest:_,putExportedKeywordsRequest:G,createSponsoredDataTask:f,getSponsoredDataRequest:w,filterRequest:S,tableFilterRequest:j,startSponsoredStatus:k,selectors:{total:De,getSearchDataById:U,getSponsored:pe,getPhrases:Ae,wordFrequency:Pe,search:P,searchId:A,sponsoredStatus:ye,sortableBySponsoredColumn:le,searchMarketplaceData:ze,exportIsLoading:q,searchMarketplaceDataNullable:Re},useSearchTable:()=>{sk();const[M]=rn(),B=C(()=>ro.actions.set({id:M}),[M]);h.useEffect(B,[B]),b(ro.atom,()=>null,[]),b(S.atom,()=>null,[]),b(j.atom,()=>null,[]);const Y=ee(de=>["loading","filter"].indexOf(de.status)!==-1),Q=b(Pe),xe=b(ze,de=>de.domain,[]);return{searchId:M,isSkeleton:Y,wordFrequencyData:Q,marketplaceDomain:xe}}}},Pt={wordsCount:[],amazonSearchVolume:[],impressionExact30:[],organicPosition:[],matchType:[],phrase:"",iq:[],exactTitleMatchProductsCount:[],resultsNumber:[],amazonChoice:[],amazonOnly:[],sponsoredPosition:[],amzSuggestedPosition:[],exclude:"",searchVolumeTrend30:[],amazonRecRank:[],include:"any",bestSeller:[],rank:[],relativeRank:[],sponsoredAvg:[],sponsoredCount:[],amzSuggestedAvg:[],amzSuggestedCount:[],competitiveAvg:[],rankingCompetitors:[],competitorPerformanceScore:[],considerRankAsin:[],considerRank:[],considerRankProduct:[],quantitativeSearchVolume:[],monthlySales:[],clickShareRate:[],conversionShareRate:[],searchFrequencyRank:[],[ue]:[],timePeriod:null,octoberSeasonalSearchVolume:[],novemberSeasonalSearchVolume:[],decemberSeasonalSearchVolume:[]},Ko=Pt,Ti=({page:e,count:t,sortField:n,sortDirection:s,search:r},a)=>({...a?{}:{page:e,per_page:t},...n&&s?{sort:`${s==="DESC"?"-":""}${n!=="id"?n:"default"}`}:{},...r?{searchKeyword:r}:{}}),eo=({data:{id:e,tableFilter:t,filter:n},minmaxFields:s,priceFields:r,currency:a,roundingSettings:i={},isExport:l})=>({...t?Ti(t,l):{},...n?gt({filter:n,minmaxFields:s,priceFields:r,currency:a,roundingSettings:i}):{}}),uk=async e=>{const{demo:t,currency:n,...s}=e;return D({url:$(`${I}/api/cerebro/v1/amazon/search/multiple/${t?"demo/":""}${e.id}/exported-data`,eo({data:s,minmaxFields:An,priceFields:[ue],currency:n,isExport:!0}),{arrayFormat:"bracket"}),method:"GET",useSessionAccountId:!0})},vi=async(e,t,n,s)=>{const{demo:r,...a}=e;return D({url:$(`${I}/api/cerebro/v1/search/${r?"demo/":""}${e.id}/exported-keywords`,{}),method:"PUT",params:eo({data:a,minmaxFields:t,priceFields:n,currency:s,isExport:!0}),useSessionAccountId:!0})},pk=(e,t)=>new Date(e,t,0).getDate(),mk=async({searchId:e,phrases:t})=>D({url:$(`${I}/api/cerebro/v1/amazon/search/history/${e}/phrases/temporarily-removed/bulk-update`,{}),method:"PATCH",params:{temporarilyRemoved:t},useSessionAccountId:!0}),hk=async({searchId:e,...t})=>D({url:$(`${I}/api/cerebro/v1/amazon/search/history/${e}/phrases/temporarily-removed/bulk-delete`,{}),method:"POST",params:t,useSessionAccountId:!0}),gk=async({searchId:e})=>D({url:$(`${I}/api/cerebro/v1/amazon/search/history/${e}/phrases/temporarily-removed`,{}),method:"GET",useSessionAccountId:!0}),us=Mc({addItemRequest:mk,deleteItemRequest:hk,getDataRequest:gk});var uu;(function(e){e[e.InProgress=2]="InProgress",e[e.Success=3]="Success",e[e.Failed=4]="Failed"})(uu||(uu={}));const xk=async e=>D({url:$(`${I}/api/cerebro/v1/amazon/search/history/${e.id}/status`,{}),method:"GET",useSessionAccountId:!0,showError:!0}),bk=async e=>D({url:$(`${I}/api/cerebro/v1/amazon/search/history`,{}),params:e,method:"POST",useSessionAccountId:!0}),ps=Ct("historicalData",{moduleId:"cerebro",showDemo:!1}),Bs=L("clearHistoricalSearch"),Uc=L("clearHistoricalSelectedValues"),ya=(e,t)=>String(e).padStart(t,"0"),fk=async({isDemo:e,...t})=>(await D({url:$(`${I}/api/cerebro/v1/amazon/history/chart${e?"/demo":""}`,{...t},{arrayFormat:"index"}),method:"GET",useSessionAccountId:!0,showError:!1})).data,$h=L("periodRange/set"),Sk=Se("periodRange/atom","last24",e=>{e($h,(t,n)=>n)}),ms={set:$h,atom:Sk},Ph=L("historicalDataSelectedProductDrawer/set"),yk=Se("historicalDataSelectedProductDrawer",null,e=>{e(Ph,(t,n)=>n),e(Bs,()=>null),e(Uc,()=>null)}),It={atom:yk,actions:{set:Ph}},Bh=L("historicalDataSelectedPeriodDrawer/set",({period:e,trackEvent:t})=>{e!=null&&t&&H({eventName:"Historical Graph Clicked",eventProperties:{period:e,trigger:"month_clicked"}})}),jk=Se("historicalDataSelectedPeriodDrawer",null,e=>{e(Bh,(t,{period:n})=>n),e(Bs,()=>null),e(Uc,()=>null),e(ms.set,()=>null),e(It.actions.set,()=>null)}),Wt={atom:jk,actions:{set:Bh}},Kc=["elite","diamond"],Ci=Qt(()=>({data:{balance:0,total:0}})),Mh=Jt(Ci,"data",async e=>{const{results:t}=await ui({moduleId:"cerebro-historical"});return t}),kk=Jt(Ci,"data",async e=>{const{results:t}=await ui({moduleId:"cerebro-historical"});return t}),Rh=e=>{const t=vo(Me.getState());Kc.includes(t||"free")&&e()},Tk=()=>{Rh(Mh.action)},zl=()=>{Rh(kk.action)},_t=[Ie.dataVisualizationColors.orange,Ie.dataVisualizationColors.darkPurple,Ie.dataVisualizationColors.violet,Ie.dataVisualizationColors.pink,Ie.dataVisualizationColors.lightPurple,Ie.dataVisualizationColors.peach,Ie.dataVisualizationColors.mossGreen,Ie.dataVisualizationColors.teal,Ie.dataVisualizationColors.mintGreen,Ie.dataVisualizationColors.sunshineYellow,Ie.dataVisualizationColors.teal],vk={organic:_t[0],sponsored:_t[1],"section-amazons-choice":_t[2],"section-highly-rated":_t[3],"section-sponsored-brand-header":_t[4],"section-editorial-recommendations":_t[5],"section-sponsored-video":_t[6],"top-rated-from-our-brand":_t[7],"section-trending-now":_t[8],ppc:_t[9]},Fh=[Ie.dataVisualizationColors.darkPurple,Ie.dataVisualizationColors.violet,Ie.dataVisualizationColors.orange,Ie.dataVisualizationColors.pink,Ie.dataVisualizationColors.lightPurple,Ie.dataVisualizationColors.peach,Ie.dataVisualizationColors.mossGreen,Ie.dataVisualizationColors.teal,Ie.dataVisualizationColors.mintGreen,Ie.dataVisualizationColors.sunshineYellow],Dh={last3:2,last6:5,last12:11,last24:23},Gc=L("getHistoricalSummaryAction",({sendRequest:e,reaction:t},{getState:n,dispatch:s})=>{var j;const r=n(Ve).params,a=((j=r==null?void 0:r.products)==null?void 0:j.map(f=>f.asin))||[],i=ce("domain",(r==null?void 0:r.marketplace)||"amazon.com").store,u=Dt(new Date),d=`${u.getFullYear()}-${ya(u.getMonth()+1,2)}-${u.getDate()}`,p=mt(Lt(u,Dh.last24*-1)),m=`${p.getFullYear()}-${ya(p.getMonth()+1,2)}-${ya(p.getDate(),2)}`,g={products:a,marketplace:i,periodFrom:m,periodTo:d,isDemo:(r==null?void 0:r.demo)||!1,excludeVariations:Number((r==null?void 0:r.excludeVariations)??!1)},x=n(hs.atom).payload,S=JSON.stringify(g)!==JSON.stringify(x);S&&e&&s(hs.actions.pending(g)),t==null||t(S)}),Ai={organic:"organic",sponsored:"paid",ppc:"organic","section-editorial-recommendations":"organic","section-amazons-choice":"organic","section-highly-rated":"paid","section-sponsored-brand-header":"paid","section-sponsored-video":"paid","top-rated-from-our-brand":"organic","section-trending-now":"paid"},Ck=(e,t,n,s)=>{const a=Dt(new Date),i=new Date(a.getTime()),l=mt(Lt(i,Dh[n]*-1)),u=l.getFullYear()*100+l.getMonth(),d=e.filter(x=>(t?x.asin===t:!0)&&x.eventMonth>u&&(s!=="all"?Ai[x.matchType]===s:!0)).sort((x,S)=>x.eventMonth-S.eventMonth).map(x=>({...x,eventDate:`${Math.trunc(x.eventMonth/100)}-${ya(x.eventMonth%100,2)}`})),p=Object.keys(Es(d,x=>x.eventDate)),m=Object.entries(Es(d,x=>x.asin)).map(([x,S])=>{const j=Es(S,f=>f.eventDate);return{asin:x,data:p.map(f=>{var v;return((v=j[f])==null?void 0:v.reduce((k,y)=>k+y.count,0))||0})}}),g=Object.entries(Es(d,x=>x.matchType)).map(([x,S])=>{const j=Es(S,f=>f.eventDate);return{matchType:x,data:p.map(f=>{var v;return((v=j[f])==null?void 0:v.reduce((k,y)=>k+y.count,0))||0})}});return{eventDates:p,asins:m,matchTypes:g}},hs=he("getHistoricalSummary",e=>fk(e),{fulfilledReaction:(e,{getState:t})=>{var s;!((s=t(Ve).params)==null?void 0:s.demo)&&zl()},rejectedReaction:({params:e,fetchError:t},{dispatch:n})=>{var s;if((t==null?void 0:t.responseStatus)===429){const r=(s=Xe.getState().translation)==null?void 0:s.t;n(ps.close({})),r&&Be.error(o.jsxs("div",{children:[o.jsx(hr,{children:r("historicalData.notifications.willExceedLimit.title")}),o.jsx(gr,{children:r("historicalData.notifications.willExceedLimit.text",{productsCount:e.products.length})})]}))}}}),Ih=L("setKeywordsTypeCategorySwitch"),Wh=Se("keywordsTypeCategorySwitchAtom","all",e=>{e(Ih,(t,n)=>n)}),Ak=[],Zc=R("historicalSummarySelector",ie([hs.atom,It.atom,ms.atom,Wh]),([e,t,n,s])=>Ck(e.content||Ak,(t==null?void 0:t.asin)||null,n,s)),Oh=R("historicalTrendCategoriesSelector",Zc,e=>(e==null?void 0:e.eventDates)||[]),wk=R("distributionByKeywordTypeSelector",Zc,e=>(e==null?void 0:e.matchTypes.map(t=>({name:t.matchType,color:vk[t.matchType]||_t[9],data:t.data})))||[]),$k=R("distributionByProductsSelector",ie([Zc,hs.atom]),([e,t])=>{var n;return((n=e==null?void 0:e.asins)==null?void 0:n.map(s=>{var r;return{name:s.asin,color:Fh[((r=t.payload)==null?void 0:r.products.indexOf(s.asin))||0],data:s.data}}))||[]}),zh=L("setDistributionSwitch",e=>{e==="keywordType"?(H({eventName:"Keyword Type Clicked"}),H({eventName:"Historical Graph Clicked",eventProperties:{trigger:"keyword_type_clicked"}})):e==="products"&&(H({eventName:"Products Clicked"}),H({eventName:"Historical Graph Clicked",eventProperties:{trigger:"products_type_clicked"}}))}),Ms=Se("distributionSwitchAtom","keywordType",e=>{e(zh,(t,n)=>n)}),Pk=L("setKeywordsProductsSwitch",e=>{e==="keywordsCount"?H({eventName:"Keyword Count Clicked"}):e==="searchVolume"&&H({eventName:"Search Volume Clicked"})}),Nh=Se("searchVolumeKeywordCountsSwitchAtom","keywordsCount",e=>{e(Pk,(t,n)=>n)}),Vh=L("setAbsolutePercentSwitch",e=>{e==="absolute"&&H({eventName:"Historical Graph Clicked",eventProperties:{trigger:"number_clicked"}}),e==="percent"&&H({eventName:"Historical Graph Clicked",eventProperties:{trigger:"percentage_clicked"}})}),Rs=Se("absolutePercentSwitchAtom","absolute",e=>{e(Vh,(t,n)=>n)}),_h=R("historicalTrendGraphDataSelector",ie([Ms,Rs,wk,$k]),([e,t,n,s])=>{var i;const r=((i=Xe.getState().translation)==null?void 0:i.t)||(l=>l);let a=e==="keywordType"?n.map(l=>({...l,name:r(`historicalData.legend.byTypes.${l.name}.title`),field:l.name})):s;return t==="percent"&&(a=a[0].data.reduce((l,u,d)=>{const p=a.reduce((m,g)=>m+(g.data[d]||0),0);return l.forEach(m=>m.data[d]=m.data[d]*100/p),l},JSON.parse(JSON.stringify(a)))),e==="keywordType"?a:Bk(a,r)}),pu=10,Bk=(e,t)=>{if(e.length<=pu)return e;{const s=e.map(i=>({name:i.name,value:i.data[i.data.length-1]})).sort((i,l)=>l.value-i.value).slice(0,pu-1).map(i=>i.name),r=e.filter(i=>s.includes(i.name)).map(i=>({...i,field:i.name})),a=e.filter(i=>!s.includes(i.name)).reduce((i,l)=>({...i,data:i.data.map((u,d)=>u+(l.data[d]||0)),hiddenProducts:[...i.hiddenProducts??[],{name:l.name??"",data:l.data}]}),{field:"other",name:t("historicalData.legend.other"),color:Ie.dataVisualizationColors.sunshineYellow,data:[...new Array(e[0].data.length||0)].map(()=>0),hiddenProducts:[]});return[...r,a].map((i,l)=>({...i,color:Fh[l]}))}},Mk=R("historicalTrendGraphDataSelector",ie([Ms,Rs,Nh,_h,Oh,Wt.atom]),([e,t,n,s,r,a])=>{var p;const i=((p=Xe.getState().translation)==null?void 0:p.t)||(m=>m),l=a?r.indexOf(a):null,u=a?Number(a.replace("-","")):202212;let d;return e==="keywordType"?d=s.map(({name:m,field:g,color:x,data:S,hiddenProducts:j})=>({name:m||"",color:x,data:S,tooltip:g==="amazonRecommended"?i(`historicalData.legend.byTypes.${g}.tooltips.${n}`):void 0,value:l!==null?S[l]:0,hideValue:l===null,isPercent:t==="percent",hiddenProducts:j?j.map(f=>({...f,data:l!=null?f.data[l]:null})):void 0})):d=s.map(({name:m,color:g,data:x,hiddenProducts:S})=>({name:m||"",color:g,data:x,value:l!==null?x[l]:0,hideValue:l===null,isPercent:t==="percent",hiddenProducts:S?S.map(j=>({...j,data:l!=null?j.data[l]:null})):void 0})),u<202212&&e==="keywordType"?d.filter(m=>m.value):d}),Rk=R(ie([Ms,Rs,Wt.atom]),([e,t,n])=>e==="keywordType"&&t==="absolute"&&n),wi=()=>{const{planGroup:e}=ne(),{isDemo:t}=ge(),n=Kc.includes(e),s=V("AMAZON","historicalSearch"),r=Mh().status,{balance:a,total:i}=Ci(l=>l.data);return h.useMemo(()=>({showCounter:n&&r==="loaded"&&!t,locked:s&&!t,disabled:n&&a===0&&!t,total:i,balance:a}),[a,t,s,n,r,i])},Fk=()=>{const{planGroup:e}=ne(),t=Kc.includes(e),n=h.useCallback(()=>{if(t)return Tk()},[t]);h.useEffect(n,[n])},Eh=(e,t)=>{const{t:n}=T(),{balance:s}=wi(),r=b(Ve,l=>{var u;return(((u=l.params)==null?void 0:u.products)||[]).length},[]),a=b(It.atom,l=>(l==null?void 0:l.asin)!=null,[]),{isDemo:i}=ge();return C(()=>Gc({sendRequest:!1,reaction:l=>{const d=!i&&(!t&&a?1:r)>s&&(t&&l||!t);e(d)}}),[t,s,e,r,n,i])},Dk=L("getHistoricalDataActionWithLimitCheck",({onSuccess:e,isChartButton:t},{getState:n,dispatch:s})=>{var d,p,m,g;const r=(d=Bf.getState().translation)==null?void 0:d.t,a=n(W0),i=Ci.getState().data.balance,l=(((m=(p=n(Ve))==null?void 0:p.params)==null?void 0:m.products)||[]).length,u=((g=n(It.atom))==null?void 0:g.asin)!=null;s(Gc({sendRequest:!1,reaction:x=>{const S=!t&&u?1:l;r&&!a&&S>i&&(t&&x||!t)?Be.error(o.jsxs("div",{children:[o.jsx(hr,{children:r("historicalData.notifications.willExceedLimit.title")}),o.jsx(gr,{children:r("historicalData.notifications.willExceedLimit.text",{productsCount:S})})]})):e()}}))}),to=({watch:e,getValues:t,atom:n,minmaxFields:s,initValue:r,additionStoredValues:a,skippedFields:i=[]})=>{e();const l=b(n,x=>JSON.stringify(gt({filter:ja({...x,...a||{}},i),minmaxFields:s,roundingSettings:{}})),[i]),u=JSON.stringify(gt({filter:ja(t(),i),minmaxFields:s,roundingSettings:{}})),d=JSON.stringify(gt({filter:ja(r,i),minmaxFields:s,roundingSettings:{}})),p=l===u,m=d===u,g=d!==l;return h.useMemo(()=>[p,m,g],[p,m,g])},ja=(e,t)=>!t||(t==null?void 0:t.length)===0?e:Object.entries(e).filter(([n])=>!t.includes(n)).reduce((n,[s,r])=>({...n,[s]:r}),{}),Lh=({filter:e,productIds:t})=>{const n={...e||{}},s=t&&t.length===1;return n.matchType&&(n.matchType=n.matchType.filter(r=>r!=="ppc")),s&&(n.rank&&n.rank.length>0&&(n.organicPosition=n.rank,delete n.rank),n.sponsoredAvg&&n.sponsoredAvg.length>0&&(n.sponsoredPosition=n.sponsoredAvg,delete n.sponsoredAvg)),n},Ik=async(e,t)=>{const{demo:n,filter:s,...r}=e,{id:a,...i}=t,l=Lh({filter:s,productIds:i.productIds}),u=n?`${I}/api/cerebro/v1/amazon/search/history/data/demo`:`${I}/api/cerebro/v1/amazon/search/history/${e.id}/data`;return D({url:$(u,{...eo({data:{...r,filter:l},minmaxFields:An,isExport:!1}),...n?i:{}},{arrayFormat:"bracket"}),method:"GET",useSessionAccountId:!0,showError:!0})},Tn=L("setTableStatusHistoricalData"),Yc=Se("tableStatusHistoricalData","loading",e=>{e(Tn,(t,n)=>n)}),vt=he("getHistoricalData",async({tableStatus:e},{getState:t,dispatch:n})=>{const s=t(Jc),r=t(Vt.atom).content,a=s!=null&&s.filter?ja(s.filter,s.skippedFilterFields):void 0,i=t(Bt.atom);return e&&n(Tn(e)),Ik({...s,filter:a,tableFilter:i,id:(s==null?void 0:s.searchId)||"0"},r)},{initialStatus:"init",rejectedReaction:(...e)=>{je(e[0].fetchError),e[1].dispatch(Tn("loaded")),ee.getState().setStatus("loaded")},fulfilledReaction:(e,{dispatch:t})=>{t(Tn("loaded")),ee.getState().setStatus("loaded")},reducers:e=>{e(us.addRequest.actions.pending,(t,n)=>{var s;return{...t,content:t.content?{...t.content,data:{...t.content.data,tableData:(s=t.content)==null?void 0:s.data.tableData.filter(r=>r.phraseId&&n.phrases.map(({id:a})=>a).indexOf(String(r.phraseId))===-1)}}:t.content}})}});R("historicalDataTableStatusSelector",vt.atom,e=>e.status==="init"||e.status==="loading"?"waiting":"loaded");const Wk=R("historicalDataTotalsSelector",vt.atom,e=>{var t,n;return((n=(t=e.content)==null?void 0:t.meta)==null?void 0:n.total)||0}),Bt=Hc({name:"historicalData",action:(e,{getState:t})=>{var r,a,i,l;const n=(a=(r=t(Ve))==null?void 0:r.params)==null?void 0:a.demo,s=(l=(i=t(Ve))==null?void 0:i.params)==null?void 0:l.onChangeTableFilter;return s&&s(e),n?vt.actions.pending({tableStatus:"loading"}):vt.actions.pending({tableStatus:"loading"})},isWalmart:!1,project:"cerebro"}),Ok=L("onFilterHistoricalData",(e,{dispatch:t})=>{t(Tn("waiting")),t(Bt.actions.setWithoutCheck(e))}),Qc=L("setHistoricalDataParams",async({searchId:e},{dispatch:t,getState:n})=>{var g;const{params:s,prevParams:r}=n(Ve),a=n(Wt.atom);if(e&&a!=null){const x=n(Bt.atom);t(Bt.actions.setWithoutCheck(x));return}const i=(r==null?void 0:r.filter)||{},l=(s==null?void 0:s.filter)||{};if(!e&&(l==null?void 0:l.timePeriod)!=null&&JSON.stringify(l==null?void 0:l.timePeriod)!==JSON.stringify(i==null?void 0:i.timePeriod)){t(Wt.actions.set({period:ke(l.timePeriod,"yyyy-MM"),trackEvent:!1})),t(Dk({onSuccess:()=>t(Vt.actions.pending()),isChartButton:!1}));return}const{timePeriod:u,...d}=i,{timePeriod:p,...m}=l;if(!e&&((g=s==null?void 0:s.filter)==null?void 0:g.timePeriod)!=null&&JSON.stringify(d)!==JSON.stringify(m)){const x=n(Bt.atom);t(Bt.actions.setWithoutCheck(x));return}}),Ve=Se("historicalDataParamsAtom",{prevParams:null,params:null},e=>{e(Qc,(t,n)=>n.searchId?{prevParams:t.prevParams,params:{...t.params,...n}}:{prevParams:t.params,params:{...t.params,...n}}),e(Bs,t=>({...t,prevParams:null}))}),Jc=R("historicalDataParamsSelector",Ve,e=>e.params),Xc=R("historicalDataMarketplaceData",Ve,e=>{var t,n;return(t=e.params)!=null&&t.marketplace?ce("domain",(n=e.params)==null?void 0:n.marketplace):ce("domain","amazon.com")}),qh=R("historicalDataMainAsinSelector",Ve,e=>{var t;return(((t=e.params)==null?void 0:t.products)||[]).reduce((n,s)=>s.main&&s.asin?s.asin:n,"")});function mu(e,t=2){let n=e.toString();for(;n.length<t;)n="0"+e;return n}const Vt=he("startHistoricalSearch",async(e,{getState:t,dispatch:n})=>{var v,k;const s=t(Wt.atom);if(!s)throw new Error("Incorrect period");ee.getState().setStatus("loading"),n(Tn("waiting"));const r=t(Ve).params,a=(v=t(It.atom))==null?void 0:v.asin,i=a?[a]:((k=r==null?void 0:r.products)==null?void 0:k.map(y=>y.asin))||[],l=ce("domain",(r==null?void 0:r.marketplace)||"amazon.com").store,u=s+"-01",[d,p]=s.split("-"),m=pk(Number(d),Number(p)),g=mu(m),x=new Date(s+"-"+g).getTime()<Date.now()?s+"-"+g:s+"-"+mu(new Date().getDate()),S=(r==null?void 0:r.excludeVariations)??!1;!(r!=null&&r.demo)&&zl();const j=r!=null&&r.demo?{data:{id:"1",productIds:i,marketplace:l,periodFrom:u,periodTo:x,excludeVariations:S}}:await bk({productIds:i,marketplace:l,periodFrom:u,periodTo:x,excludeVariations:S});let f=2;for(r!=null&&r.demo&&(f=3);f===2;){await Gl(600);const{data:y}=await xk({id:j.data.id});f=y.status}if(f===3)return j.data;throw Be.error("Incorrect asins"),new Error("Incorrect asins")},{fulfilledReaction:({result:e},{dispatch:t,getState:n})=>{const s=n(Ve).params;!(s!=null&&s.demo)&&zl(),t(us.getRequest.actions.pending({searchId:Number(e==null?void 0:e.id)})),t(Qc({searchId:e==null?void 0:e.id}))},rejectedReaction:({fetchError:e},{dispatch:t,getState:n})=>{var s,r,a;if(t(Tn("loaded")),ee.getState().setStatus("loaded"),(e==null?void 0:e.responseStatus)===402){const i=(s=Xe.getState().translation)==null?void 0:s.t;t(ps.close({}));const l=n(Ve).params,u=(r=n(It.atom))==null?void 0:r.asin,d=u?[u]:((a=l==null?void 0:l.products)==null?void 0:a.map(p=>p.asin))||[];i&&Be.error(o.jsxs("div",{children:[o.jsx(hr,{children:i("historicalData.notifications.willExceedLimit.title")}),o.jsx(gr,{children:i("historicalData.notifications.willExceedLimit.text",{productsCount:d.length})})]}))}},reducers(e){e(Bs,()=>({content:null,status:"init"}))},initialStatus:"init"}),ed=R("prevPeriodSelector",Vt.atom,e=>{var t,n;return((n=(t=e.content)==null?void 0:t.periodFrom)==null?void 0:n.slice(0,7))||null}),$i=R("prevProductsSelector",Vt.atom,e=>{var t,n,s;return(t=e.content)!=null&&t.productIds?((n=e.content)==null?void 0:n.productIds.length)>1?null:(s=e.content)==null?void 0:s.productIds[0]:null}),Hh=R("historicalSearchIsMultiSelector",$i,e=>e==null),zk=R("historicalSearchSelectedProductDataSelector",ie([$i,R(Ve,e=>{var t;return((t=e.params)==null?void 0:t.products)||[]})]),([e,t])=>e!=null&&t.filter(n=>n.asin===e)[0]||null),yt=R("showHistoricalDataSelector",Vt.atom,e=>e.status!=="init"),Nk=R(ie([yt,$i]),([e,t])=>e&&t!=null),td=R("historicalSearchIdSelector",Vt.atom,e=>{var t,n;return((t=e.content)==null?void 0:t.id)!=null?Number((n=e.content)==null?void 0:n.id):null}),Vk=(e,t)=>$(om,{productIds:e,marketplace:t},{arrayFormat:"index"}),_k=({asin:e})=>{const t=en(),n=b(Ue,i=>ce("domain",i||"amazon.com").store,[]),s=Me(vo),r=s!=="free"&&s!=="starter",a=()=>{n&&t(Vk([e],n))};return r?o.jsx(Ek,{size:"100",buttonType:"text",onClick:a,children:"Cerebro"}):o.jsx(o.Fragment,{children:"Cerebro"})},Ek=c(F)`
  padding: 0;
  min-height: 24px;
  font-size: 16px;
`,vn=L("setSearchStatus"),Pi=Se("searchStatus",!1,e=>{e(vn,(t,n)=>n)}),Gs=Ct("previousSearches",{},{reaction:e=>{e.type==="CLOSE"&&e.meta&&setTimeout(()=>{ee.getState().setStatus("loaded")},0)}}),Fs=({name:e,query:t,previousQuery:n,getResultUrl:s,isWalmart:r,skipCheckPrevious:a,tool:i,actionOnStart:l})=>{const u=he(`previous-${e}`,async({onSuccess:m,...g},{getState:x})=>{if(ee.getState().setStatus("loading"),a)return null;const{restrictions:S}=Uo(x);return Bn(S,r?"WALMART":"AMAZON","history")?null:n(g)},{fulfilledReaction:({params:m,result:g},{dispatch:x,getState:S})=>{const{navigate:j}=cr.getState();x(g?Gs.open({onNewSearch:()=>x(d.actions.pending(m)),onFromHistory:()=>{const f=S(ro.atom).id;j==null||j(s(Number(g.data.id))),f===g.data.id&&setTimeout(()=>ee.getState().setStatus("loaded"),0)}}):d.actions.pending(m))},rejectedReaction:(m,g)=>{var x,S;((x=m.fetchError)==null?void 0:x.responseStatus)!==404&&((S=m.fetchError)==null?void 0:S.responseStatus)!==403?je(m.fetchError):g.dispatch(d.actions.pending(m.params))}}),d=he(e,async({onSuccess:m,...g},{dispatch:x})=>{x(vn(!0)),ee.getState().setStatus("loading"),x(wt.startFakeProgress());const S=await t(g);return x(wt.stopFakeProgress()),S},{initialStatus:"init",fulfilledReaction:({params:{onSuccess:m},result:{data:{id:g}}},{dispatch:x})=>{l&&x(l()),x(vn(!1)),m(g)},rejectedReaction:({fetchError:m,params:g},{dispatch:x})=>{var j;x(wt.stopFakeProgress()),ee.getState().setStatus("init"),x(vn(!1));const S=Xe.getState().translation;if(S){const f=g.keyword;if((j=m==null?void 0:m.result)!=null&&j.errors&&m.result.errors.keyword&&f){Be.error(o.jsxs("div",{children:[o.jsx(hr,{children:S.t("magnet.asinInsteadOfKeywordError.title")}),o.jsxs(gr,{children:[S.t("magnet.asinInsteadOfKeywordError.text.part1",{asin:f})," ",o.jsx(_k,{asin:f})," ",S.t("magnet.asinInsteadOfKeywordError.text.part2")]})]}));return}let v=String(m==null?void 0:m.responseStatus);r&&i==="magnet"&&(m==null?void 0:m.responseStatus)===503&&(v="503Retry"),Be.error(S.t(`errors.common.${v}`))}}}),p=R(d.atom,m=>m.content);return{...d,actions:{...d.actions,requestPending:d.actions.pending,pending:u.actions.pending},contentSelector:p}},Uh=({name:e,query:t,statusQuery:n,previousQuery:s,isWalmart:r,skipCheckPrevious:a,actionOnStart:i})=>{const l=he(`previous-${e}`,async({onSuccess:p,...m},{getState:g})=>{if(ee.getState().setStatus("loading"),a)return null;const{restrictions:x}=Uo(g);return Bn(x,r?"WALMART":"AMAZON","history")?null:s(m)},{fulfilledReaction:({params:p,result:m},{dispatch:g})=>{m&&m.data.length>0?g(Gs.open({onNewSearch:()=>g(u.actions.pending(p)),onFromHistory:()=>g(u.actions.pending({...p,loadedFromHistory:!0}))})):g(u.actions.pending(p))},rejectedReaction:({fetchError:p})=>je(p)}),u=he(e,async({onSuccess:p,...m},{dispatch:g})=>(g(vn(!0)),ee.getState().setStatus("loading"),g(wt.set(.1)),t(m)),{initialStatus:"init",fulfilledReaction:async({params:{onSuccess:p},result:{data:{id:m}}},{dispatch:g})=>{try{let x=0;for(;x===0;){await Gl(1e3);const{data:S}=await n({id:m});g(wt.set(S.progress)),x=S.status}if(x!==2)i&&g(i()),g(wt.set(null)),p(m),g(vn(!1));else throw Be.error(`Incorrect ${r?"ID's":"asins"}`),new Error(`Incorrect ${r?"ID's":"asins"}`)}catch{ee.getState().setStatus("init"),g(vn(!1)),g(wt.set(null))}},rejectedReaction:(p,m)=>{var S;m.dispatch(wt.set(null)),ee.getState().setStatus("init");const g=(S=p.fetchError)==null?void 0:S.result,x=Xe.getState().translation;if(Lk(g)&&x)Be.error(g.message);else if(g&&g.errors&&x&&g.errorCode==="rta-0"){const{t:j}=x,f=Object.entries(g.errors).filter(([v])=>v!=="mainProductId").map(([v])=>{var k;return`${j("errorCodes.rta-2001",{asin:(k=p.params)==null?void 0:k.productIds[Number(v.split(".")[1]||0)]})}`}).join("<br/>");Be.error(f)}else je(p.fetchError)}}),d=R(u.atom,p=>p.content);return{...u,actions:{...u.actions,requestPending:u.actions.pending,pending:l.actions.pending},contentSelector:d}},Lk=e=>!Object.values(e.errors).length,Kh=async({productIds:e,marketplace:t})=>D({url:$(`${I}/api/cerebro/v1/search/multiple/previous-searches`,{productIds:e,marketplace:t},{arrayFormat:"bracket"}),method:"GET",useSessionAccountId:!0}),Gh=async e=>D({url:$(`${I}/api/cerebro/v1/search/single/previous-searches`,e),method:"GET",useSessionAccountId:!0}),qk=async({id:e})=>D({url:$(`${I}/api/cerebro/v1/amazon/search/multiple/${e}/status`,{id:e}),method:"GET",useSessionAccountId:!0}),Hk=async({id:e})=>D({url:$(`${I}/api/cerebro/v1/walmart/search/multiple/${e}/status`,{id:e}),method:"GET",useSessionAccountId:!0}),Uk=async e=>D({url:$(`${I}/api/cerebro/v1/amazon/search/multiple`,{}),method:"POST",params:e,useSessionAccountId:!0}),Kk=async e=>D({url:$(`${I}/api/cerebro/v1/amazon/search/single`,{}),method:"POST",params:e,useSessionAccountId:!0}),Gk=async e=>D({url:$(`${I}/api/cerebro/v1/walmart/search/multiple`,{}),method:"POST",params:e,useSessionAccountId:!0}),Zk=async e=>D({url:$(`${I}/api/cerebro/v1/walmart/search/single`,{}),method:"POST",params:e,useSessionAccountId:!0}),od=Fs({name:"postCerebroAmazonSingleSearch",query:Kk,previousQuery:Gh,getResultUrl:e=>$(`${me()}/amazon/view/${e}`,{}),tool:"cerebro",actionOnStart:Vt.actions.clear}),Zh=Uh({name:"postCerebroAmazonMultipleSearch",query:Uk,statusQuery:qk,previousQuery:Kh,actionOnStart:Vt.actions.clear}),Yh=Fs({name:"postCerebroWalmartSingleSearch",query:Zk,previousQuery:Gh,getResultUrl:e=>$(`${me()}/walmart/view/${e}`,{}),isWalmart:!0,tool:"cerebro"}),Qh=Uh({name:"postCerebroWalmartMultipleSearch",query:Gk,statusQuery:Hk,previousQuery:Kh,isWalmart:!0}),Jh=L("startCerebroSearch",({asins:e,marketplace:t,excludeVariations:n=!1},{getState:s,dispatch:r})=>{const a=t?ce("store",t):s(st),i=(a==null?void 0:a.platform)||"AMAZON";if(s(Sr)[i]===0){r(we.open({platform:i,restriction:"uses",trigger:"Search Uses Left"}));return}if(e.length>1){const{restrictions:d}=Uo(s);if(Bn(d,i,"multiSearch")){r(we.open({platform:i,restriction:"multiSearch",trigger:"MultiSearch isn't available"}));return}}const{navigate:u}=cr.getState();a&&a.domain.includes("amazon")?e.length===1?r(od.actions[t?"requestPending":"pending"]({marketplace:a.store,productId:e[0]||"",adminSearch:!1,exactProduct:n,onSuccess:d=>{u==null||u($(`${me()}/amazon/view/${d}`,{}))}})):r(Zh.actions[t?"requestPending":"pending"]({marketplace:a.store,mainProductId:e[0],productIds:e,adminSearch:!1,exactProduct:n,onSuccess:d=>{u==null||u($(`${me()}/amazon/view-multi-search/${d}`,{}))}})):a&&a.domain.includes("walmart")&&(e.length===1?r(Yh.actions[t?"requestPending":"pending"]({marketplace:a.store,productId:e[0]||"",adminSearch:!1,exactProduct:n,onSuccess:d=>{u==null||u($(`${me()}/walmart/view/${d}`,{}))}})):r(Qh.actions[t?"requestPending":"pending"]({marketplace:a.store,mainProductId:e[0],productIds:e,adminSearch:!1,exactProduct:n,onSuccess:d=>{u==null||u($(`${me()}/walmart/view-multi-search/${d}`,{}))}})))}),Cr=e=>t=>({href:mo("AM",e,t.asin),title:t.title,imageSrc:t.imageUrl,asin:t.asin,id:t.asin,main:t.main}),Ar=e=>({href:mo("WM","WALMART_US",e.productId||e.walmartItemId||e.asin),title:e.title,imageSrc:e.imageUrl,walmartItemId:e.productId||e.walmartItemId||e.asin,id:e.productId||e.walmartItemId||e.asin,main:e.main}),Yk=e=>e.map(Ar),Qk=async({id:e,demo:t})=>D({url:$(`${I}/api/cerebro/v1/amazon/search/multiple/${t?"demo/":""}${e}`,{}),method:"GET",useSessionAccountId:!0}),Jk=async e=>{const{demo:t,currency:n,...s}=e;return D({url:$(`${I}/api/cerebro/v1/amazon/search/multiple/${t?"demo/":""}${s.id}/data`,eo({data:s,minmaxFields:An,priceFields:[ue],currency:n,isExport:!1}),{arrayFormat:"bracket"}),method:"GET",useSessionAccountId:!0,showError:!0})},J=an({name:"cerebro/amazon/multiple",table:{getDataQuery:Jk,getExportDataQuery:uk,putExportedKeywordsQuery:vi,phraseIdKey:"phraseId",phraseKey:"phrase"},sponsoredColumn:{createTaskQuery:yi,getTaskDataQuery:ki,getDataQuery:ji},search:{postSelector:Zh.contentSelector,getSearchData:Qk},temporarilyRemovedController:ot,initFilterValue:Pt,minmaxFields:An,disableFilterReactionsSelector:yt,mainProductIdExtractionFunction:e=>{var t,n;return(n=(t=e==null?void 0:e.filter(s=>s.main))==null?void 0:t[0])==null?void 0:n.asin},priceFields:[ue]}),Yn=R(ie([J.dataRequest.atom,J.selectors.search]),([e,t])=>{var n;return(n=e.content)!=null&&n.data.productDetails&&(t!=null&&t.marketplace)?e.content.data.productDetails.map(s=>Cr(t==null?void 0:t.marketplace)(s)):null});R(ie([J.dataRequest.atom,J.selectors.search]),([e,t])=>{var n;return(n=e.content)!=null&&n.data.fbtProducts&&(t!=null&&t.marketplace)?e.content.data.fbtProducts.map(Cr(t==null?void 0:t.marketplace)):null});const Xk=R(ie([J.dataRequest.atom,J.selectors.search]),([e,t])=>{var n;return{marketplace:(t==null?void 0:t.marketplace)||"",asinList:((n=e.content)==null?void 0:n.data.productDetails.map(({asin:s})=>s))||[]}}),eT=R(ie([J.dataRequest.atom,J.searchRequest.atom]),([e,t])=>{var s,r,a;const n=((s=t.content)==null?void 0:s.data.marketplace)||null;return(r=e.content)!=null&&r.data?(a=e.content)==null?void 0:a.data.productDetails.map(({asin:i,title:l,imageUrl:u,main:d})=>({asin:i,title:l,imageSrc:u,href:mo("AM",n,i),main:d})):[]});R(ie([J.dataRequest.atom,J.selectors.search]),([e,t])=>{var n;return{marketplace:(t==null?void 0:t.marketplace)||"",asinList:((n=e.content)==null?void 0:n.data.productDetails.map(({asin:s})=>s))||[]}});const tT=R(J.dataRequest.atom,e=>{var t;return((t=e.content)==null?void 0:t.data.productDetails)||[]}),oT=R(tT,e=>e.filter(({main:t})=>!t).map(({asin:t})=>t)),nT=async e=>{const{demo:t,currency:n,...s}=e;return D({url:$(`${I}/api/cerebro/v1/amazon/search/single/${t?"demo/":""}${e.id}/exported-data`,eo({data:s,minmaxFields:is,priceFields:[ue],currency:n,isExport:!0}),{arrayFormat:"bracket"}),method:"GET",useSessionAccountId:!0})},sT=async e=>{const t=e.demo?"demo/":"";return D({url:$(`${I}/api/cerebro/v1/amazon/search/single/${t}${e.id}`,{}),method:"GET",useSessionAccountId:!0})},rT=async e=>{const{demo:t,currency:n,...s}=e;return D({url:$(`${I}/api/cerebro/v1/amazon/search/single/${t?"demo/":""}${e.id}/data`,eo({data:s,minmaxFields:is,priceFields:[ue],currency:n,isExport:!1}),{arrayFormat:"bracket"}),method:"GET",useSessionAccountId:!0,showError:!0})},oe=an({name:"cerebro/amazon/single",table:{getDataQuery:rT,getExportDataQuery:nT,putExportedKeywordsQuery:vi,phraseIdKey:"phraseId",phraseKey:"phrase"},sponsoredColumn:{createTaskQuery:yi,getTaskDataQuery:ki,getDataQuery:ji},search:{postSelector:od.contentSelector,getSearchData:sT},temporarilyRemovedController:ot,initFilterValue:Pt,minmaxFields:is,disableFilterReactionsSelector:yt,mainProductIdExtractionFunction:e=>e.asin,priceFields:[ue]}),hu=R(ie([oe.dataRequest.atom,oe.selectors.search]),([e,t])=>{var n;return(n=e.content)!=null&&n.data.productDetails&&(t!=null&&t.marketplace)?[Cr(t==null?void 0:t.marketplace)(e.content.data.productDetails)]:null});R(ie([oe.dataRequest.atom,oe.selectors.search]),([e,t])=>{var n;return(n=e.content)!=null&&n.data.fbtProducts&&(t!=null&&t.marketplace)?e.content.data.fbtProducts.map(Cr(t==null?void 0:t.marketplace)):null});const aT=R(ie([oe.dataRequest.atom,oe.selectors.search]),([e,t])=>{var n,s,r,a;return{marketplace:(t==null?void 0:t.marketplace)||"",asinList:(r=(s=(n=e.content)==null?void 0:n.data)==null?void 0:s.productDetails)!=null&&r.asin?[(a=e.content)==null?void 0:a.data.productDetails.asin]:[]}}),Xh=R(oe.dataRequest.atom,e=>{var t;return((t=e.content)==null?void 0:t.data.productDetails.asin)||null}),er=["iq","impressionExact30","wordsCount","resultsNumber","exactTitleMatchProductsCount","searchVolumeTrend30","monthlySales","clickShareRate","conversionShareRate","searchFrequencyRank",ue],gs=[...er,"rank","relativeRank","sponsoredAvg","sponsoredCount","amzSuggestedAvg","amzSuggestedCount","competitiveAvg","rankingCompetitors","competitorPerformanceScore","considerRankAsin","considerRank"],xs=["amazonSearchVolume","wordsCount","resultsNumber","quantitativeSearchVolume",ue],tr=[...xs],$o=({data:{id:e,tableFilter:t,filter:n},minmaxFields:s,priceFields:r,roundingSettings:a={},isExport:i})=>({...t?Ti(t,i):{},...n?gt({filter:n,minmaxFields:s,priceFields:r,roundingSettings:a}):{}}),eg=async e=>{const{demo:t,...n}=e,s=t?"/demo":"";return D({url:$(`${I}/api/magnet/v1/amazon/search/multiple/${e.id}/export${s}`,$o({data:n,minmaxFields:gs,priceFields:[ue],isExport:!0}),{arrayFormat:"bracket"}),method:"GET",useSessionAccountId:!0})},Bi=async(e,t)=>{const{demo:n,...s}=e;return D({url:$(`${I}/api/magnet/v1/search/${n?"demo/":""}${e.id}/exported-keywords`,{}),method:"PUT",params:$o({data:s,minmaxFields:t,isExport:!0}),useSessionAccountId:!0})},Go={wordsCount:[],searchVolume:[],resultsNumber:[],matchType:[],amazonOnly:!1,amazonChoice:[],include:"any",phrase:"",exclude:"",clickShareRate:[],conversionShareRate:[],cpc:[],exactTitleMatchProductsCount:[],impressionExact30:[],monthlySales:[],searchVolumeTrend30:[],iq:[]},Zo={monthlySales:[],matchType:[],amazonChoice:[],quantitativeSearchVolume:[],amazonSearchVolume:[],wordsCount:[],resultsNumber:[],bestSeller:!1,include:"any",phrase:"",exclude:""},tg=async e=>D({url:$(`${I}/api/magnet/v1/search/multiple/previous-searches`,{},{arrayFormat:"bracket"}),params:e,method:"POST",useSessionAccountId:!0}),og=async e=>D({url:$(`${I}/api/magnet/v1/search/single/previous-searches`,e),method:"GET",useSessionAccountId:!0}),iT=async e=>D({url:$(`${I}/api/magnet/v1/amazon/search/multiple`,{}),method:"POST",params:e,useSessionAccountId:!0}),lT=async e=>D({url:$(`${I}/api/magnet/v1/amazon/search/single`,{}),method:"POST",params:e,useSessionAccountId:!0}),cT=async e=>D({url:$(`${I}/api/magnet/v1/walmart/search/multiple`,{}),method:"POST",params:e,useSessionAccountId:!0}),dT=async e=>D({url:$(`${I}/api/magnet/v1/walmart/search/single`,{}),method:"POST",params:e,useSessionAccountId:!0}),ng=Fs({name:"postMagnetAmazonSingleSearch",query:lT,previousQuery:og,getResultUrl:e=>$(`${me()}/amazon/view/${e}`,{}),tool:"magnet"}),sg=Fs({name:"postMagnetAmazonMultipleSearch",query:iT,previousQuery:tg,getResultUrl:e=>$(`${me()}/amazon/view-multi-search/${e}`,{}),tool:"magnet"}),rg=Fs({name:"postMagnetWalmartSingleSearch",query:dT,previousQuery:og,getResultUrl:e=>$(`${me()}/walmart/view/${e}`,{}),isWalmart:!0,tool:"magnet"}),ag=Fs({name:"postMagnetWalmartMultipleSearch",query:cT,previousQuery:tg,getResultUrl:e=>$(`${me()}/walmart/view-multi-search/${e}`,{}),isWalmart:!0,tool:"magnet"}),nd=L("startMagnetSearch",({keywords:e,marketplace:t},{getState:n,dispatch:s})=>{const r=e.map(p=>p.toLowerCase()),a=t?ce("store",t):n(st),i=(a==null?void 0:a.platform)||"AMAZON",l=n(Sr)[i]===0,u=n(cs.atom);if(l){s(we.open({platform:i,restriction:"uses",trigger:"Search Uses Left"}));return}if(u==="multiple"){const{restrictions:p}=Uo(n);if(Bn(p,i,"multiSearch")){s(we.open({platform:i,restriction:"multiSearch",trigger:"MultiSearch isn't available"}));return}}const{navigate:d}=cr.getState();a&&a.domain.includes("amazon")?s(u==="single"?ng.actions[t?"requestPending":"pending"]({marketplace:a.store,keyword:r[0]||"",adminSearch:!1,onSuccess:p=>{d==null||d($(`${me()}/amazon/view/${p}`,{}))}}):sg.actions[t?"requestPending":"pending"]({marketplace:a.store,keywords:r,adminSearch:!1,onSuccess:p=>{d==null||d($(`${me()}/amazon/view-multi-search/${p}`,{}))}})):a&&a.domain.includes("walmart")&&s(u==="single"?rg.actions[t?"requestPending":"pending"]({marketplace:a.store,keyword:e[0]||"",adminSearch:!1,onSuccess:p=>{d==null||d($(`${me()}/walmart/view/${p}`,{}))}}):ag.actions[t?"requestPending":"pending"]({marketplace:a.store,keywords:r,adminSearch:!1,onSuccess:p=>{d==null||d($(`${me()}/walmart/view-multi-search/${p}`,{}))}}))}),uT=async({id:e,demo:t})=>D({url:$(`${I}/api/magnet/v1/amazon/search/multiple/${t?"demo/":""}${e}`,{}),method:"GET",useSessionAccountId:!0}),pT=async e=>{const t=e.demo?"/demo":"";return D({url:$(`${I}/api/magnet/v1/amazon/search/multiple/${e.id}/results${t}`,$o({data:e,minmaxFields:gs,priceFields:[ue],isExport:!1}),{arrayFormat:"bracket"}),method:"GET",useSessionAccountId:!0})},Qe=an({name:"magnet/amazon/multiple",table:{getDataQuery:pT,getExportDataQuery:eg,putExportedKeywordsQuery:Bi,phraseIdKey:"phraseId",phraseKey:"phrase"},sponsoredColumn:{createTaskQuery:yi,getTaskDataQuery:ki,getDataQuery:ji},search:{postSelector:sg.contentSelector,getSearchData:uT},temporarilyRemovedController:Tt,isMagnet:!0,initFilterValue:Go,minmaxFields:gs}),mT=R(Qe.dataRequest.atom,e=>{var t,n,s;return{...((t=e.content)==null?void 0:t.data.avgValues)||{},totalKeywords:(n=e.content)==null?void 0:n.data.totalCount,totalSearchVolume:(s=e.content)==null?void 0:s.data.totalExact}}),hT=R(Qe.dataRequest.atom,e=>{var t;return((t=e.content)==null?void 0:t.data.chartData)||[]});R(ie([Qe.dataRequest.atom,Qe.selectors.search]),([e,t])=>{var n;return{marketplace:(t==null?void 0:t.marketplace)||"",asinList:((n=e.content)==null?void 0:n.data.productDetails.map(({asin:s})=>s))||[]}});const ig=async e=>{const{demo:t,...n}=e,s=`/api/magnet/v1/amazon/search/single/${e.id}/export`,r=`/api/magnet/v1/amazon/search/single/demo/${e.id}/exported-data`;return D({url:$(`${I}${t?r:s}`,$o({data:n,minmaxFields:er,priceFields:[ue],isExport:!0}),{arrayFormat:"bracket"}),method:"GET",useSessionAccountId:!0})},gT=async e=>{const t=e.demo?"demo/":"";return D({url:$(`${I}/api/magnet/v1/amazon/search/single/${t}${e.id}`,{}),method:"GET",useSessionAccountId:!0})},xT=async e=>{const t=`/api/magnet/v1/amazon/search/single/${e.id}/results`,n=`/api/magnet/v1/amazon/search/single/demo/${e.id}/data`,s=e.demo?n:t;return D({url:$(`${I}${s}`,$o({data:e,minmaxFields:gs,priceFields:[ue],isExport:!1}),{arrayFormat:"bracket"}),method:"GET",useSessionAccountId:!0})},Ee=an({name:"magnet/amazon/single",table:{getDataQuery:xT,getExportDataQuery:ig,putExportedKeywordsQuery:Bi,phraseIdKey:"phraseId",phraseKey:"phrase"},sponsoredColumn:{createTaskQuery:yi,getTaskDataQuery:ki,getDataQuery:ji},search:{postSelector:ng.contentSelector,getSearchData:gT},temporarilyRemovedController:Tt,isMagnet:!0,initFilterValue:Go,minmaxFields:er}),bT=R(Ee.dataRequest.atom,e=>{var t,n,s,r,a;return(t=e.content)!=null&&t.data.seedKeyword?{keyword:(n=e.content)==null?void 0:n.data.seedKeyword.phrase,searchVolume:(s=e.content)==null?void 0:s.data.seedKeyword.impressionExact30,magnetIQScore:(r=e.content)==null?void 0:r.data.seedKeyword.iq,cpr:(a=e.content)==null?void 0:a.data.seedKeyword.newCprExact}:{}}),fT=R(ie([Ee.dataRequest.atom,st]),([e,t])=>{var n;return(n=e.content)!=null&&n.data.top3Asins?Object.keys(e.content.data.top3Asins||{}).map(s=>{var r;return(((r=e.content)==null?void 0:r.data.top3Asins)||{})[s]}).map(({image:s,...r})=>({imageUrl:s,...r,main:!1})).map(Cr((t==null?void 0:t.store)||"")):null}),ST=R(Ee.dataRequest.atom,e=>{var t;return((t=e.content)==null?void 0:t.data.searchResultsCount)||{}}),yT=R(Ee.searchRequest.atom,e=>{var t;return((t=e.content)==null?void 0:t.data.marketplace)||bt("AM","domain","amazon.com").store}),jT=R(ie([Ee.dataRequest.atom,Ee.selectors.search]),([e,t])=>{var n,s,r,a;return{marketplace:(t==null?void 0:t.marketplace)||"",asinList:(r=(s=(n=e.content)==null?void 0:n.data)==null?void 0:s.productDetails)!=null&&r.asin?[(a=e.content)==null?void 0:a.data.productDetails.asin]:[]}}),wn=Ct("ABADChartModal",{}),kT=({asin:e,phraseId:t,domain:n})=>C(()=>wn.open({asin:e,phraseId:t,domain:n}),[e,t,n]),Po=R("ABADMarketplaceInfoSelector",ie([wn.atom,Ze.atom,oe.searchRequest.atom,J.searchRequest.atom,Ee.searchRequest.atom,Qe.searchRequest.atom]),([e,t,n,s,r,a])=>{var x;const i=e.data.domain;if(i!=null)return ce("domain",i);const l=t.data.marketplace;if(l!=null)return ce("domain",l);const u=t.data.type,d=u==="single"?n:s,p=u==="single"?r:a,g=(x=(t.data.moduleId==="keywordresearch"?p:d).content)==null?void 0:x.data.marketplace;return g?bt("AM","store",g):bt("AM","TLDomain","com")}),wr=({type:e,moduleId:t})=>{const{t:n}=T(),s=Tr(),r=V("AMAZON","brandAnalytics"),{isDemo:a}=ge(),i=r&&!a||!s,l=C(()=>r?Nt({trigger:"ABA Total Click/Conv. Share",tool:t==="keywordresearch"?"Magnet":"Cerebro",isABA:!0}):s?lg({project:"cerebro"}):Wl({sendSegmentEvent:!1,moduleId:t}),[s,t,r]),u=Me(f=>{var v;return(v=f.checkLogin)==null?void 0:v.basePlan}),d=u==="Helium10_Entrepreneur_Cn"||u==="Helium10_Entrepreneur_Cn_Annual",p=C(f=>fh(f),[]),m=b(Po).id,g=b(Ah),x=b(vr),S=C(f=>{if(s){if(f.phraseId)return Sh({phraseId:f.phraseId,marketplaceId:m,...g,reportingRange:x,platinumParams:f})}else return Wl({sendSegmentEvent:!0,moduleId:t})},[g,x,m,s,t]);b(Ec),b(Lc);const j=Ps();return h.useMemo(()=>[{field:"clickShareRate",title:o.jsx(Pa,{title:o.jsx(gu,{dangerouslySetInnerHTML:{__html:n("cerebro.table.abad")}}),tooltip:n("abad.table.clickShare.tooltip.title"),lockedTooltip:n(`abad.table.clickShare.tooltip.${r?"restricted":"noTokens"}`,{upgradePlan:j}),locked:i,onClick:l}),sortable:!0,disableSorting:i,customCSS:xu,maxWidth:150,contentPosition:"right",settingsTitle:Da({title:n("cerebro.table.abad").replace("<br/>"," "),locked:d&&i}),defaultHidden:d&&i,render:f=>i?o.jsx(Js,{onClick:l,disabledChart:!0}):o.jsx(o.Fragment,{children:f.clickShareRate!=null?o.jsxs(o.Fragment,{children:[o.jsx(re,{content:n("cerebro.table.abadValueTooltip"),children:o.jsx("div",{children:N({value:f.clickShareRate,maximumFractionDigits:1})+"%"})}),o.jsx(xo,{onClick:()=>{const v={keyword:f.phrase,phraseId:Number(f.id),type:e,moduleId:t};d?S(v):p(v)}})]}):"N/A"}),exportTitle:n("cerebro.table.abad").replace("<br/>"," "),exportValue:f=>f.clickShareRate?Math.round(10*f.clickShareRate)/10:"",doNotExport:i},{field:"conversionShareRate",title:o.jsx(Pa,{title:o.jsx(gu,{dangerouslySetInnerHTML:{__html:n("cerebro.table.abadConv")}}),tooltip:n("abad.table.convShare.tooltip.title"),lockedTooltip:n(`abad.table.convShare.tooltip.${r?"restricted":"noTokens"}`,{upgradePlan:j}),locked:i,onClick:l}),sortable:!0,disableSorting:i,customCSS:xu,maxWidth:160,contentPosition:"right",settingsTitle:Da({title:n("cerebro.table.abadConv").replace("<br/>"," "),locked:d&&i}),defaultHidden:d&&i,render:f=>i?o.jsx(Js,{onClick:l,disabledChart:!0}):o.jsx(o.Fragment,{children:f.conversionShareRate!=null?N({value:f.conversionShareRate,maximumFractionDigits:1})+"%":"N/A"}),exportTitle:n("cerebro.table.abadConv").replace("<br/>"," "),exportValue:f=>f.conversionShareRate?Math.round(10*f.conversionShareRate)/10:"",doNotExport:i}],[n,r,j,i,l,d,e,t,p,S])},gu=c.div`
  white-space: nowrap;
`,xu=Z`
  display: flex;
  align-items: center;
  gap: ${e=>e.theme.spacing.sp8};
`,lg=it({name:"brandAnalytics",restriction:"brandAnalytics",getPlatform:()=>"AMAZON",getExtraUpgradeProps:({project:e})=>({project:e,trigger:'User click "Brand Analytics"'})}),$r=({moduleId:e,showSearchFrequencyRank:t=!1,clickShareRateFieldName:n,conversionShareRateFieldName:s})=>{const{t:r}=T(),a=Tr(),i=V("AMAZON","brandAnalytics"),l=i||!a,u=C(()=>i?Nt({trigger:"ABA Total Click/Conv. Share",tool:TT[e],isABA:!0}):a?lg({project:"cerebro"}):Wl({sendSegmentEvent:!1,moduleId:e}),[i,a,e]);return o.jsxs(o.Fragment,{children:[o.jsx(O,{name:n??"clickShareRate",label:r("abad.filter.clickShare.title"),tooltipContent:r("abad.filter.clickShare.tooltip"),min:0,locked:l,onClickMin:u,onClickMax:u,disabled:l,rightLabel:l?void 0:"%","data-testid":"abaTotalClickShare"}),o.jsx(O,{name:s??"conversionShareRate",label:r("abad.filter.conversionShare.title"),tooltipContent:r("abad.filter.conversionShare.tooltip"),min:0,locked:l,onClickMin:u,onClickMax:u,disabled:l,rightLabel:l?void 0:"%","data-testid":"abaTotalConvShare"}),t&&o.jsx(O,{name:"searchFrequencyRank",label:r("abad.filter.searchFrequencyRank.title"),tooltipContent:r("abad.filter.searchFrequencyRank.tooltip"),min:0,locked:l,onClickMin:u,onClickMax:u,disabled:l,"data-testid":"sfr"})]})},TT={"cerebro-historical":"Cerebro","cerebro-walmart":"Cerebro","keywordresearch-walmart":"Magnet",keywordresearch:"Magnet","opportunity-finder":"Black Box",blackbox:"Black Box",cerebro:"Cerebro","blackbox-aba":"Black Box","listing-builder":"Cerebro"},vT=async e=>{const t=await D({url:$(`${I}/api/cerebro/v1/amazon/brand-analytics/asin-click-and-conversion`,{}),params:e,method:"GET",useSessionAccountId:!0});return{...t,data:{...t.data,clickRate:bu(t.data.clickRate),conversionRate:bu(t.data.conversionRate)}}},bu=e=>Object.entries(e).map(([t,n])=>({date:Ol(t),value:n})),cg=he("getClickAndConversion",async e=>vT(e),{rejectedReaction:({fetchError:e})=>je(e)}),CT=R(cg.atom,e=>{var r,a,i;const t=(r=Xe.getState().translation)==null?void 0:r.t;let n=[];t&&((a=e.content)!=null&&a.data)&&(n=[{name:t(za.clickRate),color:Oa.clickRate,data:e.content.data.clickRate.map(l=>l.value),dashStyle:"Solid",format:"percent"},{name:t(za.conversionRate),color:Oa.conversionRate,data:e.content.data.conversionRate.map(l=>l.value),dashStyle:"Solid",format:"percent"}]);const s=(((i=e.content)==null?void 0:i.data.clickRate)||[]).map(l=>l.date);return{...e,lines:n,categories:s}}),AT=[{value:"last30days",label:"abad.clickAndConversionRate.period.last30days"},{value:"last2Months",label:"abad.clickAndConversionRate.period.last2Months"},{value:"last6Months",label:"abad.clickAndConversionRate.period.last6Months"},{value:"last12Months",label:"abad.clickAndConversionRate.period.last12Months"}],dg=L("setABADModalPeriod"),ug=L("resetABADModalPeriod"),pg=Se("ABADModalPeriodAtom",null,e=>{e(dg,(t,n)=>n),e(ug,()=>null)}),wT=()=>{const{isOpen:e,data:{asin:t,phraseId:n}}=b(wn.atom),{data:{phraseId:s}}=b(Ze.atom),r=b(pg,l=>l==null?void 0:l.value,[]),a=b(Po).id,i=C(()=>{if(e&&t&&r){const l=$T(r);return cg.actions.pending({asin:t,phraseId:n??s,marketplaceId:a,reportingRange:"Weekly",...l})}},[e,t,r]);h.useEffect(i,[i])},$T=e=>{const t=new Date;switch(e){case"last30days":return{periodFrom:no(Ys(t,-30)),periodTo:no(t)};case"last2Months":return{periodFrom:no(Lt(t,-2)),periodTo:no(t)};case"last6Months":return{periodFrom:no(Lt(t,-6)),periodTo:no(t)};case"last12Months":return{periodFrom:no(Lt(t,-12)),periodTo:no(t)};default:return{periodFrom:no(Ys(t,-30)),periodTo:no(t)}}},no=e=>ke(e,"yyyy-MM-dd"),PT=()=>{wT();const{t:e}=T(),t=b(Po).currency,{status:n,lines:s,categories:r}=b(CT),a=yc({legends:[{type:"dot",color:Oa.clickRate,name:e(za.clickRate),field:"clickRate"},{type:"dot",color:Oa.conversionRate,name:e(za.conversionRate),field:"conversionRate"}]});return o.jsxs(o.Fragment,{children:[o.jsxs(FT,{children:[o.jsx(BT,{}),a]}),o.jsx(br,{header:null,lines:s,categories:r,currency:t,status:n,watermark:!0,noDataState:o.jsx(DT,{children:e("abad.clickAndConversionRate.emptyData")}),xAxis:MT,yAxis:RT,categoriesHoverMarketRadius:5,tooltipTitleFormatter:i=>{const l=Ys(new Date(i),1);return`${ke(io(l),"MMM. dd, yyyy")}  ${ke(jo(l),"MMM. dd, yyyy")}`}})]})},BT=()=>{const{t:e}=T(),t=b(pg),n=C(dg),s=C(ug),r=h.useMemo(()=>AT.map(a=>({...a,label:e(a.label)})),[e]);return h.useEffect(()=>{t==null&&r[3]&&n(r[3])},[n,r,t]),h.useEffect(()=>s,[s]),o.jsx(Ht,{options:r,value:t,onChange:n})},MT={crosshair:{width:2},labels:{formatter:({value:e})=>{const t=new Date(e).getTimezoneOffset();return ke(Pn(new Date(e),t),"MMM dd, yyyy")}}},RT={max:100,id:"percent",title:{text:null},labels:{formatter:({value:e})=>N({value:typeof e=="number"&&e||0,style:"percent"})}},Oa={clickRate:"#9BBD02",conversionRate:"#0092AB"},za={clickRate:"abad.clickAndConversionRate.legend.clickRate",conversionRate:"abad.clickAndConversionRate.legend.conversionRate"},FT=c.div`
  display: flex;
  justify-content: space-between;
  margin-bottom: ${({theme:e})=>e.spacing.sp16};

  ${es.Control} {
    width: 187px;
  }
`,DT=c.div`
  ${fe};
  max-width: 280px;
  text-align: center;
`,Pr=()=>{const{t:e}=T(),{isOpen:t,data:n}=b(wn.atom),s=C(wn.close),r=b(Po);return o.jsx(Rt,{isOpen:t,onClose:s,title:o.jsxs(o.Fragment,{children:[o.jsxs(WT,{children:[o.jsx(OT,{children:e("abad.clickAndConversionRate.title",{asin:n.asin||""})}),o.jsx("a",{href:mo("AM",r.store,n.asin||""),target:"_blank",rel:"noreferrer",children:o.jsx(NT,{buttonType:"icon",type:"button",size:"100",icon:o.jsx(E,{icon:ts})})})]}),o.jsx(zT,{children:e("abad.clickAndConversionRate.subtitle")})]}),footer:o.jsx(IT,{children:o.jsx(F,{buttonType:"primary",type:"button",size:"200",onClick:s,children:e("common.close")})}),children:o.jsx(PT,{})})},IT=c.div`
  display: flex;
  justify-content: flex-end;
  margin-top: -${e=>e.theme.spacing.sp16};
`,WT=c.div`
  ${Co};
  display: flex;
  align-items: center;
  gap: ${e=>e.theme.spacing.sp12};
  display: inline-block;
`,OT=c.div`
  display: inline-block;
  margin-right: ${e=>e.theme.spacing.sp4};
`,zT=c.div`
  ${Fe};
`,NT=c(F)`
  display: inline-block;
  position: relative;
  top: -2px;
`,VT=()=>{const{isOpen:e,data:{phraseId:t}}=b(Ze.atom),n=b(Po).id,s=C(()=>{if(e&&t)return tk({phraseId:t,marketplaceId:n})},[e,n,t]);h.useEffect(s,[s])},_T=()=>{const e=b(Ah),t=b(vr),{isOpen:n,data:{phraseId:s}}=b(Ze.atom),r=b(Po).id,a=C(()=>{if(n&&s)return Sh({...e,phraseId:s,marketplaceId:r,reportingRange:t})},[n,e.periodFrom,e.periodTo,s,r,t]);h.useEffect(a,[a]);const i=C(Th),l=C(Ch);h.useEffect(()=>{n||(i(),l())},[n,i,l])},sd=L("highlightedItemSet"),rd=Se("highlightedItem",null,e=>{e(sd,(t,n)=>n),e(Ze.action,(t,{type:n})=>n==="SET_DATA"?null:t)}),ET=R("highlightedAsinsSelector",rd,e=>{var t,n,s;return e!=null?[(t=e.asin1)==null?void 0:t.asin,(n=e.asin2)==null?void 0:n.asin,(s=e.asin3)==null?void 0:s.asin].filter(r=>!!r):[]}),LT=R("ABADMarketplaceInfoSelector",ie([Ze.atom,oe.selectors.getSearchDataById,J.selectors.getSearchDataById,Ee.selectors.getSearchDataById,Qe.selectors.getSearchDataById]),([e,t,n,s,r])=>{var p;const a=e.data.keywords;if(a!=null)return a;const i=e.data.type,l=i==="single"?t:n,u=i==="single"?s:r;return(((p=e.data.moduleId==="keywordresearch"?u:l)==null?void 0:p.tableData)??[]).filter(m=>(m==null?void 0:m.clickShareRate)!=null).map(m=>({keyword:m.phrase,phraseId:m.phraseId}))}),qT=({moduleId:e})=>{const{data:{keyword:t,type:n}}=b(Ze.atom),s=b(LT),r=h.useCallback(()=>{e!="blackbox"&&H({eventName:e==="cerebro"?"Cerebro ABA Clicked":"Magnet ABA Clicked",eventProperties:{}})},[e]),a=C(()=>(r(),Ze.action({payload:{...HT(s,t),type:n,moduleId:e,keywords:s},type:"SET_DATA"})),[t,s]),i=C(()=>(r(),Ze.action({payload:{...UT(s,t),type:n,moduleId:e,keywords:s},type:"SET_DATA"})),[t,s]);return o.jsxs(KT,{children:[o.jsx(F,{buttonType:"icon",type:"button",icon:o.jsx(E,{icon:Mf}),size:"50",onClick:a}),o.jsx(GT,{children:t}),o.jsx(F,{buttonType:"icon",type:"button",icon:o.jsx(E,{icon:Rf}),size:"50",onClick:i})]})},HT=(e,t)=>{const n=e.map(s=>s.keyword).indexOf(t||"");return e[n-1>=0?n-1:e.length-1]},UT=(e,t)=>{const n=e.map(s=>s.keyword).indexOf(t||"");return e[n+1<=e.length-1?n+1:0]},KT=c.div`
  display: flex;
  align-items: center;

  & > :not(:first-child) {
    margin-left: ${({theme:e})=>e.spacing.sp8};
  }
`,GT=c.div`
  ${Ao}
`,ZT=({position:e,asin:t,imageSrc:n,marketplace:s,moduleId:r,tooltipRef:a})=>{const i=C(()=>(H({eventName:r==="cerebro"||r==null?"Cerebro ABA Top Clicked ASINs Graph Clicked":"Magnet ABA Top Clicked ASINs Graph Clicked",eventProperties:{}}),wn.open({asin:t})),[r]);return o.jsxs(YT,{children:[o.jsx(gS,{size:"50",product:{imageSrc:n,href:mo("AM",s,t)},marketplace:s||"",asin:t,tool:"cerebro",tooltipOptions:{appendTo:a||"parent"}}),o.jsxs("div",{children:[o.jsx(fu,{children:o.jsxs("b",{children:["#",e]})}),o.jsx(fu,{children:t})]}),o.jsx(xo,{onClick:i})]})},YT=c.div`
  display: flex;
  align-items: center;
  padding-left: ${({theme:e})=>e.spacing.sp12};

  & > :not(:first-child) {
    margin-left: ${({theme:e})=>e.spacing.sp8};
  }

  margin-top: -4px;
  margin-bottom: -4px;
`,fu=c.div`
  ${wo};
`,QT=({month:e,index:t,tooltipRef:n})=>{const{t:s}=T(),{data:{moduleId:r}}=b(Ze.atom),a=b(Po).store;return h.useMemo(()=>[{field:"product",title:s("abad.drawer.tables.fields.product.title",{date:ke(Pn(e?new Date(e):Lt(new Date,-t-1),new Date().getTimezoneOffset()),"MMM, yyyy")}),tooltip:s("abad.drawer.tables.fields.product.tooltip"),render:i=>o.jsx(ZT,{position:i.id,asin:i.asin.asin,title:i.asin.title,imageSrc:i.asin.image,marketplace:a,moduleId:r,tooltipRef:n}),minWidth:196},{field:"clickRate",title:s("abad.drawer.tables.fields.clickRate.title"),tooltip:s("abad.drawer.tables.fields.clickRate.tooltip"),render:i=>i.clickRate?N({value:i.clickRate,maximumFractionDigits:1})+"%":"-",minWidth:62,customCSS:Qr,contentPosition:"right"},{field:"conversionRate",title:s("abad.drawer.tables.fields.conversionRate.title"),tooltip:s("abad.drawer.tables.fields.conversionRate.tooltip"),render:i=>i.conversionRate?N({value:i.conversionRate,maximumFractionDigits:1})+"%":"-",minWidth:63,customCSS:Qr,contentPosition:"right"},{field:"organicRank",title:s("abad.drawer.tables.fields.organicRank.title"),tooltip:s("abad.drawer.tables.fields.organicRank.tooltip"),render:i=>i.organicRank?N({value:Math.round(i.organicRank),maximumFractionDigits:0}):"-",minWidth:95,customCSS:Qr,contentPosition:"right"},{field:"sponsoredRankAvg",title:s("abad.drawer.tables.fields.sponsoredRankAvg.title"),tooltip:s("abad.drawer.tables.fields.sponsoredRankAvg.tooltip"),render:i=>i.sponsoredRankAvg?N({value:Math.round(i.sponsoredRankAvg),maximumFractionDigits:0}):"-",minWidth:98,customCSS:Qr,contentPosition:"right"}],[t,a,r,e,s,n])},JT=()=>{const{t:e}=T();return h.useMemo(()=>({subtotal:[{field:"product",render:()=>o.jsx(Ls,{children:e("abad.drawer.tables.subtotal")})},{field:"clickRate",render:t=>o.jsx(Ls,{children:t.clickRate?N({value:t.clickRate,maximumFractionDigits:1})+"%":"-"})},{field:"conversionRate",render:t=>o.jsx(Ls,{children:t.conversionRate?N({value:t.conversionRate,maximumFractionDigits:1})+"%":"-"})},{field:"organicRank",render:t=>o.jsx(Ls,{children:t.organicRank?N({value:Math.round(t.organicRank),maximumFractionDigits:0}):"-"})},{field:"sponsoredRankAvg",render:t=>o.jsx(Ls,{children:t.sponsoredRankAvg?N({value:Math.round(t.sponsoredRankAvg),maximumFractionDigits:0}):"-"})}]}),[e])},Qr=Z`
  color: ${({theme:e})=>e.systemColors.grey800};
`,Ls=c.b`
  display: block;
  width: 100%;
  text-align: right;
  color: ${({theme:e})=>e.systemColors.black};
`,XT=({month:e,index:t,data:n,tooltipRef:s})=>{const r=QT({month:e,index:t,tooltipRef:s}),a=JT(),{status:i}=b(Lc);return o.jsx(At,{name:`abad-table-${t}`,columns:r,alternativeRender:a,data:n||ev,status:i??"loading",dimensions:tv,behavior:ov,selected:nv})},ev=[],tv={minHeight:208},ov={noHeader:!0,noFooter:!0,itemsPerPage:[4]},nv={haveCheckbox:!1},sv=()=>{const{content:e}=b(Lc),t=h.useRef(null);return o.jsx(rv,{ref:t,children:e.map((n,s)=>o.jsx(XT,{month:n.date,data:n.asinsData,index:s,tooltipRef:t},n.date))})},rv=c.div`
  display: grid;
  grid-template-columns: 1fr;
  grid-gap: ${({theme:e})=>e.spacing.sp8};
  margin-top: ${({theme:e})=>e.spacing.sp16};
`,av=({title:e,tooltip:t})=>o.jsxs(iv,{children:[o.jsx(lv,{children:e}),o.jsx(re,{content:t,children:o.jsx("div",{children:o.jsx(E,{icon:Zl})})})]}),iv=c.div`
  display: flex;
  align-items: center;
`,lv=c.div`
  ${Ao};
  margin-right: ${({theme:e})=>e.spacing.sp8};
`,cv=(e,t)=>di({project:"listingAnalyzer",upsellPlan:t,userCurrentPlan:e,trigger:'User click "Run Listing Analyzer"'}),dv=(e,t)=>di({project:"listingAnalyzer",upsellPlan:t,userCurrentPlan:e}),ad=({asins:e,marketplaceStore:t,buttonType:n="tertiary",segmentEventOptions:s,disabled:r,newTab:a})=>{const{t:i}=T(),l=en(),u=b(go),{openUpsellModal:d,getBalance:p}=pm({isChinesePlans:u,onOpen:cv,onAccept:dv}),m=async()=>{H(s||{eventName:"Listing Analyzer Runs From",eventProperties:{tool:"cerebro"}}),p({onSuccess:g=>{var x,S;if(g){const j=$("/listing-analyzer",{asins:e.slice(0,11).join(","),marketplace:t,immediately:"true"},{arrayFormat:"index"});a?(S=(x=window==null?void 0:window.open)==null?void 0:x.call(window,j,"_blank"))==null||S.focus():l(j)}else d()}})};return o.jsx(nt,{statuses:["loading","filter"],skeleton:o.jsx(pv,{$size:"large"}),children:o.jsx(re,{content:i(`runListingAnalyzer.${e.length===1?"tooltipSingle":"tooltipMultiple"}`,{maxAsins:11}),children:o.jsx(uv,{buttonType:n,type:"button",icon:o.jsx(E,{icon:ts}),onClick:m,disabled:r,children:i("blackBox.buttons.runInListingAnalyzer")})})})},uv=c(F)`
  ${({buttonType:e})=>e==="text"&&Z`
      padding: 0;
    `}
  justify-self: flex-start;
`,pv=c(ae)`
  width: 157px;
`,mg=L("setDisabledSeriesForABAD"),hg=Se("disabledSeriesForABAD",{},e=>{e(mg,(t,n)=>({...t,[n]:!t[n]}))}),mv=()=>{const{t:e}=T(),t=C(mg),n=b(hg);return o.jsxs(hv,{children:[o.jsx(re,{content:e("abad.drawer.chart.legend.clickedRate.tooltip"),children:o.jsxs(il,{onClick:()=>t("clickedRate"),$disabled:n.clickedRate,children:[o.jsx(ll,{color:"#9164CD"}),e("abad.drawer.chart.legend.clickedRate.title")]})}),o.jsx(re,{content:e("abad.drawer.chart.legend.conversionRate.tooltip"),children:o.jsxs(il,{onClick:()=>t("conversionRate"),$disabled:n.conversionRate,children:[o.jsx(ll,{color:"#FF8D8C"}),e("abad.drawer.chart.legend.conversionRate.title")]})}),o.jsx(re,{content:e("abad.drawer.chart.legend.frequencyRank.tooltip"),children:o.jsxs(il,{onClick:()=>t("frequencyRank"),$disabled:n.frequencyRank,children:[o.jsx(ll,{color:"#0092AB"}),e("abad.drawer.chart.legend.frequencyRank.title")]})})]})},hv=c.div`
  display: flex;
  align-items: center;
  justify-content: center;

  & > :not(:first-child) > div {
    margin-left: ${({theme:e})=>e.spacing.sp16};
  }
`,il=c.div`
  ${wo};
  display: flex;
  align-items: center;
  cursor: pointer;

  ${({$disabled:e})=>e&&Z`
      & > :first-child {
        background-color: ${({theme:t})=>t.systemColors.grey300};
      }

      color: ${({theme:t})=>t.systemColors.grey300};
    `}
`,ll=c.div`
  background-color: ${e=>e.color};
  width: 8px;
  height: 8px;
  border-radius: 50%;
  margin-right: ${({theme:e})=>e.spacing.sp8};
`,gv=({points:e,dataItem:t})=>o.jsx(Lp,{theme:Ie,children:o.jsxs(xv,{children:[o.jsx(bv,{children:`${ke(new Date(t.item.periodFrom),"MMM. dd, yyyy")}  ${ke(new Date(t.item.periodTo),"MMM. dd, yyyy")}`}),o.jsx(fv,{children:e.map((n,s)=>o.jsxs(Sv,{children:[o.jsx(yv,{color:n.color}),o.jsx(jv,{children:n.seriesName}),o.jsxs(kv,{children:[N({value:n.y}),n.valueSuffix]})]},s))})]})}),xv=c.div``,bv=c.div`
  ${pr};
  color: ${({theme:e})=>e.systemColors.black};
`,fv=c.div`
  margin-top: ${({theme:e})=>e.spacing.sp8};
  display: flex;
  flex-direction: column;

  & > :not(:first-child) {
    margin-top: ${({theme:e})=>e.spacing.sp4};
  }
`,Sv=c.div`
  display: flex;
  align-items: center;
  align-self: stretch;
`,yv=c.div`
  width: 8px;
  height: 8px;
  border-radius: 4px;
  flex: 0 0 auto;
  background-color: ${e=>e.color};
  margin-right: ${({theme:e})=>e.spacing.sp4};
`,jv=c.div`
  ${wo};
  margin-right: ${({theme:e})=>e.spacing.sp24};
`,kv=c.div`
  margin-left: auto;
`,Tv=({asin:e,index:t,...n})=>{const{t:s}=T(),r=n[e],i=(t===0?n.clickShareAsin1:t===1?n.clickShareAsin2:t===2?n.clickShareAsin3:0).toFixed(2),u=(t===0?n.conversionShareAsin1:t===1?n.conversionShareAsin2:t===2?n.conversionShareAsin3:0).toFixed(2),d=b(Po),p=GS({data:{asin:r.asin,marketplace:d.domain},size:"100"});return o.jsxs(Cv,{children:[o.jsx(Av,{children:s("abad.drawer.top3Asins.asinTitle",{number:t+1})}),o.jsx(wv,{product:{title:r.title,imageSrc:r.image,href:mo("AM",d.store,r.asin),asin:r.asin},market:"a",renderBlocks:p,imageTooltipOptions:{appendTo:"parent"},tool:"cerebro",marketplace:d.store}),o.jsxs(vv,{children:[o.jsxs(cl,{children:[s("abad.drawer.top3Asins.rates.title"),": "]}),o.jsxs(Na,{children:[s("abad.drawer.top3Asins.rates.click")," "]}),o.jsxs(cl,{children:[i,"%"]}),o.jsx($v,{children:" | "}),o.jsxs(Na,{children:[s("abad.drawer.top3Asins.rates.conversion")," "]}),o.jsxs(cl,{children:[u,"%"]})]})]})},vv=c.div`
  ${fe};
  margin-top: ${({theme:e})=>e.spacing.sp8};
`,Cv=c.div``,Av=c.div`
  margin-bottom: ${({theme:e})=>e.spacing.sp8};
  color: ${({theme:e})=>e.systemColors.black};
`,wv=c(vs)`
  max-width: 230px;
`,Na=c.span`
  ${fe};
`,cl=c(Na)`
  color: ${({theme:e})=>e.systemColors.black};
`,$v=c(Na)`
  color: ${({theme:e})=>e.systemColors.grey200};
`,Pv=h.lazy(()=>Hp(()=>import("./index-JeTAV08u.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87])).then(e=>({default:e.Chart}))),Bv=()=>{const e=b(rd),{t}=T(),n=["asin1","asin2","asin3"];return e?o.jsx(Su,{children:o.jsxs(Dv,{children:[o.jsxs(Wv,{children:[o.jsx(Iv,{children:t("abad.drawer.top3Asins.title")}),o.jsxs(Fv,{children:[ke(new Date(e.periodFrom),"MMM. d, y")," - ",ke(new Date(e.periodTo),"MMM. d, y")]})]}),o.jsx(Su,{children:n.map((s,r)=>o.jsx(Tv,{asin:s,index:r,...e},s))})]})}):o.jsxs(zv,{children:[o.jsx(E,{icon:Zl}),o.jsx("div",{children:t("abad.drawer.chart.noHoveredYet")})]})},Mv=()=>{const{width:e}=kc(),{t,language:n}=T(),s=b(vr),r=b(Ec,p=>p.chart,[]),{getState:a}=Xt(),i=C(sd),l=b(hg),u=Vv(r.clickedRate.map(p=>p.x),20),d=h.useMemo(()=>({chart:{type:"line",height:273,zooming:{type:"x"}},plotOptions:{series:{point:{events:{mouseOver:function(p){const m=p.target.item,g=a(rd);((g==null?void 0:g.periodFrom)!==(m==null?void 0:m.periodFrom)||(g==null?void 0:g.periodTo)!==(m==null?void 0:m.periodTo))&&i(m)}}},marker:{states:{hover:{radius:5}}}}},yAxis:[{max:100,title:{text:t("abad.drawer.chart.yAxis.totalRate")},labels:{format:"{text}%"},zIndex:0},{title:{text:"Search Frequency Rank"},opposite:!0,zIndex:0}],xAxis:{crosshairs:!0,shared:!1,useHTML:!0,outside:!0,tickPositioner:()=>u,labels:{rotation:u.length>8?-45:0,formatter:({value:p})=>{const m=s==="Weekly"?xa("standard"):s==="Monthly"?xa("short"):xa("short");return s!=="Quarterly"?ke(Number(p),m):`${ke(Lt(new Date(p),-2),m)} - ${ke(Number(p),m)}`}}},legend:{verticalAlign:"bottom",enabled:!1},tooltip:{crosshairs:!0,useHTML:!0,formatter:function(){const p=r.clickedRate.filter(m=>m.x===this.x)[0];return vc(o.jsx(gv,{t,language:n,points:(this.points||[]).map(m=>({color:m.color,x:Number(m.x)||0,y:Number(m.y)||0,seriesName:m.series.name,valueSuffix:m.series.tooltipOptions.valueSuffix})),dataItem:p}))}},series:[{id:"clickedRate",yAxis:0,type:"spline",name:t("abad.drawer.chart.legend.clickedRate.title"),data:r.clickedRate,color:"#9164CD",tooltip:{valueSuffix:"%"}},{id:"conversionRate",yAxis:0,type:"spline",name:t("abad.drawer.chart.legend.conversionRate.title"),data:r.conversionRate,color:"#FF8D8C",tooltip:{valueSuffix:"%"}},{id:"frequencyRank",yAxis:1,type:"spline",name:t("abad.drawer.chart.legend.frequencyRank.title"),data:r.frequencyRank,color:"#0092AB"}].filter(p=>!l[p.id])}),[t,r.clickedRate,r.conversionRate,r.frequencyRank,a,i,u,s,n,l]);return o.jsx(Pv,{options:d,watermark:!0,height:265},e)},Rv=()=>o.jsx(h.Suspense,{fallback:o.jsx(Nv,{}),children:o.jsxs(Ov,{children:[o.jsx(Mv,{}),o.jsx(mv,{}),o.jsx(Bv,{})]})}),Fv=c.div`
  ${fe};
`,Dv=c.div`
  background-color: ${({theme:e})=>e.systemColors.grey100};
  padding: ${({theme:e})=>`${e.spacing.sp8} ${e.spacing.sp16}`};
  border-radius: 6px;
  width: 100%;
  margin-top: ${({theme:e})=>e.spacing.sp16};
`,Iv=c.div`
  ${Le};
  color: ${({theme:e})=>e.systemColors.black};
  margin-bottom: ${({theme:e})=>e.spacing.sp8};
`,Wv=c.div`
  display: flex;
  justify-content: space-between;
`,Su=c.div`
  width: 100%;
  display: flex;
  justify-content: space-between;
`,Ov=c.div`
  margin-top: ${({theme:e})=>e.spacing.sp16};
  display: flex;
  flex-direction: column;
`,zv=c.div`
  margin-top: ${({theme:e})=>e.spacing.sp24};
  background-color: ${({theme:e})=>e.systemColors.blue50};
  align-self: center;
  display: flex;
  align-items: center;
  border-radius: 6px;
  padding: ${({theme:{spacing:{sp24:e,sp16:t}}})=>`${t} ${e}`};

  & > * {
    color: ${({theme:e})=>e.systemColors.blue900};
  }

  & > :last-child {
    margin-left: ${({theme:e})=>e.spacing.sp8};
  }
`,Nv=c(ae)`
  height: 315px;
`,Vv=(e,t)=>{const n=e.length;let s=1;for(;n/s>t;)s=s+1;return s===1?e:e.filter((r,a)=>a===0||a===n-1||a%s===0&&a+s/2<=n-1)},gg=({period:e,setPeriod:t,reportingRange:n,setReportingRange:s,hiddenOptions:r=[],className:a})=>{const{t:i}=T(),[l,u]=h.useState(e);h.useEffect(()=>u(e),[e]);const[d,p]=h.useState("Monthly");h.useEffect(()=>p(n),[n]);const m=Ev(),[g,x]=h.useState(m.Monthly),S=h.useMemo(()=>[{label:i("abad.period.presets.weekly"),id:"Weekly",active:d==="Weekly",onClick:()=>{d!=="Weekly"&&(u([]),p("Weekly"),x(m.Weekly))}},{label:i("abad.period.presets.monthly"),id:"Monthly",active:d==="Monthly",onClick:()=>{d!=="Monthly"&&(u([]),p("Monthly"),x(m.Monthly))}},{label:i("abad.period.presets.quarterly"),id:"Quarterly",active:d==="Quarterly",onClick:()=>{d!=="Quarterly"&&(u([]),p("Quarterly"),x(m.Quarterly))}}].filter(y=>!r.includes(y.id)),[m.Monthly,m.Quarterly,m.Weekly,r,d,i]),[j,f]=h.useState(!1),v=h.useCallback(y=>{u(e),p(n),x(m[n]),f(y)},[m,n,e]),k=h.useCallback(y=>{s(d),t(y)},[d,s,t]);return h.useEffect(()=>{!j&&d!==n&&(p(n),x(m[n]))},[m,d,n,j]),o.jsx(_v,{className:a,children:o.jsx(Sm,{visible:j,setVisible:v,value:l,onChange:k,placeholder:i("periodsPlaceholder"),mode:"range",showCalendar:!0,disableExternal:!0,periodPresetsTitle:i("abad.drawer.chart.reportingRange"),periodPresets:S,trimWeeks:!0,appendTo:document.body,...g})})},_v=c.div`
  min-width: 187px;
`,Ev=()=>{const{t:e}=T();return{Weekly:{hoverRange:t=>({start:io(t),end:jo(t)}),info:e("abad.period.info",{number:2,period:e("abad.period.periods.weeks")}),picker:"day",maxDate:FS(io(new Date),1),validateRange:({start:t,end:n})=>Math.abs(WS(t,n))>=1},Monthly:{picker:"month",info:e("abad.period.info",{number:2,period:e("abad.period.periods.months")}),hoverRange:void 0,maxDate:Cn(mt(new Date),1),validateRange:({start:t,end:n})=>Math.abs(wS(t,n))>=1},Quarterly:{picker:"month",info:e("abad.period.info",{number:2,period:e("abad.period.periods.quarters")}),maxDate:Cn(Jd(new Date),1),hoverRange:t=>({start:Jd(t),end:MS(t)}),validateRange:({start:t,end:n})=>Math.abs(OS(t,n))>=1}}},Lv=()=>{const e=b(qc),t=C(kh),n=b(vr),s=C(vh);return o.jsx(gg,{period:e,setPeriod:t,reportingRange:n,setReportingRange:s})},qv=()=>{const{t:e}=T(),t=b(Ue),n=b(Ec,m=>m.status,[]),s=b(Ze.atom,m=>m.data.moduleId,[]),r=b(ok),a=b(Po,m=>m.store,[]),i=b(ET),l=h.useMemo(()=>{const m=r.sort((g,x)=>g.getTime()-x.getTime());return`${$e(m[0],"standard")}  ${$e(m[1],"standard")}`},[r]),u=h.useMemo(()=>({init:o.jsx(Jr,{$size:"large"}),loading:o.jsx(Jr,{$size:"large"}),loaded:o.jsx(Rv,{}),waiting:o.jsx(Jr,{$size:"large"}),progress:o.jsx(Jr,{$size:"large"}),error:o.jsx("div",{children:"error..."})}),[]),p=[Ic.includes(t),i.length===0].includes(!0);return o.jsxs(Hv,{children:[o.jsx(av,{title:e("abad.drawer.title"),tooltip:e("abad.drawer.tooltip")}),o.jsxs(Kv,{children:[o.jsxs(Uv,{children:[o.jsxs("div",{children:[o.jsx(Gv,{children:e("abad.drawer.chart.title")}),o.jsx(Zv,{children:l})]}),o.jsxs(Yv,{children:[o.jsx(ad,{marketplaceStore:a,asins:i,buttonType:"secondary",segmentEventOptions:{eventName:s==="cerebro"?"Cerebro ABA Run Listing Analyzer Clicked":"Magnet ABA Run Listing Analyzer Clicked",eventProperties:{}},disabled:p,newTab:!0}),o.jsx(Lv,{})]})]}),u[n]]})]})},Jr=c(ae)`
  height: 315px;
`,Hv=c.div`
  display: grid;
  grid-template-columns: 1fr;
  ${({theme:e})=>Z`
    grid-gap: ${e.spacing.sp16};
    margin-top: ${e.spacing.sp16};
  `}
`,Uv=c.div`
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  margin-bottom: ${({theme:e})=>e.spacing.sp24};
`,Kv=c($n)`
  overflow: initial;
  min-height: 598px;
`,Gv=c.div`
  ${Ao};
`,Zv=c.div`
  ${fe};
  margin-top: ${({theme:e})=>e.spacing.sp4};
`,Yv=c.div`
  display: flex;
  align-items: center;

  & > :not(:first-child) {
    margin-left: ${({theme:e})=>e.spacing.sp8};
  }

  & > * {
    margin-top: 0 !important;
  }
`,Br=({moduleId:e})=>{const{isOpen:t,data:{phraseId:n}}=b(Ze.atom),{isOpen:s}=b(wn.atom),r=C(Ze.close);_T(),VT();const a=C(sd);return h.useEffect(()=>{a(null)},[n,a]),o.jsx(kn,{position:"bottom",animation:"slideBottom",isOpen:t,onClose:s?void 0:r,onClickOutside:s?void 0:r,onClickEscape:s?void 0:r,lockBody:!0,header:o.jsx(qT,{moduleId:e}),size:"400",children:o.jsxs(Qv,{children:[o.jsx(qv,{}),o.jsx(sv,{})]})})},Qv=c.div`
  display: grid;
  align-items: flex-start;
  grid-template-columns: 1fr;
  grid-gap: ${({theme:e})=>e.spacing.sp16};

  ${z.largeDesktop} {
    grid-template-columns: 3fr 2fr;
  }
`,Jv=()=>{const e=Tr(),t=V("AMAZON","brandAnalytics");return e&&!t},id=()=>{const e=!Jv();return h.useMemo(()=>e?["clickShareRate","clickShareRate","searchFrequencyRank"]:[],[e])},Xv=()=>{const[e]=Fa(),t=Je(n=>n.modalParams);h.useEffect(()=>{e&&t&&zc.action()},[e,JSON.stringify(t)])},eC=ht(e=>e.modalData,e=>{var r;const t=Object.entries(e??{}).map(([a])=>ch(a)),n=(r=Xe.getState().translation)==null?void 0:r.t,s=[{name:(n==null?void 0:n("searchFrequencyRank.legend"))||"searchFrequencyRank",data:Object.entries(e??{}).map(([a,i])=>i),color:Yl.blue600,type:"spline",format:"number",dashStyle:"Solid"}];return{categories:t,lines:s}}),tC=()=>{const e=Je(r=>{var a;return((a=r.modalParams)==null?void 0:a.period)??[]}),t=Aj.set,n=Je(r=>{var a;return((a=r.modalParams)==null?void 0:a.reportingRange)??"Weekly"}),s=h.useCallback(r=>wj.set(r!="Quarterly"?r:"Weekly"),[]);return o.jsx(gg,{period:e,setPeriod:t,reportingRange:n,setReportingRange:s,hiddenOptions:oC})},oC=["Quarterly"],nC=()=>{const{t:e}=T();Xv();const t=zc(u=>u.status),{categories:n,lines:s}=Je(eC),r=Je(u=>{var d;return((d=u.modalParams)==null?void 0:d.reportingRange)??"Weekly"}),a=Je(u=>{var d;return ce("domain",((d=u.modalParams)==null?void 0:d.marketplace)??"amazon.com").currency}),i=yc({legends:[{type:"dot",color:Yl.blue600,name:e("searchFrequencyRank.legend"),field:"searchFrequencyRank"}]}),l=rC(r);return o.jsxs(o.Fragment,{children:[o.jsxs(iC,{children:[o.jsx(tC,{}),i]}),o.jsx(br,{header:null,categories:n,lines:s,currency:a,status:t,watermark:!0,noDataState:o.jsx(lC,{children:e("common.noData")}),xAxis:l,yAxis:aC,categoriesHoverMarketRadius:5,time:sC,tooltipTitleFormatter:u=>{const d=Xo(new Date(u));return r==="Weekly"?`${e("common.week")} ${xr(d)}, ${$e(io(d),"standard")} - ${$e(jo(d),"standard")}`:$e(d,"completeShort")}})]})},sC={timezoneOffset:new Date().getTimezoneOffset()},rC=e=>({crosshair:{width:2},labels:{formatter:({value:t})=>{const n=new Date(t).getTimezoneOffset(),s=Pn(new Date(t),n);return $e(s,e==="Weekly"?"standard":"standardShort")}}}),aC={id:"number",title:{text:null},reversed:!0,labels:{formatter:({value:e})=>N({value:typeof e=="number"&&e||0})}},iC=c.div`
  display: flex;
  justify-content: space-between;
  margin-bottom: ${({theme:e})=>e.spacing.sp16};

  ${es.Control} {
    width: 187px;
  }
`,lC=c.div`
  ${fe};
  max-width: 280px;
  text-align: center;
`,cC=()=>{const{t:e}=T(),[t]=Fa(),n=Je(s=>{var r;return((r=s.modalParams)==null?void 0:r.phrase)??""});return o.jsx(Rt,{isOpen:t,onClose:Fa.close,title:e("searchFrequencyRank.modal.title",{phrase:n}),children:o.jsx(dC,{children:o.jsx(nC,{})})})},dC=c.div``,xg=it({name:lo,restriction:lo,getPlatform:({platform:e})=>e==="WALMART"?"WALMART":"AMAZON",getExtraUpgradeProps:({project:e})=>({project:e,trigger:Mm})}),uC=it({name:Ba,restriction:Ba,getPlatform:({platform:e})=>e==="WALMART"?"WALMART":"AMAZON",getExtraUpgradeProps:({project:e})=>({project:e,trigger:Mm})}),Ds=({marketplace:e,project:t,moduleId:n,platform:s,isHistorical:r,showIfNotAmazon:a=!1})=>{const{t:i}=T(),{isDemo:l}=ge(),u=(e==null?void 0:e.domain)==="amazon.com"&&(n==="cerebro"||n==="keywordresearch"),d=V(s,lo)&&!l,p=C(()=>d?xg({project:t,platform:s}):void 0,[t,s,d]),m=e!=null&&e.currency?LS(e==null?void 0:e.currency):"";return!u&&!a?null:o.jsx(O,{name:ue,label:o.jsxs(bg,{children:[o.jsx(uc,{}),i("ppc.filter.suggestedPPC.title")]}),tooltipContent:i("ppc.filter.suggestedPPC.tooltipAmazon"),min:_y,max:Ey,disabled:d||!u,locked:d,leftLabel:m,onClickMin:p,onClickMax:p,"data-testid":Vy,step:.01,showEmptyValue:r})},bg=c.div`
  display: flex;
  align-items: center;

  svg {
    width: 16px;
    margin-right: ${e=>e.theme.spacing.sp8};
  }
`,pC=async e=>await D({url:$(`${I}/api/v1/amazon/cpc-history`,e,{arrayFormat:"index"}),method:"GET",useSessionAccountId:!0}).then(t=>({data:t.data.reverse()})),fg=Qt((e,t)=>({...ZS(e,t,"ppcModal",{phrase:""}),...Ql(e,t,"ppcChart",n=>pC(n))})),yu=[{label:"Last 30 days",value:"30days"},{label:"Last 90 Days",value:"90days"},{label:"Last 1 Year",value:"1year"},{label:"All time",value:"allTime"}],ju="#5773F2",mC=e=>{const t="yyyy-MM-dd",n=ke(new Date,t),s=i=>{const l=+new Date(2022,0,1),u=864e5,d=+new Date(Date.now()-+new Date(u*i));return ke(d<l?l:d,t)};return{dateFrom:{"30days":s(30),"90days":s(90),"1year":s(366),allTime:"2022-01-01"}[e],dateTo:n}},ld=()=>{const{t:e}=T(),[t,n]=h.useState(yu[0]),s=b(st),{data:r,isOpen:a,id:i,phrase:l,status:u,getChartData:d,clearChartData:p,handleClose:m}=fg(k=>{var y;return{data:(y=k.ppcChart.atom.content)==null?void 0:y.data,status:k.ppcChart.atom.status,isOpen:k.ppcModal.atom.isOpen,phrase:k.ppcModal.atom.data.phrase,id:k.ppcModal.atom.data.id,getChartData:k.ppcChart.action,clearChartData:k.ppcChart.clear,handleClose:k.ppcModal.close}});h.useEffect(()=>{if(!i||!s)return;const k=mC(t.value);d({marketplaceId:s.id.toString(),periodFrom:k.dateFrom,periodTo:k.dateTo,phraseIds:[i]})},[p,t,d,i,s]),h.useEffect(()=>{a||p()},[p,a]);const g=yc({legends:[{type:"dot",color:ju,name:"Suggested PPC Bid",field:"left"}]}),x=h.useMemo(()=>(r==null?void 0:r.map(k=>ke(new Date(k.date),"MMM d, yyyy")))||[],[r]),S=h.useMemo(()=>s!=null&&s.currency&&r?r.map(k=>({x:new Date(k.date).getTime(),y:qe(k.cpc,s.currency)})):[],[r,s]),j=h.useCallback(k=>$e(new Date(Number(k)),"standard"),[]),f=h.useMemo(()=>({crosshair:{width:1,color:Ie.systemColors.grey300},categories:void 0,type:"datetime"}),[]),v=h.useMemo(()=>[{name:"Suggested PPC Bid",data:S,color:ju,type:"spline",format:"currency",dashStyle:"Solid"}],[S]);return o.jsx(xC,{isOpen:a,onClickOutside:m,footer:o.jsx(bC,{children:o.jsx(F,{onClick:m,size:"200",children:e("common.close")})}),children:o.jsxs(o.Fragment,{children:[o.jsxs(TC,{children:[o.jsxs(jC,{children:[o.jsx(kC,{}),o.jsxs(yC,{children:[e("ppc.modal.header.title")," ",l]})]}),o.jsx(SC,{children:e("ppc.modal.header.subtitle")}),o.jsxs(fC,{children:[o.jsx(gC,{options:yu,value:t,onChange:k=>{k&&n(k)},disabled:u==="loading"}),g]})]}),o.jsx(br,{height:300,status:u,lines:v,categories:x,currency:(s==null?void 0:s.currency)||"USD",tooltipTitleFormatter:j,xAxis:f,header:null,time:hC})]})})},hC={timezoneOffset:+new Date().getTimezoneOffset()},gC=c(Ht)`
  min-width: 190px;
`,xC=c(Rt)`
  ${Rt.Footer} {
    margin-top: 0;
  }
`,bC=c.div`
  display: flex;
  justify-content: end;
  margin-top: ${e=>e.theme.spacing.sp8};
`,fC=c.div`
  padding: 0 ${({theme:e})=>e.spacing.sp12};
  display: flex;
  justify-content: space-between;
`,SC=c.div`
  padding: 0 ${({theme:e})=>e.spacing.sp12};
`,yC=c.div`
  ${Co};
`,jC=c.div`
  display: flex;
  padding: 0 ${({theme:e})=>e.spacing.sp12};
`,kC=c(uc)`
  width: 24px;
  margin-right: ${({theme:e})=>e.spacing.sp8};
`,TC=c.div`
  display: grid;
  grid-row-gap: ${({theme:e})=>e.spacing.sp8};
  margin-bottom: ${e=>e.theme.spacing.sp24};
`,Mi=({marketplace:e,moduleId:t,project:n,platform:s,noExport:r=!1,onClickChart:a})=>{const{isDemo:i}=ge(),{t:l}=T(),u=fg(f=>f.ppcModal.open),d=(e==null?void 0:e.domain)==="amazon.com"&&(t==="cerebro"||t==="keywordresearch"),p=V(s,lo)&&!i,m=C(()=>p?xg({project:n,platform:s}):void 0,[n,s,p]),g=h.useCallback((f,v)=>{H({eventName:Ly,eventProperties:{}}),u({id:f,phrase:v})},[u]),x=C((f,v)=>uC({project:n,platform:s,afterCheckSuccess:()=>g(f,v)}),[n,s,g]),S=Me(f=>{var v;return(v=f.checkLogin)==null?void 0:v.basePlan}),j=S==="Helium10_Entrepreneur_Cn"||S==="Helium10_Entrepreneur_Cn_Annual";return h.useMemo(()=>d?[{field:ue,title:o.jsx(Pa,{title:o.jsxs(vC,{children:[o.jsx(uc,{}),o.jsx(CC,{dangerouslySetInnerHTML:{__html:l(`ppc.table.suggestedPPC.${p?"titleLocked":"title"}`)}})]}),lockedTooltip:l("cerebro.table.abadTooltip"),locked:p,onClick:m,tooltip:l("ppc.table.suggestedPPC.tooltipAmazon")}),sortable:!0,disableSorting:p,customCSS:$C,maxWidth:280,contentPosition:"right",settingsTitle:Da({title:l("ppc.table.suggestedPPC.title"),locked:j&&p}),defaultHidden:j&&p,render:f=>{if(p)return o.jsx(Js,{onClick:m,disabledChart:!0});if(f[ue]!=null&&f[ue]!==-1){const v=f[ue]!=null&&f[ue]!==-1&&dl(qe(f[ue],e==null?void 0:e.currency),e==null?void 0:e.currency)||"N/A",k=f[Vo]!=null&&f[Vo]!==-1&&dl(qe(f[Vo],e==null?void 0:e.currency),e==null?void 0:e.currency)||"N/A",y=f[_o]!=null&&f[_o]!==-1&&dl(qe(f[_o],e==null?void 0:e.currency),e==null?void 0:e.currency)||"N/A";return o.jsxs(o.Fragment,{children:[o.jsx(re,{content:l("ppc.table.suggestedPPC.tooltipAmazonForValue",{ppc:v,ppcFrom:k,ppcTo:y}),children:o.jsxs(AC,{children:[v,o.jsx(wC,{children:`(${k}  ${y})`})]})}),o.jsx(xo,{onClick:()=>{a==null||a(),x(f.id.toString(),f.phrase)}})]})}else return"N/A"},exportTitle:l("ppc.table.suggestedPPC.title")},...r?[]:[{field:`_export_${ue}`,exportTitle:p?void 0:l("ppc.table.suggestedPPCExport.title"),render:()=>null,exportValue:f=>f[ue]!=null?qe(f[ue],e.currency):"",doNotExport:p},{field:`_export_${ue}`,exportTitle:p?void 0:l("ppc.table.suggestedPPCMinExport.title"),render:()=>null,exportValue:f=>f[Vo]!=null?qe(f[Vo],e.currency):"",doNotExport:p},{field:`_export_${ue}`,exportTitle:p?void 0:l("ppc.table.suggestedPPCMaxExport.title"),render:()=>null,exportValue:f=>f[_o]!=null?qe(f[_o],e.currency):"",doNotExport:p}]]:[],[a,j,p,e==null?void 0:e.currency,r,x,m,d,l])},dl=(e,t)=>e!=null?Ut({amount:e,currency:t}):null,vC=c(bg)``,CC=c.div`
  white-space: nowrap;
  text-align: left;
`,AC=c.div`
  display: inline-block;
`,wC=c.div`
  display: inline-block;
  margin-left: ${({theme:e})=>e.spacing.sp4};
  color: ${({theme:e})=>e.systemColors.grey600};
`,$C=Z`
  display: flex;
  align-items: center;

  & > :not(:first-child) {
    margin-left: ${({theme:e})=>e.spacing.sp8};
  }
`,PC=({marketplace:e,moduleId:t,platform:n})=>{const{t:s}=T(),r=(e==null?void 0:e.domain)==="amazon.com"&&(t==="cerebro"||t==="keywordresearch"),a=V(n,lo);return h.useMemo(()=>r??!a?[{field:ue,title:s("ppc.table.suggestedPPCExport.title"),exportValue:i=>i[ue]!=null&&i[ue]!==-1?qe(i[ue],(e==null?void 0:e.currency)??"USD"):""},{field:ue,title:s("ppc.table.suggestedPPCMinExport.title"),exportValue:i=>i[Vo]!=null&&i[Vo]!==-1?qe(i[Vo],(e==null?void 0:e.currency)??"USD"):""},{field:ue,title:s("ppc.table.suggestedPPCMaxExport.title"),exportValue:i=>i[_o]!=null&&i[_o]!==-1?qe(i[_o],(e==null?void 0:e.currency)??"USD"):""}]:[],[a,e==null?void 0:e.currency,r,s])},BC=({children:e,isOpen:t,iconPosition:n,...s})=>{const r=h.useMemo(()=>({[n==="left"?"rightIcon":"icon"]:o.jsx(MC,{icon:Ff,rotation:t?180:void 0})}),[t,n]);return o.jsx(F,{type:"button",buttonType:"text",...r,...s,children:e})},MC=c(E)`
  transition: 0.3s all ease-in-out;
`,bo=({before:e,after:t,onClickReset:n,disabled:s,clearDisabled:r,locked:a,className:i,formId:l})=>{const{t:u}=T();return o.jsxs(RC,{className:i,children:[e,o.jsx(F,{size:"100",buttonType:"secondary",type:"reset",onClick:n,disabled:r,"data-testid":"clear",children:u("cerebro.filter.clear")}),o.jsx(ho,{size:"100",buttonType:"primary",type:"submit",disabled:s,locked:a,"data-testid":"applyfilters",form:l,children:u("cerebro.filter.applyFilters")}),t]})},RC=c.div`
  margin-top: ${({theme:e})=>e.spacing.sp24};
  display: flex;
  align-items: center;
  justify-content: flex-end;

  & > :not(:first-child) {
    margin-left: ${({theme:e})=>e.spacing.sp8};
  }
`,FC=h.memo(({children:e,isOpen:t})=>{const[n,{height:s}]=zS();return o.jsx(DC,{$open:t,$height:s,children:o.jsx(IC,{ref:n,children:e})})}),DC=c.div`
  height: ${e=>e.$open?e.$height?`${e.$height}px`:"auto":0};
  overflow: hidden;
  transition: all 0.3s;
`,IC=c.div``,Bo=({children:e})=>{const{t}=T();return o.jsxs(o.Fragment,{children:[o.jsx(WC,{children:t("common.filters")}),e]})},WC=c.div`
  ${Ao};
`,OC=({className:e,locked:t,fieldName:n})=>{const{t:s}=T();return o.jsx(O,{name:n??"impressionExact30",label:s("cerebro.filter.searchVolume"),tooltipContent:s("cerebro.filter.searchVolumeTooltip"),min:0,disabled:t,"data-testid":"searchvolume",className:e})},zC=({className:e,locked:t,isHistorical:n})=>{const{t:s}=T();return o.jsx(O,{name:"resultsNumber",label:s("cerebro.filter.competingProducts"),tooltipContent:s("cerebro.filter.competingProductsTooltip"),min:0,disabled:t,showEmptyValue:n,"data-testid":"competingproducts",className:e})},NC=Df.forwardRef(({name:e,rules:t,showError:n=!1,className:s,...r},a)=>{const{control:i}=_e();return o.jsx(tt,{name:e,control:i,rules:t,render:({field:l,formState:u})=>{var p,m,g,x;const d=n?(p=u.errors[l.name])==null?void 0:p.message:((m=u.errors[l.name])==null?void 0:m.message)!=null?"error":"";return o.jsx(VC,{className:s,hasError:!!d,children:o.jsx(Jl,{...r,...l,ref:a,error:String(n?(g=u.errors[l.name])==null?void 0:g.message:((x=u.errors[l.name])==null?void 0:x.message)!=null?"error":"")})})}})}),VC=c.div`
  ${e=>e.hasError&&Z`
      & > div > :last-child {
        display: none;
      }
    `}
`,Ne=c(NC)``,Mo=({locked:e,className:t,fieldName:n})=>{const{t:s}=T(),{register:r}=_e();return o.jsx(Ne,{...r(n??"exclude"),label:s("cerebro.filter.excludePhrasesContain"),placeholder:s("cerebro.filter.showPhrasesContainPlaceholder"),tooltipContent:s("cerebro.filter.excludePhrasesContainTooltip"),disabled:e,className:t})},Ro=()=>{const{t:e}=T();return h.useMemo(()=>[{label:e("cerebro.filter.all"),value:"all"},{label:e("cerebro.filter.any"),value:"any"}],[e])},fo=({name:e,options:t,disabled:n})=>{const{control:s}=_e();return o.jsx(tt,{name:e,control:s,render:({field:r})=>o.jsx(_C,{role:"radiogroup","aria-labelledby":"group_label",...r,defaultValue:r.value,children:t.map(a=>o.jsx(NS,{name:e,value:a.value,id:String(a.value),defaultChecked:r.value===a.value,disabled:n,"data-testid":String(a.value),children:a.label},a.value))},r.value)})},_C=c.div`
  display: flex;
  align-items: center;

  & > :not(:first-child) {
    margin-left: ${({theme:e})=>e.spacing.sp4};
  }

  & label > span {
    padding-left: 2px;
  }
`,EC=({className:e,locked:t,fieldName:n})=>{const{t:s}=T(),r=Ro();return o.jsxs(LC,{className:e,children:[o.jsx(He,{label:s("cerebro.filter.showPhrasesContain"),tooltipContent:s("cerebro.filter.showPhrasesContainTooltip")}),o.jsxs(qC,{children:[o.jsx(HC,{name:n??"phrase",placeholder:s("cerebro.filter.showPhrasesContainPlaceholder"),disabled:t}),o.jsx(fo,{name:"same-origin",options:r,disabled:t})]})]})},LC=c.div``,qC=c.div`
  display: flex;
  align-items: center;
  gap: ${({theme:e})=>e.spacing.sp8};
`,HC=c(Ne)`
  flex: 1;
`,Mr=({className:e,locked:t,fieldName:n,tooltipContent:s})=>{const{t:r}=T();return o.jsx(O,{name:n??"searchVolumeTrend30",label:r("cerebro.filter.searchVolumeTrend"),tooltipContent:s??r("cerebro.filter.searchVolumeTrendTooltip"),disabled:t,"data-testid":"searchvolumetrend",className:e,rightLabel:"%"})},UC=({className:e,locked:t,isHistorical:n})=>{const{t:s}=T();return o.jsx(O,{name:"exactTitleMatchProductsCount",label:s("cerebro.filter.titleDensity"),tooltipContent:s("cerebro.filter.titleDensityTooltip"),min:0,disabled:t,showEmptyValue:n,className:e,"data-testid":"titledensity"})},KC=({className:e,locked:t})=>{const{t:n}=T();return o.jsx(O,{name:"wordsCount",label:n("cerebro.filter.wordCount"),tooltipContent:n("cerebro.filter.wordCountTooltip"),min:0,disabled:t,className:e,"data-testid":"wordcount"})},Is=c.div`
  margin-top: ${({theme:e})=>e.spacing.sp16};

  display: grid;
  grid-gap: 32px;
  align-items: flex-end;

  grid-template-columns: 1fr;

  ${z.mobile} {
    grid-template-columns: repeat(2, 1fr);
  }

  ${z.laptop} {
    grid-template-columns: repeat(3, 1fr);
  }

  ${z.largeDesktop} {
    grid-template-columns: repeat(5, 1fr);
  }
`,Fo=e=>o.jsx(GC,{...e}),GC=c(qS)`
  & > :first-child {
    align-items: flex-start;
  }
  ${e=>e.opened&&e.title!=null&&Z`
      & > :first-child {
        border-bottom: 1px solid ${t=>t.theme.systemColors.grey200};
      }
    `}
`,ZC=({watch:e,getValues:t,storedValue:n,minmaxFields:s,initValue:r,additionStoredValues:a,skippedFields:i=[],skippedFieldsForClear:l})=>{e();const u=h.useMemo(()=>JSON.stringify(gt({filter:pt({...n,...a??{}},i),minmaxFields:s,roundingSettings:{}})),[a,s,i,n]),d=JSON.stringify(gt({filter:pt(t(),i),minmaxFields:s,roundingSettings:{}})),p=JSON.stringify(gt({filter:pt(t(),l??i),minmaxFields:s,roundingSettings:{}})),m=JSON.stringify(gt({filter:pt(r,l??i),minmaxFields:s,roundingSettings:{}})),g=h.useMemo(()=>JSON.stringify(gt({filter:pt({...n,...a??{}},l??i),minmaxFields:s,roundingSettings:{}})),[a,s,i,l,n]),x=u===d,S=m===p,j=m!==g;return h.useMemo(()=>[x,S,j],[x,S,j])},YC="filter_is_expanded",Kt=(e=YC)=>{const n=localStorage.getItem(e)!=="false",[s,r]=h.useState(n);return h.useEffect(()=>{n!==s&&localStorage.setItem(e,String(s))},[s,n,e]),[s,r]},Sg=({lastFilter:e,excludedFields:t=[],mapper:n})=>{const s=Object.keys(e).filter(d=>e[d]!=null).filter(d=>!t.includes(d)).map(d=>d),a=s.filter(d=>!String(d).endsWith("From")&&!String(d).endsWith("To")).reduce((d,p)=>{var x;const m=e[p],g=(n==null?void 0:n[p])!=null?((x=n[p])==null?void 0:x.call(n,m))||{}:{[p]:m};return{...d,...g}},{}),i=s.filter(d=>String(d).endsWith("From")||String(d).endsWith("To")),u=[...new Set(i.map(d=>String(d).slice(0,String(d).endsWith("From")?-4:-2)))].reduce((d,p)=>{const m=e[`${p}From`],g=e[`${p}To`],x=m!=null?Number(m):void 0,S=g!=null?Number(g):void 0,j=x!=null&&!isNaN(x)?x:void 0,f=S!=null&&!isNaN(S)?S:void 0;return{...d,[p]:[j,f]}},{});return{...a,...u}},QC=e=>{const t=e.startsWith("-"),n=t?"DESC":"ASC",s=e&&t?e.slice(1):e;return{sortDirection:n,sortField:s}},JC=4,yg=(e,t)=>e.map(({name:n,filters:s,id:r})=>({name:n,id:r,filters:Sg({lastFilter:s}),isDefault:t})),XC=ht(e=>{var t;return(t=e.staticPresets)==null?void 0:t.data},e=>yg(e||[],!0)),jg=ht(e=>{var t;return(t=e.userPresets)==null?void 0:t.data},e=>yg(e||[],!1)),cd=ht(XC,jg,(e,t)=>[...e,...t]),eA=ht(cd,e=>e.slice(0,JC)),or=ht(e=>e.props,e=>{const t=e==null?void 0:e.initialFilterValue,n=(e==null?void 0:e.skipFields)||[];return t&&pt(t,n)}),kg=ht(e=>e.props,e=>{const t=e==null?void 0:e.initialFilterValue,n=(e==null?void 0:e.skipFieldsForLoad)??(e==null?void 0:e.skipFields)??[];return t&&pt(t,n)}),tA=[],oA=ht(e=>e.props,e=>(e==null?void 0:e.skipFields)??tA),nA=ht(e=>e.props,e=>{if((e==null?void 0:e.marketplace)==null)return null;const t=pt(e,["requests","executeWithRestriction","noPaddingBottom","skipFields","initialFilterValue","minMaxFields","onApply","availableMatchTypes"]);return JSON.stringify(t)}),se=Qt(()=>({staticPresets:null,userPresets:null,props:null,modal:null,delete:null,create:null,rename:null})),dd=Ss(se,"userPresets"),sA=Ss(se,"props"),yo=Ga(se,"modal",{clearOnClose:!0}),rA=VS(se);var bs;(function(e){e[e.Products=1]="Products",e[e.Keywords=2]="Keywords",e[e.Competitors=3]="Competitors",e[e.Niche=4]="Niche",e[e.Targets=5]="Targets",e[e.ABATST=6]="ABATST"})(bs||(bs={}));var Ot;(function(e){e[e.Single=1]="Single",e[e.Multi=2]="Multi"})(Ot||(Ot={}));const fs=(e,t)=>{const n=se.getState().props,{filterLibraryType:s,presetName:r}=t??{};if(n!=null&&n.marketplace){const a=ce("domain",n.marketplace);switch(n.tool){case"blackbox":{switch(e){case"Filter Preset Clicked":{H({eventName:n.searchType===bs.Products?"Black Box Filter Library Clicked":"BB ABA Filter Library Clicked",eventProperties:{filterLibraryType:s==="Preset"?"preset":"user-custom",...r?{Name:r}:{}}});break}}break}case"cerebro":{H({eventName:e,eventProperties:{Platform:a.platform==="AMAZON"?"Amazon":"Walmart",Marketplace:a.country,Tool:"Cerebro",filterLibraryType:s,Tab:n.searchType===Ot.Multi?"Multiple ASINs Research":"Single ASIN Search",...r?{name:r}:{}}});break}case"magnet":{H({eventName:e,eventProperties:{Platform:a.platform==="AMAZON"?"Amazon":"Walmart",Marketplace:a.country,Tool:"Magnet",filterLibraryType:s,Tab:n.searchType===Ot.Multi?"Analyze Keywords":"Find Suggestions",...r?{name:r}:{}}});break}}}},ku=Jt(se,"rename",async e=>{const t=se.getState().props,n=t==null?void 0:t.requests.renamePreset;return n!=null&&(t!=null&&t.tool)?await n({...e,tool:t==null?void 0:t.tool}):null},{initialStatus:"init",fulfilled:({result:e})=>{yo.close(),fs("Filter Library Preset Edited");const t=se.getState().userPresets;t!=null&&t.data&&(e!=null&&e.data)&&dd.set({...t,data:t.data.map(s=>s.id==e.data.id?e.data:s)});const n=Xe.getState().translation;if(n){const{t:s}=n;Be.success(s("filterPresets.messages.rename.success"))}},rejected:({fetchError:e})=>Tg(e)}),Tg=e=>{var t,n,s;if(e)if(((t=e.result)==null?void 0:t.errorCode)==="rta-0"){let r=(n=e.result)==null?void 0:n.errorCode;const a=JSON.stringify((s=e.result)==null?void 0:s.errors);a&&(a.includes("The name must not be greater than 255 characters.")&&(r="rta-22001"),a.includes("Record already exists unique by: name, type,marketplace")&&(r="rta-7020")),je({...e,result:e.result?{...e.result,errorCode:r}:void 0})}else je(e)},Tu=Jt(se,"create",async e=>{const t=se.getState().props,n=t==null?void 0:t.requests.createUserPreset;return n!=null&&t?await n({...e,marketplaceId:ce("domain",(t==null?void 0:t.marketplace)||"amazon.com").id,searchType:t.searchType,tool:t.tool},t.minMaxFields):null},{initialStatus:"init",fulfilled:({result:e})=>{yo.close(),fs("Filter Preset Saved");const t=se.getState().userPresets;t!=null&&t.data&&(e!=null&&e.data)&&dd.set({...t,data:[...t.data,e==null?void 0:e.data]});const n=Xe.getState().translation;if(n){const{t:s}=n;Be.success(s("filterPresets.messages.create.success"))}},rejected:({fetchError:e})=>Tg(e)}),Ri=()=>{const{t:e}=T(),[t]=yo(),n=se(S=>S.modal),s=n==null?void 0:n.onAccept,r=Tu.action,a=ku.action,i=Tu(S=>S.status==="loading"),l=ku(S=>S.status==="loading"),u=n==null?void 0:n.presetId,d=se(jg),[p,m]=h.useState("");h.useEffect(()=>{var S,j;m(((j=(S=d.filter(f=>f.id===u))==null?void 0:S[0])==null?void 0:j.name)||"")},[u,d]),h.useEffect(()=>{!t&&m("")},[t]);const{getValues:g}=_e(),x=()=>{if(u)a({id:u,name:p});else{s==null||s();const{include:S,...j}=g();r({name:p,filters:{...pt(j,["period","reportingRange"]),...S==="all"?{"include-all":1,"include-any":0}:S==="any"?{"include-all":0,"include-any":1}:{}}})}};return o.jsx(Rt,{onClose:yo.close,isOpen:t,title:e(`filterPresets.editModal.title.${u?"edit":"new"}`),footer:o.jsxs(aA,{children:[o.jsx(F,{size:"200",buttonType:"cancel",onClick:yo.close,children:e("common.cancel")}),o.jsx(F,{size:"200",onClick:x,disabled:!p||i||l,loading:i||l,children:e("common.save")})]}),zIndex:1000001,children:o.jsx(iA,{value:p,onChange:S=>m(S.target.value),label:e("filterPresets.editModal.name.label"),placeholder:e("filterPresets.editModal.name.placeholder")})})},aA=c.div`
  display: flex;
  justify-content: space-between;
`,iA=c(Jl)`
  margin-top: ${({theme:e})=>e.spacing.sp16};
`,lA=({status:e,skeleton:t,children:n})=>o.jsx(o.Fragment,{children:e==="loaded"?n:t}),vg=Jt(se,"staticPresets",async e=>{const t=se.getState().props,n=t==null?void 0:t.requests.getStaticPresets;if(t!=null&&n!=null){const s=ce("domain",(t==null?void 0:t.marketplace)||"amazon.com");return n==null?void 0:n({marketplaceId:s.id,searchType:t.searchType,tool:t.tool,asinsCount:t.asinsCount})}return null}),Cg=Jt(se,"userPresets",async e=>{const t=se.getState().props,n=t==null?void 0:t.requests.getUserPresets;if(t!=null&&n!=null){const s=ce("domain",(t==null?void 0:t.marketplace)||"amazon.com");return n==null?void 0:n({marketplaceId:s.id,searchType:t.searchType,tool:t.tool})}return null}),cA=()=>{const e=vg(n=>n.status==="loaded"),t=Cg(n=>n.status==="loaded");return h.useMemo(()=>e&&t?"loaded":"loading",[e,t])},dA=()=>{const e=se(nA);h.useEffect(()=>{e!=null&&(vg.action(),Cg.action())},[e])},ud=(e,t,n,s)=>{const r={...t},a=e["include-all"]!=null?String(e["include-all"])==="1"?"all":"any":null,i=pt({...n??{},...e,...a!=null?{include:a}:{}},["sort","include-all","include-any",...s??[]]),l=pt(r,["sort","include-all","include-any",...s??[]]);return JSON.stringify(Cu(vu(i)))===JSON.stringify(Cu(vu(l)))},vu=e=>Object.entries(e).reduce((n,[s,r])=>({...n,[s]:r!=null&&typeof r=="object"&&Array.isArray(r)&&typeof(r==null?void 0:r[0])=="string"?[...r].sort((a,i)=>a.localeCompare(i)):r}),{}),Cu=e=>Object.entries(e).reduce((n,[s,r])=>({...n,[s]:r!=null&&typeof r=="boolean"?Number(r):r}),{}),pd=()=>{const e=se(or),t=se(oA),[n,s]=h.useState(e),{watch:r,getValues:a}=_e();return h.useEffect(()=>{s(pt(a(),t))},[s,a,t]),r(i=>{s(pt(i,t))}),{formData:n}},uA=({preset:e})=>{const{t}=T(),{isOverflown:n,checkOverflown:s}=po(),r=se(or),a=se(y=>{var w;return((w=y.props)==null?void 0:w.skipFields)??[]}),i=se(kg),l=se(y=>{var w,P;return((w=y.props)==null?void 0:w.skipFieldsForLoad)??((P=y.props)==null?void 0:P.skipFields)??[]}),u=se(y=>{var w;return(w=y.props)==null?void 0:w.availableMatchTypes}),d=se(y=>{var w;return(w=y.props)==null?void 0:w.onApply}),p=se(y=>{var w;return((w=y.props)==null?void 0:w.executeWithRestriction)??pA}),m=se(y=>{var w;return((w=y.props)==null?void 0:w.restricted)??!1}),{formData:g}=pd(),{setValue:x}=_e(),S=(y,w,P)=>{fs("Filter Preset Clicked",{filterLibraryType:P?"Preset":"User Custom",presetName:w});const A=y["include-all"],W=y["include-any"],_=A||W?String(A)==="1"?"all":"any":null,{"include-all":G,"include-any":q,...U}=i||{},{"include-all":ye,"include-any":pe,sort:le,...Ae}=y,Pe={...U,...jm.omit(Ae,a),...y!=null&&y.bestMonth?{bestMonth:new Date(y==null?void 0:y.bestMonth)}:{},...y!=null&&y.timePeriod?{timePeriod:void 0}:{},..._!=null?{include:_}:{},...(y==null?void 0:y.matchType)!=null&&u!=null?{matchType:y.matchType.filter(De=>u.includes(De))}:{}};return Object.entries(Pe).filter(De=>!l.includes(De[0])).forEach(([De,ze])=>x(De,a.includes(De)?r!=null?r[De]:void 0:ze))},j=t(`filterPresets.staticPresetNames.${e.name}.description`)===`filterPresets.staticPresetNames.${e.name}.description`,f=e.isDefault&&!j?t(`filterPresets.staticPresetNames.${e.name}.description`):void 0,v=f!=null,k=e.isDefault?t(`filterPresets.staticPresetNames.${e.name}.title`):e.name;return o.jsx("div",{children:o.jsx(oi,{content:v||!n?o.jsxs(o.Fragment,{children:[n?void 0:k,v&&!n&&o.jsx("br",{}),v?f:void 0]}):void 0,children:o.jsx(mA,{children:o.jsx(ni,{active:ud(e.filters,g,r,a),content:o.jsx(hA,{onMouseEnter:s,children:e.isDefault?t(`filterPresets.staticPresetNames.${e.name}.title`):e.name}),onClick:()=>{var y,w;if(p(()=>S(e.filters,e.name,e.isDefault)),(y=e.filters)!=null&&y.sort){const P=(w=e.filters)==null?void 0:w.sort;d==null||d({sortDirection:P.startsWith("-")?"DESC":"ASC",sortField:P.replace("-","")})}else d==null||d()},disabled:m})},e.id)})})},pA=e=>e(),mA=c.div`
  & > * > * {
    cursor: pointer !important;
    padding: 4px 0;
  }
`,hA=c.div`
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: 132px;
`,gA=()=>{const e=se(eA);return o.jsx(o.Fragment,{children:e.map(t=>o.jsx(uA,{preset:t},`${t.id}_${t.isDefault}`))})},xA="data:image/svg+xml,%3csvg%20width='12'%20height='12'%20viewBox='0%200%2012%2012'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M0%202.45459V6.27277H2.86364V4.0431L0%202.45459V2.45459Z'%20fill='%230081FF'/%3e%3cpath%20d='M4.63635%204.0431V6.27277H7.49999V2.45459L4.63635%204.0431V4.0431Z'%20fill='%230081FF'/%3e%3cpath%20d='M9.13635%201.57601V6.27273H12V0L9.13635%201.57601V1.57601Z'%20fill='%230081FF'/%3e%3crect%20y='7.77271'%20width='2.86364'%20height='3.81818'%20fill='%23003873'/%3e%3crect%20x='4.63635'%20y='7.77271'%20width='2.86364'%20height='3.81818'%20fill='%23003873'/%3e%3crect%20x='9.13635'%20y='7.77271'%20width='2.86364'%20height='3.81818'%20fill='%23003873'/%3e%3c/svg%3e",bA=Jt(se,"delete",async e=>{const t=se.getState().props,n=t==null?void 0:t.requests.deleteUserPreset;return n!=null&&(t!=null&&t.tool)?await n({...e,tool:t.tool}):null},{initialStatus:"init",fulfilled:({payload:e})=>{fs("Filter Library Preset Deleted");const t=se.getState().userPresets;t!=null&&t.data&&dd.set({...t,data:t.data.filter(({id:s})=>s!==e.id)});const n=Xe.getState().translation;if(n){const{t:s}=n;Be.success(s("filterPresets.messages.delete.success"))}},rejected:({fetchError:e})=>je(e)}),fA=["edit","delete"],SA={edit:If,delete:Wf},yA=({name:e,handleAction:t,id:n,closeParent:s})=>{const{t:r}=T();return o.jsx(jA,{onClick:a=>a.stopPropagation(),children:o.jsx(We,{appendTo:"parent",content:o.jsx(o.Fragment,{children:fA.map(a=>o.jsx(CA,{children:o.jsxs(vA,{onClick:()=>{t(n,a),s()},children:[r(`common.${a}`),o.jsx(TA,{icon:SA[a]})]})},a))}),children:o.jsx(kA,{type:"button",icon:o.jsx(E,{icon:Xl}),size:"100",buttonType:"icon","data-testid":"filter-preset-kebab-menu","data-testname":e})})})},jA=c.div`
  margin-left: auto;
  padding-right: 0 !important;
`,kA=c(F)``,TA=c(E)`
  margin-left: ${({theme:e})=>e.spacing.sp8};
`,vA=c(We.Item)`
  ${Fe};
  color: ${({theme:e})=>e.systemColors.grey600};
  padding: ${e=>`0 ${e.theme.spacing.sp16}`};
  background-color: ${e=>e.$active?e.theme.systemColors.grey200:void 0};
`,CA=c.div`
  display: flex;
  flex-direction: column;
  align-self: center;
  width: 100%;
`,AA=()=>{const{t:e}=T(),t=se(cd),n=se(or),s=se(y=>{var w;return((w=y.props)==null?void 0:w.skipFields)||[]}),r=se(kg),a=se(y=>{var w,P;return((w=y.props)==null?void 0:w.skipFieldsForLoad)??((P=y.props)==null?void 0:P.skipFields)??[]}),i=se(y=>{var w;return(w=y.props)==null?void 0:w.availableMatchTypes}),l=se(y=>{var w;return(w=y.props)==null?void 0:w.onApply}),u=se(y=>{var w;return((w=y.props)==null?void 0:w.executeWithRestriction)??wA}),d=se(y=>{var w;return((w=y.props)==null?void 0:w.restricted)??!1}),{formData:p}=pd(),{setValue:m}=_e(),g=yo.open,x=(y,w)=>{w==="edit"?g({presetId:y}):w==="delete"&&bA.action({id:y})},S=(y,w,P)=>{fs("Filter Preset Clicked",{filterLibraryType:P?"Preset":"User Custom",presetName:w});const A=y["include-all"],W=y["include-any"],_=A||W?String(A)==="1"?"all":"any":null,{include:G,"include-all":q,"include-any":U,...ye}=r||{},{"include-all":pe,"include-any":le,sort:Ae,...Pe}=y,De={...ye,...jm.omit(Pe,s),...y!=null&&y.bestMonth?{bestMonth:new Date(y==null?void 0:y.bestMonth)}:{},...y!=null&&y.timePeriod?{timePeriod:void 0}:{},..._!=null?{include:_}:{},...(y==null?void 0:y.matchType)!=null&&i!=null?{matchType:y.matchType.filter(ze=>i.includes(ze))}:{}};return Object.entries(De).forEach(([ze,Re])=>m(ze,a.includes(ze)?n!=null?n[ze]:void 0:Re))},[j,f]=h.useState(!1),v=h.useRef(null),k=()=>{var y;f(!1),(y=v.current)==null||y.close()};return o.jsx(PA,{children:o.jsx(We,{open:j,onOpenChange:y=>{y&&fs("Filter Library Opened"),f(y)},content:o.jsx(BA,{children:t.length>0?t.map(y=>o.jsx(RA,{children:o.jsx(MA,{$active:ud(y.filters,p,n,s),onClick:()=>{var w,P;if(S(y.filters,y.name,y.isDefault),(w=y.filters)!=null&&w.sort){const A=(P=y.filters)==null?void 0:P.sort;l==null||l({sortDirection:A.startsWith("-")?"DESC":"ASC",sortField:A.replace("-","")})}else l==null||l()},children:y.isDefault?o.jsxs(o.Fragment,{children:[o.jsx(FA,{}),o.jsx(Ag,{children:e(`filterPresets.staticPresetNames.${y.name}.title`)})]}):o.jsxs(o.Fragment,{children:[o.jsx($A,{text:y.name}),o.jsx(yA,{handleAction:x,id:y.id,closeParent:k,name:y.name})]})})},`${y.id}_${y.isDefault}`)):o.jsx(DA,{children:e("filterPresets.emptyText")})}),children:o.jsx("div",{children:o.jsx(ho,{type:"button",buttonType:"tertiary",size:"100",icon:o.jsx(E,{icon:Up}),locked:d,onLockedClick:y=>{y.stopPropagation(),y.preventDefault(),u==null||u(()=>{})},children:e("filterPresets.buttons.filterLibrary")})})})})},wA=e=>e(),$A=({text:e})=>{const{isOverflown:t,checkOverflown:n}=po();return o.jsx(oi,{content:t?void 0:e,delay:[500,0],appendTo:document.body,zIndex:1e7,children:o.jsx(Ag,{onMouseEnter:n,children:e})})},PA=c.div``,BA=c.div`
  max-height: 336px;
  overflow-y: scroll;
`,MA=c(We.Item)`
  ${Fe};
  display: flex;
  align-items: center;
  padding-left: ${e=>e.theme.spacing.sp16};
  padding-right: ${e=>e.theme.spacing.sp8};
  background-color: ${e=>e.$active?e.theme.systemColors.grey200:void 0};
  max-width: 300px;
`,Ag=c.div`
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;

  &&& {
    padding: 0;
  }
`,RA=c.div`
  display: flex;
  flex-direction: column;
  align-self: center;
  width: 100%;
`,FA=c.img.attrs({src:xA})`
  margin-right: ${({theme:e})=>e.spacing.sp8};
`,DA=c.div`
  ${Fe};
  padding-left: ${({theme:e})=>e.spacing.sp16};
`,wg=({staticItemsCount:e})=>{const t=h.useMemo(()=>[...new Array(e)].map((n,s)=>s),[e]);return o.jsxs(o.Fragment,{children:[t.map(n=>o.jsx(IA,{},n)),o.jsx(WA,{})]})},IA=c(ae)`
  width: 90px;
  height: 24px;
  border-radius: 12px;
`,WA=c(ae)`
  width: 123px;
  height: 32px;
`,$g=e=>o.jsxs(Pg,{children:[o.jsx(OA,{}),o.jsx(wg,{...e})]}),Pg=c.div`
  display: flex;
  align-items: center;
  flex-wrap: wrap;
  padding: ${({theme:e})=>e.spacing.sp12} 0 ${({theme:e})=>e.spacing.sp20};
  row-gap: ${e=>e.theme.spacing.sp4};
  column-gap: ${e=>e.theme.spacing.sp8};

  & > :last-child {
    margin-left: ${({theme:e})=>e.spacing.sp8};
  }

  ${e=>e.noPaddingBottom&&Z`
      padding-bottom: 0;
    `}
`,OA=c(ae)`
  margin: 7px;
  width: 315px;
`,md=({className:e})=>{const{t}=T(),n=cA(),s=se(a=>{var i;return((i=a.props)==null?void 0:i.staticItemsCount)||2}),r=se(a=>{var i;return((i=a.props)==null?void 0:i.noPaddingBottom)??!1});return dA(),o.jsxs(Pg,{noPaddingBottom:r,className:e,children:[o.jsx(zA,{children:t("filterPresets.presetsTitle")}),o.jsxs(lA,{status:n,skeleton:o.jsx(wg,{staticItemsCount:s}),children:[o.jsx(gA,{}),o.jsx(AA,{})]})]})};c.div`
  ${ni.Wrapper} {
    cursor: default;
  }
`;const zA=c.div`
  ${Fe};
  color: ${e=>e.theme.systemColors.black};
`,Bg=e=>(h.useEffect(()=>sA.set(e),[e]),o.jsx(rA,{})),Gt=({onAccept:e,skippedFieldsForCheckFormIsEmpty:t,dataTestId:n})=>{const{t:s}=T(),{isOverflown:r,checkOverflown:a}=po(),{formData:i}=pd(),l=se(or),u=se(v=>{var k;return((k=v.props)==null?void 0:k.restricted)??!1}),d=se(v=>{var k;return((k=v.props)==null?void 0:k.executeWithRestriction)??NA}),p=h.useMemo(()=>JSON.stringify(pt(i,t??[]))===JSON.stringify(pt(l,t??[])),[l,i,t]),m=se(cd),g=se(or),x=se(v=>{var k;return(k=v.props)==null?void 0:k.skipFields}),S=h.useMemo(()=>m.find(v=>ud(v.filters,i,g,x)),[i,g,m,x]),j=h.useCallback(()=>d(()=>{yo.open({presetId:null,onAccept:e})}),[d,e]),f=S!=null&&!p;return o.jsx(oi,{content:r||f?o.jsxs(o.Fragment,{children:[r&&s("filterPresets.buttons.saveAsFilterPreset"),r&&f&&o.jsx("br",{}),f&&o.jsx("div",{dangerouslySetInnerHTML:{__html:s("filterPresets.tooltips.youAlreadyHavePresetWithSameSettings",{name:S.isDefault?s(`filterPresets.staticPresetNames.${S.name}.title`):S.name})}})]}):void 0,appendTo:document.body,children:o.jsx(VA,{children:o.jsx(ho,{buttonType:"text",size:"200",type:"button","data-testid":n??"saveasfilterpreset",disabled:(p||S!=null)&&!u,locked:u,onClick:j,onLockedClick:j,children:o.jsx(_A,{onMouseEnter:a,children:s("filterPresets.buttons.saveAsFilterPreset")})})})})},NA=e=>e(),VA=c.div`
  min-width: 100px;
  overflow: hidden;
`,_A=c.div`
  max-width: 100%;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
`,EA=async(e,t)=>D({url:$(`${I}/api/blackbox/v1/filters`,{}),method:"POST",params:{...e,filters:gt({filter:e.filters,minmaxFields:t,roundingSettings:{}})},useSessionAccountId:!0}),LA=async({id:e})=>D({url:$(`${I}/api/blackbox/v1/filters/${e}`,{}),method:"DELETE",useSessionAccountId:!0}),qA=async({marketplaceId:e,searchType:t})=>{const n=await D({url:$(`${I}/api/blackbox/v1/preset-filters/search-type/${t}`,{marketplaceId:e}),method:"GET",useSessionAccountId:!0});return{...n,data:n.data.map(s=>({...s,filters:{...s.filters,...s.filters.fulfillment?{fulfillment:s.filters.fulfillment.map(r=>String(r))}:{},...s.filters.sizeTier?{sizeTier:s.filters.sizeTier.map(r=>String(r))}:{}}}))}},HA=async({marketplaceId:e,searchType:t})=>D({url:$(`${I}/api/blackbox/v1/filters`,{"filter[marketplaceId]":e,"filter[searchType]":t,per_page:1e3}),method:"GET",useSessionAccountId:!0}),UA=async e=>D({url:$(`${I}/api/blackbox/v1/filters/${e.id}`,{}),method:"PUT",params:{...e},useSessionAccountId:!0}),KA={createUserPreset:EA,deleteUserPreset:LA,getStaticPresets:qA,getUserPresets:HA,renamePreset:UA},hd=e=>o.jsx(Bg,{...e,tool:"blackbox",requests:KA,staticItemsCount:4,skipFields:e.skipFields??GA}),GA=["filtersType"],ct=ht(e=>e.marketplace,e=>ce("domain",e)),gd=ht(e=>e.selected,e=>{var t;return((t=e.data)==null?void 0:t.data.tableData)??[]},(e,t)=>t.filter(n=>e.includes(n.id)).map(n=>n.phrase)),ZA=ht(e=>{var t;return((t=e.data)==null?void 0:t.data.tableData)??[]},e=>US(e.filter(t=>(t==null?void 0:t.totalClickShareAsin)!=null).map(t=>({keyword:t.phrase,phraseId:t.Phrase_id})),t=>t.phraseId)),YA=ht(e=>e.categories,e=>e?e.map(t=>({...t,value:t.id,label:t.categoryName,defaultOpen:!1,childCount:0})):[]),QA=[...new Array(3)].map((e,t)=>t+1),JA=()=>h.useMemo(()=>QA.map(e=>({value:e,label:e})),[]),XA=()=>h.useMemo(()=>lj.map(e=>({value:e,label:e})),[]),ew={clickShareAsin:{numberOfAsins:"clickShareAsinNumberOfAsins",operator:"clickShareAsinOperator",value:"clickShareAsinValue"},conversionShareAsin:{numberOfAsins:"conversionShareAsinNumberOfAsins",operator:"conversionShareAsinOperator",value:"conversionShareAsinValue"}},Au=({type:e})=>{const{t}=T(),{numberOfAsins:n,operator:s,value:r}=ew[e],{control:a}=_e(),i=JA(),l=XA();return o.jsxs("div",{children:[o.jsx(He,{label:t(`abaTopSearchTerms.filter.${e}.label`),tooltipContent:o.jsx(nw,{})}),o.jsxs(ow,{children:[o.jsx(tt,{name:n,control:a,render:({field:u})=>o.jsx(Ht,{placeholder:t("abaTopSearchTerms.filter.numberOfAsins.placeholder"),options:i,value:u.value,onChange:d=>{u.onChange(d.value)}})}),o.jsx(tt,{name:s,control:a,render:({field:u})=>o.jsx(Ht,{placeholder:t("abaTopSearchTerms.filter.mustBe.placeholder"),options:l,value:u.value,onChange:d=>{u.onChange(d.value)}})}),o.jsx(tt,{name:r,control:a,render:({field:u})=>o.jsx(Jl,{rightLabel:"%",value:u.value??"",onChange:d=>{const p=tw(d.target.value,0,100);u.onChange(p||void 0)},"data-testid":`${e==="clickShareAsin"?"clickSharePercents":"convSharePercents"}`})})]})]})},tw=(e,t,n)=>{const s=parseFloat(e),r=Number(t),a=Number(n),i=!isNaN(s);return i&&!isNaN(r)&&s<r?r:i&&!isNaN(a)&&s>a?a:i?s:""},ow=c.div`
  display: flex;
  align-items: center;
  gap: ${e=>e.theme.spacing.sp8};

  & > * {
    flex: 1;
  }

  ${es.ValueWrapper} {
    white-space: nowrap;
  }
`,nw=()=>{const{t:e}=T();return o.jsxs(sw,{children:[o.jsx("div",{dangerouslySetInnerHTML:{__html:e("abaTopSearchTerms.advFilterTooltip.asins")}}),o.jsxs(rw,{children:[o.jsx("div",{dangerouslySetInnerHTML:{__html:e("abaTopSearchTerms.advFilterTooltip.operators.title")}}),o.jsxs(aw,{children:[o.jsx("li",{children:e("abaTopSearchTerms.advFilterTooltip.operators.list.more")}),o.jsx("li",{children:e("abaTopSearchTerms.advFilterTooltip.operators.list.moreOrEqual")}),o.jsx("li",{children:e("abaTopSearchTerms.advFilterTooltip.operators.list.equal")}),o.jsx("li",{children:e("abaTopSearchTerms.advFilterTooltip.operators.list.less")}),o.jsx("li",{children:e("abaTopSearchTerms.advFilterTooltip.operators.list.lessOrEqual")})]})]}),o.jsx("div",{dangerouslySetInnerHTML:{__html:e("abaTopSearchTerms.advFilterTooltip.clickShare")}}),o.jsx("div",{dangerouslySetInnerHTML:{__html:e("abaTopSearchTerms.advFilterTooltip.conversionShare")}}),o.jsx("div",{dangerouslySetInnerHTML:{__html:e("abaTopSearchTerms.advFilterTooltip.andOr")}}),o.jsxs("div",{children:[o.jsx(iw,{children:e("abaTopSearchTerms.advFilterTooltip.example")}),o.jsx("span",{children:e("abaTopSearchTerms.advFilterTooltip.exampleText")})]})]})},sw=c.div`
  display: flex;
  flex-direction: column;
  gap: ${e=>e.theme.spacing.sp8};
`,rw=c.div`
  display: flex;
  flex-direction: column;
  gap: ${e=>e.theme.spacing.sp4};
`,aw=c.ul`
  list-style-type: circle;
`,iw=c.i`
  font-style: italic;
`,lw=()=>{const{t:e}=T();return h.useMemo(()=>[{label:e("abaTopSearchTerms.filter.advancedInteraction.and"),value:"and"},{label:e("abaTopSearchTerms.filter.advancedInteraction.or"),value:"or"}],[e])},cw=()=>{const e=lw();return o.jsx(fo,{name:"clickAndConversionShareOperator",options:e})},dw=async({marketplaceId:e})=>D({url:$(`${I}/api/blackbox/v1/aba/categories`,{marketplaceId:e}),method:"GET",useSessionAccountId:!0}),wu=Jt(K,"categories",async e=>(await dw({marketplaceId:e})).data),uw=({name:e,...t})=>{const{t:n}=T(),[s,r]=h.useState(""),[a,i]=h.useState([]),{watch:l,setValue:u}=_e(),d=l(e),p=wu(f=>f.status),m=K(YA),g=K(f=>f.marketplace),{id:x}=ce("domain",g),S=h.useCallback(f=>u(e,f.map(v=>v.id)),[e,u]);h.useEffect(()=>{wu.action(x)},[x]);const j=f=>{r(f),f.length>=3?i(m.filter(v=>{var k;return(k=v.label)==null?void 0:k.toLowerCase().includes(f.toLowerCase())})):i([])};return o.jsxs(pw,{children:[o.jsx(He,{label:n("abaTopSearchTerms.filter.category.label")}),p!=="loading"?o.jsx(wm,{...t,placeholder:n("abaTopSearchTerms.filter.category.placeholder"),dropdownAutoWidth:!0,value:d,options:s.length>=3?a:m,onChange:S,onSearch:j,selectAllOption:!0,autocomplete:!0}):o.jsx(ae,{$size:"large"})]})},pw=c.div`
  overflow: hidden;
  z-index: 1;
`,mw=e=>e.split(/[\x09 ,;\n]+/).map(t=>t.trim()).filter(t=>!!t),hw=e=>D({url:$(`${ys}/api/v1/product/validate-asin`,e,{arrayFormat:"bracket"}),method:"GET",useSessionAccountId:!0}),Va=({title:e,list:t,size:n})=>{const s=ks(`(min-width: ${js.mobile}px)`),r=en();return o.jsxs(gw,{children:[e&&o.jsx(xw,{children:e}),t.map((a,i)=>o.jsx(bw,{buttonType:"text",type:"button",size:n??s?"200":"100",onClick:()=>{var l;a.url&&(r(a.url),ee.getState().setStatus("loading")),(l=a.onClick)==null||l.call(a)},children:a.id},i))]})},gw=c.div`
  display: flex;
  align-items: center;
  flex-wrap: wrap;
  margin-top: ${({theme:e})=>e.spacing.sp8};

  & > :last-child::after {
    content: "" !important;
  }
`,xw=c.div`
  ${Fe};
  margin-right: 4px;
`,bw=c(F)`
  padding: 0;

  &::after {
    content: ", ";
    color: ${({theme:e})=>e.systemColors.grey600};
    font-weight: normal;
    margin-right: 2px;
  }
`,fw=()=>{const{t:e}=T(),t=K(ct),{setValue:n}=_e(),s=Cc(t,a=>{H({eventName:"BB ABA Demo Applied",eventProperties:{type:"asin"}}),n("products",[a]),n("keyword",null)}).slice(0,2),r=wc(t,a=>{H({eventName:"BB ABA Demo Applied",eventProperties:{type:"keyword"}}),n("products",null),n("keyword",a)}).slice(0,2);return o.jsxs(Sw,{children:[o.jsx(Va,{title:e("abaTopSearchTerms.filter.keywordOrAsins.needAsin"),list:s,size:"100"}),o.jsx(Va,{title:e("abaTopSearchTerms.filter.keywordOrAsins.needKeyword"),list:r,size:"100"})]})},Sw=c.div`
  display: flex;
  gap: ${e=>e.theme.spacing.sp16};
  ${F} {
    min-height: ${e=>e.theme.spacing.sp24};
  }
`,Xr=100,$u=1;let qs={};const yw=()=>{const{t:e}=T(),{control:t}=_e(),n=K(ct);return h.useEffect(()=>{qs=(ii[n.domain]??[]).reduce((r,a)=>({...r,[a.id]:!0}),{})},[n.domain]),o.jsxs(kw,{children:[o.jsx(tt,{name:"keyword",control:t,render:({field:s})=>{const r=s.value,a=!!r,i=s.onChange;return o.jsx(tt,{name:"products",control:t,render:({field:l})=>{const u=l.value,d=l.onChange,p=r!=null?[r]:u??[],m=a?$u:Xr,g=p.length>=m,x=S=>mw(S).slice(0,a?1:Xr-((u==null?void 0:u.length)??0));return o.jsx(Zn,{value:p,inputProps:{placeholder:e("abaTopSearchTerms.filter.keywordOrAsins.placeholder",{count:Xr-((u==null?void 0:u.length)??0),maxAsins:Xr-((u==null?void 0:u.length)??0),maxKeywords:$u}),disabled:g},size:"200",clearOnError:!0,addTagsOnPressKeys:jw,onSeparate:x,maxTags:m,expanded:!0,onChange:(S,j)=>{if(S[0]!=null&&qs[S[0]]){i(null);const v=S.filter(y=>qs[y]);d(v);const k=S.filter(y=>!qs[y]);k.length>0&&Be.error(e("abaTopSearchTerms.notifications.invalidAsins",{count:k.length,asins:k.join(", ")}))}else i(S[0]??null),d(null);(j==null?void 0:j.type)==="remove"&&(a?(i(S[0]??null),d(null)):(i(null),d(S&&S.length>0?S:null)))},validation:async S=>{if(S==null)return!1;const j=S.trim();if(j===""||u!=null&&u.includes(j)||r===j||a)return!1;if(j.length===10)try{await hw({marketplaceId:n.id,asinOrUrl:j}),qs[j]=!0}catch{}return!0}})}})}}),o.jsx(fw,{})]})},jw=["Comma"],kw=c.div`
  display: flex;
  flex-direction: column;
  gap: ${e=>e.theme.spacing.sp8};
  padding-top: ${e=>e.theme.spacing.sp32};
  padding-bottom: ${e=>e.theme.spacing.sp24};
  border-bottom: 1px solid ${e=>e.theme.systemColors.grey200};
`,Tw=()=>{const{t:e}=T();return o.jsx(O,{name:"searchFrequencyRankTrend",label:e("abaTopSearchTerms.filter.searchFrequencyRankTrend.label"),tooltipContent:e("abaTopSearchTerms.filter.searchFrequencyRankTrend.tooltip"),rightLabel:"%","data-testid":"sfrTrend"})},vw=()=>{const{t:e}=T();return o.jsx(O,{name:"averageRatingAsin",label:e("abaTopSearchTerms.filter.averageRating.label"),tooltipContent:e("abaTopSearchTerms.filter.averageRating.tooltip"),min:0,"data-testid":"topAvgRating"})},Cw=()=>{const{t:e}=T();return o.jsx(O,{name:"averageMonthlyAge",label:e("abaTopSearchTerms.filter.averageMonthlyAge.label"),tooltipContent:e("abaTopSearchTerms.filter.averageMonthlyAge.tooltip"),min:0,"data-testid":"topMonthlyAvgAge"})},Mg=(e,t)=>0 .toLocaleString(e,{style:"currency",currency:t,minimumFractionDigits:0,maximumFractionDigits:0}).replace(/\d/g,"").trim(),Aw=()=>{const{t:e,language:t}=T(),n=K(ct).currency,s=Mg(t,n);return o.jsx(O,{name:"totalRevenueAsin",label:e("abaTopSearchTerms.filter.totalMonthlyRevenue.label"),tooltipContent:e("abaTopSearchTerms.filter.totalMonthlyRevenue.tooltip"),min:0,rightLabel:s,"data-testid":"topTotalMonthlyRevenue"})},ww=()=>{const{t:e}=T();return o.jsx(O,{name:"totalSalesAsin",label:e("abaTopSearchTerms.filter.totalMonthlySales.label"),tooltipContent:e("abaTopSearchTerms.filter.totalMonthlySales.tooltip"),min:0,"data-testid":"topTotalMonthlySales"})},$w=()=>{const{t:e}=T();return o.jsx(O,{name:"totalReviewCountAsin",label:e("abaTopSearchTerms.filter.totalReviewCount.label"),tooltipContent:e("abaTopSearchTerms.filter.totalReviewCount.tooltip"),min:0,"data-testid":"topTotalReviewCount"})},Pw=()=>{const{control:e}=_e(),t=_n({control:e,name:"clickShareAsinNumberOfAsins"})==null,n=_n({control:e,name:"clickShareAsinOperator"})==null,s=_n({control:e,name:"clickShareAsinValue"})==null,r=_n({control:e,name:"conversionShareAsinNumberOfAsins"})==null,a=_n({control:e,name:"conversionShareAsinOperator"})==null,i=_n({control:e,name:"conversionShareAsinValue"})==null;return h.useMemo(()=>{let l=[];const u=t||n||s;u&&(l=[...l,"clickShareAsinNumberOfAsins","clickShareAsinOperator","clickShareAsinValue"]);const d=r||a||i;return d&&(l=[...l,"conversionShareAsinNumberOfAsins","conversionShareAsinOperator","conversionShareAsinValue"]),u&&d&&(l=[...l,"clickAndConversionShareOperator"]),l},[t,n,s,r,a,i])},ul="abaTstFilterForm",Bw=()=>{const{t:e}=T(),[t,n]=Kt(),s=K(k=>k.advancedFilterExpanded),r=Nj.set,a=K(ct),i=_e(),{watch:l,getValues:u,reset:d,handleSubmit:p}=i,m=K(k=>k.filter),g=Pw(),[x,S,j]=ZC({watch:l,getValues:u,storedValue:m,minmaxFields:Pu,initValue:So,skippedFields:g,skippedFieldsForClear:Mw}),f=p(_c.set),v=h.useCallback(()=>{j&&Ej(),d(So)},[j,d]);return o.jsxs(Iw,{id:ul,onSubmit:f,children:[o.jsxs(Fo,{dataTestId:"BlackBoxABATSTFilterShowMore",opened:t,onOpenChange:n,title:o.jsx(Bo,{children:o.jsx(Ow,{expanded:t})}),children:[o.jsx(yw,{}),o.jsxs(Rg,{children:[o.jsx(uw,{name:"categories"}),o.jsx(EC,{fieldName:"phraseIncludeKeyword"}),o.jsx(Mo,{fieldName:"phraseExcludeKeyword"}),o.jsx($r,{moduleId:"blackbox",showSearchFrequencyRank:!0,clickShareRateFieldName:"totalClickShareAsin",conversionShareRateFieldName:"totalConversionShareAsin"}),o.jsx(OC,{fieldName:"searchVolume"}),o.jsx(KC,{}),o.jsx(UC,{}),o.jsx(zC,{})]}),o.jsxs(zw,{children:[o.jsx(BC,{isOpen:s,iconPosition:"right",onClick:()=>r(!s),children:e("abaTopSearchTerms.buttons.advancedSettings")}),o.jsx(Nw,{onClickReset:v,disabled:x,clearDisabled:S,before:o.jsx(Gt,{}),hidden:s,formId:ul})]}),o.jsx(FC,{isOpen:s,children:o.jsxs(o.Fragment,{children:[o.jsxs(Ww,{children:[o.jsx(Tw,{}),o.jsx(Mr,{fieldName:"searchVolumeTrend",tooltipContent:e("abaTopSearchTerms.filter.searchFrequencyRankTrend.tooltip")}),o.jsx(Cw,{}),o.jsx(ww,{}),o.jsx(Aw,{}),o.jsx($w,{}),o.jsx(vw,{}),o.jsx(Ds,{moduleId:"cerebro",project:"cerebro",marketplace:a,platform:"AMAZON",isHistorical:!1,showIfNotAmazon:!0}),o.jsxs(Vw,{children:[o.jsx(Au,{type:"clickShareAsin"}),o.jsx(cw,{}),o.jsx(Au,{type:"conversionShareAsin"})]})]}),o.jsx(bo,{onClickReset:v,disabled:x,clearDisabled:S,before:o.jsx(Gt,{dataTestId:"saveasfilterpresetadvanced",skippedFieldsForCheckFormIsEmpty:g}),formId:ul})]})})]}),o.jsx(hd,{initialFilterValue:So,minMaxFields:Pu,marketplace:a.domain,searchType:bs.ABATST,executeWithRestriction:Dw,restricted:!1,skipFields:Rw,skipFieldsForLoad:Fw}),o.jsx(Ri,{})]})},Mw=[],Rw=["products","keyword"],Fw=[],Dw=e=>e(),Pu=[...ih],Iw=c.form``,Rg=c(Is)`
  margin-top: ${e=>e.theme.spacing.sp24};
`,Ww=c(Rg)`
  margin: 0;
  padding-top: ${e=>e.theme.spacing.sp16};
`,Ow=c(md)`
  padding: ${e=>e.theme.spacing.sp16} 0;
  ${({expanded:e})=>!e&&Z`
      padding-bottom: 0;
    `}
`,zw=c.div`
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: ${e=>e.theme.spacing.sp16};
  margin-top: ${e=>e.theme.spacing.sp32};
`,Nw=c(bo)`
  margin: 0;
  transition: 0.3s all ease-in-out;
  ${({hidden:e})=>e&&Z`
      opacity: 0;
      pointer-events: none;
    `}
`,Vw=c.div`
  display: contents;

  ${z.laptop} {
    & > div:nth-child(1) {
      grid-column: 1 / 3;
    }

    & > div:nth-child(2) {
      grid-column: 3;
    }

    & > div:nth-child(3) {
      grid-column: 1 / 3;
      align-self: center;
    }
  }

  ${z.largeDesktop} {
    & > div:nth-child(1) {
      grid-column: 1 / 3;
    }

    & > div:nth-child(2) {
      grid-column: 3;
      justify-content: center;
    }

    & > div:nth-child(3) {
      grid-column: 4 / 6;
    }
  }
`,_w=()=>Wc(),Ew=()=>_w().map(e=>Ep.find(({value:t})=>t===e)).filter(e=>e!=null),Lw=()=>{const e=K(n=>n.marketplace),{reset:t}=_e();return o.jsx(fr,{value:e,onChange:({value:n})=>{t(So),qj.set(So),bh.set(n)},options:Ew(),appendTo:document.body,size:"100"})},qw=()=>{const{t:e}=T(),t=K(a=>a.period),n=Vc.set,s=Qs(t[0]),r=h.useMemo(()=>Hw(s).map(a=>({label:e(`months.${a}`),value:a})),[e,s]);return o.jsx(Uw,{options:r,value:ns(t[0]),onChange:a=>{const i=(a==null?void 0:a.value)!=null?Number(a.value):void 0;if(i!=null){let l=new Date(s,i,2),u=Dt(l);const d=new Date;if(u<=d)n([mt(l),u]);else{const p=ns(d);l=mt(new Date(s,p-1,2)),u=Dt(l),n([l,u])}}}})},Hw=e=>{const t=Xo(new Date),n=[e===Qs(t)?ns(Cn(t,1)):11];for(;n[n.length-1]&&n[n.length-1]>0;)n.push(n[n.length-1]-1);return n},Uw=c(Ht)`
  min-width: 142px;
`,Kw=["Weekly","Monthly"],Gw=()=>{const{t:e}=T();return Kw.map(t=>({value:t,label:e(`abaTopSearchTerms.marketplaceAndPeriodSelectors.periodTypeOptions.${t}`)}))},Zw=()=>{const e=Gw(),t=K(n=>n.reportingRange);return o.jsx(Ht,{options:e,value:t,onChange:({value:n})=>{_j.set(n)}})},Fg=Xo(new Date("2020-01-01")),Yw=()=>{const e=Xw(),t=K(r=>r.period),n=Vc.set,s=t.length>0?Dg(t):void 0;return o.jsx(Qw,{options:e,value:s,onChange:r=>{const a=e$(r.value);n(a)}})},Qw=c(Ht)`
  min-width: 324px;
`,Jw=()=>{const e=Lo(Ft(new Date),1),t=[[io(e),jo(e)]];for(;t[t.length-1][0]&&Lo(t[t.length-1][0],1)>Fg;)t.push([Lo(Ft(io(t[t.length-1][0])),1),Lo(Jo(jo(t[t.length-1][0])),1)]);return t},Xw=()=>{const{t:e}=T();return h.useMemo(()=>Jw().map(t=>({label:`(${e("abaTopSearchTerms.common.week")} ${xr(t[0])}) ${$e(t[0],"standard")} - ${$e(t[1],"standard")}`,value:Dg(t)})),[e])},Dg=e=>`${ke(Ft(e[0]),"yyyy-MM-dd")} - ${ke(Jo(e[1]),"yyyy-MM-dd")}`,e$=e=>{if(e!=null){const t=e.split(" - ");if(t.length>0){const n=Ft(Sc(Xo(new Date(t[0])),1)),s=Jo(Xo(new Date(t[1])));return[n,s]}}return[]},t$=()=>{const e=n$(),t=K(r=>r.period),n=Vc.set,s=ns(t[0]);return o.jsx(s$,{options:e,value:Qs(t[0]),onChange:r=>{const a=r!=null&&r.value?Number(r.value):void 0;if(a!=null){let i=new Date(a,s,2),l=Dt(i);const u=new Date;if(l<=u)n([mt(i),l]);else{const d=ns(u);i=mt(new Date(a,d-1,2)),l=Dt(i),n([i,l])}}}})},o$=()=>{const e=Xo(new Date),t=ns(e)>=1,n=[Qs(t?e:ym(e,1))];for(;n[n.length-1]&&n[n.length-1]>Qs(Fg);)n.push(n[n.length-1]-1);return n},n$=()=>h.useMemo(()=>o$().map(e=>({label:String(e),value:e})),[]),s$=c(Ht)`
  min-width: 142px;
`,r$=()=>{const e=K(t=>t.reportingRange);return o.jsxs(o.Fragment,{children:[o.jsx(Zw,{}),e==="Weekly"?o.jsx(Yw,{}):o.jsxs(o.Fragment,{children:[o.jsx(qw,{}),o.jsx(t$,{})]})]})},a$=()=>{const{t:e}=T();return o.jsxs(l$,{children:[o.jsxs(xd,{children:[e("abaTopSearchTerms.marketplaceAndPeriodSelectors.text1"),o.jsx(Lw,{})]}),o.jsxs(i$,{children:[e("abaTopSearchTerms.marketplaceAndPeriodSelectors.text2"),o.jsx(r$,{})]})]})},xd=c.div`
  display: flex;
  align-items: center;
  column-gap: ${e=>e.theme.spacing.sp16};
  row-gap: ${e=>e.theme.spacing.sp8};
  flex-wrap: wrap;
`,i$=c(xd)`
  flex: 1;
  flex-wrap: nowrap;
  white-space: nowrap;
`,l$=c(xd)`
  ${Co};
  margin-bottom: ${e=>e.theme.spacing.sp8};
`,c$="https://re-cdn.helium10.com/container/static/aba-thumb-K6YWSS-1.png",d$=({videoHash:e,showIcon:t,children:n,buttonType:s,...r})=>{const{t:a}=T(),{planGroup:i}=ne(),l=C(()=>e!=null?cc(e):void 0),u=C(d=>{var p;return(p=r.onClick)==null||p.call(r,d),H({eventName:"BB ABA Learn Video",eventProperties:{action:"watch_video",plan:i,place:"banner"}}),l(),dc(!0)},[]);return o.jsx(F,{buttonType:s??"secondary",size:"100",icon:t?o.jsx(E,{icon:zp}):void 0,...r,onClick:u,children:n||a("abaTopSearchTerms.banners.start.videoButton")})},Bu="HIDE_NEW_BB_ABA_TST_START_BANNER",u$=()=>{const{t:e}=T(),{planGroup:t}=ne(),[n,s]=h.useState(as.get(Bu)??!1),r=a=>{H({eventName:"BB ABA Learn Video",eventProperties:{action:a,plan:t,place:"banner"}}),s(!0),as.set(Bu,!0)};return n?null:o.jsxs(p$,{children:[o.jsx(b$,{type:"button",buttonType:"icon",size:"50",onClick:()=>r("x"),icon:o.jsx(E,{icon:Kp})}),o.jsx(m$,{children:o.jsx(h$,{src:c$,alt:e("abaTopSearchTerms.banners.start.title")})}),o.jsxs(g$,{children:[o.jsx(x$,{children:e("abaTopSearchTerms.banners.start.title")}),o.jsx(f$,{dangerouslySetInnerHTML:{__html:e("abaTopSearchTerms.banners.start.text")}}),o.jsxs(S$,{children:[o.jsx(d$,{showIcon:!0}),o.jsx(F,{buttonType:"text",onClick:()=>r("dismiss"),children:e("abaTopSearchTerms.banners.start.dismiss")})]})]})]})},p$=c($n)`
  display: flex;
  flex-direction: column;
  gap: ${e=>e.theme.spacing.sp16};
  padding: ${e=>e.theme.spacing.sp16};
  position: relative;
  background-color: ${e=>e.theme.systemColors.blue50};
  border: none;
  margin-bottom: ${e=>e.theme.spacing.sp8};

  ${z.laptop} {
    flex-direction: row;
  }
`,m$=c.div`
  display: flex;
  max-width: 239px;
  max-height: 155px;
  border-radius: 6px;
  overflow: hidden;
`,h$=c.img`
  max-width: 100%;
  object-fit: cover;
  object-position: center;
`,g$=c.div``,x$=c.div`
  ${Ao};
  padding-right: ${e=>e.theme.spacing.sp48};
  margin-bottom: ${e=>e.theme.spacing.sp8};
`,b$=c(F)`
  color: ${e=>e.theme.systemColors.blue600};
  position: absolute;
  top: ${e=>e.theme.spacing.sp8};
  right: ${e=>e.theme.spacing.sp8};
  z-index: 1;
`,f$=c.div`
  ${Fe};
  margin-bottom: ${e=>e.theme.spacing.sp16};
`,S$=c.div`
  display: flex;
  gap: ${e=>e.theme.spacing.sp8};
`,Do=(e,t)=>{const{subscribe:n}=Xt();h.useEffect(()=>n(ik,s=>{e("phrase",s),t()}),[t])},y$=({title:e,list:t})=>{const{t:n}=T(),s=b(go),{available:r,restricted:a}=h.useMemo(()=>(t??[]).reduce((d,p)=>(p.restricted?d.restricted.push(p):d.available.push(p),d),{available:[],restricted:[]}),[t]),i=n(`upgradePlan.plans.diamond${s?"Chinese":""}`),l=C(()=>Nt({trigger:"10 keyword Types Tooltip",tool:"Cerebro"}),[]);if(t==null)return null;const u=a.length!==0;return o.jsx(j$,{children:o.jsx(re,{colorType:"light",maxWidth:368,zIndex:101,interactive:u,content:o.jsxs(Mu,{children:[o.jsx(T$,{children:e}),r.map(d=>o.jsxs(v$,{children:[o.jsx(Ru,{children:d.title}),o.jsx(C$,{children:d.value})]},d.id)),u&&o.jsxs(o.Fragment,{children:[o.jsx(A$,{}),o.jsxs(w$,{children:[o.jsx(Mu,{children:a.map(d=>o.jsx(Ru,{children:d.title},d.id))}),o.jsx($$,{buttonType:"text",onClick:l,children:o.jsx("div",{dangerouslySetInnerHTML:{__html:n("historicalData.upgradeTooltip.upgradeTo",{upgradePlan:i})}})})]})]})]}),children:o.jsx("div",{children:o.jsx(k$,{icon:Za})})})})},j$=c.div`
  margin-left: ${e=>e.theme.spacing.sp4};
`,k$=c(E)`
  font-size: 16px;
`,T$=c.div`
  ${St};
  color: ${e=>e.theme.systemColors.black};
`,Mu=c.div`
  display: flex;
  flex-direction: column;
  gap: ${e=>e.theme.spacing.sp8};
`,v$=c.div`
  display: flex;
  align-items: center;
  justify-content: space-between;
  align-self: stretch;
`,Ru=c.div`
  ${fe};
`,C$=c.div`
  ${St};
  color: ${e=>e.theme.systemColors.black};
  margin-left: ${e=>e.theme.spacing.sp24};
`,A$=c.div`
  border-top: 1px solid ${e=>e.theme.systemColors.grey200};
`,w$=c.div`
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: ${e=>e.theme.spacing.sp32};
`,$$=c(F)`
  line-height: 18px;
  text-align: right;
`,Eo=({value:e,label:t,minimumFractionDigits:n,maximumFractionDigits:s,status:r,detailsTitle:a,details:i})=>e!==void 0?o.jsx(B$,{children:r==="loaded"?o.jsxs(o.Fragment,{children:[o.jsx(F$,{children:t}),o.jsxs(M$,{children:[o.jsx(R$,{children:typeof e=="number"?N({value:e,minimumFractionDigits:n,maximumFractionDigits:s}):e}),o.jsx(y$,{title:a,list:i})]})]}):o.jsx(P$,{})}):null,P$=()=>o.jsxs(D$,{children:[o.jsx(I$,{}),o.jsx(W$,{})]}),B$=c.div`
  display: grid;
  align-items: center;
`,M$=c.div`
  display: flex;
  margin-top: ${({theme:e})=>e.spacing.sp4};
  align-items: center;
`,R$=c.span`
  ${Of};
`,F$=c.span`
  ${fe};
  display: inline-block;
  white-space: nowrap;
`,D$=c.div`
  margin-top: 2px;
  margin-bottom: 10px;
  min-width: 100px;
`,I$=c(ae)`
  height: 14px;
  max-width: 100px;
`,W$=c(ae)`
  height: 14px;
  max-width: 60px;
  margin-top: ${({theme:e})=>e.spacing.sp4};
`,O$=()=>{const{t:e}=T(),t=Rn(r=>r.status),n=K(r=>{var a;return(a=r.data)==null?void 0:a.data.searchResultsCount}),s=K(ct);return o.jsxs(z$,{children:[o.jsx(N$,{children:e("abaTopSearchTerms.summary.metricsTitle")}),o.jsxs(V$,{children:[o.jsx(Eo,{label:o.jsx("div",{dangerouslySetInnerHTML:{__html:e("abaTopSearchTerms.summary.metrics.totalKeywords.title")}}),status:t,value:(n==null?void 0:n.totalKeywords)??0}),o.jsx(ea,{}),o.jsx(Eo,{label:o.jsx("div",{dangerouslySetInnerHTML:{__html:e("abaTopSearchTerms.summary.metrics.top3AsinsTotalMonthlyUnitSales.title")}}),status:t,value:(n==null?void 0:n.top3AsinsTotalMonthlyUnitSales)??0,details:[],detailsTitle:o.jsx(ta,{children:e("abaTopSearchTerms.summary.metrics.top3AsinsTotalMonthlyUnitSales.tooltip")})}),o.jsx(ea,{}),o.jsx(Eo,{label:o.jsx("div",{dangerouslySetInnerHTML:{__html:e("abaTopSearchTerms.summary.metrics.top3AsinsTotalMonthlyRevenue.title")}}),status:t,value:(n==null?void 0:n.top3AsinsTotalMonthlyRevenue)!=null?Ut({amount:qe(n.top3AsinsTotalMonthlyRevenue,s.currency),currency:s.currency}):0,details:[],detailsTitle:o.jsx(ta,{children:e("abaTopSearchTerms.summary.metrics.top3AsinsTotalMonthlyRevenue.tooltip")})}),o.jsx(ea,{}),o.jsx(Eo,{label:o.jsx("div",{dangerouslySetInnerHTML:{__html:e("abaTopSearchTerms.summary.metrics.avgClickShare.title")}}),status:t,value:`${(n==null?void 0:n.avgClickShare)??0}%`,details:[],detailsTitle:o.jsx(ta,{children:e("abaTopSearchTerms.summary.metrics.avgClickShare.tooltip")})}),o.jsx(ea,{}),o.jsx(Eo,{label:o.jsx("div",{dangerouslySetInnerHTML:{__html:e("abaTopSearchTerms.summary.metrics.avgConversionShare.title")}}),status:t,value:`${(n==null?void 0:n.avgConversionShare)??0}%`,details:[],detailsTitle:o.jsx(ta,{children:e("abaTopSearchTerms.summary.metrics.avgConversionShare.tooltip")})})]})]})},z$=c.div`
  display: flex;
  flex-direction: column;
  gap: ${e=>e.theme.spacing.sp12};
`,N$=c.div`
  ${Le};
  color: ${e=>e.theme.systemColors.black};
`,V$=c.div`
  display: flex;
  align-items: center;
  flex-wrap: wrap;
  gap: ${e=>e.theme.spacing.sp32};
`,ea=c.div`
  width: 1px;
  height: 32px;
  flex: 0 0 auto;
  background: ${e=>e.theme.systemColors.grey200};
`,ta=c.div`
  ${fe};
`,_$=["csv","xlsx"],Fi=h.memo(e=>{const{t}=T(),{marketplaceDomain:n,data:s,status:r="loaded"}=e,a=n.includes("walmart")?"WALMART":"AMAZON",i=V(a,"japanWordFrequency"),l=n&&n==="amazon.co.jp"&&i,{isDemo:u}=ge(),d=V(n==="walmart.com"?"WALMART":"AMAZON","pagination")&&!u,p=h.useCallback(m=>{const g={headers:[t("cerebro.wordFrequency.word"),t("cerebro.wordFrequency.qty")],rows:s.map(({word:x,qty:S})=>[x,String(S)])};switch(m){case"csv":{$a({data:[g.headers,...g.rows],filename:"text"});break}case"xlsx":{wa([{data:g,name:"Table"}],"text");break}}},[s,t]);return o.jsx(o.Fragment,{children:!l&&o.jsx(We,{hideOnClick:!0,content:o.jsx(o.Fragment,{children:_$.map(m=>o.jsx(We.Item,{onClick:()=>{p(m)},"data-testid":m,children:t(`export.options.${m}`)},m))}),children:r==="loaded"?o.jsx(L$,{buttonType:"tertiary",icon:o.jsx(E,{icon:ec}),disabled:d,"data-testid":"export",className:e.className,children:t("cerebro.wordFrequency.export")}):o.jsx(E$,{})})})}),E$=c(ae)`
  width: 87px;
  height: 32px;
  margin-left: ${({theme:e})=>e.spacing.sp16};
`,L$=c(F)`
  margin-left: ${({theme:e})=>e.spacing.sp16};
  position: relative;
`,q$=()=>{const e=K(ct),t=K(s=>{var r;return((r=s.data)==null?void 0:r.data.wordFrequency)||[]}),n=Rn(s=>s.status);return o.jsx(H$,{marketplaceDomain:e.domain,data:t,status:n})},H$=c(Fi)`
  margin: 0;
`,U$=()=>{const{t:e}=T(),{period:t,reportingRange:n}=K(r=>r),s=h.useMemo(()=>n==="Weekly"?`${e("abaTopSearchTerms.common.week")} ${xr(t[0])} - ${$e(t[0],"standard")} - ${$e(t[1],"standard")}`:$e(t[0],"completeShort"),[t,n,e]);return o.jsxs(K$,{children:[o.jsxs(G$,{children:[o.jsx(Z$,{children:e("abaTopSearchTerms.summary.title")}),o.jsx(Y$,{children:s})]}),o.jsx(q$,{})]})},K$=c.div`
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  gap: ${e=>e.theme.spacing.sp24};
`,G$=c.div`
  display: flex;
  flex-direction: column;
  gap: ${e=>e.theme.spacing.sp4};
`,Z$=c.div`
  ${Ya};
  color: ${e=>e.theme.systemColors.black};
`,Y$=c.div`
  ${fe};
`,Rr=({project:e="cerebro",platform:t="AMAZON"})=>e==="cerebro"&&t==="AMAZON",Io=({data:e,widthLimitation:t=!0,marketplaceDomain:n,status:s="loaded",period:r,project:a,className:i,hideExportButton:l=!1})=>{const{t:u}=T(),d=n.includes("walmart")?"WALMART":"AMAZON",p=V(d,"japanWordFrequency"),m=n&&n==="amazon.co.jp"&&p,g=C(wh),x=Rr({platform:d,project:a});return o.jsxs(Qn,{widthLimitation:t,className:i,children:[o.jsxs(J$,{children:[o.jsxs("div",{children:[o.jsx(X$,{children:u("cerebro.wordFrequency.title")}),r!=null&&s==="loaded"&&o.jsx(eP,{children:r}),r!=null&&s!=="loaded"&&o.jsx(Q$,{})]}),!x&&!l&&o.jsx(Fi,{marketplaceDomain:n,data:e,status:s})]}),!m&&s==="loaded"&&o.jsxs(Fu,{children:[e==null?void 0:e.slice(0,16).map(({word:S,qty:j},f)=>o.jsxs(tP,{onClick:()=>{g(S)},"data-testid":u(`wordfrequency${S}`),children:[S,o.jsxs(oP,{children:["(",N({value:j}),")"]})]},f)),e.length===0&&o.jsx(aP,{children:u("cerebro.wordFrequency.noData")})]}),!m&&s!=="loaded"&&o.jsx(Fu,{children:[...new Array(20)].map((S,j)=>o.jsx(nP,{},j))})]})},Qn=c.div`
  display: flex;
  flex-direction: column;
  padding-left: 0;

  ${z.largeDesktop} {
    padding-top: ${({theme:e})=>e.spacing.sp8};
    padding-left: ${({theme:e})=>e.spacing.sp16};
  }

  ${z.extraDesktop} {
    padding-left: ${({theme:e})=>e.spacing.sp32};
  }
`,Q$=()=>o.jsx(sP,{children:o.jsx(rP,{})}),J$=c.div`
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  margin-bottom: ${({theme:e})=>e.spacing.sp8};
`,X$=c.span`
  ${Le};
  white-space: nowrap;
  color: ${({theme:e})=>e.systemColors.black};
`,eP=c.div`
  ${fe};
`,Fu=c.div`
  display: flex;
  flex-wrap: wrap;
  overflow: hidden;
  max-height: 104px;
  position: relative;
  flex: 1;

  & > :not(:last-child) {
    margin-right: ${({theme:e})=>e.spacing.sp8};
  }
`,tP=c.div`
  ${St};
  margin-top: ${({theme:e})=>e.spacing.sp8};
  color: ${({theme:e})=>e.systemColors.black};
  cursor: pointer;
`,oP=c.div`
  ${wo};
  display: inline-block;
  margin-left: ${({theme:e})=>e.spacing.sp4};
`,nP=c(ae)`
  width: 100px;
  height: 18px;
  margin-top: ${({theme:e})=>e.spacing.sp8};
`,sP=c.div`
  margin-top: 2px;
  margin-bottom: 2px;
`,rP=c(ae)`
  height: 14px;
  max-width: 100px;
`,aP=c.div`
  ${fe};
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
`,iP=()=>{const e=K(ct),t=K(s=>{var r;return((r=s.data)==null?void 0:r.data.wordFrequency)||[]}),n=Rn(s=>s.status);return o.jsx(lP,{data:t,project:"blackBoxProducts",marketplaceDomain:e.domain,status:n,hideExportButton:!0})},lP=c(Io)`
  padding: 0;
`,cP=()=>{const{setValue:e,handleSubmit:t}=_e(),n=(r,a)=>e("phraseIncludeKeyword",a),s=t(_c.set);return Do(n,s),o.jsxs(dP,{children:[o.jsx(U$,{}),o.jsxs(pP,{children:[o.jsx(O$,{}),o.jsx(uP,{}),o.jsx(iP,{})]})]})},dP=c($n)`
  display: flex;
  flex-direction: column;
  gap: ${e=>e.theme.spacing.sp24};
`,uP=c.div`
  background: ${e=>e.theme.systemColors.grey200};
  width: 1px;
  height: 100%;
  min-height: 128px;
`,pP=c.div`
  display: grid;
  grid-template-columns: 1fr auto 370px;
  grid-column-gap: ${e=>e.theme.spacing.sp32};
  grid-row-gap: ${e=>e.theme.spacing.sp16};
`,mP=[],hP=()=>{const e=K(ct).store,t=K(n=>{var s;return((s=n.addToKeywordTracker)==null?void 0:s.phrases)||mP});return o.jsx(cm,{moduleId:"blackbox-aba",data:{marketplace:e,moduleId:"blackbox-aba",phrases:t},notification:Be,CustomButton:gP})},gP=({onClick:e})=>(h.useEffect(()=>{Nc.patch({onClick:e})},[e]),o.jsx(o.Fragment,{})),xP=()=>{const e=K(ct),t=K(r=>{var a;return(a=r.addToMyList)==null?void 0:a.phrase}),[n]=Il(),s=h.useCallback(()=>t?[t]:[],[t]);return o.jsx(kS,{isOpen:n,onClose:Il.close,marketplace:e.domain,getSelectedKeywords:s,notification:Be})},bP=()=>{const{t:e}=T();return h.useMemo(()=>({itemsPerPage:hh,columnDraggable:!0,columnVisible:!0,searchVisible:!1,contentSizeVisible:!1,extraSettings:()=>o.jsx(Ts,{showAsinDetails:!0,showTop10RankedProductsForKeyword:!0}),noDataState:o.jsx(fP,{children:e("abaTopSearchTerms.noData")}),onClickColumnSettings:()=>{}}),[e])},fP=c.div`
  padding: 0 ${e=>e.theme.spacing.sp16};
  text-align: center;
`,ln=({phrase:e,phraseId:t,mainAsin:n,amazonChoiceAsin:s,marketplace:r,marketplaceFull:a,tooltips:i,tool:l,simpleTooltip:u,onClickLink:d})=>{const{notFreeAndStarter:p}=ne(),[m,g]=pc(zf(x=>[x.top10RankedProductsForKeyword,x.asinDetails]));return o.jsxs(o.Fragment,{children:[o.jsx(xS,{keyword:e,phraseId:t,marketplace:(a==null?void 0:a.store)||"",tool:l,disableExtendedTooltip:!m,disableExtendedProductSummary:!g,onChangeProductDetailsType:x=>mc.set(x),simpleTooltip:u||!p}),o.jsx(yP,{href:a?iS(a.domain,e):"",target:"_blank",rel:"noreferrer",onClick:d,children:o.jsx(jP,{icon:ts})}),o.jsxs(SP,{children:[s&&s===n&&r==="AMAZON"&&o.jsx(Gr.Dark,{tooltipContent:i==null?void 0:i.amazon}),s&&s===n&&r==="WALMART"&&o.jsx(Gr.WalmartDark,{tooltipContent:i==null?void 0:i.walmart}),s&&s!==n&&r==="AMAZON"&&o.jsx(Gr.Light,{tooltipContent:i==null?void 0:i.amazonMain}),s&&s!==n&&r==="WALMART"&&o.jsx(Gr.WalmartLight,{tooltipContent:i==null?void 0:i.walmartMain})]})]})},cn=Z`
  ${St};
  display: flex;
  overflow: hidden;
  padding: ${({theme:e})=>`${e.spacing.sp8} ${e.spacing.sp16}`};

  & > :not(:first-child) {
    margin-left: ${({theme:e})=>e.spacing.sp8};
  }
`,AE=c.div`
  overflow: hidden;
  text-overflow: ellipsis;
  color: ${({theme:e})=>e.systemColors.black};
`,SP=c.div`
  display: flex;
  align-items: center;
  white-space: initial;
`,yP=c.a`
  display: flex;
  align-items: center;
`,jP=c(E)`
  color: ${({theme:e})=>e.systemColors.black};
  height: 16px;
  cursor: pointer;
`,Di=({children:e,tooltip:t,...n})=>t?o.jsx(re,{content:t,placement:"top",appendTo:document.body,maxWidth:500,delay:0,zIndex:1e3,...n,children:e}):o.jsx(o.Fragment,{children:e}),be=({value:e,minimumFractionDigits:t,maximumFractionDigits:n,tooltip:s})=>{const r=s?"div":h.Fragment;return o.jsx(Di,{tooltip:s,children:o.jsx(r,{children:e||e===0?N({value:e,minimumFractionDigits:t,maximumFractionDigits:n}):"-"})})},X=Z`
  justify-content: flex-end;
  color: ${({theme:e})=>e.systemColors.grey600};
`,Zt=({value:e,phrase:t,phraseId:n,marketplace:s,isWalmart:r,isWalmartRestriction:a,displayValue:i,moduleId:l="cerebro",enabledWalmartSearchVolumeChart:u,enabledGoogleSearchVolumeChar:d,onClickChart:p})=>{const m=e!==-1?e:null,g=m?N({value:m,maximumFractionDigits:0}):"-",x=C(Hm),S=f=>{p==null||p(),x({afterCheckSuccess:f,isWalmart:a})},j={platform:r?"WALMART":"AMAZON",disabledPlatforms:{GOOGLE:!d,WALMART:!u||((s==null?void 0:s.TLDomain)||"com")!=="com"}};return o.jsxs(o.Fragment,{children:[o.jsx("div",{"data-testid":`searchvolume${j.platform.toLowerCase()}value`,children:i||g}),m&&t?o.jsx(dm,{keyword:t,phraseId:n,marketplace:(s==null?void 0:s.TLDomain)||"com",onClick:S,moduleId:l,platformOptions:j}):null]})},Yt=Z`
  justify-content: flex-end;
  width: 100%;
  color: ${({theme:e})=>e.systemColors.grey600};

  & > :first-child {
    margin-right: ${({theme:e})=>e.spacing.sp4} !important;
  }
`,kP=({className:e,trend:t,suffix:n,maximumFractionDigits:s})=>{if(!t)return o.jsx(Du,{className:e,children:"-"});const r=t>0;return o.jsxs(Du,{className:e,trendUp:r,children:[o.jsxs("div",{children:[N({value:t,maximumFractionDigits:s}),n]}),o.jsx(E,{icon:r?lr:Qa})]})},Du=c.div`
  ${wo}
  display: flex;
  align-items: center;
  gap: ${e=>e.theme.spacing.sp4};
  ${({trendUp:e,theme:t})=>Z`
    svg {
      color: ${e?t.dataVisualizationColors.green500:t.dataVisualizationColors.tomato500};
    }
  `}
`,TP=({trend:e,...t})=>{const n=e!=null?Te(e,1):null;return o.jsxs(vP,{children:[o.jsx(Zt,{...t}),t.value&&t.value!==-1&&t.value!==0&&n!==0?o.jsx(CP,{trend:n,suffix:"%"}):"-"]})},vP=c.div`
  display: grid;
  grid-template-columns: 1fr auto;
  grid-column-gap: ${e=>e.theme.spacing.sp8};
  grid-row-gap: ${e=>e.theme.spacing.sp4};
  justify-items: flex-end;
`,CP=c(kP)`
  align-self: flex-end;
`,AP=({phrase:e})=>{const{t}=T(),n=K(ct);return o.jsx(We,{content:o.jsxs(o.Fragment,{children:[o.jsx(bc,{onClick:()=>{},params:{type:"keywords",marketplace:n.store,keywords:[e],source:ss.SOURCE.CEREBRO,seSource:"blackbox_aba"}}),o.jsx(We.Item,{onClick:()=>{H({eventName:"BB ABA Keyword Action Taken",eventProperties:{"Action Type":"Run Magnet"}});const s=$(`${ys}${lS}`,{marketplace:n.store,keywords:[e]},{arrayFormat:"index"});window.open(s,"__target")},children:t("abaTopSearchTerms.buttons.runInMagnet")}),o.jsx(We.Item,{onClick:()=>{H({eventName:"BB ABA Keyword Action Taken",eventProperties:{"Action Type":"Add to Keyword Tracker"}}),Nc.patch({phrases:[e]}),setTimeout(()=>{var s,r;return(r=(s=K.getState().addToKeywordTracker)==null?void 0:s.onClick)==null?void 0:r.call(s)},0)},children:t("abaTopSearchTerms.buttons.addToKeywordTracker")}),o.jsx(We.Item,{onClick:()=>{H({eventName:"BB ABA Keyword Action Taken",eventProperties:{"Action Type":"Add to My List"}}),Il.open({phrase:e})},children:t("abaTopSearchTerms.buttons.addToMyList")})]}),appendTo:document.body,children:o.jsx(F,{buttonType:"icon",icon:o.jsx(E,{icon:Xl})})})},wP=({list:e})=>o.jsx(Ig,{children:e.map((t,n)=>o.jsxs(Wg,{children:[o.jsx($P,{type:"button",buttonType:"text",onClick:()=>{t.url&&(window.open(t.url,"__target"),H({eventName:"BB ABA External Link Clicked",eventProperties:{type:"top_categories"}}))},disabled:!t.url,children:t.title??"N/A"}),n!==e.length-1?",":""]},t.asinNumber))}),Ig=c.div`
  display: flex;
  flex-direction: row;
  flex-wrap: wrap;
  gap: ${e=>e.theme.spacing.sp4};
  align-items: flex-start;
  width: 100%;
  max-width: 100%;
  position: relative;
`,Wg=c.div`
  display: inline-block;
  max-width: 100%;
  height: 18px;
`,Og=Z`
  padding: 0;
  display: inline-block;
  min-height: 18px;
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: 100%;
`,$P=c(F)`
  ${Og}
`,PP=({list:e})=>o.jsx(Ig,{children:e.map((t,n)=>o.jsxs(Wg,{children:[o.jsx(Iu,{children:t.title??"N/A"}),o.jsx(Iu,{children:n!==e.length-1?",":""})]},t.asinNumber))}),Iu=c.div`
  ${Og}
`,Wo=({value:e,trend:t,asin:n,keyword:s,phraseId:r})=>{const a=K(ct),i=K(ZA),l=kT({asin:n??"",phraseId:r,domain:a.domain}),u=Jj({moduleId:"blackbox",keyword:s,phraseId:r,marketplace:a.domain,type:"multi",keywords:i}),m=(n?()=>{H({eventName:"BB ABA Graph Preview Clicked",eventProperties:{graphType:"Click & Conversion Share"}}),l()}:void 0)??(s?()=>{u()}:void 0),g=m!=null;return n===""?"N/A":o.jsxs(BP,{hasChart:g,children:[o.jsx(MP,{children:e!=null?N({value:e,maximumFractionDigits:1})+"%":"-"}),g&&o.jsx(xo,{onClick:m,disabled:e==null}),e!=null&&o.jsxs(RP,{children:[t!=null&&Te(t,1)!==0?N({value:t,maximumFractionDigits:1})+"%":"-",t!=null&&Te(t,1)!==0&&o.jsx(FP,{icon:t>0?lr:Qa,up:t>0})]})]})},BP=c.div`
  display: grid;
  grid-template-columns: 1fr auto;
  grid-column-gap: ${e=>e.theme.spacing.sp8};
  grid-row-gap: ${e=>e.theme.spacing.sp4};
  align-items: center;
  justify-items: flex-end;

  ${e=>!e.hasChart&&Z`
      grid-template-columns: 1fr;
    `}
`,MP=c.div`
  ${fe};
`,RP=c.div`
  ${wo};
`,FP=c(E)`
  margin-left: ${e=>e.theme.spacing.sp4};
  color: ${e=>e.up?e.theme.dataVisualizationColors.green500:e.theme.dataVisualizationColors.tomato500};
`,pl=({asin:e,title:t,imageSrc:n})=>{const s=K(ct),{asinDetails:r}=pc();return e==null||e===""?"N/A":o.jsx(vs,{marketplace:s.store,tool:"blackbox",market:"AMAZON",renderBlocks:o.jsx($S,{asin:e,showCopyButton:!0}),product:{asin:e,title:t,imageSrc:n,href:nm(s.TLDomain,e)},onImageClick:()=>{H({eventName:"BB ABA External Link Clicked",eventProperties:{type:"product_to_amazon"}})},disableExtendedProductSummary:!r,onChangeProductDetailsType:a=>mc.set(a)})},DP=({phrase:e,phraseId:t,value:n,trend:s})=>n==null?"-":o.jsxs(WP,{children:[o.jsx($j,{phraseId:t}),o.jsx("div",{children:N({value:n,maximumFractionDigits:0})}),o.jsx(IP,{trend:s})]}),IP=({trend:e})=>{if(e==null||Te(e,0)===0)return"-";const t=e>0?"up":"down";return o.jsxs(OP,{trend:t,children:["(",o.jsx("div",{children:N({value:e,maximumFractionDigits:0})+"%"}),o.jsx(zP,{icon:t==="up"?lr:Qa}),")"]})},WP=c.div`
  ${fe};
  display: flex;
  align-items: center;
  gap: ${e=>e.theme.spacing.sp8};
`,OP=c.div`
  display: flex;
  align-items: center;

  ${({trend:e,theme:t})=>e&&Z`
      div {
        color: ${e==="up"?t.systemColors.green600:t.dataVisualizationColors.tomato600};
      }
      svg {
        color: ${e==="up"?t.dataVisualizationColors.green500:t.dataVisualizationColors.tomato500};
      }
    `}
`,zP=c(E)`
  margin-left: ${e=>e.theme.spacing.sp4};
`,NP=()=>{const{t:e}=T(),t=K(ct),n=K(i=>i.reportingRange),s=t.domain==="amazon.com",r=h.useCallback(()=>{H({eventName:"BB ABA Graph Preview Clicked",eventProperties:{graphType:"PPC"}})},[]),a=Mi({moduleId:"cerebro",platform:"AMAZON",project:"cerebro",isHistorical:!1,marketplace:t,noExport:!0,onClickChart:r});return h.useMemo(()=>[{field:"_actions",title:"",static:33,noHeader:!0,noHover:!0,render:i=>o.jsx(AP,{phrase:i.phrase})},{field:"phrase",title:e("abaTopSearchTerms.columns.phrase.title"),tooltip:e("abaTopSearchTerms.columns.phrase.tooltip"),static:252,responsive:!0,sortable:!0,customCSS:cn,render:i=>o.jsx(ln,{phrase:i.phrase,marketplace:"AMAZON",marketplaceFull:t,tool:"blackbox",onClickLink:()=>{H({eventName:"BB ABA External Link Clicked",eventProperties:{type:"keyword_to_amazon"}})}})},{field:"searchVolume",title:e("abaTopSearchTerms.columns.searchVolume.title"),tooltip:e("abaTopSearchTerms.columns.searchVolume.tooltip"),width:132,sortable:!0,customCSS:Yt,render:i=>o.jsx(TP,{value:i.searchVolume??void 0,trend:i.searchVolumeTrend,phrase:i.phrase,marketplace:t,enabledWalmartSearchVolumeChart:!0,enabledGoogleSearchVolumeChar:!0,moduleId:"blackbox",onClickChart:()=>H({eventName:"BB ABA Graph Preview Clicked",eventProperties:{graphType:"Search Volume"}})})},{field:"searchFrequencyRank",title:e("abaTopSearchTerms.columns.searchFrequencyRank.title"),tooltip:e(`abaTopSearchTerms.columns.searchFrequencyRank.tooltip.${n}`),width:250,responsive:!0,sortable:!0,contentPosition:"right",render:i=>o.jsx(DP,{phrase:i.phrase,value:i.searchFrequencyRank,trend:i.searchFrequencyRankTrend,phraseId:i.Phrase_id})},{field:"totalClickShareAsin",title:e("abaTopSearchTerms.columns.totalClickShareAsin.title"),tooltip:e("abaTopSearchTerms.columns.totalClickShareAsin.tooltip"),width:150,sortable:!0,contentPosition:"right",render:i=>o.jsx(Wo,{keyword:i.phrase,phraseId:i.Phrase_id,value:i.totalClickShareAsin,trend:i.totalClickShareAsinTrend})},{field:"totalConversionShareAsin",title:e("abaTopSearchTerms.columns.totalConversionShareAsin.title"),tooltip:e("abaTopSearchTerms.columns.totalConversionShareAsin.tooltip"),width:150,sortable:!0,contentPosition:"right",render:i=>o.jsx(Wo,{value:i.totalConversionShareAsin,trend:i.totalConversionShareAsinTrend})},{field:"asin1",title:e("abaTopSearchTerms.columns.topNAsin.title",{value:1}),width:220,sortable:!0,contentPosition:"right",render:i=>o.jsx(pl,{asin:i.asin1,title:i.title1,imageSrc:i.imageUrl1})},{field:"clickShareAsin1",title:e("abaTopSearchTerms.columns.clickShareAsinN.title",{value:1}),tooltip:e("abaTopSearchTerms.columns.clickShareAsinN.tooltip",{value:1}),width:115,sortable:!0,contentPosition:"right",render:i=>o.jsx(Wo,{value:i.clickShareAsin1,trend:i.clickShareAsin1Trend,asin:i.asin1,phraseId:i.Phrase_id})},{field:"conversionShareAsin1",title:e("abaTopSearchTerms.columns.conversionShareAsinN.title",{value:1}),tooltip:e("abaTopSearchTerms.columns.conversionShareAsinN.tooltip",{value:1}),width:115,sortable:!0,contentPosition:"right",render:i=>o.jsx(Wo,{value:i.conversionShareAsin1,trend:i.conversionShareAsin1Trend,asin:i.asin1,phraseId:i.Phrase_id})},{field:"asin2",title:e("abaTopSearchTerms.columns.topNAsin.title",{value:2}),width:220,sortable:!0,contentPosition:"right",render:i=>o.jsx(pl,{asin:i.asin2,title:i.title2,imageSrc:i.imageUrl2})},{field:"clickShareAsin2",title:e("abaTopSearchTerms.columns.clickShareAsinN.title",{value:2}),tooltip:e("abaTopSearchTerms.columns.clickShareAsinN.tooltip",{value:2}),width:115,sortable:!0,contentPosition:"right",render:i=>o.jsx(Wo,{value:i.clickShareAsin2,trend:i.clickShareAsin2Trend,asin:i.asin2,phraseId:i.Phrase_id})},{field:"conversionShareAsin2",title:e("abaTopSearchTerms.columns.conversionShareAsinN.title",{value:2}),tooltip:e("abaTopSearchTerms.columns.conversionShareAsinN.tooltip",{value:2}),width:115,sortable:!0,contentPosition:"right",render:i=>o.jsx(Wo,{value:i.conversionShareAsin2,trend:i.conversionShareAsin2Trend,asin:i.asin2,phraseId:i.Phrase_id})},{field:"asin3",title:e("abaTopSearchTerms.columns.topNAsin.title",{value:3}),width:220,sortable:!0,contentPosition:"right",render:i=>o.jsx(pl,{asin:i.asin3,title:i.title3,imageSrc:i.imageUrl3})},{field:"clickShareAsin3",title:e("abaTopSearchTerms.columns.clickShareAsinN.title",{value:3}),tooltip:e("abaTopSearchTerms.columns.clickShareAsinN.tooltip",{value:3}),width:115,sortable:!0,contentPosition:"right",render:i=>o.jsx(Wo,{value:i.clickShareAsin3,trend:i.clickShareAsin3Trend,asin:i.asin3,phraseId:i.Phrase_id})},{field:"conversionShareAsin3",title:e("abaTopSearchTerms.columns.conversionShareAsinN.title",{value:3}),tooltip:e("abaTopSearchTerms.columns.conversionShareAsinN.tooltip",{value:3}),width:115,sortable:!0,contentPosition:"right",render:i=>o.jsx(Wo,{value:i.conversionShareAsin3,trend:i.conversionShareAsin3Trend,asin:i.asin3,phraseId:i.Phrase_id})},{field:"brands",title:e("abaTopSearchTerms.columns.brands.title"),tooltip:e("abaTopSearchTerms.columns.brands.tooltip"),width:216,sortable:!1,contentPosition:"right",customCSS:Wu,render:i=>o.jsx(PP,{list:i.brands})},{field:"categories",title:e("abaTopSearchTerms.columns.categories.title"),tooltip:e("abaTopSearchTerms.columns.categories.tooltip"),width:280,sortable:!1,contentPosition:"right",customCSS:Wu,render:i=>o.jsx(wP,{list:i.categories})},...s?[{field:"monthlySales",title:e("abaTopSearchTerms.columns.monthlySales.title"),tooltip:e("abaTopSearchTerms.columns.monthlySales.tooltip"),width:120,sortable:!1,contentPosition:"right",customCSS:X,render:({monthlySales:i})=>i!=null&&i>=0?N({value:i}):"N/A"}]:[],{field:"exactTitleMatchProductsCount",title:e("abaTopSearchTerms.columns.exactTitleMatchProductsCount.title"),tooltip:e("abaTopSearchTerms.columns.exactTitleMatchProductsCount.tooltip"),width:120,sortable:!0,contentPosition:"right",customCSS:X,render:({exactTitleMatchProductsCount:i})=>i!=null&&i>=0?N({value:i}):"N/A"},{field:"resultsNumber",title:e("abaTopSearchTerms.columns.resultsNumber.title"),tooltip:e("abaTopSearchTerms.columns.resultsNumber.tooltip"),width:114,sortable:!0,contentPosition:"right",customCSS:X,render:({resultsNumber:i})=>i!=null&&i>=0?N({value:i}):"N/A"},...a,{field:"averageMonthlyAge",title:e("abaTopSearchTerms.columns.averageMonthlyAge.title"),tooltip:e("abaTopSearchTerms.columns.averageMonthlyAge.tooltip"),width:170,sortable:!0,contentPosition:"right",customCSS:X,render:({averageMonthlyAge:i})=>i!=null&&i>=0?N({value:Te(i,0)}):"N/A"},{field:"totalSalesAsin",title:e("abaTopSearchTerms.columns.totalSalesAsin.title"),tooltip:e("abaTopSearchTerms.columns.totalSalesAsin.tooltip"),width:150,sortable:!0,contentPosition:"right",customCSS:X,render:({totalSalesAsin:i})=>i!=null&&i>=0?N({value:i}):"N/A"},{field:"totalRevenueAsin",title:e("abaTopSearchTerms.columns.totalRevenueAsin.title"),tooltip:e("abaTopSearchTerms.columns.totalRevenueAsin.tooltip"),width:150,sortable:!0,contentPosition:"right",customCSS:X,render:({totalRevenueAsin:i})=>i!=null&&i>=0?Ut({amount:qe(i,t.currency),currency:t.currency}):"N/A"},{field:"totalReviewCountAsin",title:e("abaTopSearchTerms.columns.totalReviewCountAsin.title"),tooltip:e("abaTopSearchTerms.columns.totalReviewCountAsin.tooltip"),width:150,sortable:!0,contentPosition:"right",customCSS:X,render:({totalReviewCountAsin:i})=>i!=null&&i>=0?N({value:i}):"N/A"},{field:"averageRatingAsin",title:e("abaTopSearchTerms.columns.averageRatingAsin.title"),tooltip:e("abaTopSearchTerms.columns.averageRatingAsin.tooltip"),width:150,sortable:!0,contentPosition:"right",customCSS:X,render:({averageRatingAsin:i})=>i!=null&&i>0?o.jsx(PS,{value:i}):"N/A"},{field:"_",title:"",responsive:!0,noHeader:!0,noHover:!0}],[s,t,a,n,e])},Wu=Z`
  position: relative;
`,VP=()=>{const e=Rn(n=>n.status),t=K(n=>[]);return h.useMemo(()=>({minHeight:e==="loaded"&&t.length>0?208:560,stickyHeader:!0,stickyFooter:!0}),[t.length,e])},_P=({data:e,columns:t,closeDropdown:n,fileName:s,onClick:r})=>{const{title:a,type:i,requestAction:l}=e,u=h.useCallback(()=>{i&&(r==null||r(i)),n(),l({onSuccess:d=>{const p=EP({columns:t,result:d});switch(i){case"CSV":{$a({data:[p.headers,...p.rows],filename:s});break}case"XLSX":{wa([{data:{...p},name:"Table"}],s);break}}}})},[i,n,l,r,t,s]);return o.jsx(We.Item,{onClick:u,children:a})},EP=({columns:e,result:t})=>{const n=e.map(r=>r.title),s=t.map(r=>e.map(({exportValue:a})=>a?a(r):""));return{headers:n,rows:s}},LP=({buttonTitle:e,status:t,options:n,exportColumns:s,columnsOrder:r,fileName:a,onClick:i})=>{const{t:l}=T(),[u,d]=h.useState(!1),p=h.useCallback(()=>{i==null||i(),d(!0)},[i]),m=h.useCallback(()=>d(!1),[]),g=h.useMemo(()=>r!=null?r.reduce((x,S)=>[...x,...s.filter(j=>j.field===S)],[]).filter(x=>x!=null):s,[r,s]);return o.jsx(We,{open:u,onOpenChange:d,hideOnClickOutside:!0,content:o.jsx(o.Fragment,{children:n.map(x=>o.jsx(_P,{data:x,columns:g,closeDropdown:m,fileName:a,onClick:x.onClick},x.id))}),children:o.jsx("div",{children:o.jsx(ho,{className:"exportButton",buttonType:"tertiary",size:"100",icon:o.jsx(E,{icon:ec}),onClick:p,loading:t==="loading",children:e??l("buttons.tableExport")})})})},qP=(e,t)=>{const{t:n}=T();if(e[0])return t==="Monthly"?$e(e[0],"completeShort"):`(${n("abaTopSearchTerms.common.week")} ${xr(e[0])}) ${$e(e[0],"standard")} - ${$e(e[1],"standard")}`},HP=async e=>D({url:$(`${I}/api/blackbox/v1/search/aba/${e.searchId}/export`,e,{arrayFormat:"bracket"}),method:"GET",useSessionAccountId:!0}),Ou=Jt(K,"exportData",async({onSuccess:e})=>{const{search:t,tableFilter:n}=K.getState(),s=t==null?void 0:t.data.id;if(s==null)return null;const a=(await HP({searchId:s,sort:Oc(n)})).data;return e(a),{data:a}},{rejected:()=>{}}),UP=()=>{const{t:e}=T(),t=K(ct),n=PC({moduleId:"cerebro",platform:"AMAZON",isHistorical:!1,marketplace:t});return h.useMemo(()=>[{field:"phrase",title:e("abaTopSearchTerms.columns.phrase.title"),exportValue:s=>s.phrase},{field:"searchVolume",title:e("abaTopSearchTerms.columns.searchVolume.title"),exportValue:s=>s.searchVolume?Te(s.searchVolume,0):""},{field:"searchVolume",title:e("abaTopSearchTerms.columns.searchVolume.trend.title"),exportValue:s=>s.searchVolumeTrend!=null?Te(s.searchVolumeTrend,1):""},{field:"searchFrequencyRank",title:e("abaTopSearchTerms.columns.searchFrequencyRank.title"),exportValue:s=>s.searchFrequencyRank!=null?Te(s.searchFrequencyRank,0):""},{field:"searchFrequencyRank",title:e("abaTopSearchTerms.columns.searchFrequencyRank.trend.title"),exportValue:s=>s.searchFrequencyRankTrend!=null?Te(s.searchFrequencyRankTrend,0):""},{field:"totalClickShareAsin",title:e("abaTopSearchTerms.columns.totalClickShareAsin.title"),exportValue:s=>s.totalClickShareAsin!=null?Te(s.totalClickShareAsin,1):""},{field:"totalClickShareAsin",title:e("abaTopSearchTerms.columns.totalClickShareAsin.trend.title"),exportValue:s=>s.totalClickShareAsinTrend!=null?Te(s.totalClickShareAsinTrend,1):""},{field:"totalConversionShareAsin",title:e("abaTopSearchTerms.columns.totalConversionShareAsin.title"),exportValue:s=>s.totalConversionShareAsin!=null?Te(s.totalConversionShareAsin,1):""},{field:"totalConversionShareAsin",title:e("abaTopSearchTerms.columns.totalConversionShareAsin.trend.title"),exportValue:s=>s.totalConversionShareAsinTrend!=null?Te(s.totalConversionShareAsinTrend,1):""},{field:"asin1",title:e("abaTopSearchTerms.columns.topNAsin.title",{value:1}),exportValue:s=>s.asin1??""},{field:"clickShareAsin1",title:e("abaTopSearchTerms.columns.clickShareAsinN.title",{value:1}),exportValue:s=>s.clickShareAsin1!=null?Te(s.clickShareAsin1,1):""},{field:"clickShareAsin1",title:e("abaTopSearchTerms.columns.clickShareAsinN.trend.title",{value:1}),exportValue:s=>s.clickShareAsin1Trend!=null?Te(s.clickShareAsin1Trend,1):""},{field:"conversionShareAsin1",title:e("abaTopSearchTerms.columns.conversionShareAsinN.title",{value:1}),exportValue:s=>s.conversionShareAsin1!=null?Te(s.conversionShareAsin1,1):""},{field:"conversionShareAsin1",title:e("abaTopSearchTerms.columns.conversionShareAsinN.trend.title",{value:1}),exportValue:s=>s.conversionShareAsin1Trend!=null?Te(s.conversionShareAsin1Trend,1):""},{field:"asin2",title:e("abaTopSearchTerms.columns.topNAsin.title",{value:2}),exportValue:s=>s.asin2??""},{field:"clickShareAsin2",title:e("abaTopSearchTerms.columns.clickShareAsinN.title",{value:2}),exportValue:s=>s.clickShareAsin2!=null?Te(s.clickShareAsin2,1):""},{field:"clickShareAsin2",title:e("abaTopSearchTerms.columns.clickShareAsinN.trend.title",{value:2}),exportValue:s=>s.clickShareAsin2Trend!=null?Te(s.clickShareAsin2Trend,1):""},{field:"conversionShareAsin2",title:e("abaTopSearchTerms.columns.conversionShareAsinN.title",{value:2}),exportValue:s=>s.conversionShareAsin2!=null?Te(s.conversionShareAsin2,1):""},{field:"conversionShareAsin2",title:e("abaTopSearchTerms.columns.conversionShareAsinN.trend.title",{value:2}),exportValue:s=>s.conversionShareAsin2Trend!=null?Te(s.conversionShareAsin2Trend,1):""},{field:"asin3",title:e("abaTopSearchTerms.columns.topNAsin.title",{value:3}),exportValue:s=>s.asin3??""},{field:"clickShareAsin3",title:e("abaTopSearchTerms.columns.clickShareAsinN.title",{value:3}),exportValue:s=>s.clickShareAsin3!=null?Te(s.clickShareAsin3,1):""},{field:"clickShareAsin3",title:e("abaTopSearchTerms.columns.clickShareAsinN.trend.title",{value:3}),exportValue:s=>s.clickShareAsin3Trend!=null?Te(s.clickShareAsin3Trend,1):""},{field:"conversionShareAsin3",title:e("abaTopSearchTerms.columns.conversionShareAsinN.title",{value:3}),exportValue:s=>s.conversionShareAsin3!=null?Te(s.conversionShareAsin3,1):""},{field:"conversionShareAsin3",title:e("abaTopSearchTerms.columns.conversionShareAsinN.trend.title",{value:3}),exportValue:s=>s.conversionShareAsin3Trend!=null?Te(s.conversionShareAsin3Trend,1):""},...n,{field:"averageMonthlyAge",title:e("abaTopSearchTerms.columns.averageMonthlyAge.title"),exportValue:({averageMonthlyAge:s})=>s!=null&&s>=0?Te(s,0):""},{field:"totalSalesAsin",title:e("abaTopSearchTerms.columns.totalSalesAsin.title"),exportValue:({totalSalesAsin:s})=>s!=null&&s>=0?Te(s,0):""},{field:"totalRevenueAsin",title:e("abaTopSearchTerms.columns.totalRevenueAsin.title"),exportValue:({totalRevenueAsin:s})=>s!=null&&s>=0?Te(qe(s,t.currency),2):""},{field:"totalReviewCountAsin",title:e("abaTopSearchTerms.columns.totalReviewCountAsin.title"),exportValue:({totalReviewCountAsin:s})=>s!=null&&s>=0?Te(s,0):""},{field:"averageRatingAsin",title:e("abaTopSearchTerms.columns.averageRatingAsin.title"),exportValue:({averageRatingAsin:s})=>s!=null&&s>=0?Te(s,1):""}],[t.currency,n,e])},KP=()=>{const{t:e}=T(),t=UP(),n=Ou(u=>u.status),s=Ou.action,r=h.useCallback(u=>{H({eventName:"BB ABA Export",eventProperties:{type:u==="CSV"?"csv":"xlsx"}})},[]),a=K(u=>u.period),i=K(u=>u.reportingRange),l=qP(a,i);return h.useMemo(()=>({render:(u,d,p)=>o.jsx(GP,{children:o.jsx(LP,{options:[{id:"CSV",type:"CSV",title:e("export.options.csv"),requestAction:s,onClick:r},{id:"XLSX",type:"XLSX",title:e("export.options.xlsx"),requestAction:s,onClick:r}],status:n,exportColumns:t,columnsOrder:p,fileName:`ABA Black Box ${l}`,buttonTitle:e("buttons.export"),onClick:()=>{}})})}),[t,r,l,s,n,e])},GP=c.div`
  display: flex;
  align-items: center;
  gap: ${e=>e.theme.spacing.sp8};
`,ZP=()=>{const e=K(t=>t.tableFilter);return h.useMemo(()=>({value:e}),[e])},YP=()=>{const{t:e}=T(),t=K(gd);return o.jsx(F,{type:"button",icon:o.jsx(E,{icon:Gp}),onClick:()=>{H({eventName:"BB ABA Keyword Action Taken",eventProperties:{"Action Type":"Add to Keyword Tracker"}}),Nc.patch({phrases:t}),setTimeout(()=>{var n,s;return(s=(n=K.getState().addToKeywordTracker)==null?void 0:n.onClick)==null?void 0:s.call(n)},0)},children:e("buttons.addToKeywordTracker")})},QP=({onClick:e,disabled:t,text:n})=>{const{t:s}=T();return o.jsx(F,{buttonType:"secondary",onClick:e,icon:o.jsx(E,{icon:Nf}),"data-testid":"addtomylist",disabled:t,nonce:"",children:n??s("buttons.addToMyList")})},JP=({marketplace:e,getSelectedKeywords:t,onClick:n})=>o.jsx(Tc,{marketplace:e||"amazon.com",notification:Be,getSelectedKeywords:t,type:"dropdown",visibleItemsCount:3,CustomButton:s=>o.jsx(QP,{...s,onClick:()=>{var r;n==null||n(),(r=s.onClick)==null||r.call(s)}}),appendTo:document.body}),XP=()=>{const e=K(ct).domain||"amazon.com",t=K(gd),n=h.useCallback(()=>t,[t]);return o.jsx(JP,{marketplace:e,getSelectedKeywords:n,onClick:()=>{H({eventName:"BB ABA Keyword Action Taken",eventProperties:{"Action Type":"Add to My List"}})}})},e1=()=>{const e=K(gd),t=K(ct);return h.useCallback(n=>n.length===0?null:o.jsxs(o.Fragment,{children:[o.jsx(XP,{}),o.jsx(YP,{}),o.jsx(ti,{params:{type:"keywords",keywords:e,marketplace:t.store,source:ss.SOURCE.CEREBRO,seSource:"blackbox_aba"}})]}),[e,t.store])},t1=()=>h.useCallback((e,t)=>{Vj.patch(e)},[]),o1=()=>h.useCallback(()=>o.jsx(o.Fragment,{}),[]),n1=()=>{const{t:e}=T(),t=K(n=>n.selected);return h.useMemo(()=>({value:t,onChange:zj.set,getTitleText:({items:n,selected:s})=>{const r=s||n;return e(`abaTopSearchTerms.tableTitle.${s>0?"selected":"common"}`,{count:r,value:N({value:r})})}}),[e,t])},s1=()=>{const e=$s(n=>n.status),t=Rn(n=>n.status);return h.useMemo(()=>e==="loading"||t==="loading"?"loading":t,[t,e])},r1=()=>{const e=NP(),t=bP(),n=VP(),s=K(g=>{var x;return((x=g.data)==null?void 0:x.data.tableData)??[]}),r=s1(),a=K(g=>{var x;return((x=g.data)==null?void 0:x.meta.total)??0}),i=KP(),l=e1(),u=o1(),d=n1(),p=ZP(),m=t1();return o.jsx(At,{name:ph,columns:e,behavior:t,dimensions:n,data:s,status:r,total:a,export:i,leftActions:l,rightActions:u,selected:d,filter:p,onFilter:m})},a1=h.memo(()=>{const{t:e}=T(),{useUses:t}=ur.useSingleton(),n=t("blackbox-aba"),s=C(()=>i0(),[]);return n?o.jsxs(i1,{children:[o.jsx(zg,{size:"200",progress:[{value:n.total-n.balance}],total:n.total}),o.jsxs(Ng,{children:[e("abaTopSearchTerms.progress"),o.jsx(Vg,{children:`${n.total-n.balance}/${n.total}`})]}),o.jsx(F,{size:"200",buttonType:"text",onClick:s,children:e("abaTopSearchTerms.getUnlimitedAccess")})]}):null}),i1=c.div`
  display: flex;
  align-items: center;
  gap: ${e=>e.theme.spacing.sp8};
`,zg=c(si)`
  width: 120px;
`,Ng=c.div`
  ${Fe};
`,Vg=c.span`
  ${Le};
  margin-left: ${e=>e.theme.spacing.sp4};
  margin-right: ${e=>e.theme.spacing.sp4};
`,l1=()=>{h.useEffect(()=>{$s.action()},[""])},c1=()=>{l1();const{planGroup:e}=ne(),t=e==="platinum",n=lt({defaultValues:So});return o.jsxs(o.Fragment,{children:[o.jsx(u$,{}),o.jsxs(d1,{children:[o.jsxs(zt,{...n,children:[o.jsx(a$,{}),t&&o.jsx(a1,{}),o.jsx(Bw,{}),o.jsx(cP,{})]}),o.jsx(r1,{})]}),o.jsxs(o.Fragment,{children:[o.jsx(Br,{moduleId:"blackbox"}),o.jsx(Pr,{})]}),o.jsxs(o.Fragment,{children:[o.jsx(hc,{}),o.jsx(xP,{}),o.jsx(hP,{}),o.jsx(cC,{}),o.jsx(ld,{})]})]})},d1=c.div`
  display: flex;
  flex-direction: column;
  gap: ${e=>e.theme.spacing.sp24};
`,u1=()=>o.jsx(p1,{children:o.jsx(lm,{})}),p1=c.div`
  position: fixed;
  z-index: 1;
  top: 0;
  left: 0;
  bottom: 0;
  right: 0;
  display: flex;
  justify-content: center;
  align-items: center;
  padding: ${e=>e.theme.spacing.sp64};
`,m1="https://re-cdn.helium10.com/container/static/aba-tst-no-aba-token-71K2tsW6.svg",h1=({imageSrc:e,children:t,className:n})=>o.jsxs(g1,{className:n,children:[t,o.jsx(b1,{src:e})]}),g1=c.div`
  display: grid;
  grid-template-columns: 1fr 437px;
  align-items: center;
  grid-column-gap: ${e=>e.theme.spacing.sp64};
  grid-row-gap: ${e=>e.theme.spacing.sp32};
`,x1=c.div`
  display: flex;
  flex-direction: column;
`,b1=c.img``,f1=c.div`
  ${Co};
`,S1=c.div`
  ${Fe};
`,y1=c.a`
  text-decoration: none;
`,$t=Object.assign(h1,{Left:x1,Title:f1,Text:S1,Link:y1}),j1=()=>{const e=h.useRef(null),[t,n]=h.useState(0),s=()=>{var a;const r=(a=e.current)==null?void 0:a.offsetTop;n(r||0)};return h.useEffect(()=>(window.addEventListener("resize",s),window.addEventListener("orientationchange",s),()=>{window.removeEventListener("resize",s),window.removeEventListener("orientationchange",s)}),[]),h.useEffect(()=>{setTimeout(s,0)},[e]),h.useMemo(()=>[e,t],[t])},k1=()=>{const[e,t]=h.useState(document.body.scrollHeight);return h.useEffect(()=>{const n=new ResizeObserver(s=>t(s[0].target.scrollHeight));return n.observe(document.body),()=>n.unobserve(document.body)},[]),e},T1="https://re-cdn.helium10.com/container/static/aba-tst-sample-hbb0dcv2.png",zu=24,Nu=.3,bd=()=>{const{y:e}=hy(),[t,n]=j1(),s=k1(),{height:r}=kc(),a=s-r+32,i=h.useMemo(()=>Nu+(1-Nu)*Math.min(e/Math.min(n-zu,a),1),[a,n,e]);return o.jsxs(v1,{children:[o.jsxs(C1,{onClick:()=>{window.scrollTo({top:n-zu,behavior:"smooth"})},children:[o.jsx(E,{icon:Vf,fontSize:20}),"Preview Sample Data"]}),o.jsx(A1,{src:T1,opacity:i,ref:t})]})},v1=c.div`
  display: flex;
  flex-direction: column;
  gap: ${e=>e.theme.spacing.sp32};
`,C1=c.div`
  ${fe};
  display: flex;
  align-items: center;
  align-self: center;
  gap: ${e=>e.theme.spacing.sp8};
  cursor: pointer;
`,A1=c.img`
  width: 100%;
  opacity: ${e=>e.opacity};
`,w1=({className:e,localStorageKey:t,children:n,hideCloseButton:s=!1})=>{const[r,a]=h.useState(as.get(t)??!1),i=()=>{a(!0),as.set(t,!0)};return r?null:o.jsxs($1,{className:e,children:[!s&&o.jsx(M1,{type:"button",buttonType:"icon",size:"200",onClick:i,icon:o.jsx(E,{icon:Kp})}),n]})},$1=c($n)`
  border: none;
  background-color: ${e=>e.theme.systemColors.blue50};
  display: flex;
  flex-direction: column;
  gap: ${e=>e.theme.spacing.sp8};
  position: relative;
  margin-bottom: ${e=>e.theme.spacing.sp8};
`,P1=c.div`
  ${Ao};
  padding-right: ${e=>e.theme.spacing.sp48};
`,B1=c.div`
  ${Fe};
`,M1=c(F)`
  position: absolute;
  top: ${e=>e.theme.spacing.sp8};
  right: ${e=>e.theme.spacing.sp8};
  z-index: 1;
`,Zs=Object.assign(w1,{Title:P1,Text:B1}),R1="HIDE_BB_ABA_TST_UNLOCK_BANNER",fd=({hasUpgradeButton:e})=>{const{t}=T(),{planGroup:n}=ne(),s=Ps(),{useUses:r}=ur.useSingleton(),a=r("blackbox-aba"),i=a&&(a==null?void 0:a.balance)<=0,l=n==="platinum"&&i,u=C(()=>a0(),[]),d=C(()=>l0(),[]);return o.jsxs(Zs,{localStorageKey:e?"NEVER_HIDE_THIS":R1,hideCloseButton:e,children:[l&&o.jsxs(D1,{children:[o.jsx(zg,{size:"200",progress:[{value:a.total,color:Yl.red400}],total:a.total}),o.jsxs(Ng,{children:[t("abaTopSearchTerms.progress"),o.jsx(Vg,{children:`${a.total}/${a.total}`})]})]}),o.jsx(Zs.Title,{children:t(l?"abaTopSearchTerms.banners.noUses.title":"abaTopSearchTerms.banners.unlock.title")}),o.jsx(Zs.Text,{children:l?t("abaTopSearchTerms.banners.noUses.text",{planName:s}):t("abaTopSearchTerms.banners.unlock.text",{planName:s})}),e&&o.jsx(F1,{type:"button",size:"200",onClick:l?d:u,children:t("abaTopSearchTerms.buttons.upgradeTo",{upgradePlan:s})})]})},F1=c(F)`
  margin-top: ${e=>e.theme.spacing.sp8};
  align-self: flex-start;
`,D1=c.div`
  display: flex;
  align-items: center;
  gap: ${e=>e.theme.spacing.sp8};
  margin-bottom: ${e=>e.theme.spacing.sp8};
`,I1=()=>{const{t:e}=T();return o.jsxs(o.Fragment,{children:[o.jsx(fd,{}),o.jsx($t,{imageSrc:m1,children:o.jsxs($t.Left,{children:[o.jsx($t.Title,{children:e("abaTopSearchTerms.noABAToken.title")}),o.jsx(W1,{dangerouslySetInnerHTML:{__html:e("abaTopSearchTerms.noABAToken.text")}}),o.jsxs(O1,{children:[o.jsx($t.Link,{href:"https://brandservices.amazon.com/",target:"_blank",rel:"noreferrer",children:o.jsx(F,{size:"200",type:"button",children:e("abaTopSearchTerms.buttons.viewABADetails")})}),o.jsx($t.Link,{href:"https://www.helium10.com/blog/amazon-brand-registry-fast/",target:"_blank",rel:"noreferrer",children:o.jsx(F,{buttonType:"secondary",size:"200",type:"button",children:e("abaTopSearchTerms.buttons.learnMore")})})]})]})}),o.jsx(bd,{})]})},W1=c($t.Text)`
  margin-top: ${e=>e.theme.spacing.sp16};
`,O1=c.div`
  display: flex;
  align-items: center;
  gap: ${e=>e.theme.spacing.sp16};
  margin-top: ${e=>e.theme.spacing.sp32};
`,z1="https://re-cdn.helium10.com/container/static/aba-tst-no-token-Ue0hW715.svg",N1=()=>{const{t:e}=T(),{planGroup:t}=ne();return o.jsxs(o.Fragment,{children:[o.jsx(fd,{}),o.jsx($t,{imageSrc:z1,children:o.jsxs($t.Left,{children:[o.jsx($t.Title,{children:e("abaTopSearchTerms.noToken.title")}),o.jsx(V1,{children:e("abaTopSearchTerms.noToken.subtitle")}),o.jsxs(_1,{children:[o.jsx(E1,{icon:Zp}),o.jsx("span",{dangerouslySetInnerHTML:{__html:e("abaTopSearchTerms.noToken.text")}})]}),o.jsx($t.Link,{href:"http://localhost:3060/new-account/tokens-manager",target:"_blank",rel:"noreferrer",children:o.jsx(L1,{size:"200",type:"button",icon:o.jsx(E,{icon:_f}),onClick:()=>{H({eventName:"BB ABA Connect to Amazon",eventProperties:{Location:"BB ABA",Plan:t}})},children:e("abaTopSearchTerms.buttons.connectToAmazon")})}),o.jsxs(q1,{children:[o.jsx(H1,{icon:Ef}),e("abaTopSearchTerms.noToken.note")]})]})}),o.jsx(bd,{})]})},V1=c($t.Text)`
  margin-top: ${e=>e.theme.spacing.sp8};
`,_1=c($t.Text)`
  margin-top: ${e=>e.theme.spacing.sp16};
`,E1=c(E)`
  color: ${e=>e.theme.systemColors.green600};
  margin-right: ${e=>e.theme.spacing.sp4};
`,L1=c(F)`
  margin-top: ${e=>e.theme.spacing.sp32};
  align-self: flex-start;
`,q1=c.div`
  ${wo};
  display: flex;
  align-items: flex-start;
  gap: ${e=>e.theme.spacing.sp8};
  margin-top: ${e=>e.theme.spacing.sp16};
  max-width: 487px;
`,H1=c(E)`
  font-size: 18px;
  color: ${e=>e.theme.systemColors.green600};
`,U1=()=>o.jsxs(K1,{children:[o.jsx(fd,{hasUpgradeButton:!0}),o.jsx(bd,{})]}),K1=c.div`
  display: flex;
  flex-direction: column;
  gap: ${e=>e.theme.spacing.sp24};
`,G1=h.memo(()=>{const{t:e}=T(),{useMount:t}=ur.useSingleton();t("blackbox-aba"),Uj();const n=sj();return o.jsxs(ws,{description:e("blackBox.tabs.products.description"),buttons:o.jsxs(o.Fragment,{children:[o.jsx(oj,{hidden:n!=="available"}),o.jsx(gc,{project:"BlackBoxABA",size:"200"})]}),children:[o.jsx(Y1,{children:Z1[n]}),o.jsx(hi,{project:"blackboxAba"})]})}),Z1={loading:o.jsx(u1,{}),available:o.jsx(c1,{}),unavailable:o.jsx(U1,{}),noABAToken:o.jsx(I1,{}),noToken:o.jsx(N1,{})},Y1=c.div`
  padding-top: ${e=>e.theme.spacing.sp32};
  display: flex;
  flex-direction: column;
  gap: ${e=>e.theme.spacing.sp32};
`,_g=({project:e})=>{const t=b(Ue,r=>r!=null&&r.startsWith("amazon")?"amazon":"walmart",[]),n=C(()=>Rc({project:e,isWalmart:t==="walmart"}),[e,t]),{planGroup:s}=ne();h.useEffect(()=>{s!=null&&n()},[n,s])},Eg=({project:e})=>{const{t}=T(),{isDemo:n,isStartYourBusiness:s}=ne(),r=b(st,d=>(d==null?void 0:d.platform)||"AMAZON",[]),a=r==="WALMART"&&(e==="cerebro"||e==="magnet")&&s,i=b(Sr,d=>d[r],[r]),l=t(`upgradePlan.texts.${e}${r==="AMAZON"?"Amazon":"Walmart"}`,{count:i||0}),u=t(`upgradePlan.texts.${e}Demo`);return{text:n?u:l,uses:a?null:i,platform:r,project:e}},Lg=h.memo(({project:e})=>{const{t}=T(),{uses:n,text:s,platform:r}=Eg({project:e});_g({project:e});const a=C(()=>we.open({restriction:"uses",platform:r,project:e,trigger:"banner"}),[r,e]),{isDemo:i}=ne();return n!=null||i?o.jsxs(qg,{children:[o.jsx(Hg,{dangerouslySetInnerHTML:{__html:s}}),o.jsx(F,{size:"100",onClick:a,children:t("upgradePlan.button")})]}):null}),qg=c.div`
  background-color: ${({theme:e})=>e.systemColors.blue50};
  padding: ${({theme:e})=>e.spacing.sp12};
  display: flex;
  justify-content: center;
  align-items: center;

  margin: 0 -16px;

  ${z.desktop} {
    margin: 0 -40px;
  }
`,Hg=c.div`
  ${Fe};
  margin-right: ${({theme:e})=>e.spacing.sp24};
  color: ${({theme:e})=>e.systemColors.black};
`;var Nl;(function(e){const t=ys+"/api/v1/testing/experiment";e.getVariation=async n=>D({url:$(`${t}/${n}/variation`,{}),method:"GET",withCredentials:0})})(Nl||(Nl={}));const Vu="blackBoxProducts",Q1=()=>{const{t:e}=T();_g({project:Vu});const{uses:t}=Eg({project:Vu}),n=X1(t);return t==null||n==="loading"?null:n==="isNotExperiment"?o.jsxs(qg,{children:[o.jsx(Hg,{dangerouslySetInnerHTML:{__html:e("blackBox.upgradeBanner.text",{uses:t})}}),o.jsx(J1,{})]}):o.jsx(vS,{uses:t})},J1=h.memo(()=>{const{t:e}=T(),t=C(()=>we.open({restriction:"uses",platform:"AMAZON",trigger:'User Click: "UPGRADE FOR UNLIMITED"'}),[]);return o.jsx(F,{size:"100",onClick:t,children:e("blackBox.upgradeBanner.button")})}),X1=e=>{const[t,n]=h.useState("loading");return h.useEffect(()=>{e!=null&&Nl.getVariation("banner-upsell-in-black-box").then(s=>{s.data.isControl===!1?n("isExperiment"):n("isNotExperiment")}).catch(()=>{n("isNotExperiment")})},[e]),e!=null?t:"isNotExperiment"},eB=[{path:Xp,tab:"products"},{path:em,tab:"abaTopSearchTerms"},{path:tm,tab:"eliteAnalytics"}],tB=()=>{const e=C(Dl.actions.set);h.useEffect(()=>{eB.forEach(({path:t,tab:n,exact:s})=>{jn({path:t,end:s},window.location.pathname)&&e(n)})},[e])},oB=()=>{const{t:e}=T();return o.jsx(ws,{description:e("blackBox.tabs.competitors.description"),children:"Competitors"})},nB=()=>{const{t:e}=T();return o.jsx(ws,{description:e("blackBox.tabs.keywords.description"),children:"Keywords"})},sB=()=>{const{t:e}=T();return o.jsx(ws,{description:e("blackBox.tabs.products.description"),children:"Niche"})},Sd=()=>{const{t:e}=T(),{isOpen:t}=b(Ia.atom),n=C(Ia.close);return o.jsxs(Rt,{isOpen:t,onClickOutside:n,onClose:n,title:e("amazonToken.modal.titleNew"),children:[o.jsxs(rB,{children:[o.jsx(aB,{icon:Zp}),e("amazonToken.modal.sellers",{number:N({value:7054})})]}),o.jsxs(iB,{children:[o.jsx("p",{children:e("amazonToken.modal.text.part1")}),o.jsx("p",{children:e("amazonToken.modal.text.part2New")})]}),o.jsxs(lB,{children:[o.jsx(F,{buttonType:"secondary",type:"button",size:"200",onClick:n,children:e("buttons.decline")}),o.jsx(cB,{href:"http://localhost:3060/new-account/tokens-manager",target:"_blank",rel:"noreferrer",children:o.jsx(F,{buttonType:"primary",type:"button",size:"200",children:e("amazonToken.modal.acceptButton")})})]})]})},rB=c.div`
  ${fe};
  display: flex;
  align-items: center;
  margin-top: ${({theme:e})=>e.spacing.sp16};
`,aB=c(E)`
  color: ${({theme:e})=>e.systemColors.green600};
  margin-right: ${({theme:e})=>e.spacing.sp8};
`,iB=c.div`
  ${Fe};
  color: ${e=>e.theme.systemColors.grey600};

  &:not(:last-child) {
    margin-bottom: 16px;
  }

  margin-top: ${({theme:e})=>e.spacing.sp32};
`,lB=c.div`
  display: flex;
  align-items: center;
  justify-content: flex-end;

  margin-top: ${({theme:e})=>e.spacing.sp32};

  & > :not(:first-child) {
    margin-left: ${({theme:e})=>e.spacing.sp8};
  }
`,cB=c.a`
  text-decoration: none;
`,Ug=L("setBlackBoxProductFiltered",(e,{dispatch:t})=>{t(Fn.actions.pending())}),yd=L("clearBlackBoxProductFiltered"),dB=Se("blackBoxProductTableFiltered",!1,e=>{e(Ug,()=>!0),e(yd,()=>!1)}),Fr={atom:dB,actions:{set:Ug,clear:yd}},uB=["salesRank","price","salesYearOverYear","salesYearOverYear","priceChange","salesChange","salesToReviews","monthlySales","numberOfSellers","numberOfImages","variationCount","weight","reviewCount","reviewsRating","monthlyRevenue","age"],qt={sizeTier:[],fulfillment:[],titleIncludeKeyword:"",titleExcludeKeyword:"",brandInclude:"",brandExclude:"",sellerInclude:"",sellerExclude:"",category:[],reviewCount:[],reviewsRating:[],salesRank:[],monthlyRevenue:[],price:[],salesYearOverYear:[],priceChange:[],salesChange:[],bestMonth:null,salesToReviews:[],monthlySales:[],numberOfSellers:[],numberOfImages:[],variationCount:[],weight:[],age:[]},Mt=Zm({name:"blackBoxProductFilter",initValue:qt,action:()=>Fr.actions.set({})}),Dr=L("setBBProductMarketplace",(e,{getState:t,dispatch:n})=>{t(Zg)&&setTimeout(()=>{n(Fn.actions.clear()),n(Mt.actions.clear()),n(Fr.actions.clear())},0)}),co=Se("bbProductMarketplace","amazon.com",e=>{e(Dr,(t,n)=>n)}),uo=R("blackBoxProductsSelectedMarketplace",co,e=>e?bt("AM","domain",e):bt("AM","TLDomain","com")),Jn={page:1,count:25,search:"",sortDirection:"ASC",sortField:"default"},ko=Hc({name:"blackBoxProducts",initialState:Jn,project:"blackBoxProducts",restoreItemsPerPage:!0}),Kg=R("blackBoxProductSortSelector",ko.atom,({sortDirection:e,sortField:t})=>Oc({sortDirection:e,sortField:t})),pB=R(ko.atom,e=>e.page),mB=R(ko.atom,e=>e.count),hB=async e=>D({method:"POST",url:$(`${kt}/black-box/add-to-list`,{}),params:e,withCredentials:0}),gB=async({currency:e,...t})=>await D({url:$(`${I}/api/blackbox/v1/search/products`,{}),method:"POST",params:{...t,filters:rj({filter:gt({filter:xB(t.filters),minmaxFields:uB,roundingSettings:{}}),currency:e,priceFields:["priceFrom","priceTo","monthlyRevenueFrom","monthlyRevenueTo"]})},useSessionAccountId:!0}),xB=e=>({...e,...bB(e.bestMonth),...e.category?{category:e.category.map(t=>t.id)}:{}}),bB=e=>{if(e==null)return{};if(typeof e=="string")return{bestMonth:e};if(typeof e=="object"){const t=e.getTimezoneOffset();return{bestMonth:Pn(e,-t).toISOString()}}return{}},fB=async e=>D({method:"POST",url:$(`${kt}/black-box/remove-from-list`,{}),params:e,withCredentials:0}),SB=async({id:e,...t})=>await D({url:$(`${I}/api/blackbox/v1/search/products/${e}/results`,{}),params:t,method:"GET",useSessionAccountId:!0}),Vl=L("blackBoxProductsAtom/set"),_l=L("blackBoxProductsChangeIsInMyListAction"),Gg=L("blackBoxProductsChangeIsInMyListMultipleAction"),Ii=Se("blackBoxProductsAtom",[],e=>{e(Vl,(t,n)=>n),e(_l,(t,n)=>t.map(s=>s.asin===n?{...s,isInMyList:!s.isInMyList}:s)),e(Gg,(t,n)=>t.map(s=>n.includes(s.asin)?{...s,isInMyList:!0}:s))}),Ws=he("getBlackBoxProductsSearchResult",async({isPagination:e,sort:t,onSuccess:n,...s})=>(e&&ee.getState().setStatus("table"),SB({...s,...t!=="default"?{sort:t}:{}})),{initialStatus:"init",fulfilledReaction:({result:e,params:{onSuccess:t}},{dispatch:n})=>{n(Vl(e.data.tableData)),ee.getState().setStatus("loaded"),t==null||t()},rejectedReaction:(e,t)=>{var s,r,a,i;ee.getState().setStatus("loaded"),String((r=(s=e.fetchError)==null?void 0:s.result)==null?void 0:r.errorCode)==="rta-5001"?(t.dispatch(Ws.actions.clear()),t.dispatch(Vl([]))):je(e.fetchError),(i=(a=e.params).onSuccess)==null||i.call(a)}});R("blackBoxProductsSearchResultData",Ws.atom,e=>{var t;return((t=e.content)==null?void 0:t.data.tableData)||[]});const yB=R("blackBoxProductsSearchResultData",Ws.atom,e=>{var t;return((t=e.content)==null?void 0:t.meta.total)||0});R("blackBoxProductsSearchResultStatus",Ws.atom,e=>e.status);const jB=R("blackBoxProductSearchSelector",ie([Mt.atom]),([e])=>({filters:e})),Fn=he("postBlackBoxProductsSearch",async(e,{getState:t})=>{const{filters:{filtersType:n,...s}}=t(jB),r=bt("AM","domain",t(co)).id,a=bt("AM","domain",t(co)).currency;return gB({filters:s,marketplaceId:r,currency:a,filtersType:n})},{initialStatus:"init",fulfilledReaction:({result:{data:{id:e,sortBy:t}}},{dispatch:n,getState:s})=>{const{count:r}=s(ko.atom),a=()=>n(Rc({project:"blackBoxProducts",isWalmart:!1}));n(ko.actions.setPartial({page:Jn.page,search:Jn.search})),n(Ws.actions.pending({id:e,page:1,per_page:r,...t!=="default"?{sort:t}:{},onSuccess:a}))},rejectedReaction:(e,t)=>{var n;ee.getState().setStatus("loaded"),t.dispatch(yd()),((n=e.fetchError)==null?void 0:n.responseStatus)===402?t.dispatch(we.open({restriction:"uses",platform:"AMAZON",trigger:"Black Box Search"})):je(e.fetchError)}}),Zg=R("idBlackBoxProductsSelector",Fn.atom,e=>{var t;return((t=e.content)==null?void 0:t.data.id)||null}),kB=he("changeBlackBoxAddToMyListRequest",async({asin:e,isInMyList:t},{getState:n,dispatch:s})=>{s(_l(e));const r=n(dn).store,a={asin:e,marketplace:r};return t?fB(a):hB(a)},{fulfilledReaction:({params:e,result:t},{dispatch:n})=>{t.status!=="success"&&n(_l(e.asin)),t.status==="error"&&Be.error(t.errMsg)}}),dn=R("blackBoxProductsMarketplace",Fn.atom,e=>{var t,n;return(t=e.content)!=null&&t.data.marketplaceId?bt("AM","id",(n=e.content)==null?void 0:n.data.marketplaceId):bt("AM","TLDomain","com")}),TB=async e=>await D({url:$(`${I}/api/blackbox/v1/search/previous`,{}),method:"GET",params:e,useSessionAccountId:!0}),vB=he("getBlackBoxProductsSearchPrevious",async(e,{getState:t})=>{const n=t(uo).id;return ee.getState().setStatus("filter"),TB({marketplaceId:n})},{initialStatus:"init",fulfilledReaction:({result:e},{dispatch:t,getState:n})=>{const s=n(uo).currency;t(Dr(bt("AM","id",e.data.marketplaceId).domain));const r=e.data.sortBy;t(ko.actions.setWithoutCheck(AB(r)));const a=e.data.filters;t(Mt.actions.setWithoutCheck({...Array.isArray(a)?{...qt}:Sg({lastFilter:CB(a,s)}),filtersType:"advanced"}))},rejectedReaction:e=>{var n;if(ee.getState().setStatus("loaded"),((n=e.fetchError)==null?void 0:n.responseStatus)!==404)je(e.fetchError);else{const s=Xe.getState().translation;if(s){const{t:r}=s;Be.error(r("errorCodes.rta-no-prev-searches"))}}}}),CB=(e,t)=>{const{priceFrom:n,priceTo:s,monthlyRevenueFrom:r,monthlyRevenueTo:a,category:i,bestMonth:l,...u}=e;return{...u,...i?{category:i.map(d=>({...d,value:d.nodeId,label:d.nodeName,children:d.childNodesIds,isCategory:d.isMainCategory}))}:{},...n!=null?{priceFrom:qe(n,t)}:{},...s!=null?{priceTo:qe(s,t)}:{},...r!=null?{monthlyRevenueFrom:qe(r,t)}:{},...a!=null?{monthlyRevenueTo:qe(a,t)}:{},...l!=null?{bestMonth:new Date(l)}:{}}},AB=e=>{const t=Jn,{sortField:n,sortDirection:s}=QC(e);return n!==t.sortField||s!==t.sortDirection?{...Jn,sortField:n,sortDirection:s}:Jn},wB=()=>{const{t:e}=T(),t=C(()=>vB.actions.pending({}),[]);return b(Fn.atom,s=>{var r;return!!((r=s.content)!=null&&r.data.id)},[])?null:o.jsx(F,{buttonType:"tertiary",icon:o.jsx(E,{icon:Lf}),onClick:t,"data-testid":"restorelastsearch",children:e("blackBox.buttons.restoreLastSearch")})},$B=()=>{const{t:e}=T();return o.jsxs(PB,{children:[o.jsx(wB,{}),o.jsx(gc,{project:"BlackBoxProducts",tooltipText:e("opportunity.learnTooltip")})]})},PB=c.div`
  display: flex;
  flex-wrap: wrap;

  & > :not(:last-child) {
    margin-right: ${({theme:e})=>e.spacing.sp16};
  }

  & > * {
    margin-top: ${({theme:e})=>e.spacing.sp4};
    margin-bottom: ${({theme:e})=>e.spacing.sp4};
  }
`,BB=async e=>await D({url:$(`${I}/api/blackbox/v1/categories`,{}),method:"GET",params:e,useSessionAccountId:!0}),jd=he("blackBoxCategories",async(e,{getState:t})=>{const n=t(uo).id,s=await BB({marketplaceId:n}),r=s.data.map(a=>({...a,id:String(a.id),nodeId:String(a.id),pathById:[]}));return{...s,data:r}},{initialStatus:"init",rejectedReaction:({fetchError:e})=>je(e)}),MB=async e=>await D({url:$(`${I}/api/blackbox/v1/categories/${e.id}/children`,{}),method:"GET",useSessionAccountId:!0}),ka=lc("getBlackBoxSubcategories",async e=>{const t=await MB(e),n=t.data.map(s=>({...s,id:String(s.id),nodeId:String(s.id),pathById:[...e.pathById,String(s.id)]}));return{...t,data:n}},{rejectedReaction:({fetchError:e})=>je(e)}),Yg=Se("getVersionsAtom",{content:{},status:"init"},e=>{e(ka.pending,(t,n)=>({...t,payload:n,status:"loading"})),e(ka.fulfilled,(t,{result:n,params:s})=>({...t,content:{...t.content,[s.id]:n.data},status:"loaded",error:void 0})),e(ka.rejected,(t,{error:n})=>({...t,status:"error",error:n}))}),nr=["monthlyRevenue","monthlySales","numberOfImages","numberOfSellers","price","priceChange","reviewCount","reviewsRating","salesChange","salesRank","salesToReviews","salesYearOverYear","variationCount","weight"],sr=c.div`
  height: 1px;
  background-color: ${({theme:e})=>e.systemColors.grey200};
`,RB=()=>{const{t:e}=T();return o.jsxs(FB,{children:[o.jsx(O,{name:"numberOfSellers",label:e("blackBox.products.fields.numberOfSellers.label"),tooltipContent:e("blackBox.products.fields.numberOfSellers.tooltip"),min:0,"data-testid":"numberofsellers"}),o.jsx(sr,{}),o.jsx(Ne,{name:"brandInclude",label:e("blackBox.products.fields.brandInclude.label"),tooltipContent:o.jsx("div",{...qo(e("blackBox.products.fields.brandInclude.tooltip"))}),placeholder:e("blackBox.products.fields.brandInclude.placeholder"),"data-testid":"exactbrandsearch"}),o.jsx(Ne,{name:"sellerInclude",label:e("blackBox.products.fields.sellerInclude.label"),tooltipContent:o.jsx("div",{...qo(e("blackBox.products.fields.sellerInclude.tooltip"))}),placeholder:e("blackBox.products.fields.sellerInclude.placeholder"),"data-testid":"exactsellersearch"}),o.jsx(sr,{}),o.jsx(Ne,{name:"brandExclude",label:e("blackBox.products.fields.brandExclude.label"),tooltipContent:o.jsx("div",{...qo(e("blackBox.products.fields.brandExclude.tooltip"))}),placeholder:e("blackBox.products.fields.brandExclude.placeholder"),"data-testid":"excludebrands"}),o.jsx(Ne,{name:"sellerExclude",label:e("blackBox.products.fields.sellerExclude.label"),tooltipContent:o.jsx("div",{...qo(e("blackBox.products.fields.sellerExclude.tooltip"))}),placeholder:e("blackBox.products.fields.sellerExclude.placeholder"),"data-testid":"excludeseller"})]})},FB=c.div`
  display: contents;

  ${z.extraDesktop} {
    & > * {
      grid-column: 2;
    }
  }
`,ft=({name:e,rules:t,label:n,tooltipContent:s,showEmptyValue:r,...a})=>{const{control:i}=_e();return o.jsx(tt,{name:e,control:i,rules:t,render:({field:l})=>o.jsxs(DB,{children:[o.jsx(He,{label:n,tooltipContent:typeof s=="string"?o.jsx("div",{dangerouslySetInnerHTML:{__html:s}}):s}),o.jsx(es,{...a,...l,disabled:a.disabled||r,value:r?void 0:l.value,onChange:u=>{const d=u.map(({value:p})=>p);l.onChange(d)}})]})})},DB=c.div``,IB=()=>o.jsxs(WB,{children:[o.jsx(Oo,{$size:"small"}),o.jsx(Oo,{$size:"small"}),o.jsx(Oo,{$size:"small"}),o.jsx(Oo,{$size:"small"}),o.jsx(Oo,{$size:"small"}),o.jsx(Oo,{$size:"small"}),o.jsx(Oo,{$size:"small"}),o.jsx(Oo,{$size:"small"})]}),WB=c.div`
  padding: ${({theme:{spacing:{sp8:e}}})=>`${e}`};
  & > :not(:first-child) {
    margin-top: ${({theme:e})=>e.spacing.sp16};
  }
`,Oo=c(ae)`
  margin: ${({theme:e})=>e.spacing.sp8} 0;
`,Qg=({children:e,...t})=>({...t,label:t.nodeName,value:t.nodeId,defaultOpen:!0,childCount:t.childNodesCount,isCategory:t.isMainCategory,...e?{children:e.length>0?e.map(Qg):void 0}:{}}),Jg=({subcategories:e,subcategoryData:t})=>{var s;const n=String((s=t.payload)==null?void 0:s.id);return e.map(r=>{var a;return{...r,value:r.nodeId,label:r.nodeName,disabled:!r.available,status:n===String(r.id)?t.status:void 0,defaultOpen:!1,childCount:r.childNodesCount,children:r.hasChildren?Jg({subcategories:((a=t.content)==null?void 0:a[r.id])||[],subcategoryData:t}):void 0}})},OB=async e=>await D({url:$(`${I}/api/blackbox/v1/categories/autocomplete`,{}),method:"GET",params:e,useSessionAccountId:!0}),ml=he("blackBoxCategoriesAutocomplete",async({categorySearchPrefix:e},{getState:t})=>{const n=t(uo).id,s=await OB({marketplaceId:n,categorySearchPrefix:e}),r=s.data.map(a=>Xg(a,[]));return{...s,data:r}},{initialStatus:"init",rejectedReaction:({fetchError:e})=>je(e)}),Xg=(e,t)=>{const n=[...t,String(e.id)];return{...e,id:String(e.id),nodeId:String(e.id),pathById:n,children:e.children.map(s=>Xg(s,n))}},zB=()=>{const[e,t]=h.useState(""),n=b(ml.atom,({status:i,content:l})=>({status:i,options:(i==="loading"?[]:(l==null?void 0:l.data)||[]).map(Qg)}),[]),s=C(ml.actions.pending),r=C(ml.actions.clear);return{handleSearch:h.useCallback(i=>{t(i),i.length>=3?s({categorySearchPrefix:i}):r()},[r,s]),searchString:e,autocompleteStatus:n.status,autocompleteOptions:n.options}},NB=()=>{const e=C(ka.pending),t=b(Yg),n=b(jd.atom,a=>{var i;return(((i=a.content)==null?void 0:i.data)||[]).map(l=>({...l,isCategory:!0}))},[]),s=h.useMemo(()=>Jg({subcategories:n,subcategoryData:t}),[n,t]),r=h.useCallback(a=>{if(typeof a.children<"u")return e({id:a.id,pathById:a.pathById})},[e]);return{options:s,handleExpand:r}},kd=({name:e,...t})=>{const{watch:n,setValue:s}=_e(),r=n(e),a=h.useCallback(x=>s(e,x),[e,s]),{options:i,handleExpand:l}=NB(),{autocompleteOptions:u,autocompleteStatus:d,searchString:p,handleSearch:m}=zB(),g=h.useMemo(()=>d==="loading"?()=>o.jsx(IB,{}):void 0,[d]);return o.jsx(wm,{...t,dropdownAutoWidth:!0,value:r,onChange:a,options:p.length>=3?u:i,selectAllOption:!0,onExpand:l,onSearch:m,autocomplete:!0,renderNoOptions:g})},VB=["1","2","3"],ex=()=>{const{t:e}=T();return VB.map(t=>({label:e(`blackBox.options.fulfillment.${t}`),value:t}))},_B=async e=>await D({url:$(`${I}/api/blackbox/v1/size-tiers`,{}),method:"GET",params:e,useSessionAccountId:!0}),Td=he("blackBoxProductSelectOptions",async(e,{getState:t})=>{const n=t(uo).id;return _B({marketplaceId:n})},{initialStatus:"init",rejectedReaction:({fetchError:e})=>je(e)}),EB=R(Td.atom,e=>{var t;return Object.keys(((t=e.content)==null?void 0:t.data)||{}).map(n=>String(n)).filter(n=>Number(n)!==-1&&!isNaN(Number(n)))}),tx=()=>{const{t:e}=T();return b(EB).map(n=>({label:e(`sizeTier.${n}`),value:n}))},LB=()=>{const{t:e}=T(),t=ex(),n=tx();return o.jsxs(o.Fragment,{children:[o.jsx(qB,{children:o.jsxs("div",{children:[o.jsx(He,{label:e("blackBox.products.fields.category.label"),tooltipContent:e("blackBox.products.fields.category.tooltip")}),o.jsx(kd,{name:"category",placeholder:e("blackBox.products.fields.category.placeholder")})]})}),o.jsx(oa,{}),o.jsx(O,{name:"reviewCount",label:e("blackBox.products.fields.reviewCount.label"),tooltipContent:e("blackBox.products.fields.reviewCount.tooltip"),min:0,"data-testid":"reviewcount"}),o.jsx(O,{name:"reviewsRating",label:e("blackBox.products.fields.reviewsRating.label"),tooltipContent:e("blackBox.products.fields.reviewsRating.tooltip"),min:0,step:.1,"data-testid":"reviewrating"}),o.jsx(O,{name:"salesRank",label:e("blackBox.products.fields.salesRank.label"),tooltipContent:e("blackBox.products.fields.salesRank.tooltip"),min:0,"data-testid":"bestsellerrank(bsr)"}),o.jsx(oa,{}),o.jsx(ft,{name:"sizeTier",label:e("blackBox.products.fields.shippingSizeTier.label"),placeholder:e("cerebro.filter.noneSelected"),tooltipContent:e("blackBox.products.fields.shippingSizeTier.tooltip"),options:n,clearOption:!0}),o.jsx(O,{name:"weight",label:e("blackBox.products.fields.weight.label"),tooltipContent:e("blackBox.products.fields.weight.tooltip"),min:0,rightLabel:e("blackBox.products.fields.weight.unit"),"data-testid":"weight(lb)"}),o.jsx(ft,{name:"fulfillment",label:e("blackBox.products.fields.fulfillment.label"),placeholder:e("cerebro.filter.noneSelected"),tooltipContent:e("blackBox.products.fields.fulfillment.tooltip"),options:t,clearOption:!0}),o.jsx(oa,{}),o.jsx(O,{name:"numberOfImages",label:e("blackBox.products.fields.numberOfImages.label"),tooltipContent:e("blackBox.products.fields.numberOfImages.tooltip"),min:0,"data-testid":"numberofimages"}),o.jsx(O,{name:"variationCount",label:e("blackBox.products.fields.variationCount.label"),tooltipContent:e("blackBox.products.fields.variationCount.tooltip"),min:0,"data-testid":"variationcount"}),o.jsx(oa,{}),o.jsx(Ne,{name:"titleIncludeKeyword",label:e("blackBox.products.fields.titleIncludeKeyword.label"),tooltipContent:e("blackBox.products.fields.titleIncludeKeyword.tooltip"),placeholder:e("blackBox.products.fields.titleIncludeKeyword.placeholder"),rules:{validate:s=>!s||(s==null?void 0:s.length)>=2},"data-testid":"titlekeywords"}),o.jsx(Ne,{name:"titleExcludeKeyword",label:e("blackBox.products.fields.titleExcludeKeyword.label"),tooltipContent:e("blackBox.products.fields.titleExcludeKeyword.tooltip"),placeholder:e("blackBox.products.fields.titleExcludeKeyword.placeholder"),rules:{validate:s=>!s||(s==null?void 0:s.length)>=3},"data-testid":"excludetitlekeywords"}),o.jsx(O,{name:"age",label:e("blackBox.products.fields.age.filterLabel"),tooltipContent:e("blackBox.products.fields.age.filterTooltip"),min:0,"data-testid":"listingage(months)"})]})},qB=c.div`
  ${z.extraDesktop} {
    grid-column: 1/3;
  }
  min-width: 0;
  z-index: 1;
`,oa=c(sr)`
  ${z.extraDesktop} {
    grid-column: 1/3;
  }
`,vd=({name:e,rules:t,label:n,tooltipContent:s,tooltipSettings:r,locked:a=!1,onClickLocked:i,...l})=>{const{control:u}=_e();return o.jsx(tt,{name:e,control:u,rules:t,render:({field:d})=>o.jsxs(HB,{children:[o.jsx(He,{label:n,tooltipContent:s,tooltipSettings:r}),o.jsxs(UB,{children:[o.jsx(Sm,{...d,onChange:([p])=>d.onChange(p??null),value:Array.isArray(d.value)?d.value??null:[d.value??null],format:xa("shortNumeric"),mode:"date",onClear:()=>d.onChange(null),columns:1,trimWeeks:!0,picker:"month",maxDate:new Date,showCalendar:!0,...l,appendTo:document.body}),a&&o.jsx(KB,{onClick:i})]})]})})},HB=c.div``,UB=c.div`
  position: relative;
`,KB=c.div`
  position: absolute;
  z-index: 1;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  cursor: text;
`,ox=()=>{const{language:e}=T(),t=b(uo).currency;return Mg(e,t)},nx=()=>b(uo).currency!=="JPY"?.01:1,GB=()=>{const{t:e}=T(),t=nx(),n=ox();return o.jsxs(o.Fragment,{children:[o.jsx(O,{name:"price",label:e("blackBox.products.fields.price.label"),tooltipContent:e("blackBox.products.fields.price.tooltip"),min:0,step:t,rightLabel:n,"data-testid":"price"}),o.jsx(O,{name:"priceChange",label:e("blackBox.products.fields.priceChange.label"),tooltipContent:e("blackBox.products.fields.priceChange.tooltip"),rightLabel:"%","data-testid":"pricechange(%)"}),o.jsx(_u,{}),o.jsx(O,{name:"monthlyRevenue",label:e("blackBox.products.fields.monthlyRevenue.label"),tooltipContent:e("blackBox.products.fields.monthlyRevenue.tooltip"),min:0,rightLabel:n,"data-testid":"monthlyrevenue"}),o.jsx(O,{name:"salesChange",label:e("blackBox.products.fields.salesChange.label"),tooltipContent:e("blackBox.products.fields.salesChange.tooltip"),rightLabel:"%","data-testid":"saleschange(%)"}),o.jsx(O,{name:"monthlySales",label:e("blackBox.products.fields.monthlySales.label"),tooltipContent:e("blackBox.products.fields.monthlySales.tooltip"),min:0,"data-testid":"monthlysales(units)"}),o.jsx(O,{name:"salesYearOverYear",label:e("blackBox.products.fields.salesYearOverYear.label"),tooltipContent:e("blackBox.products.fields.salesYearOverYear.tooltip"),rightLabel:"%","data-testid":"salesyearoveryear(%)"}),o.jsx(vd,{name:"bestMonth",label:e("blackBox.products.fields.bestMonth.label"),tooltipContent:e("blackBox.products.fields.bestMonth.tooltip"),placeholder:e("blackBox.products.fields.bestMonth.placeholder")}),o.jsx(_u,{}),o.jsx(O,{name:"salesToReviews",label:e("blackBox.products.fields.salesToReviews.label"),tooltipContent:e("blackBox.products.fields.salesToReviews.tooltip"),min:0,"data-testid":"salestoreviewsratio"})]})},_u=c(sr)`
  ${z.extraDesktop} {
    grid-column: 1/3;
  }
`,ZB=()=>{const{t:e}=T(),t=_e(),{handleSubmit:n,watch:s,getValues:r,reset:a}=t,i=()=>{a(qt)},l=C(Mt.actions.setWithoutCheck),u=n(x=>{l({...x,filtersType:"advanced"})}),[d,p]=to({watch:s,getValues:r,atom:Mt.atom,minmaxFields:nr,initValue:qt}),m=b(Fr.atom),g=b(co);return o.jsx(o.Fragment,{children:o.jsxs(sx,{onSubmit:u,children:[o.jsxs(rx,{children:[o.jsx(hl,{children:o.jsxs(_a,{children:[o.jsx(Eu,{children:e("blackBox.products.filterGroups.product")}),o.jsx(LB,{})]})}),o.jsx(hl,{children:o.jsxs(ax,{children:[o.jsx(QB,{children:e("blackBox.products.filterGroups.competitors")}),o.jsx(RB,{})]})}),o.jsx(hl,{children:o.jsxs(_a,{children:[o.jsx(Eu,{children:e("blackBox.products.filterGroups.sales")}),o.jsx(GB,{})]})})]}),o.jsxs(lx,{children:[o.jsx(JB,{}),o.jsx(F,{buttonType:"secondary",size:"200",type:"button",disabled:p,onClick:i,"data-testid":"clear",children:e("common.clear")}),o.jsx(F,{buttonType:"primary",size:"200",disabled:d&&m,"data-testid":"search",children:e("blackBox.buttons.search")})]}),o.jsx(hd,{initialFilterValue:qt,minMaxFields:nr,marketplace:g,searchType:bs.Products,executeWithRestriction:YB,restricted:!1}),o.jsx(Ri,{})]})})},YB=e=>e(),sx=c.form`
  padding-top: ${({theme:e})=>e.spacing.sp24};
  border-top: 1px solid #d9e0e8;
`,rx=c.div`
  display: grid;

  grid-template-columns: 1fr;
  grid-column-gap: 40px;

  ${z.laptop} {
    grid-template-columns: 1fr 1fr 1fr;
  }

  ${z.extraDesktop} {
    grid-column-gap: 0;
  }
`,_a=c.div`
  display: grid;
  grid-template-columns: 1fr;

  ${z.extraDesktop} {
    grid-template-columns: 1fr 1fr;
  }

  grid-column-gap: ${({theme:e})=>e.spacing.sp32};
  grid-row-gap: ${({theme:e})=>e.spacing.sp24};
  align-items: flex-end;
`,ax=c.div`
  display: grid;
  grid-template-columns: 1fr;

  ${z.extraDesktop} {
    grid-template-columns: 1fr 2fr 1fr;

    & > * {
      grid-column: 2;
    }
  }

  grid-column-gap: ${({theme:e})=>e.spacing.sp16};
  grid-row-gap: ${({theme:e})=>e.spacing.sp24};
  align-items: flex-end;
`,hl=c.div``,ix=c.div`
  ${Ya};
  margin-bottom: -${({theme:e})=>e.spacing.sp8};
`,Eu=c(ix)`
  ${z.extraDesktop} {
    grid-column: 1/3;
  }
`,QB=c(ix)`
  ${z.extraDesktop} {
    grid-column: 2;
  }
`,lx=c.div`
  margin-top: ${({theme:e})=>e.spacing.sp24};
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  gap: ${({theme:e})=>e.spacing.sp8};

  ${z.mobile} {
    flex-direction: row;
    justify-content: flex-end;
    align-items: center;
  }
`,JB=c(Gt)`
  margin-right: ${({theme:e})=>e.spacing.sp8};
`,XB=()=>o.jsxs(o.Fragment,{children:[o.jsx($g,{staticItemsCount:4}),o.jsxs(eM,{children:[o.jsxs(rx,{children:[o.jsx(gl,{children:o.jsxs(_a,{children:[o.jsx(Lu,{children:o.jsx(xl,{})}),tM.map((e,t)=>o.jsx(bl,{},t))]})}),o.jsx(gl,{children:o.jsxs(ax,{children:[o.jsx(sM,{children:o.jsx(xl,{})}),oM.map((e,t)=>o.jsx(bl,{},t))]})}),o.jsx(gl,{children:o.jsxs(_a,{children:[o.jsx(Lu,{children:o.jsx(xl,{})}),nM.map((e,t)=>o.jsx(bl,{},t))]})})]}),o.jsxs(lx,{children:[o.jsx(ae,{$width:72,$size:"large"}),o.jsx(ae,{$width:84,$size:"large"})]})]})]}),eM=c(sx)``,tM=[...new Array(11)],oM=[...new Array(5)],nM=[...new Array(8)],gl=c.div``,sM=c.div`
  padding-top: ${({theme:e})=>e.spacing.sp4};
  padding-bottom: ${({theme:e})=>e.spacing.sp4};
  margin-bottom: -${({theme:e})=>e.spacing.sp8};
`,Lu=c.div`
  ${z.extraDesktop} {
    grid-column: 1/3;
  }
`,xl=c(ae)`
  height: 18px;
  width: 150px;
`,bl=()=>o.jsxs(rM,{children:[o.jsx(aM,{$size:"small"}),o.jsx(iM,{$size:"large"})]}),rM=c.div``,aM=c(ae)`
  margin-bottom: ${({theme:e})=>e.spacing.sp8};
  width: 150px;
`,iM=c(ae)``,lM=()=>{const e=ee(s=>s.status),t=lt({defaultValues:qt}),n=b(co);return h.useEffect(()=>{n&&t.reset(qt)},[t,n]),e!=="filter"?o.jsxs(zt,{...t,children:[o.jsx(md,{}),o.jsx(ZB,{})]}):o.jsx(XB,{})},cM=()=>{const{t:e}=T(),t=b(co),n=C(Dr);return o.jsxs(dM,{children:[o.jsx(qu,{children:e("blackBox.products.advanced.titlePart1")}),o.jsx(fr,{value:t,options:kr(),onChange:s=>n(s.value),appendTo:document.body}),o.jsx(qu,{children:e("blackBox.products.advanced.titlePart2")})]})},dM=c.div`
  flex: 1;
  display: flex;
  align-items: flex-start;
  flex-wrap: wrap;

  & > :not(:last-child) {
    margin-right: ${({theme:e})=>e.spacing.sp8};
  }
`,qu=c.div`
  ${Co};
`,na=({name:e,rules:t,label:n,tooltipContent:s,...r})=>{const{control:a}=_e();return o.jsx(tt,{name:e,control:a,rules:t,render:({field:i})=>o.jsxs(cx,{children:[o.jsx(He,{label:n,tooltipContent:s}),o.jsx(Ht,{...r,...i,onChange:l=>i.onChange(l==null?void 0:l.value)})]})})},cx=c.div``,sa={marketplace:"amazon.com"},uM=e=>({...qt,category:e.category,reviewsRating:e.improvementRange?pM[e.improvementRange]:void 0,reviewCount:e.competitionRange?mM[e.competitionRange]:void 0,price:e.price?e.marketplace!=="amazon.co.jp"?dx[e.price]:ux[e.price]:void 0,monthlyRevenue:e.monthlyRevenue?e.marketplace!=="amazon.co.jp"?px[e.monthlyRevenue]:mx[e.monthlyRevenue]:void 0}),pM={1:[0,4.3],2:[0,3.8],3:[0,3.5]},mM={1:[0,200],2:[200,500],3:[500,1e3]},dx={1:[0,30],2:[30,100],3:[100,void 0]},ux={1:[0,3e3],2:[3e3,1e4],3:[1e4,void 0]},px={1:[0,1e3],2:[1e3,1e4],3:[1e4,void 0]},mx={1:[0,1e5],2:[1e5,1e6],3:[1e6,void 0]},hM=({currency:e,isJapan:t})=>{const{t:n}=T();return{improvementRange:ra.map(s=>({label:n(`blackBox.options.simpleImprovementRange.${s}`),value:s})),competitionRange:ra.map(s=>({label:n(`blackBox.options.simpleCompetitionRange.${s}`),value:s})),priceOld:ra.map(s=>({label:n(`blackBox.options.simplePrice.${s}`),value:s})),price:Object.entries(t?ux:dx).map(([s,[r,a]])=>({value:s,label:`${Ut({amount:r,currency:e,isRounded:!0})}${a!==void 0?`-${N({value:a})}`:"+"}`})),monthlyRevenueOld:ra.map(s=>({label:n(`blackBox.options.simpleMonthlyRevenue.${s}`),value:s})),monthlyRevenue:Object.entries(t?mx:px).map(([s,[r,a]])=>({value:s,label:`${Ut({amount:r,currency:e,isRounded:!0})}${a!==void 0?`-${N({value:a})}`:"+"}`}))}},ra=["1","2","3"],gM=()=>o.jsxs(xM,{children:[o.jsx(bM,{children:o.jsx(ae,{$width:200,$size:"small"})}),o.jsxs(fM,{children:[o.jsxs(qn,{children:[o.jsx(ae,{$width:40,$size:"small"}),o.jsx(ae,{$width:234,$size:"large"}),o.jsx(ae,{$width:87,$size:"small"})]}),o.jsxs(qn,{children:[o.jsx(ae,{$width:20,$size:"small"}),o.jsx(ae,{$width:275,$size:"large"})]}),o.jsxs(qn,{children:[o.jsx(ae,{$width:75,$size:"small"}),o.jsx(ae,{$width:232,$size:"large"}),o.jsx(ae,{$width:98,$size:"small"})]}),o.jsxs(qn,{children:[o.jsx(ae,{$width:149,$size:"small"}),o.jsx(ae,{$width:232,$size:"large"})]}),o.jsxs(qn,{children:[o.jsx(ae,{$width:200,$size:"small"}),o.jsx(ae,{$width:232,$size:"large"})]}),o.jsxs(qn,{children:[o.jsx(ae,{$width:186,$size:"small"}),o.jsx(ae,{$width:232,$size:"large"})]})]}),o.jsxs(SM,{children:[o.jsx(ae,{$width:72,$size:"large"}),o.jsx(ae,{$width:84,$size:"large"})]})]}),xM=c.div`
  padding-top: ${({theme:e})=>e.spacing.sp24};
`,bM=c.div`
  min-height: ${({theme:e})=>e.spacing.sp24};
  display: flex;
  align-items: center;
`,fM=c.div`
  margin-top: ${({theme:e})=>e.spacing.sp12};
  display: flex;
  align-items: center;
  flex-wrap: wrap;
  & > :not(:last-child) {
    margin-right: ${({theme:e})=>e.spacing.sp8};
  }
`,qn=c.div`
  display: flex;
  align-items: center;
  margin-top: ${({theme:e})=>e.spacing.sp12};
  margin-bottom: ${({theme:e})=>e.spacing.sp12};
  & > :not(:first-child) {
    margin-left: ${({theme:e})=>e.spacing.sp8};
  }
`,SM=c.div`
  margin-top: ${({theme:e})=>e.spacing.sp12};
  display: flex;
  justify-content: flex-end;
  & > * {
    height: 40px;
  }
  & > :not(:last-child) {
    margin-right: ${({theme:e})=>e.spacing.sp8};
  }
`,yM=()=>{const{t:e}=T(),t=b(co),n=lt({defaultValues:{...sa,marketplace:t}}),{handleSubmit:s,watch:r,getValues:a,reset:i,control:l}=n;r();const u=ce("domain",a("marketplace")).currency,d=C(Mt.actions.setWithoutCheck),p=C(Dr),m=h.useCallback(()=>{i(sa),p("amazon.com")},[i,p]),g=s(A=>{p(A.marketplace),d({...uM(A),filtersType:"simple"})}),[x,S]=to({watch:r,getValues:a,atom:Mt.atom,minmaxFields:nr,initValue:sa,additionStoredValues:{marketplace:t}}),j=a("marketplace");h.useEffect(()=>{j&&i({...sa,marketplace:j})},[j,i]);const{improvementRange:f,competitionRange:v,price:k,monthlyRevenue:y}=hM({currency:u,isJapan:j==="amazon.co.jp"}),w=b(Fr.atom);return ee(A=>A.status)!=="filter"?o.jsx(zt,{...n,children:o.jsxs(jM,{onSubmit:g,children:[o.jsx(kM,{children:e("blackBox.products.simple.subtitle")}),o.jsxs(TM,{children:[o.jsxs(Hn,{children:[o.jsx(so,{children:e("blackBox.products.simple.inThe")}),o.jsx(CM,{children:o.jsx(tt,{name:"marketplace",control:l,render:({field:A})=>o.jsx(fr,{...A,options:kr(),onChange:W=>{W!=null&&(A.onChange(W.value),p(W.value))}})})}),o.jsx(so,{children:e("blackBox.products.simple.marketplace")})]}),o.jsxs(Hn,{children:[o.jsx(so,{children:e("blackBox.products.simple.for")}),o.jsx(AM,{children:o.jsx(kd,{name:"category",placeholder:e("blackBox.products.common.anyCategorySimple")})})]}),o.jsxs(Hn,{children:[o.jsx(so,{children:e("blackBox.products.simple.thatNeeds")}),o.jsx(na,{name:"improvementRange",placeholder:e("blackBox.products.simple.improvementRange"),options:f,clearOption:!0,appendTo:document.body}),o.jsx(so,{children:e("blackBox.products.simple.improvement")})]}),o.jsxs(Hn,{children:[o.jsx(so,{children:e("blackBox.products.simple.whereCompetitionIs")}),o.jsx(na,{name:"competitionRange",placeholder:e("blackBox.products.simple.competitionRange"),options:v,clearOption:!0,appendTo:document.body}),o.jsx(so,{children:" ."})]}),o.jsxs(Hn,{children:[o.jsx(so,{children:e("blackBox.products.simple.iWantToSellMyProductFor")}),o.jsx(na,{name:"price",placeholder:e("blackBox.products.simple.price"),options:k,clearOption:!0,appendTo:document.body})]}),o.jsxs(Hn,{children:[o.jsx(so,{children:e("blackBox.products.simple.withMonthlyRevenueOf")}),o.jsx(na,{name:"monthlyRevenue",placeholder:e("blackBox.products.simple.monthlyRevenue"),options:y,clearOption:!0,appendTo:document.body}),o.jsx(so,{children:"."})]})]}),o.jsxs(vM,{children:[o.jsx(F,{onClick:m,buttonType:"secondary",size:"200",type:"button",disabled:S,children:e("common.clear")}),o.jsx(F,{onClick:g,buttonType:"primary",size:"200",disabled:x&&w,children:e("blackBox.buttons.search")})]})]})}):o.jsx(gM,{})},jM=c.form`
  padding-top: ${({theme:e})=>e.spacing.sp24};
`,kM=c.div`
  ${Le};
  color: ${({theme:e})=>e.systemColors.black};
`,TM=c.div`
  display: flex;
  align-items: center;
  flex-wrap: wrap;
  gap: ${({theme:e})=>e.spacing.sp12};
  margin-top: ${({theme:e})=>e.spacing.sp12};

  ${cx} {
    min-width: 232px;
  }
`,so=c.div`
  ${Fe};
  line-height: 32px;
`,vM=c.div`
  margin-top: ${({theme:e})=>e.spacing.sp12};
  display: flex;
  justify-content: flex-end;
  align-items: center;

  & > :not(:first-child) {
    margin-left: ${({theme:e})=>e.spacing.sp8};
  }
`,CM=c.div`
  min-width: 234px;
`,AM=c.div`
  min-width: 234px;
  max-width: 450px;
  z-index: 1;
`,Hn=c.div`
  display: flex;
  flex-wrap: wrap;
  gap: ${({theme:e})=>e.spacing.sp8};
`,wM=()=>{const{t:e}=T();return o.jsx($M,{children:e("blackBox.products.simple.title")})},$M=c.div`
  ${Co};
`,PM=new Date("2022-06-16").getTime(),BM=()=>{const{t:e}=T(),t=Me(u=>{var d;return(((d=u.checkLogin)==null?void 0:d.registeredAt)||0)*1e3>=PM}),[n,s]=h.useState(t?"simple":"advanced"),r=h.useRef(!0),[a,i]=h.useState(!0);h.useEffect(()=>{n==="simple"&&r.current?i(!0):i(!1)},[n]);const l=h.useMemo(()=>[{children:e("blackBox.products.filterTabs.simple"),value:"simple"},{children:e("blackBox.products.filterTabs.advanced"),value:"advanced",tooltip:a?void 0:e("blackBox.products.filterTabs.advancedTooltip"),tooltipProps:{colorType:"light",visible:a,immediatelyMount:!0}}],[e,a]);return o.jsxs(MM,{children:[o.jsxs(RM,{children:[Hu[n].title,o.jsx(FM,{children:o.jsx(xc,{buttons:l,onChange:u=>{s(u.toString()),u.toString()==="advanced"&&(r.current=!1)},value:n})})]}),Hu[n].content]})},Hu={simple:{title:o.jsx(wM,{}),content:o.jsx(yM,{})},advanced:{title:o.jsx(cM,{}),content:o.jsx(lM,{})}},MM=c.div`
  margin-top: ${({theme:e})=>e.spacing.sp24};
  border: 1px solid #d9e0e8;
  border-radius: 6px;
  padding: ${({theme:e})=>e.spacing.sp12};

  ${z.mobile} {
    padding: ${({theme:e})=>e.spacing.sp24};
  }
`,RM=c.div`
  display: flex;
  align-items: revert;
  flex-direction: column;
  gap: ${({theme:e})=>e.spacing.sp16};

  ${z.mobile} {
    justify-content: space-between;
    align-items: flex-start;
    flex-direction: row;
  }
`,FM=c.div`
  align-self: stretch;
  max-width: 238px;

  ${z.mobileBefore} {
    order: -1;
  }
`,DM=()=>{var d,p;const{t:e}=T(),t=b(aa.atom,m=>m.isOpen,[]),n=b(aa.atom,m=>m.data.title,[]),s=b(aa.atom,m=>m.data.src,[]),r=C(aa.close),a=h.useRef(null);h.useEffect(()=>{if(a.current){const m=g=>{const x=document.createElement("style");x.textContent=".h10-chart { overflow: hidden; }",g.target.contentDocument.head.appendChild(x)};return a.current.addEventListener("load",m),()=>{a.current&&a.current.removeEventListener("load",m)}}},[a]);const[i,l]=h.useState(null),u=t?(p=(d=i==null?void 0:i.contentWindow)==null?void 0:d.document)==null?void 0:p.body:void 0;return o.jsx(Rt,{isOpen:t,onClose:r,size:"200",title:n,footer:o.jsx(zM,{children:o.jsx(F,{buttonType:"secondary",size:"200",onClick:r,children:e("common.close")})}),children:o.jsx(IM,{children:o.jsxs(WM,{children:[t&&s&&o.jsx(OM,{src:s,ref:l}),!u&&o.jsx(NM,{children:o.jsx(VM,{})})]})})})},aa=Ct("chartModal",{}),IM=c.div`
  display: flex;
  flex-direction: column;
`,WM=c.div`
  margin-left: -32px;
  margin-right: -10px;
  position: relative;
`,OM=c.iframe`
  width: 100%;
  height: 350px;
  border: 0;
  overflow: hidden;
  box-sizing: border-box;

  .h10-chart {
    overflow: hidden;
  }
`,zM=c.div`
  display: flex;
  justify-content: flex-end;
  padding-top: ${({theme:e})=>e.spacing.sp16};
  margin-top: -${({theme:e})=>e.spacing.sp48};
`,NM=c.div`
  height: 350px;
  width: 100%;
  position: absolute;
  top: 0;
  left: 0;
  z-index: 100;
  display: flex;
  align-items: center;
  justify-content: center;
`,VM=c(lm)`
  width: 40px;
  height: 40px;
`,Ta=Ct("blackBoxProductsFilterDrawer",{}),hx=L("blackBoxProductsFilterDrawerSubmit"),gx=L("setBlackBoxProductsFilterDrawerDisabled"),_M=Se("blackBoxProductsFilterDrawerDisabledAtom",[!0,!0,!1],e=>e(gx,(t,n)=>n)),EM=({onClose:e,onClear:t})=>{const{t:n}=T(),s=h.useCallback(()=>yo.open({presetId:null,onAccept:e}),[e]),r=C(()=>(e(),hx()),[]),[a,i]=b(_M),{isOverflown:l,checkOverflown:u}=po();return o.jsxs(Uu,{children:[o.jsx(UM,{onClick:e,buttonType:"cancel",size:"200",type:"button","data-testid":"cancel",children:n("common.cancel")}),o.jsxs(Uu,{children:[o.jsx(Di,{tooltip:l?void 0:n("blackBox.buttons.saveAsFilterPreset"),appendTo:document.body,children:o.jsx(LM,{children:o.jsx(qM,{onClick:s,buttonType:"text",size:"200",type:"button",disabled:i,"data-testid":"saveasfilterpreset",children:o.jsx(HM,{onMouseEnter:u,children:n("blackBox.buttons.saveAsFilterPreset")})})})}),o.jsx(F,{buttonType:"secondary",size:"200",type:"button",disabled:i,onClick:t,"data-testid":"clear",children:n("common.clear")}),o.jsx(KM,{onClick:r,buttonType:"primary",size:"200",disabled:a,"data-testid":"applyfilters",children:n("cerebro.filter.applyFilters")})]})]})},Uu=c.div`
  display: flex;
  justify-content: space-between;
  flex-wrap: wrap;
  gap: ${({theme:e})=>e.spacing.sp8};
`,LM=c.div`
  flex: 1;
  min-width: 100px;
  overflow: hidden;
`,qM=c(F)`
  flex: 1;
  overflow: hidden;
  max-width: 100%;
`,HM=c.div`
  max-width: 100%;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
`,UM=c(F)`
  padding-left: 0;
  padding-right: 0;
`,KM=c(F)`
  margin-left: 0 !important;
`,GM=({formKey:e})=>{const{t}=T(),n=C(Ta.close),s=lt({defaultValues:qt}),{handleSubmit:r,watch:a,getValues:i,reset:l}=s,u=b(Mt.atom);h.useEffect(()=>{e===0&&l(u)},[u,l,e]);const d=C(Mt.actions.setWithoutCheck),p=r(y=>{d({...y,filtersType:"advanced"}),n()}),m=tx(),g=ex(),{subscribe:x}=Xt();h.useEffect(()=>x(hx,p),[p,x]);const S=to({watch:a,getValues:i,atom:Mt.atom,minmaxFields:nr,initValue:qt}),j=C(gx);h.useEffect(()=>j(S),[...S]);const f=nx(),v=ox(),k=b(co);return o.jsx(zt,{...s,children:o.jsxs(YM,{onSubmit:p,children:[o.jsx(QM,{children:t("blackBox.products.filterGroups.product")}),o.jsxs(xx,{children:[o.jsx(He,{label:t("blackBox.products.fields.category.label"),tooltipContent:t("blackBox.products.fields.category.tooltip")}),o.jsx(kd,{name:"category",placeholder:t("blackBox.products.fields.category.placeholder")})]}),o.jsx(Hs,{}),o.jsx(O,{name:"reviewCount",label:t("blackBox.products.fields.reviewCount.label"),tooltipContent:t("blackBox.products.fields.reviewCount.tooltip"),min:0,"data-testid":"reviewcount"}),o.jsx(O,{name:"reviewsRating",label:t("blackBox.products.fields.reviewsRating.label"),tooltipContent:t("blackBox.products.fields.reviewsRating.tooltip"),min:0,step:.1,"data-testid":"reviewrating"}),o.jsx(O,{name:"salesRank",label:t("blackBox.products.fields.salesRank.label"),tooltipContent:t("blackBox.products.fields.salesRank.tooltip"),min:0,"data-testid":"bestsellerrank(bsr)"}),o.jsx(Hs,{}),o.jsx(ft,{name:"sizeTier",label:t("blackBox.products.fields.shippingSizeTier.label"),placeholder:t("cerebro.filter.noneSelected"),tooltipContent:t("blackBox.products.fields.shippingSizeTier.tooltip"),options:m,clearOption:!0}),o.jsx(O,{name:"weight",label:t("blackBox.products.fields.weight.label"),tooltipContent:t("blackBox.products.fields.weight.tooltip"),min:0,rightLabel:t("blackBox.products.fields.weight.unit"),"data-testid":"weight(lb)"}),o.jsx(ft,{name:"fulfillment",label:t("blackBox.products.fields.fulfillment.label"),placeholder:t("cerebro.filter.noneSelected"),tooltipContent:t("blackBox.products.fields.fulfillment.tooltip"),options:g,clearOption:!0}),o.jsx(O,{name:"numberOfImages",label:t("blackBox.products.fields.numberOfImages.label"),tooltipContent:t("blackBox.products.fields.numberOfImages.tooltip"),min:0,"data-testid":"numberofimages"}),o.jsx(O,{name:"variationCount",label:t("blackBox.products.fields.variationCount.label"),tooltipContent:t("blackBox.products.fields.variationCount.tooltip"),min:0,"data-testid":"variationcount"}),o.jsx(Ne,{name:"titleIncludeKeyword",label:t("blackBox.products.fields.titleIncludeKeyword.label"),tooltipContent:t("blackBox.products.fields.titleIncludeKeyword.tooltip"),placeholder:t("blackBox.products.fields.titleIncludeKeyword.placeholder"),rules:{validate:y=>!y||(y==null?void 0:y.length)>=2},"data-testid":"titlekeywords"}),o.jsx(Ne,{name:"titleExcludeKeyword",label:t("blackBox.products.fields.titleExcludeKeyword.label"),tooltipContent:t("blackBox.products.fields.titleExcludeKeyword.tooltip"),placeholder:t("blackBox.products.fields.titleExcludeKeyword.placeholder"),rules:{validate:y=>!y||(y==null?void 0:y.length)>=3},"data-testid":"excludetitlekeywords"}),o.jsx(O,{name:"age",label:t("blackBox.products.fields.age.filterLabel"),tooltipContent:t("blackBox.products.fields.age.filterTooltip"),min:0,"data-testid":"listingage(months)"}),o.jsx(El,{children:t("blackBox.products.filterGroups.competitors")}),o.jsx(O,{name:"numberOfSellers",label:t("blackBox.products.fields.numberOfSellers.label"),tooltipContent:t("blackBox.products.fields.numberOfSellers.tooltip"),min:0,"data-testid":"numberofsellers"}),o.jsx(Hs,{}),o.jsx(Ne,{name:"brandInclude",label:t("blackBox.products.fields.brandInclude.label"),tooltipContent:o.jsx("div",{...qo(t("blackBox.products.fields.brandInclude.tooltip"))}),placeholder:t("blackBox.products.fields.brandInclude.placeholder"),"data-testid":"exactbrandsearch"}),o.jsx(Ne,{name:"sellerInclude",label:t("blackBox.products.fields.sellerInclude.label"),tooltipContent:o.jsx("div",{...qo(t("blackBox.products.fields.sellerInclude.tooltip"))}),placeholder:t("blackBox.products.fields.sellerInclude.placeholder"),"data-testid":"exactsellersearch"}),o.jsx(Ne,{name:"brandExclude",label:t("blackBox.products.fields.brandExclude.label"),tooltipContent:o.jsx("div",{...qo(t("blackBox.products.fields.brandExclude.tooltip"))}),placeholder:t("blackBox.products.fields.brandExclude.placeholder"),"data-testid":"excludebrands"}),o.jsx(Ne,{name:"sellerExclude",label:t("blackBox.products.fields.sellerExclude.label"),tooltipContent:o.jsx("div",{...qo(t("blackBox.products.fields.sellerExclude.tooltip"))}),placeholder:t("blackBox.products.fields.sellerExclude.placeholder"),"data-testid":"excludeseller"}),o.jsx(El,{children:t("blackBox.products.filterGroups.sales")}),o.jsx(O,{name:"price",label:t("blackBox.products.fields.price.label"),tooltipContent:t("blackBox.products.fields.price.tooltip"),min:0,step:f,rightLabel:v,"data-testid":"price"}),o.jsx(O,{name:"priceChange",label:t("blackBox.products.fields.priceChange.label"),tooltipContent:t("blackBox.products.fields.priceChange.tooltip"),rightLabel:"%","data-testid":"pricechange(%)"}),o.jsx(Hs,{}),o.jsx(O,{name:"monthlyRevenue",label:t("blackBox.products.fields.monthlyRevenue.label"),tooltipContent:t("blackBox.products.fields.monthlyRevenue.tooltip"),min:0,rightLabel:v,"data-testid":"monthlyrevenue"}),o.jsx(O,{name:"salesChange",label:t("blackBox.products.fields.salesChange.label"),tooltipContent:t("blackBox.products.fields.salesChange.tooltip"),rightLabel:"%","data-testid":"saleschange(%)"}),o.jsx(O,{name:"monthlySales",label:t("blackBox.products.fields.monthlySales.label"),tooltipContent:t("blackBox.products.fields.monthlySales.tooltip"),min:0,"data-testid":"monthlysales(units)"}),o.jsx(O,{name:"salesYearOverYear",label:t("blackBox.products.fields.salesYearOverYear.label"),tooltipContent:t("blackBox.products.fields.salesYearOverYear.tooltip"),rightLabel:"%","data-testid":"salesyearoveryear(%)"}),o.jsx(vd,{name:"bestMonth",label:t("blackBox.products.fields.bestMonth.label"),tooltipContent:t("blackBox.products.fields.bestMonth.tooltip"),placeholder:t("blackBox.products.fields.bestMonth.placeholder")}),o.jsx(Hs,{}),o.jsx(O,{name:"salesToReviews",label:t("blackBox.products.fields.salesToReviews.label"),tooltipContent:t("blackBox.products.fields.salesToReviews.tooltip"),min:0,"data-testid":"salestoreviewsratio"}),o.jsx(hd,{initialFilterValue:qt,minMaxFields:nr,marketplace:k,searchType:bs.Products,executeWithRestriction:ZM,restricted:!1}),o.jsx(Ri,{})]})})},ZM=e=>e(),YM=c.form`
  display: grid;
  grid-column-gap: ${({theme:e})=>e.spacing.sp32};
  grid-row-gap: ${({theme:e})=>e.spacing.sp32};
  padding-bottom: ${({theme:e})=>e.spacing.sp24};
  align-items: flex-end;

  grid-template-columns: 1fr;
  @media screen and (min-width: 475px) {
    grid-template-columns: 1fr 1fr;
  }
`,xx=c.div`
  @media screen and (min-width: 475px) {
    grid-column: 1/3;
  }
`,El=c(xx)`
  ${Ya};
  margin-top: ${({theme:e})=>e.spacing.sp8};
  margin-bottom: -${({theme:e})=>e.spacing.sp8};
`,QM=c(El)`
  margin-top: ${({theme:e})=>e.spacing.sp16};
`,Hs=c(sr)`
  @media screen and (min-width: 475px) {
    grid-column: 1/3;
  }
`,JM=()=>{const{t:e}=T(),t=b(Ta.atom,u=>u.isOpen,[]),n=C(()=>Ta.open({}),[]),s=C(Ta.close),[r]=yo(),[a,i]=h.useState(0);h.useEffect(()=>{!t&&i(0)},[t]);const l=()=>i(u=>u+1);return o.jsxs(o.Fragment,{children:[o.jsx(F,{type:"button",buttonType:"secondary",icon:o.jsx(E,{icon:mr}),onClick:n,"data-testid":"editfilters",children:e("blackBox.products.result.editFilters")}),o.jsx(kn,{position:"right",animation:"slideRight",isOpen:t,onClose:r?void 0:s,onClickOutside:r?void 0:s,onClickEscape:s,lockBody:!0,header:e("cerebro.filter.title"),size:"200",footer:o.jsx(EM,{onClose:s,onClear:l}),children:o.jsx(GM,{formKey:a},String(a))})]})},XM={category:"multiselect",reviewCount:"minMax",reviewsRating:"minMax",salesRank:"minMax",sizeTier:"multiselect",weight:"minMax",fulfillment:"multiselect",numberOfImages:"minMax",variationCount:"minMax",titleIncludeKeyword:"string",titleExcludeKeyword:"string",numberOfSellers:"minMax",brandInclude:"string",brandExclude:"string",sellerInclude:"string",sellerExclude:"string",price:"minMax",salesChange:"minMax",monthlyRevenue:"minMax",priceChange:"minMax",monthlySales:"minMax",salesYearOverYear:"minMax",bestMonth:"date",salesToReviews:"minMax",age:"minMax",filtersType:"string"},eR=()=>{const{t:e}=T(),{filtersType:t,...n}=b(Mt.atom),s=b(uo).currency,r=h.useMemo(()=>({multiselect:(a=[],i)=>a&&a.length?a.map(l=>{if(typeof l!="object"){const d=i==="sizeTier";return{value:l,label:o.jsx(o.Fragment,{children:e(`blackBox.products.fields.${i}.chip.title`)+": "+e(d?`sizeTier.${l}`:`blackBox.options.${i}.${l}`)})}}const u=l.isCategory?"title":"subtitle";return{value:l.value,label:o.jsxs(o.Fragment,{children:[" ",e(`blackBox.products.fields.${i}.chip.${u}`)+": "+l.label]})}}):null,minMax:([a=0,i=0]=[0,0],l,u)=>{const d=a,p=i;return u==="price"?(a=Ut({amount:Number(a),currency:s,locale:"en-US",options:{maximumFractionDigits:0}}),i=d?N({value:i}):Ut({amount:Number(i),currency:s,locale:"en-US",options:{maximumFractionDigits:0}})):(a=N({value:a}),i=N({value:i})),d&&p?[{value:a+" : "+i,label:o.jsx(o.Fragment,{children:`${e(`blackBox.products.fields.${l}.chip`)}: ${a}${i}`})}]:d||d*-1?[{value:a,label:o.jsx(o.Fragment,{children:`${e(`blackBox.products.fields.${l}.chip`)} ${e("comparison.moreThan")}: ${a}`})}]:p?[{value:a,label:o.jsx(o.Fragment,{children:`${e(`blackBox.products.fields.${l}.chip`)} ${e("comparison.lessThan")}: ${i}`})}]:null},date:(a,i)=>a?[{value:a,label:o.jsx(o.Fragment,{children:e(`blackBox.products.fields.${i}.chip`)+": "+$e(new Date(a),"standardNumeric")})}]:null,string:(a,i)=>a?[{value:a,label:o.jsx(o.Fragment,{children:e(`blackBox.products.fields.${i}.chip`)+": "+a})}]:null}),[s,e]);return h.useMemo(()=>Object.entries(n).map(([a,i])=>{const l=XM[a],u=l&&r[l],d=tR.includes(a)&&l==="minMax"?"price":void 0;return u(i,a,d)}).filter(a=>!!a).map(a=>a).reduce((a,i)=>[...a,...i],[]).map((a,i)=>({...a,key:`${a.key} + ${i}`})),[n,r])},tR=["price","monthlyRevenue"],oR=()=>{const e=eR();return o.jsx(nR,{children:o.jsx(Iy,{value:e})})},nR=c.div`
  margin-top: ${({theme:e})=>e.spacing.sp24};
`,sR=()=>{const{t:e}=T(),t=b(co),n=C(Dr);return o.jsxs(rR,{children:[o.jsxs(aR,{children:[o.jsxs(iR,{children:[o.jsx(Ku,{children:e("blackBox.products.result.title1")}),o.jsx(fr,{value:t,onChange:s=>{n(s!=null?s.value:t)},options:kr(),appendTo:document.body}),o.jsx(Ku,{children:e("blackBox.products.result.title2")})]}),o.jsx(JM,{})]}),o.jsx(oR,{})]})},rR=c(ri)`
  padding: ${({theme:e})=>e.spacing.sp16};
`,aR=c.div`
  display: flex;
  justify-content: space-between;
  flex-wrap: wrap;
  gap: ${({theme:e})=>e.spacing.sp16};
`,iR=c.div`
  display: flex;
  align-items: center;
  flex-wrap: wrap;
  gap: ${({theme:e})=>e.spacing.sp8};
`,Ku=c.div`
  ${Co};
`,lR=e=>{if(navigator.clipboard&&window.isSecureContext)return navigator.clipboard.writeText(e);{const t=document.createElement("textarea");return t.value=e,t.style.position="fixed",t.style.left="-999999px",t.style.top="-999999px",document.body.appendChild(t),t.focus(),t.select(),new Promise((n,s)=>{document.execCommand("copy")?n(1):s(),t.remove()})}},Cd=({isPage:e,dotCSS:t})=>o.jsxs(dR,{isPage:e,dotCSS:t,children:[o.jsx(fl,{children:"."}),o.jsx(fl,{children:"."}),o.jsx(fl,{children:"."})]}),cR=qf`
  0% {
    transform: initial;
  }
  50% {
    transform: translateY(-6px);
  }
  100% {
    transform: initial;
  }
`,dR=c.div`
  display: flex;
  ${Yp};
  ${({isPage:e})=>e&&Z`
      ${tc};
    `}

  ${({dotCSS:e})=>e};

  height: 18px;

  & > :nth-child(2) {
    animation-delay: 0.2s;
  }

  & > :nth-child(3) {
    animation-delay: 0.4s;
  }
`,fl=c.div`
  animation: ${cR} 1.3s ease-in-out infinite;
`,uR=["csv","xlsx","frankenstein","clipboard"],un=({prepareForExportFunction:e,prepareForExportFunctionWithUserData:t,requestAction:n,putAction:s,loadingSelector:r,marketplace:a,project:i,itemId:l="",exportOptions:u=uR,segmentEventName:d="Cerebro Export",widths:p,searchId:m})=>{const g=a==null?void 0:a.store,{t:x}=T(),[S]=rn(),j=m??S,f=b(r),v=ks(`(min-width: ${js.mobile}px)`),{isDemo:k}=ge(),y=V((a==null?void 0:a.platform)||"AMAZON","pagination")&&!k,w=C(()=>we.open({platform:(a==null?void 0:a.platform)||"AMAZON",restriction:"pagination",project:i,trigger:"User click export data"}),[i]),P=h.useCallback(()=>y&&w(),[w,y]),A=C(n),W=C(s),_=h.useMemo(()=>`${a==null?void 0:a.alias}_${i}_${l}_`,[a==null?void 0:a.alias,l,i]),G=h.useCallback(q=>{q!=="frankenstein"&&g?A({id:j?j.toString():"0",demo:k,onSuccess:U=>{const{phrases:ye,...pe}=e(U),{phrases:le,...Ae}=(t==null?void 0:t(U))||{};switch(q){case"csv":case"eliteAnalyticsCSV":{$a({data:[pe.headers,...pe.rows],filename:_}),H({eventName:d,eventProperties:{marketplace:g,format:"csv"}});break}case"eliteAnalyticsCSVWithUpload":{Ae.headers&&($a({data:[Ae.headers,...Ae.rows],filename:_}),H({eventName:d,eventProperties:{marketplace:g,format:"csv"}}));break}case"xlsx":case"eliteAnalyticsExcel":{wa([{data:{...pe,widths:p},name:"Table"}],_),H({eventName:d,eventProperties:{marketplace:g,format:"xlsx"}});break}case"eliteAnalyticsExcelWithUpload":{Ae.headers&&(wa([{data:{...Ae,widths:p},name:"Table"}],_),H({eventName:d,eventProperties:{marketplace:g,format:"xlsx"}}));break}case"clipboard":{lR(ye.join(`
`));break}}}}):(W({id:j.toString(),demo:k,onSuccess:U=>{var ye;(ye=window.open($(`${kt}/frankenstein`,{hash:U}),"_blank"))==null||ye.focus()}}),g&&H({eventName:d,eventProperties:{marketplace:g,format:"frank"}}))},[A,_,W,j,k,g,e,t,d,p]);return o.jsx(We,{hideOnClick:!0,content:o.jsx(o.Fragment,{children:u.map(q=>o.jsx(We.Item,{onClick:()=>{G(q)},"data-testid":q,children:x(`export.options.${q}`)},q))}),children:o.jsx("div",{children:o.jsxs(pR,{buttonType:"tertiary",size:"100",icon:o.jsx(E,{icon:ec}),onLockedClick:P,disabled:f,locked:y,"data-testid":"exportdata",children:[v?x("export.button"):"",v&&o.jsx(o.Fragment,{children:f?o.jsx(Cd,{dotCSS:mR}):"..."})]})})})},pR=c(ho)`
  & > :first-child {
    margin-right: 0;

    ${z.mobile} {
      margin-right: 8px;
    }
  }
`,mR=Z`
  color: #a6b7c9;
  font-size: 14px;
  position: relative;
  bottom: 10px;
`,pn=({columns:e,extractIdFunction:t,columnsOrder:n,skipOnFiltering:s})=>r=>{const a=e.filter(l=>l.exportTitle!==""),i=n?hR({columnsOrder:n,columns:a,skipOnFiltering:s}):a;return{headers:i.map(({title:l,exportTitle:u})=>u||(l||"").toString()),rows:r.map(l=>i.map(({field:u,exportValue:d})=>d?d({...l,id:t?t(l):l.phrase}):l[u]||"")),phrases:t?r.map(t):r.map(l=>l.phrase)}},hR=({columns:e,columnsOrder:t,skipOnFiltering:n})=>{if(t){const s=[...t,...n||[]];return e.filter(({field:r,isUser:a})=>a?!0:(s==null?void 0:s.indexOf(r.replace("_export_","")))!==-1).sort((r,a)=>s.indexOf(r.field.replace("_export_",""))-s.indexOf(a.field.replace("_export_","")))}else return e},Os=({columns:e,requiredColumns:t,data:n,skippedColumnsInUserData:s=[],skippedColumnsOnExport:r=[],noCheckEmptyOnExport:a=!1})=>{const i=h.useMemo(()=>[...Object.keys(n||{}),...t||["pinned"]],[n,t]),l=h.useMemo(()=>e.filter(({field:g})=>g!=="__filler__"&&n?i.indexOf(g.replace("_export_",""))!==-1:!0),[e,i,!!n]),u=h.useMemo(()=>e.filter(({field:g})=>g&&!g.startsWith("_export_")),[e]),d=h.useMemo(()=>(a?e||[]:l).filter(({field:g})=>r.indexOf(g)===-1&&g!=="pinned").filter(g=>!g.doNotExport),[e,a,l,r]),p=h.useMemo(()=>i.filter(g=>s.indexOf(g)===-1).map(g=>({title:g,field:g,exportValue:x=>(x==null?void 0:x[g])||""})),[i,s]),m=h.useMemo(()=>[...p.map(g=>({...g,isUser:!0})),...d.map(g=>({...g,isUser:!1}))],[d,p]);return{tableColumns:u,exportColumns:d,exportColumnsWithUserData:m}},zs=()=>{switch(ee(t=>t.status)){case"loaded":return"loaded";case"loading":case"filter":return"loading";case"table":return"waiting";default:return"loaded"}},Ir=({onClick:e,disabled:t})=>{const{t:n}=T();return o.jsx(F,{buttonType:"secondary",onClick:e,icon:o.jsx(E,{icon:Ja}),"data-testid":"delete",disabled:t,children:n("common.delete")})},gR=e=>{const{t}=T();return o.jsx(F,{buttonType:"primary",...e,children:t("buttons.addToKeywordTracker")})},Wr=e=>{const t=b(Cs),n=h.useMemo(()=>({...e,phrases:t}),[t,e]);return o.jsx(cm,{notification:Be,data:n,moduleId:e.moduleId,CustomButton:gR})},xR=h.memo(({onClick:e,withCheck:t,isWalmart:n})=>{const{t:s}=T(),r=C(()=>{if(e)return t?x0({afterCheckSuccess:e,platform:n?"WALMART":"AMAZON"}):e()},[e,n]);return o.jsx(F,{onClick:r,size:"100",buttonType:"secondary","data-testid":"addtomylist",children:s("cerebro.table.addToMyList")})}),Or=({marketplace:e,withCheck:t=!0,isWalmart:n})=>{const s=Xt(),r=()=>s.getState(Cs);return o.jsx(Tc,{marketplace:e||"amazon.com",notification:Be,getSelectedKeywords:r,type:"dropdown",visibleItemsCount:3,CustomButton:a=>o.jsx(xR,{...a,withCheck:t,isWalmart:n})})},Ho=Ct("deletedWords",void 0),bR=it({name:"openDeletedWords",getPlatform:e=>(e==null?void 0:e.platform)||"AMAZON",restriction:"deletedWords",actionAfterCheck:e=>Ho.open(e)}),fR=({id:e,value:t,onDelete:n,controller:s,searchId:r})=>{const{t:a}=T(),{isOverflown:i,checkOverflown:l}=po(),[u]=rn().map(m=>Number(m)),d=r||u,p=C(()=>s.deleteRequest.actions.pending({searchId:d,phrases:[t],onSuccess:n}),[e,d]);return o.jsxs(SR,{children:[o.jsx(Di,{tooltip:i?void 0:o.jsx(jR,{children:t}),appendTo:"parent",children:o.jsx(yR,{onMouseEnter:l,children:t})}),o.jsx(F,{buttonType:"text",icon:o.jsx(E,{icon:oc}),onClick:p,"data-testid":"returntoresultsphrase",children:a("cerebro.deletedWords.return")})]})},SR=c.div`
  display: flex;
  align-items: center;
  justify-content: space-between;
  width: 100%;
`,yR=c.div`
  ${St};
  color: ${({theme:e})=>e.systemColors.black};
  line-height: 23px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  margin-right: ${({theme:e})=>e.spacing.sp16};
  flex: 1;
  min-width: 0;
`,jR=c.div`
  max-width: 288px;
  word-break: break-all;
  white-space: normal;
`,kR=({selectedValues:e,onDelete:t,controller:n,setSelectedValues:s,searchId:r})=>{const{t:a}=T(),[i]=rn().map(p=>Number(p)),l=r||i,u=C(()=>n.deleteAllAction({searchId:l,deletedIds:e,onSuccess:t}),[e,t]),d=h.useCallback(()=>{u(),s([])},[u,s]);return o.jsx(TR,{children:o.jsx(F,{size:"100",buttonType:"tertiary",icon:o.jsx(E,{icon:oc}),onClick:d,disabled:e.length===0,"data-testid":"returntoresultsall",children:a("cerebro.deletedWords.returnToResults")})})},TR=c.div`
  display: flex;
  align-items: center;

  & > :not(:first-child) {
    margin-left: 8px;
  }
`,vR=({marketplace:e,onDelete:t,controller:n,searchId:s})=>{const[r,a]=h.useState(0),i=h.useCallback(()=>{a(q=>q+1),t==null||t()},[t]),{t:l}=T(),u=b(Ho.atom,q=>q.isOpen,[]),d=C(()=>Ho.close()),p=b(n.getRequest.atom,q=>{var U;return((U=q.content)==null?void 0:U.data.length)||0},[]),{content:m,status:g,error:x}=b(n.getRequest.atom),S=h.useMemo(()=>[{title:l("cerebro.deletedWords.columnKeyword"),field:"phrase",sortable:!0,maxWidth:536,responsive:!0,customCSS:wR,render:q=>o.jsx(fR,{id:q.id,value:String(q.phrase),onDelete:i,controller:n,searchId:s}),exportTitle:l("cerebro.deletedWords.columnKeyword")}],[n,i,s,l]),j=h.useCallback(({items:q,selected:U})=>U?l("cerebro.deletedWords.tableTitleSelected",{count:U}):l("cerebro.deletedWords.tableTitle",{count:q}),[l]),{dispatch:f}=Xt();h.useEffect(()=>{p===0&&f(Ho.close())},[p,f]);const[v,k]=h.useState(Gu);h.useEffect(()=>{u||k(Gu)},[u]);const y=h.useCallback(q=>{k(q)},[]),w=Ul(y,300),P=h.useMemo(()=>((m==null?void 0:m.data)||[]).filter(q=>q.phrase.search(v.search)!==-1).sort((q,U)=>v.sortDirection==="ASC"?q.phrase.localeCompare(U.phrase):U.phrase.localeCompare(q.phrase)),[m==null?void 0:m.data,v]),[A,W]=h.useState([]),_=h.useMemo(()=>({onChange:q=>W(q),getTitleText:j,value:A}),[j,A]);h.useEffect(()=>{const q=P.map(ye=>ye.id),U=A.filter(ye=>q.includes(ye));JSON.stringify(U)!==JSON.stringify(A)&&W(U)},[P,A]);const G=h.useMemo(()=>({itemsPerPage:[1e3],noFooter:!0,errorState:x||"",searchVisible:!0}),[x]);return o.jsxs(o.Fragment,{children:[o.jsx($R,{children:o.jsx(At,{name:`deleted-words-${r}`,dimensions:AR,behavior:G,marketplace:e,status:g,columns:S,data:P,total:P.length,onFilter:w,filter:CR,rightActions:()=>o.jsx(kR,{onDelete:i,selectedValues:A,setSelectedValues:W,controller:n,searchId:s}),selected:_})}),o.jsx(PR,{children:o.jsx(F,{onClick:d,buttonType:"secondary",size:"200","data-testid":"close",children:l("common.close")})})]})},CR={haveInitial:!0},AR={minHeight:145,maxHeight:507},wR=Z`
  min-width: 0;
`,$R=c.div`
  margin-top: ${({theme:e})=>e.spacing.sp32};
  margin-bottom: ${({theme:e})=>e.spacing.sp48};
  max-width: 100%;
`,PR=c.div`
  display: flex;
  justify-content: flex-end;
`,Gu={search:"",page:1,count:0,sortDirection:"ASC",sortField:"id"},zr=e=>{const{t}=T(),n=b(Ho.atom,l=>l.isOpen,[]),s=C(()=>Ho.close()),r=C(()=>e.noCheckRestrictions?Ho.open(e.marketplace):bR(e.marketplace),[]),a=b(e.controller.getRequest.atom,l=>{var u;return((u=l.content)==null?void 0:u.data.length)||0},[]),{dispatch:i}=Xt();return h.useEffect(()=>{a===0&&i(Ho.close())},[a,i]),a?o.jsxs(o.Fragment,{children:[o.jsx(F,{buttonType:"tertiary",size:"100",onClick:r,"data-testid":"viewdeletedwords",children:t("cerebro.deletedWords.button",{number:a})}),o.jsx(Rt,{isOpen:n,onClose:s,title:t("cerebro.deletedWords.title"),subtitle:t("cerebro.deletedWords.text"),children:o.jsx(vR,{...e})})]}):null},bx=({title:e,asin:t,imageSrc:n,marketplace:s,onDelete:r,onRemove:a})=>{const i=b(ot.getRequest.atom,u=>{var d;return!!((d=u.content)!=null&&d.data.length)},[]),l=b(Cs);return h.useCallback(u=>o.jsxs(o.Fragment,{children:[i&&o.jsx(zr,{marketplace:s,onDelete:r,controller:ot}),u.length!==0&&o.jsxs(o.Fragment,{children:[o.jsx(Or,{marketplace:s.domain}),o.jsx(Wr,{marketplace:s.store,asin:t,title:e,imageSrc:n,moduleId:"cerebro"}),o.jsx(Ir,{onClick:()=>a(u)}),o.jsx(ti,{params:{type:"keywords",keywords:l,marketplace:s==null?void 0:s.store,source:ss.SOURCE.CEREBRO,seSource:"cerebro"}})]})]}),[t,i,n,s,r,a,l,e])},Nr=()=>{const e=b(Ue,t=>t==null?void 0:t.startsWith("amazon"),[]);return!jr("AMAZON")&&!!e},Zu="HIDE_CEREBRO_SEASONAL_TOOLTIP",BR=({children:e,options:t})=>{const{t:n}=T(),r=localStorage.getItem(Zu)==null,[a,i]=h.useState(r),l=Nr(),u=()=>{i(!1),localStorage.setItem(Zu,JSON.stringify(!0))},{visibleColumns:d}=t,p=h.useRef(d);return h.useEffect(()=>{pi.forEach(m=>{d.includes(m)&&!p.current.includes(m)&&H({eventName:"Cerebro Seasonal SV Column Enabled",eventProperties:{Month:nu[m],State:"True"}}),!d.includes(m)&&p.current.includes(m)&&H({eventName:"Cerebro Seasonal SV Column Enabled",eventProperties:{Month:nu[m],State:"False"}})}),p.current=d},[JSON.stringify(d)]),l?o.jsx(re,{content:o.jsx("div",{dangerouslySetInnerHTML:{__html:n("cerebroSeasonal.tableSettings.tooltip",{year:As})}}),open:!0,colorType:"light",disabled:!a,delay:[0,0],zIndex:100,children:o.jsx("div",{onClick:u,children:e})}):o.jsx(o.Fragment,{children:e})},fx=()=>{const{settings:e}=QS();return h.useCallback((t,n)=>o.jsx(BR,{options:n,children:e}),[e])},MR=({onChange:e,...t})=>{const n=t.items?t.items.length:0,s=h.useRef(null),[r,a]=h.useState(0),[i,l]=h.useState(!1),u=h.useCallback(()=>{l(!0)},[]),d=h.useCallback(m=>{l(!1),a(m.item),e==null||e(m.item)},[e]),p=kc().width.toString();return o.jsxs(IR,{tabIndex:-1,children:[h.createElement(JS,{ref:s,...t,animationDuration:500,disableDotsControls:!0,disableButtonsControls:!0,autoWidth:!0,infinite:!0,onSlideChange:u,onSlideChanged:d,key:p}),o.jsxs("div",{children:[o.jsx(RR,{buttonType:"icon",size:"100",icon:o.jsx(Yu,{icon:Hf}),onClick:m=>{var g;return!i&&((g=s.current)==null?void 0:g.slidePrev(m))},disabled:r===0}),o.jsx(FR,{buttonType:"icon",size:"100",icon:o.jsx(Yu,{icon:Kl}),onClick:m=>{var g;return!i&&((g=s.current)==null?void 0:g.slideNext(m))},disabled:r===n-1})]})]})},Sx=c(F)`
  min-width: 32px;

  & > svg {
    font-size: 24px;
  }
`,RR=c(Sx)`
  margin-left: ${({theme:e})=>e.spacing.sp16};
  margin-bottom: ${({theme:e})=>e.spacing.sp8};
  border-color: ${({theme:e})=>e.systemColors.grey200};
`,FR=c(Sx)`
  margin-left: ${({theme:e})=>e.spacing.sp16};
  border-color: ${({theme:e})=>e.systemColors.grey200};
`,Yu=c(E)`
  font-size: 24px;
`,DR=c.div`
  .alice-carousel .animated {
    -webkit-animation-fill-mode: both;
    animation-fill-mode: both;
  }

  .alice-carousel .animated-out {
    z-index: 1;
  }

  .alice-carousel .fadeOut {
    -webkit-animation-name: fadeOut;
    animation-name: fadeOut;
  }

  @-webkit-keyframes fadeOut {
    0% {
      opacity: 1;
    }
    100% {
      opacity: 0;
      visibility: hidden;
    }
  }

  @keyframes fadeOut {
    0% {
      opacity: 1;
    }
    100% {
      opacity: 0;
      visibility: hidden;
    }
  }

  .alice-carousel {
    position: relative;
    width: 100%;
    margin: auto;
    direction: ltr;
  }

  .alice-carousel__wrapper {
    position: relative;
    overflow-x: hidden;
    overflow-y: hidden;
    box-sizing: border-box;
    width: 100%;
    height: auto;
  }

  .alice-carousel__stage {
    position: relative;
    box-sizing: border-box;
    width: 100%;
    height: 100%;
    margin: 0;
    padding: 0;
    white-space: nowrap;
    transform-style: flat;
    -webkit-transform-style: flat;
    backface-visibility: hidden;
    -webkit-backface-visibility: hidden;
  }

  .alice-carousel__stage-item {
    position: relative;
    display: inline-block;
    padding: 0;
    margin: 0;
    box-sizing: border-box;
    width: 100%;
    height: 100%;
    vertical-align: top;
    white-space: normal;
    line-height: 0;
  }

  .alice-carousel__stage-item * {
    line-height: initial;
  }

  .alice-carousel__stage-item.__hidden {
    opacity: 0;
    overflow: hidden;
  }

  .alice-carousel__prev-btn,
  .alice-carousel__next-btn {
    display: inline-block;
    box-sizing: border-box;
    width: 50%;
    padding: 10px 5px;
  }

  .alice-carousel__prev-btn [data-area]::after,
  .alice-carousel__next-btn [data-area]::after {
    position: relative;
    content: attr(data-area);
    text-transform: capitalize;
  }

  .alice-carousel__prev-btn {
    text-align: right;
  }

  .alice-carousel__prev-btn-item,
  .alice-carousel__next-btn-item {
    display: inline-block;
    cursor: pointer;
    padding: 5px;
    margin: 0;
    color: #465798;
  }

  .alice-carousel__prev-btn-item:hover,
  .alice-carousel__next-btn-item:hover {
    color: darkred;
  }

  .alice-carousel__prev-btn-item.__inactive,
  .alice-carousel__next-btn-item.__inactive {
    opacity: 0.4;
    pointer-events: none;
  }

  .alice-carousel__play-btn {
    position: absolute;
    top: 30px;
    left: 20px;
    display: inline-block;
  }

  .alice-carousel__play-btn:hover {
    cursor: pointer;
  }

  .alice-carousel__play-btn-wrapper {
    position: relative;
    width: 32px;
    height: 32px;
    padding: 10px;
    border-radius: 50%;
    background-color: #fff;
  }

  .alice-carousel__play-btn-item {
    position: absolute;
    width: 32px;
    height: 32px;
    cursor: pointer;
    border: 0;
    outline: none;
    background: transparent;
  }

  .alice-carousel__play-btn-item::before,
  .alice-carousel__play-btn-item::after {
    position: absolute;
    pointer-events: none;
    display: block;
    width: 0;
    height: 0;
    content: "";
    transition: all 0.4s linear;
    border-width: 8px 0 8px 15px;
    border-style: solid;
    border-color: transparent;
    border-left-color: #465798;
  }

  .alice-carousel__play-btn-item::before {
    left: 5px;
    height: 14px;
  }

  .alice-carousel__play-btn-item::after {
    top: 7px;
    left: 18px;
  }

  .alice-carousel__play-btn-item.__pause::before,
  .alice-carousel__play-btn-item.__pause::after {
    height: 30px;
    border-width: 0 0 0 10px;
  }

  .alice-carousel__play-btn-item.__pause::after {
    top: 0;
    left: 18px;
  }

  .alice-carousel__dots {
    margin: 30px 3px 5px;
    padding: 0;
    list-style: none;
    text-align: center;
  }

  .alice-carousel__dots > li {
    display: inline-block;
  }

  .alice-carousel__dots-item:not(.__custom) {
    width: 8px;
    height: 8px;
    cursor: pointer;
    border-radius: 50%;
    background-color: #e0e4fb;
  }

  .alice-carousel__dots-item:not(.__custom):not(:last-child) {
    margin-right: 20px;
  }

  .alice-carousel__dots-item:not(.__custom):hover,
  .alice-carousel__dots-item:not(.__custom).__active {
    background-color: #6e7ebc;
  }

  .alice-carousel__slide-info {
    position: absolute;
    top: 20px;
    right: 20px;
    display: inline-block;
    padding: 5px 10px;
    color: #465798;
    border-radius: 5px;
    background-color: rgba(224, 228, 251, 0.6);
  }

  .alice-carousel__slide-info-item {
    vertical-align: middle;
    line-height: 0;
  }
`,IR=c(DR)`
  display: flex;
  align-items: center;
  position: relative;
  width: 100%;

  & > div {
    width: calc(100% - 48px) !important;
  }
`,Wi=({atom:e,market:t,onChange:n,carouselAsin:s})=>{const r=b(e),a=h.useMemo(()=>(r==null?void 0:r.map(l=>o.jsx(OR,{children:o.jsx(Qu,{market:t,data:l,isCarousel:!0})},l.id)))||[],[r,t]),i=h.useMemo(()=>r==null?void 0:r.findIndex(l=>l.asin===s),[r,s]);return o.jsx(WR,{children:r&&o.jsxs(zR,{children:[a.length===1&&o.jsx(Qu,{market:t,data:{...r[0]}}),a.length>1&&o.jsx(MR,{items:a,onChange:n,activeIndex:i})]})})},Qu=({data:e,market:t,isCarousel:n})=>{const s=Ad(e),r=h.useMemo(()=>n?{appendTo:document.body}:void 0,[n]),a=b(Ue,i=>ce("domain",i||"amazon.com").store,[]);return o.jsx(vs,{market:t,product:e,blocks:s,tooltipOptions:r,imageSize:"200",titleLineClamp:3,marketplace:a,tool:"cerebro"})},Ad=e=>{const{t}=T();return[...e!=null&&e.asin?[{text:(e==null?void 0:e.asin)||(e==null?void 0:e.productId)||e.id,copyContent:(e==null?void 0:e.asin)||(e==null?void 0:e.productId),beforeCopyContent:o.jsx(Ml,{label:t("copyButton.copy",{name:"ASIN"})}),afterCopyContent:o.jsx(Rl,{label:t("copyButton.copied",{name:"ASIN"})})}]:[],...e!=null&&e.walmartItemId?[{text:(e==null?void 0:e.walmartItemId)||(e==null?void 0:e.productId)||e.id,copyContent:(e==null?void 0:e.walmartItemId)||(e==null?void 0:e.productId),beforeCopyContent:o.jsx(Ml,{label:t("copyButton.copy",{name:"Walmart Id"})}),afterCopyContent:o.jsx(Rl,{label:t("copyButton.copied",{name:"Walmart Id"})})}]:[]]},WR=c.div`
  margin-bottom: ${({theme:e})=>e.spacing.sp16};
`,OR=c.div`
  width: 100%;
  margin-bottom: 6px;
`,zR=c.div`
  width: 100%;
  max-width: 100%;

  *:focus {
    outline: none;
  }
`,yx=h.memo(({market:e,product:t,active:n,onClick:s,clickable:r=!0})=>{const a=Ad({...t,title:t.title||"",imageSrc:t.imageSrc||"",href:t.href||"",id:"0"}),i=b(Ue,d=>ce("domain",d||"amazon.com").store,[]),l=C(()=>s==null?void 0:s(t),[t]),u=r?ER:LR;return o.jsx(NR,{children:o.jsx(re,{colorType:"light",content:o.jsx(vs,{market:e,product:t,blocks:a,tooltipOptions:{appendTo:"parent"},imageTooltipOptions:{appendTo:"parent"},tool:"cerebro",marketplace:i}),appendTo:"parent",interactive:!0,children:o.jsx(u,{onClick:l,active:n,clickable:r,children:o.jsxs(_R,{children:[o.jsx(qR,{src:t.imageSrc,alt:t.asin}),o.jsx(VR,{children:t.asin})]})},t.asin)})})}),NR=c.div``,VR=c.span``,_R=c.div`
  display: flex;
  align-items: center;
`,jx=Z`
  & > div > div > * {
    padding-left: 3px;
  }
`,ER=c(ni)`
  ${jx};
`,LR=c(os)`
  ${jx};
`,qR=c.img`
  width: 18px;
  height: 18px;
  border-radius: 9px;
  margin-right: ${({theme:e})=>e.spacing.sp4};
`,HR=({counterText:e,selectedMonth:t,selectedProduct:n})=>{const{t:s}=T(),r=h.useMemo(()=>t!=null?Ys(new Date(t),1):null,[t]);return o.jsx(UR,{children:o.jsxs(kx,{children:[e,r!=null&&o.jsxs(o.Fragment,{children:[o.jsx(KR,{}),o.jsx(os,{children:s("historicalData.tableTitleText.selectedDate",{date:ke(mt(r),"MMM, yyyy")})}),n!=null&&o.jsx(GR,{children:o.jsx(yx,{market:"AMAZON",product:n,active:!0,clickable:!1})})]})]})})},kx=c.div`
  display: flex;
  align-items: center;
`,UR=c(kx)`
  width: 100%;
  justify-content: space-between;
`,KR=c.div`
  background: #d9e0e8;
  width: 1px;
  height: 32px;
  margin: ${e=>`0 ${e.theme.spacing.sp8}`};
`,GR=c.div`
  margin-left: ${e=>e.theme.spacing.sp8};

  & > div {
    max-height: 24px;
  }
`,wd=({selectedMonth:e,selectedProduct:t})=>{const{t:n}=T();return h.useCallback(({items:s,selected:r})=>{const a=r?n("cerebro.table.filteredKeywordsSelected",{count:r,value:N({value:r})}):n("cerebro.table.filteredKeywords",{count:s,value:N({value:s})});return o.jsx(HR,{counterText:a,selectedMonth:e,selectedProduct:t})},[e,t,n])},Tx=()=>{const{isDemo:e}=ge(),t=V("AMAZON",yr)&&!e;return h.useMemo(()=>t?{octoberSeasonalSearchVolume:!1,novemberSeasonalSearchVolume:!1,decemberSeasonalSearchVolume:!0}:{},[t])},ZR=({tableSelected:e,isDemo:t})=>{const n=b(oe.tableFilterRequest.atom),s=C(()=>oe.tableFilterRequest.actions.onLockedPagination(),[]),r=wd({}),a=V("AMAZON","pagination")&&!t,i=Tx(),l=h.useMemo(()=>({onLock:s,pagination:a,search:a,sort:a,itemsPerPage:a,settingsColumns:{...i}}),[a,s,i]),u=h.useMemo(()=>({...e,getTitleText:r}),[r,e]),d=h.useMemo(()=>({value:n}),[n]);return{locked:l,selected:u,filter:d}},vx=({controller:e,platform:t="AMAZON",noCheckRestrictions:n,searchId:s,onSuccess:r})=>{const[a]=rn().map(l=>Number(l)),i=s||a;return C(l=>n?e.addRequest.actions.pending({searchId:i,phrases:l,onSuccess:r}):e.addWithRestrictionCheck({searchId:i,phrases:l,platform:t,onSuccess:r}),[i,t])},Dn=({dataAtom:e,refreshDataAction:t,temporarilyRemovedController:n,project:s,searchId:r})=>{const a=b(e,y=>ce("store",y.marketplace||"").platform,[]),i=b(e,({tableData:y})=>(y==null?void 0:y.map(({phraseId:w,...P})=>({...P,id:w.toString()})))||[],[]),l=h.useRef(i);l.current=i;const u=V(a,"deletedWords"),d=C(()=>we.open({platform:a,restriction:"deletedWords",project:s,trigger:'User Click: "Return Deleted Words"'}),[a,s]),p=C(()=>t==null?void 0:t({}),[]),m=h.useCallback(()=>{setTimeout(()=>{l.current&&l.current.length===0&&(ee.getState().setStatus("table"),p())},0)},[p]),g=vx({controller:n,platform:a,onSuccess:m,searchId:r}),x=C(Gm),S=h.useRef([]),[j,f]=h.useState(void 0),v=h.useCallback(y=>{u?d():g(l.current.filter(w=>y.indexOf(w.id)!==-1)||[])},[u,g,d]);h.useEffect(()=>{x([]),f([])},[x,JSON.stringify(i)]);const k=h.useMemo(()=>({value:j,onChange:y=>{S.current=y,x(y.map(w=>{const P=l.current.filter(({id:A})=>A.toString()===w.toString())[0];return P?P.phrase:w.toString()}))}}),[x,l,j]);return{data:i,onRemove:v,selected:k}},Ns=({matchType:e=[],isAmazon:t,project:n="cerebro"})=>{const{t:s}=T();return o.jsxs(o.Fragment,{children:[t&&o.jsx(re,{content:s("cerebro.table.matchTypeTooltips.amazonRecommended"),placement:"top",appendTo:document.body,delay:[500,500],children:o.jsx(ia,{active:!!e.find(r=>r==="ppc"),children:"A"})}),n==="cerebro"&&o.jsx(re,{content:s("cerebro.table.matchTypeTooltips.sponsored"),placement:"top",appendTo:document.body,delay:[500,500],children:o.jsx(ia,{active:!!e.find(r=>r==="sponsored")||!!e.find(r=>r==="lexical"),children:"S"})}),o.jsx(re,{content:s("cerebro.table.matchTypeTooltips.organic"),placement:"top",appendTo:document.body,delay:[500,500],children:o.jsx(ia,{active:!!e.find(r=>r==="organic")||!!e.find(r=>r==="contextual"),children:"O"})}),n==="magnet"&&o.jsx(re,{content:s("cerebro.table.matchTypeTooltips.smartComplete"),placement:"top",appendTo:document.body,delay:[500,500],children:o.jsx(ia,{active:!!e.find(r=>r==="lexical"),children:"S"})})]})},$d=({isAmazon:e,matchType:t})=>`${e&&t.find(n=>n==="ppc")?"A":""}${t.find(n=>n==="sponsored")||t.find(n=>n==="lexical")?"S":""}${t.find(n=>n==="organic")||t.find(n=>n==="contextual")?"O":""}`,In=Z`
  display: flex;
  justify-content: flex-end;
  width: 100%;
  gap: ${({theme:e})=>e.spacing.sp8};
`,ia=c.div`
  width: 25px;
  height: 24px;
  border: solid 1px ${({theme:e})=>e.systemColors.grey200};
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 12px;

  ${St};
  color: ${({active:e,theme:t})=>e?t.systemColors.grey800:t.systemColors.grey300};
  padding-top: 1px;

  & > * {
    position: relative;
  }

  ${({active:e})=>e&&Z`
      background-color: ${({theme:t})=>t.systemColors.grey200};
      color: ${({theme:t})=>t.systemColors.grey800};
    `}
`,Pd=({matchType:e})=>{const{t}=T(),n=e.length-3;return o.jsxs(YR,{children:[e.slice(0,3).map(s=>o.jsx("div",{children:o.jsx(re,{content:t(`historicalData.legend.byTypes.${s}.title`),children:o.jsx(QR,{children:t(`historicalData.legend.byTypes.${s}.abbreviation`)})})},s)),n>0&&o.jsx(bm,{count:`+${n}`,trigger:"hover",items:o.jsx(o.Fragment,{children:e.slice(3,e.length).map(s=>o.jsx(JR,{children:t(`historicalData.legend.byTypes.${s}.title`)},s))}),size:"100"})]})},YR=c.div`
  display: flex;

  & > :not(:first-child) {
    margin-left: ${e=>e.theme.spacing.sp4};
  }
`,QR=c.div`
  ${pr};
  flex: 0 0 auto;
  padding: ${e=>e.theme.spacing.sp4};
  border: 1px solid #d9e0e8;
  border-radius: 12px;
  line-height: 14px;
  min-width: 24px;
  text-align: center;
`,JR=c.div`
  ${fe};
  padding: ${e=>`${e.theme.spacing.sp8} ${e.theme.spacing.sp12}`};
`,Vr=({value:e,over:t,minimumFractionDigits:n,maximumFractionDigits:s})=>{const r=e!==void 0,a=t&&r;return o.jsxs(o.Fragment,{children:[a?">":"",r&&e>=0?N({value:e,minimumFractionDigits:n,maximumFractionDigits:s}):"-"]})},_r=({value:e,size:t=16,tooltips:n=[]})=>o.jsxs(XR,{negative:!!e&&e<0,positive:!!e&&e>0,children:[e?o.jsx(eF,{children:`${N({value:e,maximumFractionDigits:0})}%`}):o.jsx("div",{style:{marginRight:20},children:e===0?"0":"-"}),!!e&&(n.length>0?o.jsxs(o.Fragment,{children:[e>0&&o.jsx(re,{content:n[0],maxWidth:500,colorType:"light",children:o.jsx("div",{children:o.jsx(Ju,{icon:Zd,$size:t})})}),e<0&&o.jsx(re,{content:n[1],maxWidth:500,colorType:"light",children:o.jsx("div",{children:o.jsx(Xu,{icon:Yd,$size:t})})})]}):o.jsxs(o.Fragment,{children:[e>0&&o.jsx(Ju,{icon:Zd,$size:t}),e<0&&o.jsx(Xu,{icon:Yd,$size:t})]}))]}),XR=c.div`
  margin-left: auto;
  display: flex;
  align-items: center;
`,Cx=c(E)`
  height: ${({size:e})=>e}px;
`,Ju=c(Cx)`
  color: #33cc99;
`,Xu=c(Cx)`
  color: ${({theme:e})=>e.systemColors.orange400};
`,eF=c.div`
  margin-right: ${({theme:e})=>e.spacing.sp8};
`,Bd=({tool:e,marketData:t,phrase:n})=>o.jsx(We,{content:o.jsx(tF,{onClick:()=>{},params:{type:"keywords",marketplace:(t==null?void 0:t.store)??"",keywords:[n],source:e==="cerebro"?ss.SOURCE.CEREBRO:ss.SOURCE.MAGNET,seSource:e}}),appendTo:document.body,children:o.jsx(F,{buttonType:"icon",icon:o.jsx(E,{icon:Xl})})}),tF=c(bc)`
  min-height: 44px;
`,Ea=(e,t)=>{const n=(t||Date.now())-e,s=6048e5,r=2592e6;return n<=s?"lessThan7Days":n>s&&n<=r?"between7And30Days":"moreThan30Days"},te=({value:e,maximumFractionDigits:t})=>{const n=t?Math.pow(10,t):1;return e!=null?t!=null?Math.round(n*e)/n:Number(e):"-"},oF=({project:e})=>{const t=C(()=>Bc({project:e}),[e]);return o.jsx(Js,{onClick:t})},nF=({locked:e,project:t,isDemo:n})=>{const{t:s,language:r}=T(),a=C(()=>n?void 0:Bc({project:t}),[t,n]),i=Ps();return o.jsx(Pa,{title:s("cerebro.filter.monthlySales"),tooltip:s(`cerebro.filter.${e?"monthlySalesLockedTitleTooltip":"monthlySalesTooltip"}`),locked:e,onClick:a,minWidth:r==="es"||r==="it"?90:80,lockedTooltip:s("cerebro.filter.monthlySalesLockedTooltip",{upgradePlan:i})})},Vs=({project:e,marketplace:t,onClick:n})=>{const{t:s}=T(),{isDemo:r}=ge(),a=Me(u=>{var d;return(d=u.checkLogin)==null?void 0:d.basePlan}),i=a==="Helium10_Entrepreneur_Cn"||a==="Helium10_Entrepreneur_Cn_Annual",l=V((t==null?void 0:t.platform)||"AMAZON","seeMonthlySalesColumn")&&!r;return h.useMemo(()=>(t==null?void 0:t.domain)==="amazon.com"?[{title:o.jsx(nF,{locked:l,project:"cerebro",isDemo:r}),exportTitle:s("cerebro.filter.monthlySales"),settingsTitle:Da({title:s("cerebro.filter.monthlySales"),locked:i&&l}),defaultHidden:i&&l,field:"monthlySales",sortable:!0,disableSorting:l,customCSS:X,onClick:n,render:u=>l?o.jsx(oF,{project:e}):o.jsx(be,{value:u?u.monthlySales:void 0,maximumFractionDigits:0}),exportValue:u=>u.monthlySales?te({value:u.monthlySales,maximumFractionDigits:0}):"-",contentPosition:"right",maxWidth:200}]:[],[r,i,l,t==null?void 0:t.domain,n,e,s])},sF=c(E)`
  color: ${({theme:e})=>e.systemColors.black};
`,rF=o.jsx(sF,{icon:Ja}),Wn=({data:e,temporarilyRemovedController:t,platform:n,noCheckRestrictions:s,searchId:r,disabled:a})=>{const i=vx({controller:t,platform:n,noCheckRestrictions:s,searchId:r}),l=()=>{i([{id:e.id,phrase:e.phrase||e.keyword}])};return o.jsx(aF,{onClick:l,buttonType:"icon",size:"50",icon:rF,disabled:a})},On=Z`
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  ${e=>e.theme.systemColors.grey300}
  padding: 0 8px;

  > & > :not(:first-child) {
    margin-left: 8px;
  }
`,aF=c(F)`
  margin: auto;
  ${e=>e.disabled&&Z`
      svg {
        color: ${t=>t.theme.systemColors.grey300};
      }
    `}
`,iF=["elite","diamond"],Oi=({project:e="cerebro",platform:t="AMAZON"})=>{const{planGroup:n}=ne(),{isDemo:s}=ge();return e==="cerebro"&&t==="AMAZON"&&(s||iF.includes(n))},Sl=({value:e,locked:t})=>{const n=C(()=>Nt({trigger:"Seasonal data",tool:"Cerebro",isABA:!0}),[]);return t?o.jsx(Js,{onClick:n}):e!=null?N({value:e,maximumFractionDigits:0}):"N/A"},La=(e,t=!1)=>{const n=C(()=>ps.open({moduleId:"cerebro",showDemo:t})),s=Eh(n,!0);return h.useCallback(()=>{H({eventName:"Historical Graph Clicked",...e?{eventProperties:{trigger:e}}:{}}),s()},[s,e])},Ax=({tooltipContent:e})=>o.jsx(oi,{content:e,colorType:"light",interactive:!0,appendTo:document.body,zIndex:100,children:o.jsx(lF,{children:o.jsx(E,{icon:Qp})})}),lF=c.div`
  display: flex;
  align-items: center;
  justify-content: center;
  width: 20px;
  height: 20px;
  border-radius: 50%;
  background-color: ${e=>e.theme.systemColors.blue100};
  color: ${e=>e.theme.systemColors.blue800};
  font-size: 12px;
`,wx=({title:e,text:t,onLearnMore:n})=>{const{t:s}=T(),r=()=>{const a=$(`${ys}/subscribe`,{action:"checkout",offer:"scale_your_business"});window.open(a,"__target")};return o.jsxs(yl,{children:[o.jsxs(cF,{children:[o.jsx(pF,{children:e}),o.jsx(fS,{type:"enabled",children:o.jsxs(uF,{children:[o.jsx(yl,{children:s("upgradeToDiamondTooltip.chip")}),o.jsx(E,{icon:Uf})]})})]}),o.jsx(yl,{children:t}),o.jsxs(dF,{children:[o.jsx(F,{buttonType:"text",onClick:a=>{a.stopPropagation(),n()},children:s("upgradeToDiamondTooltip.learnMore")}),o.jsx(F,{onClick:a=>{a.stopPropagation(),r()},children:s("upgradeToDiamondTooltip.upgradeNow")})]})]})},Md=Z`
  display: flex;
  align-items: center;
  gap: ${({theme:e})=>e.spacing.sp8};
`,cF=c.div`
  ${Md};
  margin-bottom: ${({theme:e})=>e.spacing.sp8};
`,dF=c.div`
  ${Md};
  justify-content: space-between;
  margin-top: ${({theme:e})=>e.spacing.sp16};
`,uF=c.div`
  ${Md};
`,pF=c.div`
  ${Le};
  color: ${e=>e.theme.systemColors.black};
`,yl=c.div``,$x=()=>{const{t:e}=T(),t=C(()=>Nt({trigger:"Seasonal data",tool:"Cerebro"}),[]);return o.jsx(wx,{title:e("cerebroSeasonal.upgradeTooltip.title"),text:e("cerebroSeasonal.upgradeTooltip.text"),onLearnMore:t})},Un=({month:e,translationKey:t,locked:n,isSettings:s})=>{const{t:r}=T(),a=new Date(As,e-1,1),i=r(`cerebroSeasonal.fields.${t}.table.title`,{month:$e(a,"short")}),l=La("Column Tooltip"),u=C(d=>{if(n)return d.stopPropagation(),Nt({trigger:"Seasonal data",tool:"Cerebro",isABA:!0})},[]);return o.jsxs(gF,{onClick:u,children:[o.jsx(Ax,{tooltipContent:s?void 0:n?o.jsx($x,{}):r(`cerebroSeasonal.fields.${t}.table.tooltip`,{nodes:[o.jsx(xF,{type:"button",size:"100",buttonType:"text",as:"span",onClick:d=>{d.stopPropagation(),l()},children:r(`cerebroSeasonal.fields.${t}.table.tooltipNode`)},"node_0")]})}),o.jsx(bF,{dangerouslySetInnerHTML:{__html:s?i.replaceAll("<br/>"," "):i}})]})},mF=[10,11,12],hF=({translationKey:e})=>{const{t}=T();return h.useMemo(()=>mF.reduce((n,s)=>{const r=new Date(As,s-1,1);return{...n,[s]:t(`cerebroSeasonal.fields.${e}.table.title`,{month:$e(r,"short")}).replaceAll("<br/>"," ")}},{}),[t,e])},gF=c.div`
  display: flex;
  align-items: center;
  gap: ${e=>e.theme.spacing.sp8};

  margin: ${({theme:{spacing:{sp8:e,sp16:t}}})=>`-${e} -${t}`};
  padding: ${({theme:{spacing:{sp8:e,sp16:t}}})=>`${e} ${t}`};
`,xF=c(F)`
  padding: 0;
  min-height: auto;
  display: inline;
`,bF=c.div`
  ${pr};
  text-align: start;
`,Px=()=>{const{isDemo:e}=ge(),t=V("AMAZON","sorting")&&!e,n=!jr("AMAZON"),s=V("AMAZON",yr)&&!e,r=t&&s,a=hF({translationKey:"searchVolume"});return h.useMemo(()=>n?[{field:"octoberSeasonalSearchVolume",title:o.jsx(Un,{translationKey:"searchVolume",month:10,locked:s}),settingsTitle:o.jsx(Un,{translationKey:"searchVolume",month:10,locked:s,isSettings:!0}),exportTitle:a[10],contentPosition:"right",minWidth:164,sortable:!0,disableSorting:r,customCSS:X,render:i=>o.jsx(Sl,{value:i.octoberSeasonalSearchVolume,locked:s}),exportValue:i=>i.octoberSeasonalSearchVolume!=null?Te(i.octoberSeasonalSearchVolume,0):"",doNotExport:s,defaultHidden:!0,onClick:()=>{!r&&H({eventName:"Cerebro Seasonal SV Column Sorted",eventProperties:{Month:"Oct"}})}},{field:"novemberSeasonalSearchVolume",title:o.jsx(Un,{translationKey:"searchVolume",month:11,locked:s}),settingsTitle:o.jsx(Un,{translationKey:"searchVolume",month:11,locked:s,isSettings:!0}),exportTitle:a[11],contentPosition:"right",minWidth:164,sortable:!0,disableSorting:r,customCSS:X,render:i=>o.jsx(Sl,{value:i.novemberSeasonalSearchVolume,locked:s}),exportValue:i=>i.novemberSeasonalSearchVolume!=null?Te(i.novemberSeasonalSearchVolume,0):"",doNotExport:s,defaultHidden:!0,onClick:()=>{!r&&H({eventName:"Cerebro Seasonal SV Column Sorted",eventProperties:{Month:"Nov"}})}},{field:"decemberSeasonalSearchVolume",title:o.jsx(Un,{translationKey:"searchVolume",month:12,locked:s}),settingsTitle:o.jsx(Un,{translationKey:"searchVolume",month:12,locked:s,isSettings:!0}),exportTitle:a[12],contentPosition:"right",minWidth:164,sortable:!0,disableSorting:r,customCSS:X,render:i=>o.jsx(Sl,{value:i.decemberSeasonalSearchVolume,locked:s}),exportValue:i=>i.decemberSeasonalSearchVolume!=null?Te(i.decemberSeasonalSearchVolume,0):"",doNotExport:s,defaultHidden:!1,onClick:()=>{!r&&H({eventName:"Cerebro Seasonal SV Column Sorted",eventProperties:{Month:"Dec"}})}}]:[],[r,a,s,n])},Bx=()=>{const{t:e}=T(),t=Oi({platform:"AMAZON",project:"cerebro"});return h.useMemo(()=>t?Object.keys(Ai).map(n=>({title:e(`historicalData.legend.byTypes.${n}.title`),field:"_export_matchType",render:()=>null,exportValue:({matchType:s})=>s.find(r=>r===n)?1:0})):[{title:e("cerebro.table.exportAmazonRecommended"),field:"_export_matchType",render:()=>null,exportValue:({matchType:n})=>n.find(s=>s==="ppc")?1:0},{title:e("cerebro.table.exportSponsored"),field:"_export_matchType",render:()=>null,exportValue:({matchType:n})=>n.find(s=>s==="sponsored")||n.find(s=>s==="lexical")?1:0},{title:e("cerebro.table.exportOrganic"),field:"_export_matchType",render:()=>null,exportValue:({matchType:n})=>n.find(s=>s==="organic")||n.find(s=>s==="contextual")?1:0}],[t,e])},Er=()=>ks(`(min-width: ${js.mobile}px)`)?230:140,ep=Date.now(),fF=(e,t,n)=>{const{t:s}=T(),{isDemo:r}=ge(),i=V("AMAZON","japanSortingByPhrase")&&(e==null?void 0:e.domain)==="amazon.co.jp",l=V("AMAZON","sorting")&&!r,u=!V("WALMART","searchVolumeChart"),d=!V("COMMON","googleTrendChart"),p=Er(),m=wr({type:"single",moduleId:"cerebro"}),g=Mi({project:"cerebro",platform:"AMAZON",moduleId:"cerebro",marketplace:e}),x=Px(),S=C(()=>l?oe.tableFilterRequest.actions.onLockedSorting():void 0,[l,l]),j=Vs({marketplace:e,project:"cerebro",onClick:S}),f=Oi({platform:"AMAZON",project:"cerebro"}),v=Bx();return h.useMemo(()=>[{title:"",field:"actions",static:32,noHeader:!0,render:k=>o.jsx(Bd,{phrase:k.phrase,marketData:e,tool:"cerebro"}),exportTitle:""},{title:"",field:"pinned",static:32,noHeader:!0,render:k=>o.jsx(Wn,{data:k,temporarilyRemovedController:ot,platform:e==null?void 0:e.platform}),exportTitle:""},{title:s("cerebro.table.keywordPhrase"),field:"phrase",tooltip:s("cerebro.table.keywordPhraseTooltip"),sortable:!i,disableSorting:l,static:p,responsive:!0,customCSS:cn,render:k=>o.jsx(ln,{tool:"cerebro",phraseId:k.phraseId,phrase:k.phrase,mainAsin:n,amazonChoiceAsin:k.amazonChoice,marketplace:"AMAZON",marketplaceFull:e}),exportValue:k=>k.phrase,defaultSortDirection:"ASC",onClick:S},...m,...j,{title:o.jsx(Mx,{children:s("cerebro.table.cerebroIqScore")}),exportTitle:s("cerebro.table.cerebroIqScore"),field:"iq",tooltip:s("cerebro.table.cerebroIqScoreTooltip"),sortable:!0,disableSorting:l,onClick:S,maxWidth:200,customCSS:X,render:k=>o.jsx(be,{value:k.iq?k.iq:void 0,maximumFractionDigits:0}),exportValue:k=>k.iq?te({value:k.iq,maximumFractionDigits:0}):"-",contentPosition:"right"},...x,{title:s("cerebro.table.searchVolume"),field:"impressionExact30",tooltip:s("cerebro.filter.searchVolumeTooltip"),sortable:!0,disableSorting:l,onClick:S,customCSS:Yt,render:k=>o.jsx(Zt,{value:k.impressionExact30,phrase:k.phrase,marketplace:e,enabledWalmartSearchVolumeChart:u,enabledGoogleSearchVolumeChar:d}),exportValue:k=>k.impressionExact30!=null&&k.impressionExact30>=0?te({value:k.impressionExact30}):"-",contentPosition:"right",minWidth:114},{title:o.jsx(Xn,{children:s("cerebro.table.searchVolumeTrend")}),maxWidth:200,exportTitle:s("cerebro.table.searchVolumeTrend"),field:"searchVolumeTrend30",tooltip:s("cerebro.table.searchVolumeTrendTooltip"),sortable:!0,disableSorting:l,render:k=>o.jsx(_r,{value:k.searchVolumeTrend30}),exportValue:({searchVolumeTrend:k})=>k?te({value:k,maximumFractionDigits:0}):"-",contentPosition:"right",onClick:S},...g,{title:o.jsx(zi,{children:s("cerebro.table.sponsoredAsins")}),exportTitle:s("cerebro.table.sponsoredAsins"),field:"sponsoredAsins",maxWidth:200,tooltip:s("cerebro.table.sponsoredAsinsTooltip"),sortable:t,disableSorting:l,customCSS:X,render:k=>o.jsx(be,{value:k.sponsoredAsins,maximumFractionDigits:0}),exportValue:k=>te({value:k.sponsoredAsins,maximumFractionDigits:0}),contentPosition:"right",onClick:S},{title:s("cerebro.table.competingProducts"),field:"resultsNumber",tooltip:s("cerebro.table.competingProductsTooltip"),sortable:t,disableSorting:l,onClick:S,customCSS:X,render:k=>o.jsx(Vr,{value:k.resultsNumber>=0?k.resultsNumber:void 0,over:k.resultsNumberOver,maximumFractionDigits:0}),exportValue:k=>k.resultsNumber>=0?te({value:k.resultsNumber,maximumFractionDigits:0}):"-",contentPosition:"right",maxWidth:200},{title:s("cerebro.table.cpr"),field:"newCprExact",tooltip:s("cerebro.table.cprTooltip"),sortable:t,disableSorting:l,onClick:S,customCSS:X,render:k=>o.jsx(be,{value:k.newCprExact,maximumFractionDigits:0}),exportValue:k=>te({value:k.newCprExact,maximumFractionDigits:0}),contentPosition:"right",maxWidth:200},{title:o.jsx(Rd,{children:s("cerebro.table.titleDensity")}),exportTitle:s("cerebro.table.titleDensity"),field:"exactTitleMatchProductsCount",tooltip:s("cerebro.table.titleDensityTooltip"),sortable:t,disableSorting:l,onClick:S,customCSS:X,render:k=>o.jsx(be,{value:k.exactTitleMatchProductsCount,maximumFractionDigits:0}),exportValue:k=>te({value:k.exactTitleMatchProductsCount,maximumFractionDigits:0}),contentPosition:"right",maxWidth:200},{title:s("cerebro.table.matchType"),field:"matchType",tooltip:s("cerebro.table.matchTypeTooltip"),customCSS:In,render:k=>f?o.jsx(Pd,{matchType:k.matchType}):o.jsx(Ns,{matchType:k.matchType||[],isAmazon:!0}),contentPosition:"right",minWidth:123},...v,{title:o.jsx(SF,{children:s("cerebro.table.amazonRecRank")}),exportTitle:s("cerebro.table.amazonRecRank"),field:"amzSuggestedPosition",tooltip:s("cerebro.table.amazonRecRankTooltip"),sortable:!0,disableSorting:l,onClick:S,customCSS:X,render:k=>o.jsx(be,{value:k.amzSuggestedPosition,maximumFractionDigits:0}),exportValue:({amzSuggestedPosition:k})=>k!=null?te({value:k,maximumFractionDigits:0}):"-",contentPosition:"right",defaultSortDirection:"ASC",maxWidth:200},{title:o.jsx(Rx,{children:s("cerebro.table.sponsoredRank")}),exportTitle:s("cerebro.table.sponsoredRank"),field:"sponsoredPosition",tooltip:s("cerebro.table.sponsoredRankTooltip"),sortable:!0,disableSorting:l,onClick:S,customCSS:X,render:k=>o.jsx(be,{value:k.sponsoredPosition,maximumFractionDigits:0,tooltip:k.sponsoredPosition?s(`table.scrapedDate.${Ea(k.sponsoredScrapedAt*1e3,ep)}`):void 0}),exportValue:({sponsoredPosition:k})=>k?te({value:k,maximumFractionDigits:0}):"-",contentPosition:"right",defaultSortDirection:"ASC",maxWidth:200},{title:o.jsx(Fd,{children:s("cerebro.table.organicRank")}),exportTitle:s("cerebro.table.organicRank"),field:"organicPosition",tooltip:s("cerebro.table.organicRankTooltip"),sortable:!0,disableSorting:l,onClick:S,customCSS:X,render:k=>o.jsx(be,{value:k.organicPosition,maximumFractionDigits:0,tooltip:k.organicPosition?s(`table.scrapedDate.${Ea(k.organicScrapedAt*1e3,ep)}`):void 0}),exportValue:({organicPosition:k})=>k?te({value:k,maximumFractionDigits:0}):"-",contentPosition:"right",defaultSortDirection:"ASC",maxWidth:200},{title:"",field:"_",responsive:!0,noHeader:!0,noHover:!0}],[s,i,l,p,S,m,j,x,g,t,v,e,n,u,d,f])},Mx=c.div`
  min-width: 48px;
`,Xn=c.div`
  min-width: 80px;
`,SF=c.div`
  min-width: 56px;
`,zi=c.div`
  min-width: 45px;
`,Rd=c.div`
  min-width: 48px;
`,Rx=c.div`
  min-width: 48px;
`,Fd=c.div`
  min-width: 48px;
`,yF=({searchId:e})=>{const{isDemo:t}=ge(),{data:n,onRemove:s,selected:r}=Dn({dataAtom:oe.selectors.getSearchDataById,temporarilyRemovedController:ot,refreshDataAction:oe.dataRequest.actions.pending,project:"cerebro"}),a=b(oe.selectors.searchMarketplaceData),i=b(oe.selectors.sortableBySponsoredColumn),l=zs(),u=b(oe.selectors.total),{mainAsin:d,exportId:p,title:m,asin:g,imageSrc:x}=b(oe.dataRequest.atom,le=>{var Ae,Pe,De,ze,Re;return{mainAsin:((Ae=le.content)==null?void 0:Ae.data.productDetails.asin)||"",exportId:(Pe=le.content)==null?void 0:Pe.data.productDetails.asin,title:(De=le.content)==null?void 0:De.data.productDetails.title,asin:(ze=le.content)==null?void 0:ze.data.productDetails.asin,imageSrc:(Re=le.content)==null?void 0:Re.data.productDetails.imageUrl}},[]),{notFreeAndStarter:S}=ne(),j=C(t?oe.tableFilterRequest.actions.setWithoutCheck:oe.tableFilterRequest.actions.set,[t]),f=C(oe.searchRequest.actions.pending),v=C(()=>(ee.getState().setStatus("table"),oe.dataRequest.actions.pending({})),[]);h.useEffect(()=>{setTimeout(()=>f({id:e.toString()}),0)},[e,f]);const k=V("AMAZON","seeMonthlySalesColumn")&&!t,y=id(),w=h.useMemo(()=>[...jF,...k||a.domain!=="amazon.com"?["monthlySales"]:[],...y],[a.domain,k,y]),P=fF(a,i,d),A=Os({columns:P,data:n[0],skippedColumnsOnExport:w}),W=bx({title:m,asin:g,imageSrc:x,marketplace:a,onDelete:v,onRemove:s}),_=fx(),{locked:G,filter:q,selected:U}=ZR({tableSelected:r,isDemo:t}),ye=h.useMemo(()=>({render:(le,Ae,Pe)=>o.jsx(un,{prepareForExportFunction:pn({columns:A.exportColumns,columnsOrder:Pe}),requestAction:oe.exportRequest.actions.pending,putAction:oe.putExportedKeywordsRequest.actions.pending,loadingSelector:oe.selectors.exportIsLoading,marketplace:a,project:"cerebro",itemId:p})}),[A,p,a]),pe=h.useMemo(()=>({...Fx,extraSettings:()=>S&&o.jsx(Ts,{showTop10RankedProductsForKeyword:!0})}),[S]);return o.jsx(At,{name:"cerebro-amazon-single-"+a.TLDomain,filter:q,behavior:pe,locked:G,dimensions:mn,status:l,columns:A.tableColumns,data:n,total:u,selected:U,onFilter:j,leftActions:W,rightActions:_,export:ye})},zn={columnVisible:!0,columnDraggable:!0,itemsPerPage:[50,100,150],searchVisible:!0},Fx={...zn,columnVisible:!1},mn={minHeight:360,stickyHeader:!0},jF=["matchType",ue],kF=()=>{const{t:e,language:t}=T();return h.useCallback(({items:n,selected:s,page:r,count:a})=>s?e("blackBox.products.result.titleTableSelected",{selected:N({value:s,locale:t}),total:N({value:n,locale:t})}):e("blackBox.products.result.titleTable",{from:(r-1)*a+(n!==0?1:0),to:n-(r-1)*a>a?r*a:n,total:N({value:n,locale:t})}),[t,e])},TF=()=>{const e=kF();return h.useMemo(()=>({getTitleText:e}),[e])},Dd=({value:e})=>e!=null&&e!==0?o.jsx(vF,{$rise:e>0,children:o.jsx(E,{icon:e>0?lr:Qa})}):null,vF=c.div`
  font-size: 14px;
  display: flex;
  align-items: center;

  svg {
    color: ${e=>e.$rise?e.theme.systemColors.green400:e.theme.systemColors.orange400};
  }
`,Dx=({price:e,priceChange:t,currency:n,advanced:s,onClickChart:r})=>{const{t:a}=T();return e!=null&&n!=null?o.jsxs(o.Fragment,{children:[o.jsxs(Lr,{children:[o.jsx(re,{content:a("blackBox.products.fields.price.priceTooltip"),placement:"top",appendTo:document.body,maxWidth:500,delay:0,children:o.jsx("div",{children:Ut({amount:n!=="JPY"?e/100:e,currency:n})})}),o.jsx(xo,{onClick:r})]}),s&&o.jsx(Nn,{children:o.jsxs(o.Fragment,{children:[o.jsx(re,{content:a("blackBox.products.fields.price.priceTrendTooltip"),placement:"top",appendTo:document.body,maxWidth:500,delay:0,children:t!=null?o.jsxs("div",{children:[N({value:t,maximumFractionDigits:0}),"%"]}):o.jsx(Id,{children:"-"})}),t!=null&&o.jsx(Dd,{value:t})]})})]}):o.jsx(o.Fragment,{children:"-"})},la=Z`
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  justify-content: center;
`,Ix=c.div`
  display: flex;
  align-items: center;
`,Lr=c(Ix)`
  ${fe};
  color: ${({theme:e})=>e.systemColors.grey800};
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: 100%;

  & > :not(:first-child) {
    margin-left: ${({theme:e})=>e.spacing.sp8};
  }
`,Nn=c(Ix)`
  ${fe};
  margin-top: 2px;

  & > :not(:first-child) {
    margin-left: ${({theme:e})=>e.spacing.sp4};
  }
`,Id=c.div`
  line-height: 14px;
`,Wx=({category:e,bestSellersUrl:t,salesRank:n,subcategories:s,advanced:r,onClickChart:a})=>{const{t:i}=T(),{isOverflown:l,checkOverflown:u}=po();return o.jsxs(o.Fragment,{children:[o.jsxs(AF,{children:[o.jsx(Di,{tooltip:l?void 0:e,children:o.jsx(Ox,{buttonType:"text",size:"50",type:"button",onMouseEnter:u,as:"a",href:t,target:"_blank",rel:"noreferrer",children:e})}),o.jsx(re,{content:i("blackBox.products.fields.categoryBSR.mainCategoryTooltip"),placement:"top",appendTo:document.body,maxWidth:500,delay:0,children:o.jsxs(zx,{children:["#",N({value:n})]})}),o.jsx(xo,{onClick:a})]}),o.jsx(CF,{subcategories:s,advanced:r})]})},CF=({advanced:e,subcategories:t})=>{const{t:n}=T(),s=t[0]||{};return e?o.jsx(re,{content:o.jsxs(o.Fragment,{children:[n("blackBox.products.fields.categoryBSR.subcategoryTemporaryTooltip"),t.map(r=>o.jsxs(h.Fragment,{children:[o.jsx("br",{}),r.nodeName]},`${r.nodeId}-${r.nodeName}`))]}),placement:"top",appendTo:document.body,maxWidth:500,delay:0,children:s.nodeName?o.jsxs(wF,{children:[o.jsx($F,{buttonType:"text",size:"50",type:"button",as:"a",href:s.subcategoryUrl,target:"_blank",rel:"noreferrer",children:s.nodeName}),o.jsx(re,{content:n("blackBox.products.fields.categoryBSR.subcategoryTooltip"),placement:"top",appendTo:document.body,maxWidth:500,delay:0,children:o.jsxs(zx,{children:["#",N({value:s.subcategoryBsr})]})})]}):o.jsx("div",{children:"N/A"})}):null},AF=c(Lr)`
  max-width: 100%;

  & > :not(:first-child) {
    margin-left: ${({theme:e})=>e.spacing.sp8};
  }
`,wF=c(Nn)`
  max-width: 100%;
`,Ox=c(F)`
  padding: 0;
  min-height: 18px;
  line-height: 18px;
  overflow: hidden;
  text-overflow: ellipsis;
  flex: 1;
  min-width: 0;
  justify-content: flex-start;
  display: inline;
`,zx=c.div`
  margin-left: ${({theme:e})=>e.spacing.sp8};
  color: ${({theme:e})=>e.systemColors.grey800};
`,$F=c(Ox)`
  font-size: 12px;
  min-height: 14px;
  line-height: 14px;
`,Nx=({yearSales:e,salesYearOverYear:t,advanced:n})=>{const{t:s}=T();return o.jsxs(o.Fragment,{children:[o.jsx(re,{content:s("blackBox.products.fields.lastYearSales.salesTooltip"),placement:"top",appendTo:document.body,maxWidth:500,delay:0,children:o.jsx(Lr,{children:e!=null?e!==-1?N({value:e,maximumFractionDigits:2}):"N/A":"-"})}),n&&o.jsx(re,{content:s("blackBox.products.fields.lastYearSales.salesYearOverYearTooltip"),placement:"top",appendTo:document.body,maxWidth:500,delay:0,children:o.jsx(Nn,{children:t!=null?o.jsxs(o.Fragment,{children:[o.jsx("div",{children:N({value:t,maximumFractionDigits:2})+"%"}),o.jsx(Dd,{value:t})]}):"-"})})]})},Vx=({monthlySales:e,monthlySalesChange:t,advanced:n,onClickChart:s})=>{const{t:r}=T();return e!=null?o.jsxs(o.Fragment,{children:[o.jsxs(Lr,{children:[o.jsx(re,{content:r("blackBox.products.fields.monthlySales.salesTooltip"),placement:"top",appendTo:document.body,maxWidth:500,delay:0,children:o.jsx("div",{children:N({value:e})})}),o.jsx(xo,{onClick:s})]}),n&&o.jsx(Nn,{children:t!=null?o.jsxs(o.Fragment,{children:[o.jsx(re,{content:r("blackBox.products.fields.monthlySales.salesTrendTooltip"),placement:"top",appendTo:document.body,maxWidth:500,delay:0,children:o.jsxs("div",{children:[N({value:t,maximumFractionDigits:0}),"%"]})}),o.jsx(Dd,{value:t})]}):o.jsx(Id,{children:"-"})})]}):o.jsx(o.Fragment,{children:"-"})},_x={1:"Amazon",2:"FBA",3:"FBM"},Ex=({product:e,sellerType:t,size:n})=>{const{t:s}=T(),r=b(co,l=>ce("domain",l||"amazon.com"),[]),a=h.useMemo(()=>[{text:e.asin,copyContent:e.asin,beforeCopyContent:o.jsx(Ml,{label:s("copyButton.copy",{name:"ASIN"})}),afterCopyContent:o.jsx(Rl,{label:s("copyButton.copied",{name:"ASIN"})})},{text:_x[t]}],[e.asin,t,s]),{asinDetails:i}=pc();return o.jsx(vs,{market:"AMAZON",product:e,blocks:a,tooltipOptions:{appendTo:document.body},...Kf[n],tool:"blackbox",marketplace:r.store,disableExtendedProductSummary:!i,onChangeProductDetailsType:l=>mc.set(l)})},PF=Z`
  align-items: flex-start;
`,BF=({value:e,text:t,showNumber:n})=>o.jsxs(FF,{children:[o.jsx(DF,{children:MF.map(s=>o.jsx(IF,{children:o.jsx(E,{icon:RF(e,s)})},s))}),n&&o.jsx(WF,{children:t||N({value:e,minimumFractionDigits:1,maximumFractionDigits:1})})]}),MF=[1,2,3,4,5],RF=(e,t)=>e>=t-.75&&e<t-.25?SS:e>=t-.25?yS:Gf,FF=c.div`
  display: flex;
  align-items: center;
`,DF=c.div`
  display: flex;
  align-items: center;

  & > :not(:first-child) {
    margin-left: 1px;
  }
`,IF=c.div`
  color: ${({theme:e})=>e.systemColors.yellow400};

  & > svg {
    font-size: 14px;
  }
`,WF=c.div`
  ${fe};
  margin-left: ${({theme:e})=>e.spacing.sp4};
`,Lx=({reviewCount:e,rating:t,advanced:n,onClickChart:s})=>{const{t:r}=T();return o.jsxs(o.Fragment,{children:[o.jsx(re,{content:r("blackBox.products.fields.reviews.reviewRatingTooltip"),placement:"top",appendTo:document.body,maxWidth:500,delay:0,children:o.jsx(Nn,{children:t!=null&&t!==-1?o.jsx(BF,{value:t}):o.jsx(Id,{children:"-"})})}),n&&o.jsxs(OF,{children:[o.jsx(zF,{children:t!=null&&t!==-1?N({value:t,minimumFractionDigits:1,maximumFractionDigits:1}):"N/A"}),o.jsx(re,{content:r("blackBox.products.fields.reviews.numberOfReviewTooltip"),placement:"top",appendTo:document.body,maxWidth:500,delay:0,children:o.jsxs(NF,{children:["(",e!=null&&e!==-1?N({value:e,maximumFractionDigits:0}):"N/A",")"]})}),e!=null&&e!==-1&&o.jsx(VF,{children:o.jsx(xo,{onClick:s})})]})]})},OF=c(Lr)``,zF=c.div`
  ${fe};
  color: ${({theme:e})=>e.systemColors.grey600};
`,NF=c.div`
  ${fe};
  color: ${({theme:e})=>e.systemColors.grey400};
  margin-left: ${({theme:e})=>e.spacing.sp4};
`,VF=c.div`
  margin-left: ${({theme:e})=>e.spacing.sp8};
`,qx=({seller:e,numberOfSellers:t,advanced:n})=>{const{t:s}=T(),{isOverflown:r,checkOverflown:a}=po();return o.jsxs(o.Fragment,{children:[o.jsx(re,{content:o.jsxs(o.Fragment,{children:[s("blackBox.products.fields.seller.sellerNameTooltip"),r?void 0:o.jsxs(o.Fragment,{children:[o.jsx("br",{}),e]})]}),placement:"top",appendTo:document.body,maxWidth:500,delay:0,children:o.jsx(Hx,{onMouseEnter:a,children:e})}),n&&o.jsx(re,{content:s("blackBox.products.fields.seller.numberOfSellersTooltip"),placement:"top",appendTo:document.body,maxWidth:500,delay:0,children:o.jsx(Nn,{children:t!=null&&t!==-1?t:"-"})})]})},Hx=c.div`
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: 100%;
`,jl=Z`
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  justify-content: center;
`,Ux=({sizeTier:e,width:t,height:n,length:s,advanced:r})=>{const{t:a}=T(),{isOverflown:i,checkOverflown:l}=po(),u=e!=null?a(`sizeTier.${e}`):"-";return o.jsxs(o.Fragment,{children:[o.jsx(re,{content:o.jsxs(o.Fragment,{children:[a("blackBox.products.fields.shippingDetails.productSizeTooltip"),i?void 0:o.jsxs(o.Fragment,{children:[o.jsx("br",{}),u]})]}),placement:"top",appendTo:document.body,maxWidth:500,delay:0,children:o.jsx(Hx,{onMouseEnter:l,children:u})}),r&&o.jsx(re,{content:a("blackBox.products.fields.shippingDetails.dimensionsTooltip"),placement:"top",appendTo:document.body,maxWidth:500,delay:0,children:o.jsx(Nn,{children:`${s!=null&&s!==-1?N({value:s,minimumFractionDigits:2,maximumFractionDigits:2}):"N/A"}" x ${t!=null&&t!==-1?N({value:t,minimumFractionDigits:2,maximumFractionDigits:2}):"N/A"}" x ${n!=null&&n!==-1?N({value:n,minimumFractionDigits:2,maximumFractionDigits:2}):"N/A"}"`})})]})},Kx=({storageFee:e,currency:t})=>{const{t:n}=T();return e!=null?o.jsxs(o.Fragment,{children:[o.jsxs("div",{children:[Ut({amount:e.janSept||0,currency:t})," ","(",n("blackBox.storageFee.janSept"),")"]}),o.jsxs("div",{children:["",Ut({amount:e.octDec||0,currency:t})," ","(",n("blackBox.storageFee.octDec"),")"]})]}):o.jsx(o.Fragment,{children:"N/A"})},_F=Z`
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: flex-end;
  ${fe};
  color: ${({theme:e})=>e.systemColors.black};
  padding: 8px 16px;
`,EF=["A1VC38T7YXB528","A39IBJ37TRP1C6"],LF=(e,t)=>di({project:"listingAnalyzer",upsellPlan:t,userCurrentPlan:e,trigger:'User click "Run Listing Analyzer"'}),qF=(e,t)=>di({project:"listingAnalyzer",upsellPlan:t,userCurrentPlan:e}),qa=({selectedIds:e,marketplaceStore:t,tool:n,button:s,children:r})=>{const{t:a}=T(),{cerebroMaxAsins:i}=ne(),l=b(Ii,f=>f.filter(v=>e.includes(v.id)).map(v=>v.asin),[e]),u=b(go),{openUpsellModal:d,getBalance:p}=pm({isChinesePlans:u,onOpen:LF,onAccept:qF}),m=C(()=>we.open({platform:"AMAZON",restriction:"uses",project:"cerebro",trigger:'User Click: "Run In Cerebro"'}),[]),g=n==="listing-analyzer"?{asins:l.slice(0,11).join(","),marketplace:t,immediately:"true"}:{productIds:l.slice(0,i),marketplace:t},j=n==="listing-analyzer"?()=>{H({eventName:"Listing Analyzer Runs From",eventProperties:{tool:"blackbox"}}),p({onSuccess:f=>{f?window.open($("http://localhost:3060/listing-analyzer",g,{arrayFormat:"index"}),"_blank"):d()}})}:async()=>{try{const[f,v]=await Promise.all([ui({moduleId:"cerebro"}),l.length>1?Rm({project:"cerebro"}):{data:{amazon:[]}}]);f.results.balance>0&&!v.data.amazon.includes("multiSearch")?window.open($("http://localhost:3060/cerebro",g,{arrayFormat:"index"}),"_blank"):m()}catch{}};return n==="listing-analyzer"&&EF.includes(t)?null:h.isValidElement(r)?h.cloneElement(r,{onClick:j,...s}):o.jsx(re,{content:a("blackBox.buttons.runInListingAnalyzerTooltip",{maxAsins:11}),appendTo:document.body,disabled:n!=="listing-analyzer",delay:[0,0],children:o.jsx(F,{size:"100",buttonType:"secondary",onClick:j,...s,children:a(n==="listing-analyzer"?"blackBox.buttons.runInListingAnalyzer":"blackBox.buttons.runInCerebro")})})},HF=({asin:e,isInMyList:t})=>{const{t:n}=T(),s=C(()=>kB.actions.pending({asin:e,isInMyList:t})),r=t?Zf:Yf,a=n(`blackBox.buttons.${t?"removeFromMyList":"addToMyList"}`);return o.jsx(re,{appendTo:document.body,content:a,delay:[0,0],children:o.jsx(UF,{buttonType:"tertiary",icon:o.jsx(E,{icon:r}),onClick:s,$isInMyList:t,children:n("buttons.addToMyList")})})},UF=c(F)`
  ${Fe};
  background-color: transparent;
  border: none;

  &:hover,
  &:focus {
    background-color: transparent;
    border: none;
  }

  ${F.ButtonIcon} {
    color: ${({theme:e,$isInMyList:t})=>t&&e.systemColors.blue600};
  }
`,Ni=({segmentEventProperties:e})=>{const t=Qf(Me.getState()),n=Me(s=>{var r;return((r=s.checkLogin)==null?void 0:r.plan)||Us.StartYourBusiness});return h.useCallback(()=>{XS.open({isChinese:t,plan:n,segmentEventProperties:e})},[t,n,e])},KF=e=>{const{planGroup:t}=ne(),n=b(go),s=b(st,i=>(i==null?void 0:i.store)||"",[]),r=ey({marketplace:e.marketplace||s,selected:e.competitors,tool:e.tool}),a=()=>{H({eventName:"CC - Competitor Add From",eventProperties:{Number:e.competitors.length,Tool:e.toolForEvent}}),r()};return o.jsx(Am,{selected:e.competitors,button:e.button||ZF,tool:e.toolForTrackCompetitors,onClick:a,onLearnMore:e.onOpenUpsellModal,onUpgradePlan:e.onOpenUpsellModal,limit:GF,isChinese:n,planGroup:t,className:e.className})},rr=Object.assign(KF,{TrackCompetitorsButton:Am}),GF=5,ZF={buttonType:"tertiary"},YF=({asin:e})=>{const t=b(dn,r=>r.store,[]),{planGroup:n}=ne(),s=Ni({segmentEventProperties:{CurrentPlan:n,Location:"BB_trackerCompetitor_learnMore",Trigger:"Learn More",UpsellPlan:"Diamond",tool:"black-box"}});return o.jsx(QF,{competitors:[e],toolForTrackCompetitors:"blackBox",toolForEvent:"Black Box",marketplace:t,onOpenUpsellModal:s,tool:"BlackBox"})},QF=c(rr)`
  padding: 0 !important;
  ${rr.TrackCompetitorsButton.Button} {
    ${Fe};
    background-color: transparent;
    border: none;

    &:hover,
    &:focus {
      background-color: transparent;
      border: none;
    }
  }
`,JF=({data:e})=>{const{t}=T(),n=b(dn,r=>r.store,[]),s=b(go);return o.jsx(We,{content:o.jsxs(h.Fragment,{children:[o.jsx(eD,{onClick:()=>{},params:{type:"competitors",marketplace:n,competitors:[e.asin],source:km.SOURCE.BLACKBOX,seSource:"blackbox_product"}}),o.jsx(We.Item,{children:o.jsx(HF,{asin:e.asin,isInMyList:e.isInMyList})}),!s&&o.jsx(We.Item,{children:o.jsx(YF,{asin:e.asin})}),o.jsx(We.Divider,{}),o.jsx(We.Item,{children:o.jsx(qa,{marketplaceStore:n,selectedIds:[e.id],tool:"cerebro",children:o.jsxs(op,{children:[o.jsx(tp,{dangerouslySetInnerHTML:{__html:t("buttons.analyzeKeywordsInCerebro")}}),o.jsx(F,{buttonType:"icon",size:"100",icon:o.jsx(E,{icon:ts})})]})})}),o.jsx(We.Item,{children:o.jsx(qa,{marketplaceStore:n,selectedIds:[e.id],tool:"listing-analyzer",children:o.jsxs(op,{children:[o.jsx(tp,{dangerouslySetInnerHTML:{__html:t("buttons.runListingAnalyzer")}}),o.jsx(F,{buttonType:"icon",size:"100",icon:o.jsx(E,{icon:ts})})]})})})]}),appendTo:document.body,children:o.jsx(XF,{buttonType:"tertiary",icon:o.jsx(E,{icon:nc})})})},tp=c.div``,op=c.div`
  padding: 0 !important;
  display: flex;
  align-items: center;
`,XF=c(F)`
  min-width: 32px;

  ${F.ButtonIcon} {
    margin-right: 0;
  }
`,eD=c(bc)`
  min-height: 44px;
`,zo=Z`
  color: ${({theme:e})=>e.systemColors.black};
  display: flex;
  align-items: center;
`,yn=Z`
  ${zo};
  padding-bottom: 28px;
`,Wd=Qt(()=>({showAdvancedDetails:!1})),tD=tn(Wd,"showAdvancedDetails"),oD=()=>{const{t:e}=T(),{planGroup:t}=ne(),n=b(dn),s=sm(i=>i.open),r=Wd(i=>i.showAdvancedDetails),a=C(()=>we.open({platform:n.platform,restriction:"salesChart",project:"blackBoxProducts",trigger:"Sales Chart Clicked"}));return h.useMemo(()=>[{title:"",field:"pinned",static:32,noHeader:!0,customCSS:On,render:i=>o.jsx(JF,{data:i})},{title:e("blackBox.products.fields.product.label"),field:"title",static:316,render:(i,{size:l})=>o.jsx(Ex,{product:{asin:i.asin,title:i.title,imageSrc:i.imageUrl,href:mo("AM",n.store,i.asin)},sellerType:i.sellerType,size:l}),customCSS:PF},{title:e("blackBox.products.fields.categoryBSR.label"),tooltip:e("blackBox.products.fields.categoryBSR.tooltip"),field:"salesRank",responsive:!0,render:i=>o.jsx(Wx,{category:i.categoryTitle,bestSellersUrl:i.bestSellersUrl,salesRank:i.salesRank,subcategories:i.subcategories,asin:i.asin,marketplace:n,advanced:r,onClickChart:()=>s(i.asin,"bsr")}),customCSS:jl,minWidth:250,sortable:!0},{title:e("blackBox.products.fields.price.label"),tooltip:e("blackBox.products.fields.price.tableTooltip"),field:"price",responsive:!0,render:i=>o.jsx(Dx,{price:i.price,priceChange:i.priceChange,currency:n.currency,advanced:r,onClickChart:()=>s(i.asin,"price")}),contentPosition:"right",customCSS:la,minWidth:138,sortable:!0},{title:e("blackBox.products.fields.monthlySales.tableLabel"),tooltip:e("blackBox.products.fields.monthlySales.tableTooltip"),field:"monthlySales",responsive:!0,render:i=>o.jsx(Vx,{monthlySales:i.monthlySales,monthlySalesChange:i.salesChange,advanced:r,onClickChart:()=>{t!=="free"?s(i.asin,"sales"):a()}}),customCSS:la,minWidth:126,sortable:!0},{title:e("blackBox.products.fields.monthlyRevenue.label"),tooltip:e("blackBox.products.fields.monthlyRevenue.tooltip"),field:"monthlyRevenue",responsive:!0,render:i=>i.monthlyRevenue?Ut({amount:n.currency!=="JPY"?i.monthlyRevenue/100:i.monthlyRevenue,currency:n.currency}):"-",customCSS:r?yn:zo,contentPosition:"right",minWidth:144,sortable:!0},{title:e("blackBox.products.fields.reviews.label"),tooltip:e("blackBox.products.fields.reviews.tooltip"),field:"reviewCount",responsive:!0,render:i=>o.jsx(Lx,{reviewCount:i.reviewCount,rating:isNaN(Number(i.reviewsRating))?void 0:Number(i.reviewsRating),advanced:r,onClickChart:()=>s(i.asin,"review")}),customCSS:la,minWidth:163,sortable:!0},{title:e("blackBox.products.fields.seller.label"),tooltip:e("blackBox.products.fields.seller.tooltip"),field:"numberOfSellers",responsive:!0,render:i=>o.jsx(qx,{seller:i.bbSeller,numberOfSellers:i.numberOfSellers,advanced:r}),customCSS:jl,maxWidth:140,minWidth:140,contentPosition:"left",sortable:!0},{title:e("blackBox.products.fields.brand.label"),tooltip:e("blackBox.products.fields.brand.tooltip"),field:"brand"},{title:e("blackBox.products.fields.lastYearSales.label"),tooltip:e("blackBox.products.fields.lastYearSales.tooltip"),field:"yearSales",responsive:!0,render:i=>o.jsx(Nx,{yearSales:i.yearSales,salesYearOverYear:i.salesYearOverYear,advanced:r}),customCSS:la,minWidth:132,sortable:!0},{title:e("blackBox.products.fields.shippingDetails.label"),tooltip:e("blackBox.products.fields.shippingDetails.tooltip"),field:"sizeTier",render:i=>o.jsx(Ux,{sizeTier:i.sizeTier,width:isNaN(Number(i.width))?void 0:Number(i.width),height:isNaN(Number(i.height))?void 0:Number(i.height),length:isNaN(Number(i.length))?void 0:Number(i.length),advanced:r}),maxWidth:200,customCSS:jl,contentPosition:"left"},{title:e("blackBox.products.fields.weight.label"),tooltip:e("blackBox.products.fields.weight.tableTooltip"),field:"weight",responsive:!0,render:i=>i.weight!=null&&i.weight!=="-1"&&!isNaN(Number(i.weight))?N({value:Number(i.weight),maximumFractionDigits:2}):"-",customCSS:r?yn:zo,contentPosition:"right",minWidth:112,sortable:!0},{title:e("blackBox.products.fields.storageFee.label"),tooltip:e("blackBox.products.fields.storageFee.tooltip"),field:"storageFee",responsive:!0,render:i=>o.jsx(Kx,{storageFee:i.storageFee,currency:n.currency}),customCSS:_F,contentPosition:"right",minWidth:200},{title:e("blackBox.products.fields.bestMonth.tableLabel"),tooltip:e("blackBox.products.fields.bestMonth.tooltip"),field:"bestMonth",responsive:!0,render:i=>i.bestMonth?ke(new Date(i.bestMonth),"MMM, yyyy"):"-",customCSS:r?yn:zo,minWidth:146},{title:e("blackBox.products.fields.age.label"),tooltip:e("blackBox.products.fields.age.tooltip"),field:"age",responsive:!0,contentPosition:"right",customCSS:r?yn:zo,sorter:"number",minWidth:118,sortable:!0,render:i=>i.ageInMonths!==-1?i.ageInMonths.toString():"-"},{title:e("blackBox.products.fields.numberOfImages.label"),tooltip:e("blackBox.products.fields.numberOfImages.tooltip"),field:"numberOfImages",responsive:!0,render:i=>i.numberOfImages!=null?N({value:i.numberOfImages}):"-",contentPosition:"right",customCSS:r?yn:zo,sorter:"number",minWidth:150,sortable:!0},{title:e("blackBox.products.fields.variationCount.label"),tooltip:e("blackBox.products.fields.variationCount.tooltip"),field:"variationCount",responsive:!0,render:i=>i.variationCount!=null?N({value:i.variationCount}):"-",contentPosition:"right",customCSS:r?yn:zo,sorter:"number",minWidth:136,sortable:!0},{title:e("blackBox.products.fields.salesToReviews.tableLabel"),tooltip:e("blackBox.products.fields.salesToReviews.tooltip"),field:"salesToReviews",responsive:!0,render:i=>i.salesToReviews!=null&&!isNaN(Number(i.salesToReviews))?Number(i.salesToReviews)!==-1?N({value:Number(i.salesToReviews)}):"N/A":"-",contentPosition:"right",customCSS:r?yn:zo,sorter:"number",minWidth:144,sortable:!0},{title:"",field:"_",responsive:!0,noHeader:!0,noHover:!0}],[r,n,s,a,t,e])},nD=()=>{const{t:e}=T(),t=b(dn);return h.useMemo(()=>[{field:"url",exportTitle:"URL",exportValue:n=>mo("AM",t.store,n.asin)},{field:"asin",exportTitle:e("blackBox.products.exportTitles.asin"),exportValue:n=>n.asin},{field:"title",exportTitle:e("blackBox.products.exportTitles.title"),exportValue:n=>n.title},{field:"brand",exportTitle:e("blackBox.products.exportTitles.brand"),exportValue:n=>n.brand},{field:"sellerType",exportTitle:e("blackBox.products.exportTitles.sellerType"),exportValue:n=>_x[n.sellerType]||"-"},{field:"category",exportTitle:e("blackBox.products.exportTitles.category"),exportValue:n=>n.categoryTitle},{field:"bsr",exportTitle:e("blackBox.products.exportTitles.bsr"),exportValue:n=>n.salesRank!=null&&n.salesRank!==-1?n.salesRank:"N/A"},{field:"subcategory",exportTitle:e("blackBox.products.exportTitles.subcategory"),exportValue:n=>{var s,r;return(s=n.subcategories)!=null&&s[0]?(r=n.subcategories)==null?void 0:r[0].nodeName:"N/A"}},{field:"price",exportTitle:e("blackBox.products.exportTitles.price"),exportValue:n=>t.currency!=="JPY"&&n.price?n.price/100:n.price},{field:"priceChange",exportTitle:e("blackBox.products.exportTitles.priceChange")+" (%)",exportValue:n=>n.priceChange!=null?n.priceChange:"N/A"},{field:"monthlySales",exportTitle:e("blackBox.products.exportTitles.monthlySales"),exportValue:n=>n.monthlySales},{field:"salesChange",exportTitle:e("blackBox.products.exportTitles.salesChange")+" (%)",exportValue:n=>n.salesChange},{field:"monthlyRevenue",exportTitle:e("blackBox.products.exportTitles.monthlyRevenue"),exportValue:n=>t.currency!=="JPY"&&n.monthlyRevenue?n.monthlyRevenue/100:n.monthlyRevenue},{field:"reviewCount",exportTitle:e("blackBox.products.exportTitles.reviewCount"),exportValue:n=>n.reviewCount!=null&&n.reviewCount!==-1?n.reviewCount:"N/A"},{field:"reviewsRating",exportTitle:e("blackBox.products.exportTitles.reviewsRating"),exportValue:n=>n.reviewsRating!=null&&String(n.reviewsRating)!=="-1"?n.reviewsRating:"N/A"},{field:"bbSeller",exportTitle:e("blackBox.products.exportTitles.bbSeller"),exportValue:n=>n.bbSeller},{field:"numberOfSellers",exportTitle:e("blackBox.products.exportTitles.numberOfSellers"),exportValue:n=>n.numberOfSellers!=null&&n.numberOfSellers!==-1?n.numberOfSellers:"N/A"},{field:"yearSales",exportTitle:e("blackBox.products.exportTitles.yearSales"),exportValue:n=>n.yearSales!=null&&n.yearSales!==-1?n.yearSales:"N/A"},{field:"salesYearOverYear",exportTitle:e("blackBox.products.exportTitles.salesYearOverYear")+" (%)",exportValue:n=>n.salesYearOverYear!=null&&n.salesYearOverYear!==-1?n.salesYearOverYear:"N/A"},{field:"sizeTier",exportTitle:e("blackBox.products.exportTitles.sizeTier"),exportValue:n=>n.sizeTier!=null&&n.sizeTier!==-1?e(`sizeTier.${n.sizeTier}`):"N/A"},{field:"length",exportTitle:e("blackBox.products.exportTitles.length"),exportValue:n=>Kn(n.length)},{field:"width",exportTitle:e("blackBox.products.exportTitles.width"),exportValue:n=>Kn(n.width)},{field:"height",exportTitle:e("blackBox.products.exportTitles.height"),exportValue:n=>Kn(n.height)},{field:"weight",exportTitle:e("blackBox.products.exportTitles.weight"),exportValue:n=>Kn(n.weight)},{field:"storageFeeJanSept",exportTitle:`${e("blackBox.products.exportTitles.storageFee")} (${e("blackBox.storageFee.janSept")})`,exportValue:n=>{var s;return Kn(String((s=n.storageFee)==null?void 0:s.janSept))}},{field:"storageFeeOctDec",exportTitle:`${e("blackBox.products.exportTitles.storageFee")} (${e("blackBox.storageFee.octDec")})`,exportValue:n=>{var s;return Kn(String((s=n.storageFee)==null?void 0:s.octDec))}},{field:"bestMonth",exportTitle:e("blackBox.products.exportTitles.bestMonth"),exportValue:n=>n.bestMonth?ke(new Date(n.bestMonth),"MM/dd/yyyy"):"-"},{field:"age",exportTitle:e("blackBox.products.exportTitles.age"),exportValue:n=>n.ageInMonths!==-1?n.ageInMonths.toString():"-"},{field:"numberOfImages",exportTitle:e("blackBox.products.exportTitles.numberOfImages"),exportValue:n=>n.numberOfImages!=null&&n.numberOfImages!==-1?n.numberOfImages:"N/A"},{field:"variationCount",exportTitle:e("blackBox.products.exportTitles.variationCount"),exportValue:n=>n.variationCount!=null&&n.variationCount!==-1?n.variationCount:"N/A"},{field:"salesToReviews",exportTitle:e("blackBox.products.exportTitles.salesToReviews"),exportValue:n=>n.salesToReviews!=null&&String(n.salesToReviews)!=="-1"?n.salesToReviews:"N/A"}],[t,e])},Kn=e=>e!=null&&String(e)!=="-1"&&!isNaN(Number(e))?Math.round(100*Number(e))/100:"N/A",sD=async e=>D({method:"POST",url:$(`${kt}/api/v1/product/add-product-to-list`,{}),params:e,withCredentials:0}),rD=he("changeBlackBoxAddToMyListMultipleRequest",async({marketplace:e,ids:t},{getState:n})=>{const s=n(Ii).filter(a=>!a.isInMyList&&t.includes(a.id)).map(a=>a.asin),r=s.length>0?await sD({marketplace:e,asins:s}):{};return{asins:s,data:r}},{fulfilledReaction:({result:{asins:e}},{dispatch:t})=>{t(Gg(e));const n=Xe.getState().translation;if(n){const{t:s}=n;e.length>0?Be.success(s("blackBox.addToMyList.success")):Be.warning(s("blackBox.addToMyList.warning"))}},rejectedReaction:()=>{const e=Xe.getState().translation;if(e){const{t}=e;Be.error(t("blackBox.addToMyList.reject"))}}}),aD=()=>{const{t:e}=T(),{planGroup:t}=ne(),n=b(dn,i=>i.store,[]),s=b(Ii),r=C(rD.actions.pending),a=Ni({segmentEventProperties:{CurrentPlan:t,Location:"BB_trackerCompetitor_learnMore",Trigger:"Learn More",UpsellPlan:"Diamond",tool:"black-box"}});return h.useCallback(i=>{const l=i.length,u=s.filter(d=>i.includes(d.id)).map(d=>d.asin);return l?o.jsxs(h.Fragment,{children:[o.jsx(F,{size:"100",buttonType:"secondary",onClick:()=>r({marketplace:n,ids:i}),"data-testid":"addtomylist",children:e("cerebro.table.addToMyList")}),o.jsx(qa,{marketplaceStore:n,selectedIds:i,tool:"listing-analyzer"}),o.jsx(qa,{marketplaceStore:n,selectedIds:i,tool:"cerebro"}),o.jsx(rr,{competitors:u,marketplace:n,onOpenUpsellModal:a,button:iD,toolForEvent:"Black Box",toolForTrackCompetitors:"blackBox",tool:"BlackBox"}),o.jsx(ti,{params:{type:"competitors",competitors:u,marketplace:n,source:km.SOURCE.BLACKBOX,seSource:"blackbox_product"}})]}):o.jsx("div",{})},[r,s,n,a,e])},iD={buttonType:"secondary"},lD=()=>{const{t:e}=T(),t=Wd(n=>n.showAdvancedDetails);return h.useCallback(()=>o.jsx(um,{name:"showAdvancedDetails",checked:t,onChange:()=>tD.set(!t),"data-testid":"showadvancedproductdetails",children:e("blackBox.products.result.advanced")}),[t,e])},cD=async({id:e,...t})=>await D({url:$(`${I}/api/blackbox/v1/search/products/${e}/export`,{}),params:t,method:"GET",useSessionAccountId:!0}),Ll=he("getBlackBoxProductsSearchExport",async({onSuccess:e},{getState:t})=>{var r;const n=((r=t(Fn.atom).content)==null?void 0:r.data.id)||0,s=t(Kg);return cD({id:n.toString(),...s!=="default"?{sort:s}:{}})},{initialStatus:"init",fulfilledReaction:({params:{onSuccess:e},result:t})=>{t!=null&&t.data&&e(t.data)},rejectedReaction:({fetchError:e})=>je(e)}),dD=R(Ll.atom,e=>e.status==="loading"),uD=()=>{const e=oD(),t=nD(),n=C(ko.actions.setWithoutCheck),s=h.useMemo(()=>({render:()=>o.jsx(un,{prepareForExportFunction:pn({columns:t}),requestAction:Ll.actions.pending,putAction:Ll.actions.pending,loadingSelector:dD,marketplace:bt("AM","id",1),project:"blackBoxProducts",itemId:"1",exportOptions:["csv","xlsx"]})}),[t]),r=b(Ii),a=b(yB),i=ee(j=>j.status),l=i!=="filter"?i!=="loading"?"loaded":"waiting":"loading",u=b(ko.atom),d=h.useMemo(()=>({value:u}),[u]),p=lD(),m=aD(),g=TF(),{notFreeAndStarter:x}=ne(),S=h.useMemo(()=>({...pD,extraSettings:()=>x&&o.jsx(Ts,{showAsinDetails:!0})}),[x]);return o.jsx(At,{name:"black-box-products",filter:d,behavior:S,dimensions:mn,status:l,columns:e,data:r,total:a,onFilter:n,export:s,leftActions:m,rightActions:p,selected:g})},pD={...zn,itemsPerPage:[25,50,75,100],searchVisible:!1,columnVisible:!0,contentSizeVisible:!0},mD=()=>{const e=b(dn);return o.jsxs(hD,{children:[o.jsx(sR,{}),o.jsx(uD,{}),o.jsx(DM,{}),o.jsx(rm,{marketplace:e,showMarketplace:!0})]})},hD=c.div`
  margin-top: ${({theme:e})=>e.spacing.sp24};
`,gD=async({id:e})=>await D({url:$(`${I}/api/blackbox/v1/search/products/${e}`,{}),method:"GET",useSessionAccountId:!0}),xD=he("getBlackBoxProductsSearch",async e=>gD(e),{initialStatus:"init",rejectedReaction:({fetchError:e})=>je(e)}),bD=R("blackBoxProductGetResultSelector",ie([pB,mB,Kg]),([e,t,n])=>({page:e,per_page:t,sort:n})),fD=()=>{const{t:e}=T(),t=Xt();h.useEffect(()=>{const r=t.getState(Ue);kr().map(a=>a.value).includes(r||"amazon.com")||t.dispatch(Mn("amazon.com"))},[]);const n=b(Zg),s=Me(r=>!!r.checkLogin);return yD(),jD(),kD(n||void 0),TD(),vD(),o.jsxs(ws,{description:e("blackBox.tabs.products.description"),buttons:o.jsx($B,{}),children:[!n&&s&&o.jsx(BM,{}),n&&o.jsx(mD,{}),o.jsx(SD,{})]})},SD=()=>o.jsxs(o.Fragment,{children:[o.jsx(mm,{}),o.jsx(hi,{project:"blackBoxProducts"}),o.jsx(vm,{}),o.jsx(Sd,{})]}),yD=()=>{b(Mt.atom,()=>null,[]),b(Fr.atom,()=>null,[]),b(Fn.atom,()=>null,[]),b(xD.atom,()=>null,[]),b(Td.atom,()=>null,[]),b(dn,()=>null,[]),b(jd.atom,()=>null,[]),b(Yg,()=>null,[]),b(ko.atom,()=>null,[])},jD=()=>{h.useEffect(()=>ee.getState().setStatus("init"),[])},kD=e=>{const{subscribe:t}=Xt(),n=C(Ws.actions.pending);h.useEffect(()=>t(bD,s=>e?n({id:e,...s}):void 0),[n,e,t])},TD=()=>{const e=b(uo).id,t=C(Td.actions.pending);h.useEffect(()=>{e&&t({})},[t,e])},vD=()=>{const e=b(uo).id,t=C(jd.actions.pending);h.useEffect(()=>{e&&t({})},[t,e])},CD=()=>{const{t:e}=T();return o.jsx(ws,{description:e("blackBox.tabs.productTargeting.description"),children:"Product Targeting"})},AD=h.memo(()=>{const e=_p(t=>t.status==="loaded");return tB(),o.jsxs(o.Fragment,{children:[o.jsxs(sc,{children:[o.jsx("title",{children:"Black Box"}),o.jsx("meta",{name:"description",content:"Black Box"})]}),o.jsxs(rc,{children:[o.jsx(Ye,{path:"products",element:o.jsxs(o.Fragment,{children:[e&&o.jsx(Q1,{}),o.jsx(fD,{})]})}),o.jsx(Ye,{path:"phrases",element:o.jsx(nB,{})}),o.jsx(Ye,{path:"suggested-competitors",element:o.jsx(oB,{})}),o.jsx(Ye,{path:"niche",element:o.jsx(sB,{})}),o.jsx(Ye,{path:"target-search",element:o.jsx(CD,{})}),o.jsx(Ye,{path:cS,element:o.jsx(G1,{})})]}),o.jsx(fc,{})]})}),Gx=({to:e})=>{const{t}=T(),{isDemo:n}=ne();return n?o.jsx(wD,{to:e,children:o.jsx(F,{icon:o.jsx(E,{icon:Jf}),buttonType:"text",children:t("cerebro.landingDemo.backToSearch")})}):null},wD=c(Xf)`
  margin-top: ${({theme:e})=>e.spacing.sp20};
  margin-bottom: -${({theme:e})=>e.spacing.sp16};
  text-decoration: none;
`,Zx=h.memo(()=>{const{t:e}=T(),t=b(wt.atom);return t==null?null:o.jsxs($D,{children:[o.jsxs(PD,{children:[o.jsx(BD,{children:e("fetchingData")}),o.jsx(Cd,{isPage:!0}),o.jsxs(MD,{children:[Math.trunc(t),"%"]})]}),o.jsx(si,{progress:[{value:t}],total:100})]})}),$D=c.div`
  display: flex;
  flex-direction: column;
  width: 100%;
  margin-top: ${({theme:e})=>e.spacing.sp24};
  margin-bottom: ${({theme:e})=>e.spacing.sp8};
`,PD=c.div`
  display: flex;
  margin-bottom: ${({theme:e})=>e.spacing.sp16};
`,BD=c.div`
  ${tc};
  color: ${({theme:e})=>e.systemColors.black};
`,MD=c.div`
  ${Ao};
  margin-left: ${({theme:e})=>e.spacing.sp4};
`,RD=()=>{const e=C(Dc.actions.pending);h.useEffect(e,[e])},FD=h.memo(()=>{const{t:e}=T(),t=b(Gs.atom,l=>l.isOpen,[]),{onNewSearch:n,onFromHistory:s}=b(Gs.atom,l=>l.data,[]),r=C(l=>Gs.close(l??!0)),a=()=>{r(!1),n==null||n()},i=()=>{r(!1),s==null||s()};return o.jsx(Rt,{isOpen:t,onClose:r,title:e("searchedBefore.title"),subtitle:e("searchedBefore.description"),titleAlign:"center",children:o.jsxs(DD,{children:[o.jsx(F,{buttonType:"secondary",size:"200",onClick:a,"data-testid":"runnewsearch",children:e("searchedBefore.newSearchButton")}),o.jsx(F,{buttonType:"primary",size:"200",onClick:i,"data-testid":"loadfromhistory",children:e("searchedBefore.fromHistoryButton")})]})})}),DD=c.div`
  margin-top: ${({theme:e})=>e.spacing.sp24};

  display: flex;
  justify-content: center;
  align-items: center;

  ${F} + ${F} {
    margin-left: ${({theme:e})=>e.spacing.sp8};
  }
`,ID=c.div`
  display: flex;
  flex-direction: column;
  height: 100%;
`,WD=c.div`
  flex: 1;
`,OD=({id:e,controller:t})=>{const n=C(()=>t.deleteRequest.actions.pending([e]),[e]);return o.jsx(F,{onClick:n,buttonType:"icon",size:"50",icon:o.jsx(E,{icon:Ja})})},zD=({value:e})=>o.jsx(ND,{children:e}),ND=c.div`
  ${St};
  color: ${({theme:e})=>e.systemColors.black};
  line-height: 23px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
`,VD=h.memo(({controller:e})=>{const{t}=T(),n=C(()=>e.deleteAllModal.open({}),[]),s=b(e.getRequest.atom,r=>{var a;return(((a=r.content)==null?void 0:a.data.length)||0)>0},[]);return o.jsxs(_D,{children:[s&&o.jsx(F,{size:"100",buttonType:"tertiary",icon:o.jsx(E,{icon:Ja}),onClick:n,children:t("cerebro.getCompetitors.deleteAll")}),o.jsx(HD,{controller:e})]})}),_D=c.div`
  display: flex;
  align-items: center;

  & > :not(:first-child) {
    margin-left: 8px;
  }
`,ED=({controller:e,project:t})=>{const{content:n,status:s,error:r}=b(e.getRequest.atom),a=h.useMemo(()=>(n==null?void 0:n.data)||[],[n==null?void 0:n.data]),i=b(Ue),{t:l}=T(),u=h.useCallback(({items:v,selected:k})=>k?l("cerebro.commonWords.titleTableSelected",{count:k}):l("cerebro.commonWords.tableTitle",{count:v}),[l]),d=h.useMemo(()=>[{title:"",field:"pinned",width:32,noHeader:!0,customCSS:Z`
          padding-left: ${({theme:v})=>v.spacing.sp8};
        `,render:v=>o.jsx(OD,{id:`${v.id}`,controller:e})},{title:l("cerebro.commonWords.word"),field:"phrase",sortable:!0,render:v=>o.jsx(zD,{value:String(v.phrase)}),exportTitle:l("cerebro.commonWords.word")}],[e,l]),p=h.useMemo(()=>ce("domain",i||"amazon.com"),[i]),m=C(e.getRequest.actions.pending),g=h.useCallback(v=>{m(v)},[m]),x=ks(`(min-width: ${js.mobile}px)`),S=h.useCallback(()=>o.jsx(VD,{controller:e}),[e]),j=h.useMemo(()=>({itemsPerPage:[10,25,50,100],errorState:r||"",searchVisible:!0}),[r]),f=h.useMemo(()=>({haveCheckbox:!1,getTitleText:u}),[u]);return o.jsxs(o.Fragment,{children:[o.jsx(Yx,{children:l("cerebro.commonWords.tableDescription",{project:l(`projectNames.${t}`)})}),o.jsx(At,{name:"common-words",dimensions:qD,behavior:j,selected:f,marketplace:p,status:s!=="loading"?s:"waiting",columns:d,data:a,total:(n==null?void 0:n.meta.total)||0,onFilter:g,leftActions:x?void 0:S,rightActions:x?S:void 0,filter:LD})]})},LD={haveInitial:!0,defaultValue:{search:"",page:1,count:10,sortDirection:"ASC",sortField:"createdAt"}},qD={minHeight:245,maxHeight:507},Yx=c.div`
  ${Fe};
  margin-top: ${({theme:e})=>e.spacing.sp12};
  margin-bottom: ${({theme:e})=>e.spacing.sp32};
`,HD=({controller:e})=>{const{t}=T(),n=b(va.atom,x=>x.isOpen,[]),s=C(()=>va.close(),[]),r=C(()=>va.open({}),[]),{register:a,handleSubmit:i,watch:l,getValues:u,reset:d}=lt({defaultValues:{text:"",removeSpecialChars:!0}});l("text");const p=b(e.addRequest.atom,x=>x.status,[]),m=C(e.addRequest.actions.pending),g=i(({text:x,removeSpecialChars:S})=>{m({words:JD(x),removeSpecialChars:S,onSuccess:()=>{s(),d()}})});return o.jsxs(o.Fragment,{children:[o.jsx(F,{size:"100",buttonType:"primary",icon:o.jsx(E,{icon:Gp}),onClick:r,children:t("cerebro.getCompetitors.addWords")}),o.jsx(kn,{position:"right",animation:"slideRight",isOpen:n,onClose:s,onClickOutside:s,onClickEscape:s,lockBody:!0,header:t("cerebro.commonWords.button"),size:"200",footer:o.jsx(QD,{children:o.jsx(F,{size:"200",buttonType:"secondary",onClick:s,children:t("common.close")})}),children:o.jsx(ID,{children:o.jsx(WD,{children:o.jsxs(UD,{onSubmit:g,children:[o.jsx(Yx,{children:t("cerebro.commonWords.addDescription")}),o.jsx(KD,{autoFocus:!0,...a("text")}),o.jsxs(GD,{children:[o.jsxs(ZD,{children:[o.jsx(ac,{...a("removeSpecialChars"),children:t("cerebro.commonWords.removeSpecialCharacters")}),o.jsx(re,{content:t("cerebro.commonWords.removeSpecialCharactersTooltip"),children:o.jsx("div",{children:o.jsx(YD,{icon:Za})})})]}),o.jsx(F,{type:"submit",size:"200",disabled:p==="loading"||u().text.trim()==="",children:t("cerebro.commonWords.addCommonWords")})]})]})})})})]})},va=Ct("addCommonWordsModal",{}),UD=c.form``,KD=c(BS)`
  & textarea {
    min-height: 313px;
    resize: none;
  }
`,GD=c.div`
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-top: ${({theme:e})=>e.spacing.sp16};
`,ZD=c.div`
  display: flex;
  align-items: center;
`,YD=c(E)`
  width: 16px;
  height: 16px;
  margin-left: 6px;
`,QD=c.div`
  display: flex;
  justify-content: flex-end;
`,JD=e=>e.split(/\r?\n/).filter(t=>t.trim()!=="").filter((t,n,s)=>s.indexOf(t)===n),XD=({controller:e})=>{const t=C(()=>e.deleteAllModal.close(!0),[]),n=C(()=>e.deleteAllModal.close(),[]),s=b(e.deleteAllModal.atom,a=>a.isOpen,[]),{t:r}=T();return o.jsx(Rt,{title:r("cerebro.commonWords.deleteAllQuestion"),footer:o.jsxs(e2,{children:[o.jsx(F,{onClick:n,buttonType:"cancel",size:"200",children:r("common.cancel")}),o.jsx(F,{onClick:t,buttonType:"primary",size:"200",children:r("cerebro.commonWords.deleteAllConfirm")})]}),lockBody:!0,isOpen:s,onClose:n})},e2=c.div`
  display: flex;
  align-items: center;
  justify-content: space-between;
`,t2=()=>{},o2=({controller:e,project:t})=>{const{t:n}=T(),s=b(ql.atom,x=>x.isOpen,[]),r=b(e.deleteAllModal.atom,x=>x.isOpen,[]),a=C(ql.close),i=C(()=>n2(t),[t]),l=b(st,x=>(x==null?void 0:x.platform)||"AMAZON",[]),u=V(l,"commonWords"),d=b(va.atom,x=>x.isOpen,[]),p=ee(x=>x.status==="loading"),m=C(e.setPageAction);h.useEffect(()=>{s||m(null)},[s,m]);const{isDemo:g}=ne();return o.jsxs(o.Fragment,{children:[o.jsx(XD,{controller:e}),o.jsx(re,{content:n("cerebro.commonWords.tooltip"),children:o.jsx(l2,{children:o.jsx(ho,{buttonType:"tertiary",icon:o.jsx(E,{icon:Up}),onClick:i,onLockedClick:i,disabled:p||g,locked:u&&!g,"data-testid":"commonwords",children:n("cerebro.commonWords.button")})})}),o.jsx(kn,{position:"right",animation:"slideRight",isOpen:s,onClose:d?void 0:a,onClickOutside:r?t2:d?void 0:a,onClickEscape:d?void 0:a,lockBody:!0,header:n("cerebro.commonWords.button"),size:"200",footer:o.jsx(a2,{children:o.jsx(F,{size:"200",buttonType:"secondary",onClick:a,children:n("common.close")})}),children:o.jsx(s2,{children:o.jsx(i2,{children:o.jsx(ED,{controller:e,project:t})})})})]})},ql=Ct("commonWordsModal",void 0),n2=it({name:"openCommonWordsModal",restriction:"commonWords",actionAfterCheck:ql.open,getPlatformFromStore:e=>{var t;return(t=e(st))==null?void 0:t.platform},getExtraUpgradeProps:e=>({project:e})}),s2=c.div`
  display: flex;
  flex-direction: column;
  height: 100%;
`,r2=c.div`
  flex: 1;
`,a2=c.div`
  display: flex;
  justify-content: flex-end;
`,i2=c(r2)`
  ${At.Wrapper} {
    & > :last-child {
      grid-template-columns: 1fr;

      ${z.laptop} {
        grid-template-columns: 0 1fr 200px;
      }
    }
  }
`,l2=c.div``,Qx=({project:e,requests:t})=>{const n=L("setCommonWordsPage"),s=Se(`commonWordsPage/${e}`,null,p=>{p(n,(m,g)=>g)}),r=he(`addCommonWords/${e}`,async({words:p,removeSpecialChars:m})=>t.patch(p,m),{initialStatus:"init",fulfilledReaction:({params:{onSuccess:p,words:m}},{dispatch:g,getState:x})=>{var j;const S=x(l.atom);if(S.payload){const f=((j=S.content)==null?void 0:j.data)||[],{page:v,count:k}=S.payload,y=m.length+f.length>k?v+1:v;y!==v&&g(n(y)),g(l.actions.pending({...S.payload,page:y}))}p==null||p()},rejectedReaction:({fetchError:p})=>je(p)}),a=he(`deleteCommonWords/${e}`,async p=>t.deleteById(Number(p[0])),{initialStatus:"init",fulfilledReaction:(p,{dispatch:m,getState:g})=>{var S;const x=g(l.atom);if(x.payload){const j=((S=x.content)==null?void 0:S.data)||[],{page:f,...v}=x.payload,k=j.length>0?f:f-1>0?f-1:1;k!==f&&(m(n(k)),m(l.actions.pending({page:k,...v})))}},rejectedReaction:({fetchError:p})=>je(p)}),i=he(`deleteAllCommonWords/${e}`,async p=>t.delete(),{initialStatus:"init",fulfilledReaction:(p,{dispatch:m,getState:g})=>{const x=g(l.atom);if(x.payload){const{page:S,...j}=x.payload;m(n(1)),m(l.actions.pending({...j,page:1}))}},rejectedReaction:({fetchError:p})=>je(p)}),l=he(`getCommonWords/${e}`,async p=>t.get(p),{rejectedReaction:({fetchError:p})=>je(p),reducers:p=>{p(a.actions.pending,(m,g)=>({...m,content:m.content?{...m.content,data:m.content.data.filter(({id:x})=>String(x)!==String(g[0]))}:m.content}))}}),u=R(`loadingAtom/${e}`,ie([r.atom,a.atom,i.atom]),([p,m,g])=>p.status==="loading"||m.status==="loading"||g.status==="loading"),d=Ct(`deleteAllCommonWords/${e}`,{},{reaction:({type:p,meta:m},{dispatch:g})=>{p==="CLOSE"&&m&&g(i.actions.pending())}});return{addRequest:r,deleteRequest:a,deleteAllRequest:i,getRequest:l,loadingAtom:u,deleteAllModal:d,setPageAction:n,pageAtom:s}},c2={get:e=>{const{searchKeyword:t,...n}=Ti(e);return D({method:"GET",url:$(`${I}/api/magnet/v1/common-words`,{...n,"filter[search]":t}),useSessionAccountId:!0})},delete:()=>D({method:"DELETE",url:$(`${I}/api/magnet/v1/common-words`,{}),useSessionAccountId:!0}),patch:(e,t)=>D({method:"PATCH",url:$(`${I}/api/magnet/v1/common-words`,{}),params:{phrases:e,removeSpecialChars:t},useSessionAccountId:!0}),deleteById:e=>D({method:"DELETE",url:$(`${I}/api/magnet/v1/common-words/${e}`,{}),useSessionAccountId:!0})},d2=Qx({project:"magnet",requests:c2}),u2={get:e=>{const{searchKeyword:t,...n}=Ti(e);return D({method:"GET",url:$(`${I}/api/cerebro/v1/common-words`,{...n,"filter[search]":t}),useSessionAccountId:!0})},delete:()=>D({method:"DELETE",url:$(`${I}/api/cerebro/v1/common-words`,{}),useSessionAccountId:!0}),patch:(e,t)=>D({method:"PATCH",url:$(`${I}/api/cerebro/v1/common-words`,{}),params:{phrases:e,removeSpecialChars:t},useSessionAccountId:!0}),deleteById:e=>D({method:"DELETE",url:$(`${I}/api/cerebro/v1/common-words/${e}`,{}),useSessionAccountId:!0})},ca=Qx({project:"cerebro",requests:u2}),p2=e=>h.useMemo(()=>m2[e],[e]),m2={cerebro:ca,magnet:d2,eliteAnalytics:ca,blackBoxProducts:ca,blackboxAba:ca},da=async e=>await D({url:$(`${I}/api/cerebro/v1/search/${e.searchId}`,{}),method:"DELETE",useSessionAccountId:!0}),ua=async e=>await D({url:$(`${I}/api/cerebro/v1/search/bulk-delete`,{}),method:"POST",params:e,useSessionAccountId:!0}),Jx=async e=>await D({url:$(`${I}/api/magnet/v1/search/${e.searchId}`,{}),method:"DELETE",useSessionAccountId:!0}),Xx=async e=>await D({url:$(`${I}/api/magnet/v1/search/delete-process`,{}),method:"POST",params:e,useSessionAccountId:!0}),h2=L("openHistoryItem",({id:e,isAmazon:t,isSingleSearch:n,createdAt:s,project:r})=>{const{navigate:a,location:i}=cr.getState();let l;r==="cerebro"?t?n?l=`${me()}/amazon/view/${e}`:l=`${me()}/amazon/view-multi-search/${e}`:n?l=`${me()}/walmart/view/${e}`:l=`${me()}/walmart/view-multi-search/${e}`:t?n?l=`${me()}/amazon/view/${e}`:l=`${me()}/amazon/view-multi-search/${e}`:n?l=`${me()}/walmart/view/${e}`:l=`${me()}/walmart/view-multi-search/${e}`,i&&!jn({path:l},i.pathname)&&(H({eventName:"Cerebro History Viewed",eventProperties:{date:ke(new Date((s||0)*1e3),"yyyy-MM-dd")}}),ee.getState().setStatus("loading"),a==null||a($(l,{})))}),eb=it({name:"openHistoryItemWithCheck",getPlatform:({isAmazon:e})=>e?"AMAZON":"WALMART",restriction:"history",actionAfterCheck:h2}),g2=({project:e})=>{const{t}=T(),n=C(p=>eb({...p,project:e})),s=ee(p=>p.status==="loading"),r=b(st,p=>(p==null?void 0:p.platform)||"AMAZON",[]),a=V(r,"history"),i=h.useMemo(()=>x2[e],[e]),l=C(()=>we.open({platform:r,restriction:"history",project:e,trigger:'User Click: "History Button"'}),[r]),{isDemo:u}=ne(),d=h.useMemo(()=>e==="cerebro"||e==="magnet"?e:"blackbox",[e]);return o.jsx(re,{content:t("cerebro.history.tooltip"),children:o.jsx(y2,{children:o.jsx(Cm,{openCallback:n,description:t("cerebro.history.descriptionTable"),prepareRequestData:tb,prepareRequestBulkDelete:f2,prepareData:b2,CustomButton:({onClick:p})=>o.jsx(ho,{buttonType:"tertiary",icon:o.jsx(E,{icon:Jp}),onClick:p,disabled:s||u,locked:a&&!u,onLockedClick:l,"data-testid":"history",children:t("cerebro.history.title")}),tool:d,...i})})})},x2={cerebro:{requestUrls:{getHistory:`${I}/api/cerebro/v1/search`},deleteHistory:da,bulkDeleteHistory:ua},magnet:{requestUrls:{getHistory:`${I}/api/magnet/v1/search`},deleteHistory:Jx,bulkDeleteHistory:Xx},eliteAnalytics:{requestUrls:{getHistory:`${I}/api/cerebro/v1/search`},deleteHistory:da,bulkDeleteHistory:ua},blackBoxProducts:{requestUrls:{getHistory:`${I}/api/cerebro/v1/search`},deleteHistory:da,bulkDeleteHistory:ua},blackboxAba:{requestUrls:{getHistory:`${I}/api/cerebro/v1/search`},deleteHistory:da,bulkDeleteHistory:ua}},b2=({data:e,...t})=>({...t,data:e.map(n=>({...n,ids:n.productId}))}),tb=({sortDirection:e,sortField:t,page:n,count:s,search:r})=>({sort:`${e==="DESC"?"-":""}${S2[t]||t}`,page:n,per_page:s,"filter[search]":r}),f2=({ids:e})=>({searchesId:e}),S2={id:"productId",product:"title",date:"createdAt"},y2=c.div`
  margin-right: ${({theme:e})=>e.spacing.sp8};
  margin-bottom: ${({theme:e})=>e.spacing.sp8};
`,j2=()=>{const{t:e}=T(),t=ks(`(min-width: ${js.mobile}px)`);return h.useMemo(()=>[{title:e("magnet.history.columns.keywordSearch"),field:"keyword",sortable:!1,static:t?380:136,render:n=>o.jsx(xy,{keyword:n.keyword.split(",").map(s=>s.trim()).join(", "),marketplace:n.marketplace}),exportTitle:"Name",responsive:!0},{title:e("magnet.history.columns.searchType"),field:"historyType",sortable:!1,render:n=>o.jsx("div",{children:e(`magnet.history.searchTypes.${n.historyType===1?"singleSearch":"multiSearch"}`)})}],[t,e])},k2=()=>{const{t:e}=T(),t=C(u=>eb({...u,project:"magnet"})),n=ee(u=>u.status==="loading"),s=j2(),r=b(st,u=>(u==null?void 0:u.platform)||"AMAZON",[]),a=V(r,"history"),i=C(()=>we.open({platform:r,restriction:"history",project:"magnet",trigger:'User Click: "History Button"'}),[r]),{isDemo:l}=ne();return o.jsx(re,{content:e("magnet.history.tooltip"),children:o.jsx(C2,{children:o.jsx(Cm,{openCallback:t,description:e("magnet.history.description"),prepareRequestData:tb,prepareRequestBulkDelete:v2,prepareData:T2,tool:"magnet",CustomButton:({onClick:u})=>o.jsx(ho,{buttonType:"tertiary",icon:o.jsx(E,{icon:Jp}),onClick:u,disabled:n||l,locked:a&&!l,onLockedClick:i,children:e("cerebro.history.title")}),columns:s,requestUrls:{getHistory:`${I}/api/magnet/v1/search`},deleteHistory:Jx,bulkDeleteHistory:Xx})})})},T2=({data:e,...t})=>({...t,data:e.map(n=>({...n,ids:n.productId}))}),v2=({ids:e})=>({searchesId:e}),C2=c.div`
  margin-right: ${({theme:e})=>e.spacing.sp8};
  margin-bottom: ${({theme:e})=>e.spacing.sp8};
`,ob=h.memo(({title:e,description:t,learnProject:n,learnTooltip:s,project:r})=>{const{t:a}=T(),i=V("AMAZON","bulkReports"),l=ee(p=>p.status==="loading"),u=p2(r),{isDemo:d}=ne();return o.jsxs(nh,{title:e,description:t,children:[r==="cerebro"&&!d&&o.jsx(CS,{disabled:l,locked:i,anythingElseText:a("bulkReport.anythinElse.cerebro"),project:"cerebro"}),o.jsx(gc,{project:n,tooltipText:s,disabled:l}),o.jsx(FD,{}),r==="cerebro"?o.jsx(g2,{project:r}):o.jsx(k2,{}),o.jsx(o2,{controller:u,project:r})]})}),A2=h.memo(()=>{const{t:e}=T(),{cerebroMaxAsins:t}=ne(),{isDemo:n}=ne();return o.jsx(ob,{title:e("cerebro.title"),description:n?e("cerebro.descriptionFree"):e("cerebro.description",{maxAsins:t}),learnProject:"Cerebro",learnTooltip:e("cerebro.learnTooltip"),project:"cerebro"})}),nb=({project:e})=>{const{t}=T(),n=b(st,l=>(l==null?void 0:l.platform)||"AMAZON",[]),s=b(Sr,l=>l[n],[n]),r=b(go),{planGroup:a}=ne(),i=_m({t,platform:n,restriction:"uses",planGroup:a,isPage:!0,project:e,isChinese:r});return i?{uses:s,showUpgradePage:s===0&&!!i,upsellPageProps:{data:{...i,upgradeButton:i.footer.acceptButton},onUpgrade:()=>Lm({project:e,userCurrentPlan:a,upsellPlan:i.betterPlanGroup},!0)}}:null},sb=h.memo(()=>{const{t:e}=T(),t=b(wt.atom);return t==null?null:o.jsxs(w2,{children:[o.jsxs($2,{children:[o.jsx(P2,{children:e("fetchingData")}),o.jsx(Cd,{}),o.jsxs(B2,{children:[Math.trunc(t),"%"]})]}),o.jsx(si,{progress:[{value:t}],total:100})]})}),w2=c.div`
  display: flex;
  flex-direction: column;
  align-items: center;
  width: 100%;
  max-width: 437px;
  margin: auto;
  justify-content: center;
`,$2=c.div`
  display: flex;
  margin-bottom: ${({theme:e})=>e.spacing.sp16};
`,P2=c.div`
  ${Yp};
  color: ${({theme:e})=>e.systemColors.black};
`,B2=c.div`
  ${Xa};
  margin-left: ${({theme:e})=>e.spacing.sp4};
`,rb=h.memo(({imageSrc:e,title:t,description:n,project:s,learnProject:r,alternativeComponent:a})=>{const i=b(Pi),l=nb({project:s});return i?o.jsx(sb,{}):l!=null&&l.showUpgradePage?o.jsx(ib,{children:o.jsx(hm,{...l.upsellPageProps})}):a?o.jsx(o.Fragment,{children:a}):o.jsx(R2,{children:o.jsxs(M2,{children:[o.jsx("div",{}),o.jsxs(F2,{children:[o.jsx(D2,{src:e,shift:s==="cerebro"}),o.jsx(I2,{children:t}),o.jsx(W2,{children:n})]}),o.jsx(oh,{project:s,learnProject:r})]})})}),M2=c.div`
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: space-between;
  flex-grow: 0;
`,R2=c.div`
  display: flex;
  justify-content: center;
`,F2=c.div`
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 32px 0;
  min-width: 437px;
`,D2=c.img`
  width: 211px;
  margin-left: ${({shift:e})=>e?"-60px":"initial"};
`,ab=c.div`
  text-align: center;
`,I2=c(ab)`
  ${Xa};
  margin-top: ${({theme:e})=>e.spacing.sp32};
`,W2=c(ab)`
  ${Fe};
  margin-top: ${({theme:e})=>e.spacing.sp16};
`,ib=c.div`
  display: flex;
  justify-content: center;
  margin-top: 110px;
`,O2=h.memo(({title:e,description:t,project:n,learnProject:s})=>{const r=b(Pi),a=nb({project:n});return r?o.jsx(sb,{}):a!=null&&a.showUpgradePage?o.jsx(ib,{children:o.jsx(hm,{...a.upsellPageProps})}):o.jsxs(z2,{children:[o.jsxs(N2,{children:[o.jsx(V2,{children:e}),o.jsx(_2,{children:t})]}),o.jsx(T0,{project:n,learnProject:s})]})}),z2=c.div`
  display: flex;
  flex-direction: column;
  align-items: center;
  margin-top: ${e=>e.theme.spacing.sp48};
  gap: ${e=>e.theme.spacing.sp24};

  ${z.laptop} {
    flex-direction: row;
    justify-content: center;
    padding-top: ${e=>e.theme.spacing.sp12};
  }
`,N2=c($n)`
  max-width: 496px;
  background-color: ${e=>e.theme.systemColors.grey50};
`,V2=c.h4`
  ${Co};
  margin-bottom: ${e=>e.theme.spacing.sp16};
`,_2=c.p`
  ${Fe};
`,E2="https://re-cdn.helium10.com/container/static/landing-cerebro-amazon-4abN3ihs.svg",L2="https://re-cdn.helium10.com/container/static/landing-cerebro-walmart-uxJobnfS.svg",q2=({onUpgrade:e,...t})=>{const{t:n}=T(),s=Ps(),r=()=>{if(e!=null)e();else{const a=$(`${ys}/subscribe`,{action:"checkout",offer:"scale_your_business"});window.open(a,"__target")}};return o.jsx(F,{onClick:a=>{var i;a.stopPropagation(),(i=t.onClick)==null||i.call(t,a),r()},...t,children:n("upgradePlan.upgradeTo",{upgradePlan:s})})},H2="https://re-cdn.helium10.com/container/static/watch-video-a1KpmVMS.jpg",qr=({project:e,marketplace:t,isHistorical:n,filteringLocked:s})=>{const{t:r}=T(),a=V((t==null?void 0:t.platform)||"AMAZON","seeMonthlySalesColumn"),{isDemo:i}=ge(),l=(s||a)&&!i,u=C(()=>{if(!i)return Bc({project:e})},[i]),d=Ps();return(t==null?void 0:t.domain)!=="amazon.com"?null:o.jsx(O,{name:"monthlySales",label:r("cerebro.filter.monthlySales"),tooltipContent:r("cerebro.filter.monthlySalesTooltip"),min:0,locked:l,lockedTooltip:r("cerebro.filter.monthlySalesLockedTooltip",{upgradePlan:d}),onClickMin:u,onClickMax:u,disabled:l,showEmptyValue:n})},U2=()=>{const{t:e}=T(),t=C(()=>Nt({trigger:"Show Historical Trend",tool:"Cerebro"}),[]);return o.jsx(wx,{title:e("historicalData.upgradeTooltipNew.title"),text:e("historicalData.upgradeTooltipNew.text"),onLearnMore:t})},K2=()=>{const{t:e}=T(),{isDemo:t}=ge(),n=V("AMAZON","filtering"),s=(V("AMAZON","historicalSearch")||n)&&!t,r=La("Time Period Tooltip"),a=h.useMemo(()=>s?o.jsx(U2,{}):e("cerebro.filter.timePeriod.tooltip.available",{nodes:[o.jsx(G2,{type:"button",size:"100",buttonType:"text",onClick:r,children:e("cerebro.filter.timePeriod.tooltip.availableNode")},"node_0")]}),[s,r,e]);return h.useMemo(()=>({locked:s,tooltip:a}),[s,a])},G2=c(F)`
  padding: 0;
  min-height: auto;
`,Od=()=>{const{t:e}=T(),t=mt(new Date),n=Lt(t,-23),{locked:s,tooltip:r}=K2(),a=C(()=>Nt({trigger:"Show Historical Trend",tool:"Cerebro"}),[]);return o.jsx(vd,{name:"timePeriod",label:e("cerebro.filter.timePeriod.label"),tooltipContent:r,placeholder:e("cerebro.filter.timePeriod.placeholder"),disabled:s,columns:2,minDate:n,maxDate:t,showCalendar:!0,disableExternal:!0,mode:"date",locked:s,onClickLocked:a,getStartDate:i=>{const l=ym(new Date(i),1).getTime(),u=DS(n).getTime();return new Date(Math.max(l,u))},info:e("cerebro.filter.timePeriod.info"),tooltipSettings:{colorType:"light",interactive:!0,zIndex:1,maxWidth:328}})},lb=({marketplace:e})=>{const{t}=T(),n=b(yt),s=V("AMAZON","filtering");return o.jsxs(cb,{children:[o.jsx(db,{children:o.jsx(ub,{children:t("cerebro.filter.advancedFilterTitle")})}),o.jsxs(pb,{children:[o.jsx(qr,{project:"cerebro",marketplace:e,isHistorical:n,filteringLocked:s}),o.jsx(Od,{}),o.jsx(Ds,{moduleId:"cerebro",project:"cerebro",marketplace:e,platform:"AMAZON",isHistorical:n})]})]})},cb=c.div`
  margin-top: ${e=>e.theme.spacing.sp24};
  padding-top: ${e=>e.theme.spacing.sp24};
  border-top: 1px solid ${e=>e.theme.systemColors.grey200};
`,db=c.div`
  display: flex;
  flex-wrap: wrap;
  gap: ${e=>e.theme.spacing.sp8};
`,ub=c.div`
  ${St};
  color: ${e=>e.theme.systemColors.black};
  display: flex;
  align-items: center;
`,pb=c(Is)`
  margin-top: ${e=>e.theme.spacing.sp24};
`,Z2=c.div`
  ${pr};
  display: flex;
  align-items: center;
  gap: ${e=>e.theme.spacing.sp4};
  color: ${e=>e.theme.systemColors.blue600};
  border: 1px solid ${e=>e.theme.systemColors.blue600};
  height: 24px;
  padding: ${e=>e.theme.spacing.sp4} ${e=>e.theme.spacing.sp8};
  ${e=>e.theme.spacing.sp8};
  border-radius: 12px;
  user-select: none;
`,mb=({className:e})=>{const{t}=T();return o.jsxs(Z2,{className:e,children:[o.jsx(E,{icon:Qp}),t("cerebroSeasonal.filter.badge")]})},hb=()=>{const{t:e}=T(),t=!V("AMAZON",yr),n=h.useCallback(()=>{H({eventName:"Cerebro Seasonal SV Video Clicked",eventProperties:{Place:"Main Page"}})},[]),s=C(()=>Nt({trigger:"Seasonal data",tool:"Cerebro"}),[]);return o.jsxs(Y2,{children:[o.jsxs(np,{isNew:!0,children:[o.jsxs(sp,{children:[e(`cerebroSeasonal.landing.new.title.available_${t}`),o.jsx(Q2,{children:o.jsx(mb,{})})]}),o.jsxs(J2,{children:[o.jsxs(X2,{children:[o.jsx(tI,{children:e(`cerebroSeasonal.landing.new.boldText.available_${t}`,{year:As})}),o.jsx(oI,{children:e("cerebroSeasonal.landing.new.text")}),t?o.jsx(rp,{learnProject:"Cerebro",videoHash:"osjtqm8jyn",snowIcon:!0,onClick:n,children:e(`cerebroSeasonal.landing.new.watchButton.available_${t}`)}):o.jsxs(eI,{children:[o.jsx(rp,{learnProject:"Cerebro",snowIcon:!0,buttonType:"secondary",videoHash:"osjtqm8jyn",onClick:n,children:e(`cerebroSeasonal.landing.new.watchButton.available_${t}`)}),o.jsx(q2,{onUpgrade:s})]})]}),o.jsx(nI,{src:H2})]})]}),o.jsxs(np,{children:[o.jsx(sp,{children:e("cerebroSeasonal.landing.old.title")}),o.jsx(gb,{children:e("cerebroSeasonal.landing.old.text")}),o.jsxs(sI,{children:[e("cerebroSeasonal.landing.old.text2"),o.jsx(rI,{learnProject:"Cerebro",size:"200",children:e("cerebroSeasonal.landing.old.watchButton")})]})]})]})},Y2=c.div`
  display: flex;
  flex-direction: column;
  gap: ${e=>e.theme.spacing.sp32};
  width: 100%;
  max-width: 824px;
  padding: ${e=>e.theme.spacing.sp64} 0;
  align-self: center;
`,np=c($n)`
  display: flex;
  flex-direction: column;
  gap: ${e=>e.theme.spacing.sp16};
  ${({isNew:e})=>!e&&Z`
      background-color: #f8fafb;
    `}
  ${({isNew:e})=>e&&Z`
      background-color: ${t=>t.theme.systemColors.blue50};
      border-color: ${t=>t.theme.systemColors.blue200};
    `}
`,sp=c.div`
  ${Co};
  display: flex;
  align-items: center;
`,Q2=c.div`
  padding-left: ${e=>e.theme.spacing.sp12};
`,J2=c.div`
  display: flex;
  gap: ${e=>e.theme.spacing.sp16};
`,X2=c.div`
  display: flex;
  flex-direction: column;
  gap: ${e=>e.theme.spacing.sp8};
`,eI=c.div`
  display: flex;
  align-items: center;
  gap: ${e=>e.theme.spacing.sp16};
  margin-top: ${e=>e.theme.spacing.sp4};
`,tI=c.div`
  ${Le};
  color: ${e=>e.theme.systemColors.grey800};
`,gb=c.div`
  ${Fe};
`,oI=c(gb)`
  color: ${e=>e.theme.systemColors.grey800};
`,nI=c.img`
  width: 282px;
  height: 162px;
  flex-shrink: 0;
  border-radius: 6px;
  overflow: hidden;
`,rp=c(mi)`
  align-self: flex-start;
`,sI=c.div`
  display: flex;
  align-items: center;
  gap: ${e=>e.theme.spacing.sp4};
  flex-wrap: wrap;
`,rI=c(mi)`
  align-self: flex-start;
  margin-top: 0;
  top: 1px;
`,aI=["wordsCount","impressionExact30","amazonSearchVolume","organicPosition","matchType","phrase","iq","exactTitleMatchProductsCount","resultsNumber","amazonChoice","amazonOnly","sponsoredPosition","amzSuggestedPosition","exclude","searchVolumeTrend30","amazonRecRank","same-origin","bestSeller","rank","relativeRank","sponsoredAvg","sponsoredCount","amzSuggestedAvg","amzSuggestedCount","competitiveAvg","rankingCompetitors","competitorPerformanceScore","considerRankAsin","considerRank","considerRankProduct","quantitativeSearchVolume","monthlySales","clickShareRate","conversionShareRate"],iI=[],kl=h.memo(()=>{const{t:e}=T();Xm(aI,iI);const t=b(Ue,x=>x!=null&&x.startsWith("walmart")?"Walmart":"Amazon",[]),n=C(ds),{marketplace:s,productIds:r,amazonstore:a,asin:i,productId:l}=dr({arrayFormat:"index"}),u=C(Jh),d=en(),{planGroup:p,notFreeAndStarter:m}=ne();h.useEffect(()=>{if(p!=="free")if(r&&s||i&&a||l){if(r&&s)n(r),u({asins:r,marketplace:s});else if(i&&a){const x=i==null?void 0:i.split(",");n(x),u({asins:x,marketplace:ce("domain",`amazon.${a}`).store})}else if(l){const x=l==null?void 0:l.split(",");n(x),u({asins:x,marketplace:ce("domain","walmart.com").store})}d($(me(),{}),{replace:!0})}else ee.getState().setStatus("loaded")},[p]);const g=Nr();return o.jsx(o.Fragment,{children:m?o.jsx(O2,{title:e("cerebro.landing.title",{market:t}),description:e("cerebro.landing.description",{market:t}),project:"cerebro",learnProject:"Cerebro"}):o.jsx(rb,{imageSrc:t==="Amazon"?E2:L2,title:e("cerebro.landing.title",{market:t}),description:e("cerebro.landing.description",{market:t}),project:"cerebro",learnProject:"Cerebro",alternativeComponent:g?o.jsx(hb,{}):void 0})})}),lI=({list:e})=>{const t=ks(`(min-width: ${js.mobile}px)`),n=en();return o.jsx(cI,{children:e.map((s,r)=>o.jsx(F,{buttonType:"secondary",size:t?"200":"100",onClick:()=>{s.url&&(n(s.url),ee.getState().setStatus("loading"))},children:s.id},r))})},cI=c.div`
  display: flex;
  align-items: center;
  flex-wrap: wrap;

  & > :not(:first-child) {
    margin-left: ${({theme:e})=>e.spacing.sp16};
  }
`,xb=({project:e,learnProject:t,imageSrc:n,title1:s,title2:r,subtitle:a,description:i,exampleList:l})=>{const u=b(Ue),d=C(Mn);return h.useEffect(()=>ee.getState().setStatus("loaded"),[]),o.jsxs(dI,{children:[o.jsxs(uI,{children:[o.jsx(pI,{src:n}),o.jsxs("div",{children:[o.jsxs(mI,{children:[s,o.jsx(hI,{children:o.jsx(fr,{size:"100",value:u,onChange:({value:p})=>d(p),groupOptions:!0,options:bi(),dropdownAutoWidth:!0,appendTo:document.body})}),r]}),o.jsx(gI,{children:a}),o.jsx(xI,{children:o.jsx(lI,{list:l})}),o.jsx(bI,{children:i})]})]}),o.jsx(oh,{project:e,learnProject:t})]})},dI=c.div`
  margin-top: 120px;
  display: flex;
  flex-direction: column;
  align-items: center;

  & > :last-child {
    width: auto;
  }
`,uI=c.div`
  display: grid;
  grid-column-gap: 93px;
  margin-bottom: ${({theme:e})=>e.spacing.sp80};

  grid-template-columns: 1fr;

  ${z.desktop} {
    grid-template-columns: 211px ${e=>e.project==="cerebro"?"550px":"589px"};
  }
`,pI=c.img`
  width: 211px;
  justify-self: center;
  position: relative;

  margin-bottom: ${({theme:e})=>e.spacing.sp24};
  right: 24px;

  ${z.desktop} {
    margin-bottom: 0;
    right: 0;
  }
`,mI=c.span`
  ${Xa};
`,hI=c.div`
  display: inline-block;
  padding-left: ${({theme:e})=>e.spacing.sp8};
  padding-right: ${({theme:e})=>e.spacing.sp8};
`,gI=c.div`
  ${Le};
  margin-top: ${({theme:e})=>e.spacing.sp24};
`,xI=c.div`
  margin-top: ${({theme:e})=>e.spacing.sp16};
  margin-bottom: ${({theme:e})=>e.spacing.sp24};
`,bI=c.div`
  ${Fe}
`,ap="https://re-cdn.helium10.com/container/static/landing-cerebro-amazon-demo-z2Doz4zu.svg",bb=()=>{const{isDemo:e}=ne(),t=C(ds);h.useEffect(()=>{e&&t([])},[e,t])},fI=()=>{const{marketplace:e,productIds:t,amazonstore:n,asin:s,productId:r}=dr({arrayFormat:"index"}),a=C(Mn),i=en();h.useEffect(()=>{if(t&&e||s&&n||r){let l=null,u=null;t&&e?(l=t,u=ce("store",e)):s&&n?(l=s==null?void 0:s.split(","),u=ce("domain",`amazon.${n}`)):r&&(l=r==null?void 0:r.split(","),u=ce("domain","walmart.com"));let d=!1;if(l!=null&&u!=null){a(u.domain);const p=l[0];if(p){const m=ii[u.domain];if(m!=null&&m.length>0){const g=m.filter(x=>x.id===p)[0];g&&(i($(`${me()}/${u.platform==="AMAZON"?"amazon":"walmart"}/view/${g.searchId}`,{}),{replace:!0}),d=!0)}}d||i($(me(),{}),{replace:!0})}}},[n,s,e,i,r,t,a])},Tl=h.memo(()=>{const{t:e}=T(),t=b(Ue,a=>a!=null&&a.startsWith("walmart")?"Walmart":"Amazon",[]),n=b(st),s=Cc(n);return bb(),fI(),Nr()?o.jsx(hb,{}):o.jsx(xb,{imageSrc:ap,title1:e("cerebro.landingDemo.title1"),title2:e("cerebro.landingDemo.title2"),subtitle:e("cerebro.landingDemo.subtitle"),description:e("cerebro.landingDemo.description"),project:"cerebro",learnProject:"Cerebro",exampleList:s})}),SI=async e=>{const{data:t,...n}=await D({url:$(`${I}/api/cerebro/v1/amazon/frequently-bought-together`,e,{arrayFormat:"bracket"}),method:"GET",useSessionAccountId:!0,showError:!0});return{data:t.map(s=>({asin:s.asin,title:s.title,imageSrc:s.imageUrl,href:nm(ce("store",e.marketplace).TLDomain,s.asin),id:""})),...n}},zd=Qt()(fm((e,t)=>({...Ql(e,t,"request",async n=>SI(n),{initialStatus:"init",rejectedReaction:(n,s,r)=>je(r)})}),{name:"FBT Amazon",enabled:!1}));zd.getState().request.action;const yI=Qt(()=>({modal:null})),ao=Ga(yI,"modal"),jI=({data:e,market:t,link:n,marketplace:s,referer:r})=>{const a=Ad(e),i=h.useMemo(()=>r==="cerebro"||r==="magnet"?r:"blackbox",[r]);return o.jsx(kI,{children:o.jsx(vs,{market:t||"AMAZON",product:{...e,hrefTitle:n},blocks:a,marketplace:s||"",tool:i,openTitleLinkInNewTab:!0})})},kI=c.div`
  padding: ${({theme:e})=>e.spacing.sp16};
  border-radius: 6px;
  border: solid 1px ${({theme:e})=>e.systemColors.grey200};
`,TI=[...new Array(3)].map((e,t)=>t),vI=()=>o.jsx(o.Fragment,{children:TI.map(e=>o.jsxs(wI,{children:[o.jsx(CI,{}),o.jsx(AI,{children:o.jsx(No,{builder:[{width:340,size:"small",direction:"column",bottom:4},{width:300,size:"small",direction:"column",bottom:8},{size:"normal",width:200,bottom:0}]})})]},e))}),CI=c(ae)`
  width: 40px;
  height: 53px;
  margin-right: ${({theme:e})=>e.spacing.sp16};
`,AI=c.div`
  flex: 1;
`,wI=c.div`
  display: flex;
  border: solid 1px ${({theme:e})=>e.systemColors.grey200};
  border-radius: 6px;
  min-height: 94px;
  padding: ${({theme:{spacing:{sp16:e,sp24:t}}})=>`${e} ${t}`};
`,$I=({asinList:e,...t})=>$(`${kt}/black-box/target-search`,{asinList:e.join(","),...t}),PI="data:image/svg+xml,%3csvg%20width='77'%20height='72'%20viewBox='0%200%2077%2072'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cpath%20id='a'%20d='M0%200h64.554v64.778H0z'/%3e%3cpath%20id='c'%20d='M0%200h31.886v31.996H0z'/%3e%3c/defs%3e%3cg%20fill='none'%20fill-rule='evenodd'%3e%3cg%20transform='translate(0%207.222)'%3e%3cmask%20id='b'%20fill='%23fff'%3e%3cuse%20xlink:href='%23a'/%3e%3c/mask%3e%3cpath%20d='M64.554%2032.389c0%2017.888-14.45%2032.389-32.277%2032.389C14.45%2064.778%200%2050.277%200%2032.389%200%2014.501%2014.451%200%2032.277%200s32.277%2014.501%2032.277%2032.389'%20fill='%23E8F6FF'%20mask='url(%23b)'/%3e%3c/g%3e%3cpath%20d='M29.926%2049.8v7.666c0%20.092.021.182.062.264l1.763%203.538a.587.587%200%200%200%201.051%200l1.763-3.538a.59.59%200%200%200%20.062-.264V49.8h-4.7z'%20fill='%23A6B7C9'/%3e%3cg%20transform='translate(45.114)'%3e%3cmask%20id='d'%20fill='%23fff'%3e%3cuse%20xlink:href='%23c'/%3e%3c/mask%3e%3cpath%20d='M31.886%2015.998c0%208.835-7.138%2015.998-15.943%2015.998C7.137%2031.996%200%2024.833%200%2015.998%200%207.163%207.137%200%2015.943%200c8.805%200%2015.943%207.163%2015.943%2015.998'%20fill='%23A6B7C9'%20mask='url(%23d)'/%3e%3c/g%3e%3cpath%20d='M60.9%2017.696h.701l.047-.262c.041-.342.145-.644.316-.906.17-.262.426-.58.766-.954a16.5%2016.5%200%200%200%20.588-.697c.146-.187.269-.403.368-.65.099-.246.149-.512.149-.799%200-.572-.219-1.033-.654-1.382-.436-.35-1.006-.525-1.71-.525-.5%200-.999.092-1.497.274-.5.183-.915.43-1.248.74l.44.905a4.411%204.411%200%200%201%201.123-.673%202.962%202.962%200%200%201%201.11-.233c.38%200%20.678.088.891.263.214.175.322.417.322.727%200%20.27-.06.512-.18.727a6.085%206.085%200%200%201-.558.8c-.316.388-.559.746-.725%201.072-.165.325-.248.723-.248%201.192v.381zm-.344%202.325h1.414v-1.419h-1.414v1.42z'%20fill='%23FFF'/%3e%3cpath%20d='M61.057%2023.182c-3.948%200-7.16-3.222-7.16-7.184%200-3.961%203.212-7.184%207.16-7.184s7.16%203.223%207.16%207.184c0%203.962-3.212%207.184-7.16%207.184m0-15.412c-4.521%200-8.2%203.69-8.2%208.228s3.679%208.229%208.2%208.229c4.521%200%208.2-3.691%208.2-8.23%200-4.536-3.679-8.227-8.2-8.227'%20fill='%23FFF'/%3e%3cpath%20d='m25.387%2030.992-.899%208.717c-3.562%201.663-6.315%204.644-6.315%208.383%200%20.977.79%201.769%201.763%201.769h24.682c.974%200%201.763-.792%201.763-1.77-.001-3.771-2.79-6.737-6.315-8.382l-.9-8.717H25.388z'%20fill='%235CB3FF'/%3e%3cpath%20d='M39.167%2031.029h3.1c.974%200%201.763-.792%201.763-1.77v-3.537c0-.977-.79-1.77-1.763-1.77h-19.98c-.974%200-1.763.793-1.763%201.77v3.538c0%20.977.79%201.769%201.763%201.769h16.88z'%20fill='%23A5DBFF'/%3e%3c/g%3e%3c/svg%3e",Vi=async({id:e},t=!1)=>D({url:$(`${I}/api/${t?"magnet":"cerebro"}/v1/walmart/search/${e}/sponsored-data`,{}),method:"POST",useSessionAccountId:!0}),_i=async({id:e},t=!1)=>D({url:$(`${I}/api/${t?"magnet":"cerebro"}/v1/walmart/search/${e}/sponsored-data`,{}),method:"GET",useSessionAccountId:!0}),Ei=async(e,t=!1)=>D({url:$(`${I}/api/${t?"magnet":"cerebro"}/v1/walmart/search/sponsored-data`,{}),method:"POST",params:e,useSessionAccountId:!0}),BI=async e=>{const{demo:t,...n}=e;return D({url:$(`${I}/api/cerebro/v1/walmart/search/multiple/${t?"demo/":""}${e.id}/exported-data`,eo({data:n,minmaxFields:Xs,isExport:!0}),{arrayFormat:"bracket"}),method:"GET",useSessionAccountId:!0})},MI=async({id:e,demo:t})=>D({url:$(`${I}/api/cerebro/v1/walmart/search/multiple/${t?"demo/":""}${e}`,{}),method:"GET",useSessionAccountId:!0}),RI=async e=>{const t=e.demo?"demo/":"";return D({url:$(`${I}/api/cerebro/v1/walmart/search/multiple/${t}${e.id}/data`,eo({data:e,minmaxFields:Xs,isExport:!1}),{arrayFormat:"bracket"}),method:"GET",useSessionAccountId:!0,showError:!0})},Ce=an({name:"cerebro/walmart/multiple",table:{getDataQuery:RI,getExportDataQuery:BI,putExportedKeywordsQuery:vi,phraseIdKey:"phraseId",phraseKey:"phrase"},sponsoredColumn:{createTaskQuery:Vi,getTaskDataQuery:_i,getDataQuery:Ei},search:{postSelector:Qh.contentSelector,getSearchData:MI},temporarilyRemovedController:ot,initFilterValue:Ko,minmaxFields:Xs,isWalmart:!0,mainProductIdExtractionFunction:e=>{var t,n;return(n=(t=e==null?void 0:e.filter(s=>s.main))==null?void 0:t[0])==null?void 0:n.productId}}),Ca=R(Ce.dataRequest.atom,e=>{var t;return(t=e.content)!=null&&t.data.productDetails?Yk(e.content.data.productDetails):null});R(Ce.dataRequest.atom,e=>{var t;return(t=e.content)!=null&&t.data.fbtProducts?e.content.data.fbtProducts.map(Ar):null});const FI=R(ie([Ce.dataRequest.atom,Ce.selectors.search]),([e,t])=>{var n;return{marketplace:(t==null?void 0:t.marketplace)||"",asinList:((n=e.content)==null?void 0:n.data.productDetails.map(({asin:s})=>s))||[]}}),DI=R(Ce.dataRequest.atom,e=>{var t;return((t=e.content)==null?void 0:t.data.productDetails)||[]}),II=R(DI,e=>e.filter(({main:t})=>!t).map(({productId:t})=>t)),WI=h.memo(e=>{const{asin:t,onChangeProduct:n,market:s}=e,{t:r}=T(),i=b(s==="WALMART"?Ca:Yn,l=>l==null?void 0:l.map(u=>({...u,label:u.id,value:u.id})),[]);return o.jsxs(OI,{children:[o.jsx(He,{label:r("cerebro.boughtTogether.productMultiSearch")}),o.jsx(IS,{options:i,value:i==null?void 0:i.find(l=>l.id===t),getBlocks:l=>[{text:l==null?void 0:l.asin}],onChange:l=>{n(l.value.toString()??t)}})]})}),OI=c.div`
  margin-bottom: ${({theme:e})=>e.spacing.sp16};
  width: 300px;
`,Hr=({data:e,blackBox:t,title:n,description:s,referer:r,status:a,onChangeProduct:i,productId:l,marketplace:u,market:d})=>{const{t:p}=T(),[m]=ao(),g=a==null||a==="loaded";return o.jsx(Rt,{isOpen:m,onClose:ao.close,lockBody:!0,title:n,subtitle:s,onClickOutside:()=>!1,footer:o.jsx(_I,{referer:r,children:o.jsx(F,{buttonType:"secondary",size:"200",onClick:ao.close,children:p("common.close")})}),children:o.jsxs(NI,{children:[i&&l?o.jsx(WI,{onChangeProduct:i,asin:l,market:d}):null,e.length>0&&g&&o.jsx(ip,{children:e.map((x,S)=>o.jsx(jI,{market:d,marketplace:u,data:x,referer:r,link:zI({data:x,referer:r,marketplace:u})},S))}),e.length===0&&g&&o.jsxs(LI,{children:[o.jsx(qI,{src:PI}),o.jsx(HI,{children:p("cerebro.boughtTogether.emptyTitle")})]}),!g&&o.jsx(ip,{children:o.jsx(vI,{})}),r==="cerebro"&&(d==="AMAZON"||d==="a")&&e.length>0&&o.jsx(EI,{href:$I({...t,referer:r}),target:"_blank",rel:"noreferrer",children:o.jsx(VI,{buttonType:"text",icon:o.jsx(E,{icon:ts}),size:"200",children:p("cerebro.boughtTogether.modalButton")})})]})})},zI=({data:e,referer:t,marketplace:n})=>t==="magnet"?$(om,{productIds:[e.asin||e.walmartItemId],marketplace:n},{arrayFormat:"index"}):void 0,NI=c.div`
  display: flex;
  flex-direction: column;
`,ip=c.div`
  display: grid;
  grid-template-columns: 1fr;
  grid-gap: ${({theme:e})=>e.spacing.sp8};
`,VI=c(F)`
  margin-top: ${({theme:e})=>e.spacing.sp16};
  align-self: center;
`,_I=c.div`
  display: flex;
  justify-content: flex-end;
  padding-top: ${({theme:e})=>e.spacing.sp8};
`,EI=c.a`
  text-align: center;
  text-decoration: none;
`,LI=c.div`
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  min-height: 298px;
`,qI=c.img`
  width: 77px;
  height: 72px;
`,HI=c.div`
  ${Le};
  color: ${({theme:e})=>e.systemColors.black};
  margin-top: ${({theme:e})=>e.spacing.sp16};
`,UI=()=>{var m,g;const{t:e}=T(),[t]=ao(),[n]=rn(),s=b(Yn),[r,a]=h.useState((m=s==null?void 0:s[0])==null?void 0:m.asin),{request:{atom:i,action:l}}=zd(),u=b(Xk),d=b(J.searchRequest.atom,x=>{var S;return(S=x.content)==null?void 0:S.data.marketplace},[]);h.useEffect(()=>{var S;const x=(S=s==null?void 0:s[0])==null?void 0:S.asin;x&&a(x)},[s]),h.useEffect(()=>{d&&r&&t&&n&&l({searchId:n,marketplace:d,productId:r})},[t]);const p=h.useCallback(x=>{d&&l({searchId:n,marketplace:d,productId:x}),a(x)},[l,d,n]);return o.jsx(Hr,{title:e("cerebro.boughtTogether.title"),description:e("cerebro.boughtTogether.description"),data:((g=i.content)==null?void 0:g.data)||[],status:i.status,market:"AMAZON",referer:"cerebro",blackBox:u,onChangeProduct:p,productId:r})},Li=({platform:e})=>{const{t}=T();ne();const n=C(()=>we.open({restriction:"pagination",platform:e,project:"cerebro",trigger:'User click "Upgrade for Full Results"'}),[e]),s=ee(i=>i.status),r=KI({platform:e}),{isDemo:a}=ge();return r&&!a&&s!=="loading"?o.jsxs(GI,{children:[o.jsx(ZI,{children:t("randomizationText.title")}),o.jsx(F,{type:"button",onClick:n,children:t("randomizationText.button")})]}):null},KI=({platform:e})=>{const{planGroup:t,isStartYourBusiness:n}=ne();return e==="AMAZON"?t==="starter":t==="starter"||t==="platinum"&&!n},GI=c.div`
  display: flex;
  align-items: center;
  align-self: stretch;
  justify-content: center;

  margin-top: ${({theme:e})=>e.spacing.sp16};
  margin-bottom: -${({theme:e})=>e.spacing.sp8};
`,ZI=c.div`
  color: ${({theme:e})=>e.systemColors.grey800};
  margin-right: ${({theme:e})=>e.spacing.sp24};
`,hn=c.div`
  padding: ${({theme:{spacing:{sp16:e,sp24:t}}})=>`${e} ${t} ${t}`};
  border-radius: 6px;
  border: solid 1px ${({theme:e})=>e.systemColors.grey200};
`,gn=c.div`
  display: flex;
  align-items: flex-end;

  & > :first-child {
    flex: 1;
  }
`,xn=c.div`
  height: 32px;
  display: flex;
  align-items: center;
  margin-left: ${({theme:e})=>e.spacing.sp8};
`,YI=()=>{const e=document.getElementById("above-table-container");if(e){const t=e.getBoundingClientRect();t!=null&&t.top&&window.scrollTo(0,t.top-64)}},QI=async(e,t)=>{const{tool:n,name:s,marketplaceId:r,searchType:a,filters:i}=e,{timePeriod:l,...u}=i;return D({url:$(`${I}/api/${n}/v1/filters`,{}),method:"POST",params:{marketplace:ce("id",r).store,type:a,name:s,filters:gt({filter:u,minmaxFields:t,roundingSettings:{}})},useSessionAccountId:!0})},JI=async({id:e,tool:t})=>D({url:$(`${I}/api/${t}/v1/filters/${e}`,{}),method:"DELETE",useSessionAccountId:!0}),XI=async({marketplaceId:e,searchType:t,tool:n,asinsCount:s})=>{const r=await D({url:$(`${I}/api/${n}/v1/preset-filters`,{type:t,marketplace:ce("id",e).store,marketplaceId:e,per_page:1e3,page:1,...s?{asinsCount:s}:{}}),method:"GET",useSessionAccountId:!0});return{...r,data:r.data.map(a=>({...a,filters:{...a.filters,...a.filters.fulfillment?{fulfillment:a.filters.fulfillment.map(i=>String(i))}:{},...a.filters.sizeTier?{sizeTier:a.filters.sizeTier.map(i=>String(i))}:{}}}))}},eW=async({marketplaceId:e,searchType:t,tool:n})=>D({url:$(`${I}/api/${n}/v1/filters`,{type:t,marketplace:ce("id",e).store,per_page:100,page:1}),method:"GET",useSessionAccountId:!0}),tW=async e=>D({url:$(`${I}/api/${e.tool}/v1/filters/${e.id}`,{}),method:"PATCH",params:{name:e.name},useSessionAccountId:!0}),oW={createUserPreset:QI,deleteUserPreset:JI,getStaticPresets:XI,getUserPresets:eW,renamePreset:tW},bn=e=>{const t=h.useCallback(n=>{n&&e.setTableFilter({...n}),e.setExpanded(!0),YI(),e.onSubmit()},[e]);return o.jsxs(o.Fragment,{children:[o.jsx(Bg,{...e,requests:oW,staticItemsCount:2,onApply:t}),o.jsx(md,{}),o.jsx(Ri,{})]})},fb=["monthlySales","iq","exactTitleMatchProductsCount","resultsNumber","amzSuggestedPosition",ue,...pi],Sb=["iq","monthlySales","exactTitleMatchProductsCount","relativeRank","amzSuggestedAvg","amzSuggestedCount","competitiveAvg","rankingCompetitors","competitorPerformanceScore","resultsNumber","considerRankAsin","considerRank",ue,...pi],yb=L("historicalDataFormFilter/set"),jb=L("historicalDataFormFilter/reset"),nW=Se("historicalDataFormFilter",null,e=>{e(yb,(t,n)=>n),e(jb,()=>null)}),kb={atom:nW,actions:{set:yb,reset:jb}},Tb=({values:e})=>{const t=C(kb.actions.set),n=Ul(s=>{t(s)},300);h.useEffect(()=>{n(e)},[JSON.stringify(e),n])},vl=({month:e,translationKey:t,locked:n})=>{const{t:s}=T(),r=new Date(As,e-1,1);return o.jsx(He,{label:o.jsxs(sW,{children:[o.jsx(Ax,{tooltipContent:n?o.jsx($x,{}):s(`cerebroSeasonal.fields.${t}.limited.tooltip`)}),s(`cerebroSeasonal.fields.${t}.filter.title`,{month:$e(r,"short")})]}),tooltipContent:s(`cerebroSeasonal.fields.${t}.filter.tooltip`),tooltipSettings:{colorType:"light",zIndex:100}})},sW=c.div`
  display: flex;
  align-items: center;
  gap: ${e=>e.theme.spacing.sp4};
`,vb=({isHistorical:e})=>{const{t}=T(),{planGroup:n}=ne(),{isDemo:s}=ge(),r=V("AMAZON","filtering"),a=!jr("AMAZON"),i=V("AMAZON",yr),l=(r||i||n==="starter")&&!s,u=l||e;return a?o.jsxs(cb,{children:[o.jsxs(db,{children:[o.jsx(ub,{children:t("cerebroSeasonal.filter.title")}),o.jsx(mb,{})]}),o.jsx(rW,{children:t("cerebroSeasonal.filter.text")}),o.jsxs(pb,{children:[o.jsx(Cl,{name:"octoberSeasonalSearchVolume",label:o.jsx(vl,{translationKey:"searchVolume",locked:l,month:10}),min:0,row:1,disabled:u,"data-testid":"octoberSeasonalSearchVolume",showEmptyValue:e}),o.jsx(Cl,{name:"novemberSeasonalSearchVolume",label:o.jsx(vl,{translationKey:"searchVolume",locked:l,month:11}),min:0,disabled:u,row:1,"data-testid":"novemberSeasonalSearchVolume",showEmptyValue:e}),o.jsx(Cl,{name:"decemberSeasonalSearchVolume",label:o.jsx(vl,{translationKey:"searchVolume",locked:l,month:12}),min:0,disabled:u,row:1,"data-testid":"decemberSeasonalSearchVolume",showEmptyValue:e})]})]}):null},rW=c.div`
  ${wo};
  margin-top: ${e=>e.theme.spacing.sp8};
`,Cl=c(O)`
  ${z.laptop} {
    grid-row: ${e=>e.row};
  }
`,Cb=e=>{Al(e.octoberSeasonalSearchVolume,"Oct"),Al(e.novemberSeasonalSearchVolume,"Nov"),Al(e.decemberSeasonalSearchVolume,"Dec")},Al=(e,t)=>{e!=null&&e.length>0&&H({eventName:"Cerebro Seasonal SV Filters Adjusted",eventProperties:{Month:t,...e[0]!=null?{Min:e[0]}:{},...e[1]!=null?{Max:e[1]}:{}}})},qi=e=>{const{isDemo:t}=ge(),n=jr(e),s=V("AMAZON",yr)&&!t,r=Tr(),a=V(e,"brandAnalytics")||!r,i=V(e,lo),l=V(e,"seeMonthlySalesColumn");return h.useMemo(()=>["timePeriod",...n||s?pi:[],...a?["clickShareRate","conversionShareRate","searchFrequencyRank"]:[],"searchFrequencyRank",...i?[ue]:[],...l?["monthlySales"]:[]],[a,l,i,n,s])},Nd=e=>{const{t}=T(),s=Oi({platform:"AMAZON",project:"cerebro"})?Object.keys(Ai).map(r=>({value:r,label:t(`historicalData.legend.byTypes.${r}.title`)})):aW.map(r=>({label:t(`cerebro.filter.matchTypeOptions.${r}`),value:r}));return e?s.filter(r=>r.value!=="ppc"):s},aW=["organic","sponsored","ppc"],Ab=e=>{const t=Nd(e);return h.useMemo(()=>t.map(n=>n.value),[t])},wb=()=>{const{t:e}=T();return["analyzedProduct","otherProduct","noBadges"].map((t,n)=>({label:e(`cerebro.filter.amazonChoiceOptions.${t}`),value:String(n+1)}))},iW=()=>{const e=b(yt),t=b(Nk),n=C(Bt.actions.resetPageSilent),{t:s}=T(),r=b(J.filterRequest.atom),a=lt({defaultValues:{...Pt,...r}}),{watch:i,handleSubmit:l,reset:u,setValue:d,getValues:p}=a;h.useEffect(()=>{u(r)},[r,u]),Tb({values:p()});const[m,g,x]=to({watch:i,getValues:p,atom:J.filterRequest.atom,minmaxFields:An,initValue:Pt,skippedFields:e?Sb:void 0}),S=C(J.filterRequest.actions.set),j=C(J.filterRequest.actions.setSilent),f=C(Vt.actions.clear),v=l(de=>{de.timePeriod==null?e?(S(de),f()):S(de):(H({eventName:"Historical Graph Clicked",eventProperties:{period:ke(de.timePeriod,"yyyy-MM"),trigger:"Apply Filters Clicked"}}),n(),j(de)),Cb(de)}),k=C(J.filterRequest.actions.reset),y=C(J.filterRequest.actions.clear),w=h.useCallback(()=>{x&&(e?(y(),f()):k({})),u(Pt)},[y,f,e,x,u,k]),P=b(J.selectors.searchMarketplaceData);Do(d,v);const A=V("AMAZON","filtering"),W=Nd(e),_=wb(),G=Ro(),q=ee(de=>de.status),[U,ye]=Kt(),[pe,le]=Kt("hidden_filters_expanded"),Ae=C(de=>sn({afterCheckSuccess:de,project:"cerebro",isWalmart:!1})),Pe=V("AMAZON","filterLibrary"),De=b(J.selectors.searchMarketplaceDataNullable),ze=C(J.tableFilterRequest.actions.setPartial),Re=qi("AMAZON"),rt=Ab(e),M=Me(de=>{var Oe;return(Oe=de.checkLogin)==null?void 0:Oe.basePlan}),B=M==="Helium10_Entrepreneur_Cn"||M==="Helium10_Entrepreneur_Cn_Annual",Y=de=>{le(()=>{var Oe;return(Oe=de==null?void 0:de.target)==null?void 0:Oe.checked})},Q=b(J.dataRequest.atom,de=>{var Oe;return(Oe=de.content)==null?void 0:Oe.data.productDetails.length},[]),xe=o.jsx(lW,{id:"CerebroFilter",onSubmit:v,loaded:q!=="loading",children:o.jsx(nt,{statuses:["loading"],skeleton:o.jsx(hn,{children:o.jsx(nn,{})}),children:o.jsxs(Fo,{dataTestId:"CerebroFilterShowMore",title:e?void 0:o.jsx(Bo,{children:Q!=null?o.jsx(bn,{tool:"cerebro",minMaxFields:An,initialFilterValue:Pt,searchType:Ot.Multi,marketplace:De==null?void 0:De.domain,noPaddingBottom:!U,skipFields:Re,executeWithRestriction:Ae,restricted:Pe,onSubmit:v,setExpanded:ye,setTableFilter:ze,availableMatchTypes:rt,asinsCount:Q}):o.jsx($g,{staticItemsCount:2})}),opened:U,onOpenChange:ye,rightNode:B?o.jsx($b,{checked:pe,onChange:Y,children:s("cerebro.filter.showAllFilters")}):null,children:[o.jsxs(cW,{id:"CerebroFilterContent",children:[o.jsx(O,{name:"impressionExact30",label:s("cerebro.filter.searchVolume"),tooltipContent:s("cerebro.filter.searchVolumeTooltip"),min:0,disabled:A,"data-testid":"searchvolume"}),o.jsx(O,{name:"iq",label:s("cerebro.filter.cerebroIQScore"),tooltipContent:s("cerebro.filter.cerebroIQScoreTooltip"),min:0,disabled:A,showEmptyValue:e,"data-testid":"cerebroiqscore"}),!B&&o.jsx(Od,{}),o.jsx(O,{name:"rank",label:s(t?"cerebro.filter.organicRank":"cerebro.table.positionRank"),tooltipContent:s(t?"cerebro.filter.organicRankTooltip":"cerebro.table.positionRankTooltip"),min:0,disabled:A,"data-testid":"position(rank)"}),o.jsx(O,{name:"wordsCount",label:s("cerebro.filter.wordCount"),tooltipContent:s("cerebro.filter.wordCountTooltip"),min:0,disabled:A,"data-testid":"wordcount"}),o.jsxs("div",{children:[o.jsx(He,{label:s("cerebro.filter.showPhrasesContain"),tooltipContent:s("cerebro.filter.showPhrasesContainTooltip")}),o.jsxs(gn,{children:[o.jsx(Ne,{name:"phrase",placeholder:s("cerebro.filter.showPhrasesContainPlaceholder"),disabled:A,"data-testid":"phrasescontaining"}),o.jsx(xn,{children:o.jsx(fo,{name:"same-origin",options:G,disabled:A})})]})]}),!B&&o.jsx(qr,{project:"cerebro",marketplace:P,isHistorical:e,filteringLocked:A}),o.jsx(O,{name:"exactTitleMatchProductsCount",label:s("cerebro.filter.titleDensity"),tooltipContent:s("cerebro.filter.titleDensityTooltip"),min:0,disabled:A,showEmptyValue:e,"data-testid":"titledensity"}),o.jsx(ft,{name:"matchType",label:s("cerebro.filter.matchType"),placeholder:s("cerebro.filter.noneSelected"),tooltipContent:s("cerebro.filter.matchTypeTooltip"),options:W,disabled:A}),o.jsx(ft,{name:"amazonOnly",label:s("cerebro.filter.amazonChoice"),placeholder:s("cerebro.filter.noneSelected"),tooltipContent:s("cerebro.filter.amazonChoiceTooltip"),options:_,disabled:A,showEmptyValue:e}),t&&o.jsx(O,{name:"resultsNumber",label:s("cerebro.filter.competingProducts"),tooltipContent:s("cerebro.filter.competingProductsTooltip"),min:0,disabled:A,showEmptyValue:e,"data-testid":"competingproducts"}),!t&&o.jsx(O,{name:"relativeRank",label:s("cerebro.table.relativeRank"),tooltipContent:s("cerebro.table.relativeRankTooltip"),min:0,disabled:A,showEmptyValue:e,"data-testid":"relativerank"}),o.jsx(Mo,{locked:A}),o.jsx(O,{name:"sponsoredAvg",label:s(t?"cerebro.filter.sponsoredRank":"cerebro.table.sponsoredAvg"),tooltipContent:s(t?"cerebro.filter.sponsoredRankTooltip":"cerebro.table.sponsoredAvgTooltip"),min:0,disabled:A,"data-testid":"sponsoredrank(avg)"}),!t&&o.jsx(O,{name:"sponsoredCount",label:s("cerebro.table.sponsoredCount"),tooltipContent:s("cerebro.table.sponsoredCountTooltip"),min:0,disabled:A,showEmptyValue:e,"data-testid":"sponsoredrank(count)"}),o.jsx(O,{name:"amzSuggestedAvg",label:o.jsx("div",{dangerouslySetInnerHTML:{__html:s(t?"cerebro.filter.amzSuggestedPosition":"cerebro.table.amzSuggestedAvg")}}),tooltipContent:s(t?"cerebro.filter.amzSuggestedPositionTooltip":"cerebro.table.amzSuggestedAvgTooltip"),min:0,disabled:A,showEmptyValue:e,"data-testid":"amazonrecommendedrank(avg)"}),!t&&o.jsx(O,{name:"amzSuggestedCount",label:o.jsx("div",{dangerouslySetInnerHTML:{__html:s("cerebro.table.amzSuggestedCount")}}),tooltipContent:s("cerebro.table.amzSuggestedCountTooltip"),min:0,disabled:A,showEmptyValue:e,"data-testid":"amazonrecommendedrank(count)"}),!t&&o.jsx(O,{name:"competitiveAvg",label:s("cerebro.table.competitorRankAvg"),tooltipContent:s("cerebro.table.competitorRankAvgTooltip"),min:0,disabled:A,showEmptyValue:e,"data-testid":"competitorrank(avg)"}),!t&&o.jsx(O,{name:"rankingCompetitors",label:s("cerebro.table.rankingCompetitors"),tooltipContent:s("cerebro.table.rankingCompetitorsTooltip"),min:0,disabled:A,showEmptyValue:e,"data-testid":"rankingcompetitors(count)"}),!t&&o.jsx(O,{name:"competitorPerformanceScore",label:s("cerebro.filter.competitorPerformanceScore"),tooltipContent:s("cerebro.table.competitorPerformanceScoreTooltip"),min:0,disabled:A,showEmptyValue:e,"data-testid":"competitorperformance"}),!t&&o.jsx(O,{name:"resultsNumber",label:s("cerebro.filter.competingProducts"),tooltipContent:s("cerebro.filter.competingProductsTooltip"),min:0,disabled:A,showEmptyValue:e,"data-testid":"competingproducts"}),!t&&o.jsx(O,{name:"considerRankAsin",label:s("cerebro.filter.numberOfCompetitors"),tooltipContent:s("cerebro.filter.numberOfCompetitorsTooltip"),min:0,minPlaceholder:s("cerebro.filter.considerRankAsinMin"),maxPlaceholder:s("cerebro.filter.considerRankAsinMax"),disabled:A,showEmptyValue:e,"data-testid":"advancedrankfilter1/2"}),!t&&o.jsx(O,{name:"considerRank",label:s("cerebro.filter.competitorRank"),tooltipContent:s("cerebro.filter.competitorRankTooltip"),min:0,minPlaceholder:s("cerebro.filter.considerRankMin"),maxPlaceholder:s("cerebro.filter.considerRankMax"),disabled:A,showEmptyValue:e,"data-testid":"advancedrankfilter2/2"}),o.jsx(Mr,{locked:A}),o.jsx($r,{moduleId:"cerebro"}),!B&&o.jsx(Ds,{moduleId:"cerebro",project:"cerebro",marketplace:P,platform:"AMAZON",isHistorical:e})]}),o.jsx(vb,{isHistorical:e}),B&&pe&&o.jsx(lb,{marketplace:P}),o.jsx(bo,{onClickReset:w,disabled:m||A,clearDisabled:g||A,locked:A,before:e?void 0:o.jsx(Gt,{})})]})})});return o.jsxs(zt,{...a,children:[o.jsx(ai,{onClick:U?void 0:()=>ye(de=>!de),icon:o.jsx(E,{icon:mr}),size:"200",children:s("cerebro.floatingButton")}),xe]})},lW=c.form`
  ${({loaded:e})=>e&&Z`
      & > div > div > :last-child {
        align-self: flex-start;
      }
    `}
`,cW=c(Is)`
  margin-top: ${({theme:e})=>e.spacing.sp24} !important;
`,$b=c(um)`
  margin-top: ${e=>e.theme.spacing.sp12};
  flex-direction: column;
  text-align: center;

  ${z.laptop} {
    flex-direction: row;
    text-align: left;
  }
`,Pb=Qt(()=>({excludeVariations:!1})),lp=tn(Pb,"excludeVariations"),dW=e=>{h.useEffect(()=>(e!=null&&lp.set(e),()=>lp.set(!1)),[e])},uW=()=>Pb(e=>e.excludeVariations),Ur={set:dW,get:uW},pW=()=>{var j;const{t:e}=T(),t=b(Xc),n=(j=b(Jc))==null?void 0:j.type,s=b(qh),a=V("AMAZON","japanSortingByPhrase")&&(t==null?void 0:t.domain)==="amazon.co.jp",i=V("AMAZON","sorting"),l=!V("WALMART","searchVolumeChart"),u=!V("COMMON","googleTrendChart"),d=Er(),p=wr({type:n||"single",moduleId:"cerebro"}),m=b(Hh),g=b(Ve,f=>{var v;return(v=f.params)==null?void 0:v.demo},[]),x=C(()=>i?we.open({platform:"AMAZON",restriction:"sorting",project:"cerebro",trigger:'User Click: "Historical Data Table Sorting"'}):void 0,[i]),S=b(td);return h.useMemo(()=>[{field:"pinned",title:"",static:32,noHeader:!0,customCSS:On,render:f=>o.jsx(Wn,{data:f,temporarilyRemovedController:us,platform:t==null?void 0:t.platform,searchId:S||void 0,disabled:g}),exportTitle:""},{title:e("cerebro.table.keywordPhrase"),field:"phrase",tooltip:e("cerebro.table.keywordPhraseTooltip"),sortable:!a,disableSorting:i,onClick:x,static:d,responsive:!0,customCSS:cn,render:f=>o.jsx(ln,{tool:"cerebro",phraseId:f.phraseId||void 0,phrase:f.phrase,mainAsin:s,amazonChoiceAsin:f.amazonChoice,marketplace:"AMAZON",marketplaceFull:t}),defaultSortDirection:"ASC"},...p,{title:o.jsx(mW,{children:e("cerebro.table.searchVolume")}),exportTitle:e("cerebro.table.searchVolume"),field:"impressionExact30",tooltip:e("cerebro.filter.searchVolumeTooltip"),sortable:!0,disableSorting:i,onClick:x,customCSS:Yt,render:f=>o.jsx(Zt,{value:f.impressionExact30!=null?f.impressionExact30:void 0,phrase:f.phrase,marketplace:t,enabledWalmartSearchVolumeChart:l,enabledGoogleSearchVolumeChar:u}),contentPosition:"right",minWidth:114},{title:o.jsx(Xn,{children:e("cerebro.table.searchVolumeTrend")}),exportTitle:e("cerebro.table.searchVolumeTrend"),field:"searchVolumeTrend30",tooltip:e("cerebro.table.searchVolumeTrendTooltip"),sortable:!0,disableSorting:i,onClick:x,render:f=>o.jsx(_r,{value:f.searchVolumeTrend30!=null?f.searchVolumeTrend30:void 0}),contentPosition:"right",maxWidth:130},{title:e("cerebro.table.matchType"),field:"matchType",tooltip:e("cerebro.table.matchTypeTooltip"),customCSS:In,render:f=>o.jsx(Pd,{matchType:f.matchType}),contentPosition:"right",maxWidth:155},{field:m?"rank":"organicPosition",title:o.jsx(Fd,{children:e(m?"cerebro.table.organicRankAverage":"cerebro.table.organicRank")}),tooltip:e("cerebro.table.organicRankTooltip"),sortable:!0,disableSorting:i,onClick:x,customCSS:X,render:f=>{const v=m?f.rank:f.organicPosition;return o.jsx(be,{value:v,maximumFractionDigits:0,tooltip:m?o.jsx("div",{children:Object.entries(f.positionsRange||{}).map(([k,y],w)=>o.jsxs(h.Fragment,{children:[w!==0&&o.jsx("br",{}),`${k} - ${y??"N/A"}`]},k))}):void 0})},contentPosition:"right",defaultSortDirection:"ASC",maxWidth:130},{field:m?"sponsoredAvg":"sponsoredPosition",title:o.jsx(Rx,{children:e(m?"cerebro.tableWalmart.sponsoredRankAverage":"cerebro.table.sponsoredRank")}),tooltip:e(m?"cerebro.tableWalmart.sponsoredRankAverageTooltip":"cerebro.table.sponsoredRankTooltip"),sortable:!0,disableSorting:i,onClick:x,customCSS:X,render:f=>{const v=m?f.sponsoredAvg:f.sponsoredPosition;return o.jsx(be,{value:v,maximumFractionDigits:0,tooltip:m?o.jsx("div",{children:Object.entries(f.sponsoredPositionsRange||{}).map(([k,y],w)=>o.jsxs(h.Fragment,{children:[w!==0&&o.jsx("br",{}),`${k} - ${y??"N/A"}`]},k))}):void 0})},contentPosition:"right",defaultSortDirection:"ASC",maxWidth:130},...m?[{title:o.jsx(hW,{children:e("cerebro.table.relativeRank")}),exportTitle:e("cerebro.table.relativeRank"),field:"relativeRank",tooltip:e("cerebro.table.relativeRankTooltip"),sortable:!0,disableSorting:i,onClick:x,customCSS:X,render:f=>{const v=f.relativeRank,k=f.positionsRange?Object.entries(f.positionsRange).map(([y,w])=>({asin:y,position:w})):null;return o.jsx(be,{value:v,tooltip:o.jsx("div",{children:k&&k.length>0?[...k.map(y=>({...y,main:y.asin===s}))].sort((y,w)=>(y.position||0)-(w.position||0)).map(({asin:y,position:w,main:P},A)=>o.jsxs(h.Fragment,{children:[A!==0&&o.jsx("br",{}),!P&&`${y} - ${w}`,P&&o.jsxs("b",{children:[y," - ",w]})]},y)):e("noDataAvailable")}),maximumFractionDigits:0})},exportValue:f=>te({value:f.relativeRank,maximumFractionDigits:0}),contentPosition:"right",defaultSortDirection:"ASC",maxWidth:130}]:[],{field:"_",title:"",responsive:!0,noHover:!0,noHeader:!0}],[p,u,l,g,m,s,t,x,a,S,i,d,e])},mW=c.div`
  min-width: 36px;
`,hW=c.div`
  min-width: 24px;
`,gW=async(e,t)=>{const{demo:n,filter:s,...r}=e,a=n?"demo/":"",i=Lh({filter:s,productIds:t.productIds}),l=n?`${I}/api/cerebro/v1/amazon/search/history/export/demo`:`${I}/api/cerebro/v1/amazon/search/history/${e.id}/export/${a}`,u=n?t:{};return D({url:$(l,{...eo({data:{...r,filter:i},minmaxFields:An,isExport:!0}),...u},{arrayFormat:"bracket"}),method:"GET",useSessionAccountId:!0})},Bb=he("getHistoricalExportData",async({id:e},{getState:t})=>{const n=t(Jc)||{},s=t(Bt.atom),r=t(Vt.atom).content;return gW({...n,tableFilter:s,id:e},r)},{initialStatus:"init",rejectedReaction:({fetchError:e})=>je(e),fulfilledReaction:({params:e,result:t})=>{e.onSuccess&&e.onSuccess(t.data)}}),xW=R("historicalExportDataTableStatusSelector",Bb.atom,e=>e.status==="loading"),bW=R("historicalDataTableDataSelector",ie([R(vt.atom,e=>{var t;return((t=e.content)==null?void 0:t.data.tableData)||null}),R(Ve,e=>{var t;return((t=e.params)==null?void 0:t.marketplace)||null})]),([e,t])=>({tableData:e,marketplace:bt("AM","domain",t||"com").store}));R(vt.atom,e=>{var t,n;return((n=(t=e.content)==null?void 0:t.data)!=null&&n.productDetails?Array.isArray(e.content.data.productDetails)?e.content.data.productDetails:[e.content.data.productDetails]:[]).filter(({main:s})=>!s).map(({asin:s})=>s)});const fW=e=>{const{t}=T(),n=wr({type:"multi",moduleId:"cerebro"}),s=b(Hh);return h.useMemo(()=>[{field:"phrase",title:t("cerebro.table.keywordPhrase"),exportTitle:t("cerebro.table.keywordPhrase"),exportValue:r=>r.phrase,maxWidth:32},...n,{field:"impressionExact30",title:t("cerebro.table.searchVolume"),exportTitle:t("cerebro.table.searchVolume"),exportValue:r=>r.impressionExact30!=null&&r.impressionExact30>=0?te({value:r.impressionExact30}):"-",maxWidth:12},{field:"searchVolumeTrend30",title:t("cerebro.table.searchVolumeTrend"),exportTitle:t("cerebro.table.searchVolumeTrend"),exportValue:({searchVolumeTrend30:r})=>r?te({value:r,maximumFractionDigits:0}):"-",maxWidth:12},...Object.keys(Ai).filter(r=>r!=="ppc").map(r=>({title:t(`historicalData.legend.byTypes.${r}.title`),field:"_export_matchType",render:()=>null,exportValue:({matchType:a})=>a.find(i=>i===r)?1:0})),{field:s?"rank":"organicPosition",title:t(s?"cerebro.table.organicRankAverage":"cerebro.table.organicRank"),exportTitle:t(s?"cerebro.table.organicRankAverage":"cerebro.table.organicRank"),exportValue:({organicPosition:r,rank:a})=>{const i=s?a:r;return i!=null?te({value:i,maximumFractionDigits:0}):"-"},maxWidth:12},{field:s?"sponsoredAvg":"sponsoredPosition",title:t(s?"cerebro.tableWalmart.sponsoredRankAverage":"cerebro.table.sponsoredRank"),exportTitle:t(s?"cerebro.tableWalmart.sponsoredRankAverage":"cerebro.table.sponsoredRank"),exportValue:({sponsoredPosition:r,sponsoredAvg:a})=>{const i=s?a:r;return i!=null?te({value:i,maximumFractionDigits:0}):"-"},maxWidth:12},...s?[{field:"relativeRank",title:t("cerebro.table.relativeRank"),exportTitle:t("cerebro.table.relativeRank"),exportValue:r=>te({value:r.relativeRank,maximumFractionDigits:0}),maxWidth:12}]:[]],[n,s,t])},SW=()=>{const e=b(Xc),t=fW(),n=b(qh),s=b(Vt.atom,r=>{var a;return(a=r.content)==null?void 0:a.id},[]);return h.useMemo(()=>({render:(r,a,i)=>o.jsx(un,{prepareForExportFunction:pn({columns:t,columnsOrder:i,skipOnFiltering:["positionsRange"]}),requestAction:Bb.actions.pending,putAction:J.putExportedKeywordsRequest.actions.pending,loadingSelector:xW,marketplace:e,itemId:n,project:"cerebro",searchId:s,exportOptions:yW})}),[t,n,e,s])},yW=["csv","xlsx","clipboard"],jW=()=>{const e=b(Bt.atom);return h.useMemo(()=>({value:e}),[e])},kW=({onRemove:e})=>{const t=b(Ve,p=>{var m,g;return((g=(m=p.params)==null?void 0:m.products)==null?void 0:g.filter(x=>x.main)[0])||null},[]),n=b(Ve,p=>{var m;return(m=p.params)==null?void 0:m.demo},[]),s=b(Xc),r=C(()=>vt.actions.pending({tableStatus:"waiting"}),[]),{asin:a,title:i,imageSrc:l}=t||{},u=b(us.getRequest.atom,p=>{var m;return!!((m=p.content)!=null&&m.data.length)},[]),d=b(td);return h.useCallback(p=>o.jsxs(o.Fragment,{children:[u&&o.jsx(zr,{marketplace:s,onDelete:r,controller:us,searchId:Number(d)||void 0}),p.length!==0&&o.jsxs(o.Fragment,{children:[o.jsx(Or,{marketplace:s==null?void 0:s.domain}),o.jsx(Wr,{marketplace:s==null?void 0:s.store,asin:a||void 0,title:i,imageSrc:l,moduleId:"cerebro"}),o.jsx(Ir,{onClick:()=>e(p),disabled:n})]})]}),[a,u,l,n,s,r,e,d,i])},TW=()=>{const e=b(Ve,s=>{var r;return(r=s.params)==null?void 0:r.demo},[]),t=V("AMAZON","pagination")&&!e,n=C(()=>Bt.actions.onLockedPagination(),[]);return h.useMemo(()=>({onLock:n,pagination:t,search:t,sort:t,itemsPerPage:t}),[t,n])},vW=()=>{const{t:e}=T(),t=C(()=>Bs());return o.jsx(F,{buttonType:"text",icon:o.jsx(E,{icon:oc}),onClick:t,children:e("historicalData.clearHistoricalTrendFilters.button")})},CW=()=>h.useCallback(()=>o.jsx(vW,{}),[]),AW=e=>{const t=b(ed),n=b(zk),s=wd({selectedMonth:t,selectedProduct:n});return h.useMemo(()=>({...e,getTitleText:s}),[s,e])},Mb=()=>{const e=b(td),{data:t,onRemove:n,selected:s}=Dn({dataAtom:bW,temporarilyRemovedController:us,refreshDataAction:vt.actions.pending,project:"cerebro",searchId:e||void 0}),{notFreeAndStarter:r}=ne(),a=jW(),i=TW(),l=mn,u=b(Yc),d=pW(),p=b(Wk),m=AW(s),g=C(Ok),x=kW({onRemove:n}),S=CW(),j=SW(),f=h.useMemo(()=>({...zn,extraSettings:()=>r&&o.jsx(Ts,{showTop10RankedProductsForKeyword:!0})}),[r]);return o.jsx(At,{name:"historical-data",data:t,filter:a,behavior:f,locked:i,dimensions:l,status:u,columns:d,total:p,selected:m,onFilter:g,leftActions:x,rightActions:S,export:j})},Rb=R(ie([yt,J.dataRequest.atom,vt.atom]),([e,t,n])=>{var s,r;return(e?(r=n.content)==null?void 0:r.data.wordFrequency:(s=t.content)==null?void 0:s.data.wordFrequency)||[]}),Fb=R(ie([yt,Yc]),([e,t])=>e?t:"loaded"),wW=()=>{b(Ve,()=>null,[]),b(kb.atom,()=>null,[]),b(Wt.atom,()=>null,[]),b(It.atom,()=>null,[]),b(Bt.atom,()=>null,[]),b(vt.atom,()=>null,[]),b(Ms,()=>null,[]),b(Rs,()=>null,[]),b(ms.atom,()=>null,[]),b(hs.atom,()=>null,[])},$W="https://re-cdn.helium10.com/container/static/demo-drawer-89xEUVOy.png",PW=()=>o.jsx(BW,{children:o.jsx(MW,{src:$W})}),BW=c.div`
  display: flex;
  max-height: 573px;
  margin-top: ${e=>e.theme.spacing.sp8};
`,MW=c.img`
  max-width: 100%;
  object-fit: contain;
`,RW=()=>{const{t:e}=T(),t=Ps(),n=C(()=>Nt({trigger:"Show Historical Trend",tool:"Cerebro"}),[]);return o.jsx(FW,{localStorageKey:"historical_banner_closed",children:o.jsxs(DW,{children:[o.jsx(Zs.Text,{children:e("historicalData.bannerTitle")}),o.jsx(IW,{type:"button",size:"200",onClick:n,children:e("upgradePlan.upgradeTo",{upgradePlan:t})})]})})},FW=c(Zs)`
  padding: ${e=>e.theme.spacing.sp12};
  margin-bottom: 0;
`,DW=c.div`
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: ${e=>e.theme.spacing.sp12};
  padding-right: ${e=>e.theme.spacing.sp48};

  ${z.laptop} {
    gap: ${e=>e.theme.spacing.sp24};
    flex-direction: row;
    justify-content: center;
  }
`,IW=c(F)`
  align-self: flex-start;
`,Db=R(Ve,e=>{var t,n;return(((n=(t=e.params)==null?void 0:t.products)==null?void 0:n.length)||0)>1}),WW=R(ie([ed,$i,Wt.atom,It.atom,Db]),([e,t,n,s,r])=>n==null||e===n&&(!r||t===((s==null?void 0:s.asin)||null))),OW=R(ie([Wt.atom,It.atom,Db]),([e,t,n])=>e==null&&(!n||(t==null?void 0:t.asin)==null)),zW=({text:e,tooltip:t,count:n,totalCount:s,progress:r,...a})=>{const{t:i}=T();return o.jsxs(NW,{...a,children:[o.jsxs(VW,{children:[o.jsx(_W,{children:e}),o.jsxs(EW,{children:[o.jsx(LW,{children:i("common.valueOfTotal",{value:n,total:s})}),t&&o.jsx(ic,{content:t,colorType:"light"})]})]}),o.jsx(si,{total:s,progress:[{value:r??n,color:n>=s?eS.tomato500:void 0}]})]})},NW=c.div`
  display: flex;
  flex-direction: column;
  gap: ${e=>e.theme.spacing.sp4};
`,VW=c.div`
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: ${e=>e.theme.spacing.sp16};
`,_W=c.div`
  ${wo};
  white-space: nowrap;
`,EW=c.div`
  display: flex;
  align-items: center;
  gap: ${e=>e.theme.spacing.sp4};
`,LW=c.div`
  ${pr};
  white-space: nowrap;
`,qW=c(zW)``,Ib=()=>{const{t:e}=T(),{total:t,balance:n,showCounter:s}=wi();return s?o.jsx(HW,{text:e("historicalData.dailySearches"),tooltip:o.jsx("div",{dangerouslySetInnerHTML:{__html:e("historicalData.uses.tooltip.diamond",{value:t})}}),totalCount:t,count:t-n}):null},HW=c(qW)`
  flex: 1;
  max-width: 190px;
`,UW=()=>{const{t:e}=T(),t=C(ps.close),n=b(WW),s=b(OW),r=b(Ve).params,a=b(Wt.atom),i=C(Uc),u=Eh(()=>{var p;H({eventName:"Historical Graph Clicked",eventProperties:{trigger:"apply_filter_clicked"}}),r!=null&&r.filter&&(r!=null&&r.setFilter)&&(r.demo?(p=r.setFilterWithoutCheck)==null||p.call(r,{...r.filter,timePeriod:cp(a)}):r.setFilter({...r.filter,timePeriod:cp(a)})),t()},!1),d=wi().disabled;return o.jsxs(dp,{root:!0,children:[o.jsx(F,{buttonType:"cancel",onClick:t,children:e("common.cancel")}),o.jsxs(dp,{children:[o.jsx(KW,{children:o.jsx(Ib,{})}),o.jsx(F,{buttonType:"secondary",disabled:s,onClick:i,children:e("common.clear")}),o.jsx(F,{buttonType:"primary",disabled:n||d,onClick:u,children:e("cerebro.filter.applyFilters")})]})]})},cp=e=>{if(e){const t=new Date(e),n=t.getTimezoneOffset();return Pn(t,n)}else return},dp=c.div`
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: ${({theme:e})=>e.spacing.sp8};

  ${({root:e})=>e&&Z`
      padding-left: ${({theme:t})=>t.spacing.sp24};
      padding-right: ${({theme:t})=>t.spacing.sp24};
      margin-left: -${({theme:t})=>t.spacing.sp24};
      margin-right: -${({theme:t})=>t.spacing.sp24};
    `}
`,KW=c.div`
  margin-right: ${({theme:e})=>e.spacing.sp8};
`,GW=({products:e})=>{const{t}=T(),n=b(It.atom,r=>r==null?void 0:r.asin,[]),s=C(It.actions.set);return o.jsx(QW,{children:o.jsx(ZW,{children:e&&e.length>1&&o.jsxs(o.Fragment,{children:[o.jsx(YW,{active:n==null,onClick:()=>s(null),children:t("historicalData.allProducts")}),e.map(r=>o.jsx(yx,{market:"AMAZON",product:r,active:n===r.asin,onClick:s},r.asin))]})})})},ZW=c.div`
  display: flex;
  flex-wrap: wrap;
  margin-bottom: ${({theme:e})=>e.spacing.sp8};

  & > div {
    margin-bottom: ${({theme:e})=>e.spacing.sp8};
  }

  & > div:not(:last-child) {
    margin-right: ${({theme:e})=>e.spacing.sp8};
  }
`,YW=c(ni)``,QW=c.div``;function up(e){const t=parseInt(e.replace("#",""),16);return[t>>16&255,t>>8&255,t&255]}function JW([e,t,n]){return"#"+(16777216+(e<<16|t<<8|n<<0)).toString(16).slice(1)}const XW=(e,t,n=.4)=>{const[s,r,a]=up(e),[i,l,u]=up(t);return JW([s*n+i*(1-n),r*n+l*(1-n),a*n+u*(1-n)])},eO=e=>$e(new Date(e),"short"),tO=h.memo(({columns:e,categories:t,stacking:n,selectedValue:s,onSelectValue:r})=>{const{t:a}=T(),i=h.useRef(),l=h.useRef(t);l.current=t,h.useLayoutEffect(()=>{var S;(S=i.current)==null||S.call(i,s,e)},[s,e]);const u={zooming:{type:"y"},animation:!1,events:{load:S=>{i.current=(j,f)=>{const v=S.target;if(j!=null){const k=l.current.findIndex(y=>y===j);f.forEach((y,w)=>{const P=v.series[w];P!=null&&(P.update({type:"column"},!1),P.points.forEach(A=>{A.update({selected:A.index===k,color:A.index===k?y.color:XW(y.color,"#ffffff")},!1)}))})}else f.forEach((k,y)=>{const w=v.series[y];w!=null&&(w.update({type:"column"},!1),w.points.forEach(P=>{P.update({selected:!1,color:k.color},!1)}))})}}}},d={column:{stacking:n},series:{cursor:"pointer",point:{events:{click:function(S){const j=S.point.index;r==null||r(t[j])}}},states:{inactive:{opacity:.5,enabled:!0},select:{borderColor:"white"}}}},p=h.useMemo(()=>({labels:{formatter:({value:S})=>{const j=new Date(`${S}-01`);return $e(j.getTime()+j.getTimezoneOffset()*6e4,"short")}}}),[]),m=e.map(S=>({type:"column",name:a(S.name||""),data:S.data,color:S.color,states:{select:{color:S.color}},format:n==="percent"?"percent":void 0,animation:!1}));function g(S){const j=new Date(this.x||new Date),f=Pn(j,j.getTimezoneOffset()),v=$e(f,"short");return vc(o.jsxs(o.Fragment,{children:[o.jsx(oy,{children:v}),o.jsx(ny,{color:String(this.point.color),name:this.series.options.name,value:N({value:this.point.y,maximumFractionDigits:2})+(n==="percent"?"%":"")})]}))}const x=h.useMemo(()=>({shared:!1,formatter:g}),[n]);return o.jsx(oO,{children:o.jsx(br,{header:null,watermark:!1,currency:"usd",categories:t,lines:m,xAxis:p,plotOptions:d,chart:u,tooltip:x,tooltipTitleFormatter:eO})})}),oO=c.div`
  width: 100%;
`,pp=({name:e,value:t,color:n,hideValue:s,isPercent:r,tooltip:a,hiddenProducts:i})=>o.jsxs(mp,{children:[o.jsx(re,{open:i?void 0:!1,content:i?o.jsx(aO,{hideValue:s,children:i.map(l=>o.jsxs(h.Fragment,{children:[o.jsx("div",{children:l.name}),l.data!=null&&o.jsxs(iO,{children:[N({value:l.data,maximumFractionDigits:2}),r?"%":""]})]},l.name))}):void 0,children:o.jsxs(mp,{children:[n&&o.jsx(nO,{color:n}),o.jsx(sO,{children:e}),!s&&o.jsxs(rO,{children:[N({value:t||0,maximumFractionDigits:r?2:0,minimumFractionDigits:r?2:0}),r?"%":""]})]})}),a&&o.jsx("div",{children:o.jsx(re,{content:a,children:o.jsx("div",{children:o.jsx(E,{icon:Zl})})})})]}),mp=c.div`
  display: flex;
  align-items: center;
  & > :not(:first-child) {
    margin-left: ${({theme:e})=>e.spacing.sp4};
  }
`,nO=c.div`
  width: 8px;
  height: 8px;
  border-radius: 4px;
  flex: 0 0 auto;
  background: ${e=>e.color};
`,sO=c.div`
  ${fe};
  white-space: nowrap;
`,rO=c.div`
  ${St};
  color: ${({theme:e})=>e.systemColors.black};
`,aO=c.div`
  display: grid;
  grid-column-gap: ${e=>e.theme.spacing.sp16};
  margin-left: ${e=>e.theme.spacing.sp8};
  margin-right: ${e=>e.theme.spacing.sp8};
  grid-template-columns: 1fr auto;
  ${e=>e.hideValue&&Z`
      grid-template-columns: 1fr;
    `}
`,iO=c.div`
  justify-self: flex-end;
`,lO=()=>{const{t:e}=T(),t=b(Mk),n=b(Rk),s=h.useMemo(()=>t.reduce((r,a)=>r+a.value,0),[t]);return o.jsxs(cO,{children:[n&&o.jsx(pp,{name:e("cerebro.distribution.total"),value:s},"totals"),t.map(r=>h.createElement(pp,{...r,key:r.name}))]})},cO=c.div`
  box-sizing: border-box;
  padding-right: 24px;
  min-width: 232px;
  & > :not(:first-child) {
    margin-top: ${({theme:e})=>e.spacing.sp8};
  }
`,dO=h.memo(()=>{const{t:e}=T(),t=[{value:"all",label:e("historicalData.legend.byCategories.all")},{value:"organic",label:e("historicalData.legend.byCategories.organic")},{value:"paid",label:e("historicalData.legend.byCategories.paid")}],n=b(Wh),s=C(r=>Ih(r==null?void 0:r.value));return o.jsx(uO,{options:t,value:n,onChange:s,renderValue:({value:r})=>o.jsxs(o.Fragment,{children:[o.jsxs("strong",{children:[e("historicalData.legend.keywordTypes"),":"]}),r[0].label]})})}),uO=c(Ht)`
  align-items: flex-start;

  strong {
    ${Le};
    margin-right: ${e=>e.theme.spacing.sp8};
  }
`,pO=({title:e,tooltip:t,period:n,additionTitle:s,size:r="big"})=>o.jsxs("div",{children:[o.jsxs(gO,{children:[o.jsx(mO,{$size:r,children:e}),s,o.jsx(xO,{children:o.jsx(ic,{content:t})})]}),n&&o.jsx(hO,{children:n})]}),mO=c.div`
  ${({$size:e})=>e==="big"&&Z`
      ${Ao};
    `}
  ${({$size:e})=>e==="medium"&&Z`
      ${Le};
      color: ${({theme:t})=>t.systemColors.black};
    `}
`,hO=c.div`
  ${fe};
  margin-top: ${({theme:e})=>e.spacing.sp4};
`,gO=c.div`
  display: flex;
  align-items: center;
`,xO=c.div`
  margin-left: ${({theme:e})=>e.spacing.sp8};
`,bO=[{children:o.jsx(E,{icon:tS}),value:"absolute"},{children:o.jsx(E,{icon:oS}),value:"percent"}],fO=h.memo(()=>{const e=b(Rs),t=C(Vh);return o.jsx(SO,{children:o.jsx(xc,{buttons:bO,value:e,onChange:t})})}),SO=c.div`
  width: fit-content;
`,yO=h.memo(()=>{const e=b(Ms),t=C(zh),{t:n}=T();return o.jsx(jO,{children:o.jsx(xc,{buttons:[{children:n("historicalData.distributionBy.keywordType.switch"),value:"keywordType"},{children:n("historicalData.distributionBy.products.switch"),value:"products"}],value:e,onChange:t})})}),jO=c.div`
  width: fit-content;
  white-space: nowrap;
`,kO=()=>{const{t:e}=T(),t=[{label:e("historicalData.periodRangeSelect.last24"),value:"last24"},{label:e("historicalData.periodRangeSelect.last12"),value:"last12"},{label:e("historicalData.periodRangeSelect.last6"),value:"last6"},{label:e("historicalData.periodRangeSelect.last3"),value:"last3"}],n=b(ms.atom),s=C(r=>ms.set(r.value));return o.jsx(TO,{value:n,options:t,onChange:s})},TO=c(Ht)`
  min-width: 145px;
  white-space: nowrap;
`,vO=()=>{const{t:e}=T(),t=b(Ms),n=b(Nh),s=b(CO);return o.jsxs(AO,{children:[o.jsx(pO,{title:e(`historicalData.distributionBy.${t}.${n}.title`),tooltip:e(`historicalData.distributionBy.${t}.${n}.tooltip`),period:s,size:"medium"}),o.jsxs(wO,{children:[o.jsx(kO,{}),o.jsx(yO,{}),o.jsx(fO,{})]})]})},CO=R(ie([ms.atom,Wt.atom]),([e,t])=>{var n;if(t!=null){const s=Ys(new Date(t),1);return`${$e(mt(s),"standard")}  ${$e(Dt(s),"standard")}`}else{const s=(n=Xe.getState().translation)==null?void 0:n.t;return s?s(`historicalData.periodRangeSelect.${e}`):""}}),AO=c.div`
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
`,wO=c.div`
  display: flex;
  align-items: center;
  margin-left: ${({theme:e})=>e.spacing.sp24};

  & > :not(:first-child) {
    margin-left: ${({theme:e})=>e.spacing.sp24};
  }
`,$O=({isOpen:e})=>{const t=C(Gc);return h.useEffect(()=>{t({sendRequest:!0})},[t]),o.jsxs(MO,{children:[o.jsx(vO,{}),o.jsx(dO,{}),o.jsx(PO,{isOpen:e}),o.jsx(lO,{})]})},PO=h.memo(({isOpen:e})=>{const[t,n]=h.useState(!1),s=b(hs.atom,d=>d.status==="loading",[]),r=b(Oh),a=b(_h),i=b(Rs,d=>d==="absolute"?"normal":"percent",[]),l=C(d=>Wt.actions.set({period:d,trackEvent:!0}),[]),u=b(Wt.atom);return h.useEffect(()=>(e&&setTimeout(()=>n(!0),300),()=>n(!1)),[e]),s||!t?o.jsx(BO,{}):o.jsx(tO,{categories:r,columns:a,stacking:i,onSelectValue:l,selectedValue:u})}),BO=c(ae)`
  height: 300px;
`,MO=c.div`
  display: grid;
  grid-gap: ${({theme:e})=>e.spacing.sp24};
  grid-template-columns: 1fr auto;
  margin-top: ${({theme:e})=>e.spacing.sp16};
`,Wb=h.memo(({searchId:e,...t})=>{wW();const{t:n}=T(),{isOpen:s,data:{showDemo:r}}=b(ps.atom),a=C(ps.close),i=C(Bs),l=C(()=>Qc(t),[JSON.stringify(t.products),JSON.stringify(t.filter),JSON.stringify(t.tableFilter)]);return h.useEffect(l,[l]),h.useEffect(()=>i,[i,e]),o.jsx(OO,{position:"bottom",animation:"slideBottom",isOpen:s,onClose:a,onClickOutside:a,size:"fit-content",header:r?o.jsx(RW,{}):o.jsxs(RO,{children:[o.jsx(O0,{handleCloseDrawer:a}),o.jsxs(FO,{children:[o.jsxs(DO,{children:[o.jsx(IO,{children:n("historicalData.title")}),o.jsx(WO,{children:n("historicalData.subtitle")})]}),o.jsx(F,{type:"button",buttonType:"icon",icon:o.jsx(E,{icon:Np}),onClick:a})]})]}),footer:!r&&o.jsx(UW,{}),alwaysShowDivider:!0,children:r?o.jsx(PW,{}):o.jsxs(o.Fragment,{children:[o.jsx(GW,{products:t.products}),o.jsx($O,{isOpen:s})]})})}),RO=c.div`
  display: flex;
  flex-direction: column;
  gap: ${({theme:e})=>e.spacing.sp24};
`,FO=c.div`
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  gap: ${e=>e.theme.spacing.sp24};
`,DO=c.div`
  display: flex;
  flex-direction: column;
  gap: ${({theme:e})=>e.spacing.sp12};
`,IO=c.div`
  ${Ao};
`,WO=c.div`
  ${Fe};
`,OO=c(kn)`
  ${kn.CloseButton} {
    display: none;
  }

  ${kn.Wrapper} {
    max-height: 90vh;
  }
`,zO=({marketplace:e,searchId:t})=>{const n=b(eT),s=b(J.dataRequest.atom,d=>{var p;return(p=d.content)==null?void 0:p.data.exactAsin},[]),r=b(J.filterRequest.atom),a=b(J.tableFilterRequest.atom),i=C(J.filterRequest.actions.setSilent),l=C(J.filterRequest.actions.setSilentWithoutCheck),{isDemo:u}=ge();return n.length===0?null:o.jsx(Wb,{marketplace:e,products:n,type:"multi",filter:r,tableFilter:a,skippedFilterFields:Sb,setFilter:i,setFilterWithoutCheck:l,demo:u,searchId:t,excludeVariations:s})},NO=["organic","section-editorial-recommendations","section-amazons-choice","ppc","top-rated-from-our-brand"],VO=["section-editorial-recommendations","section-amazons-choice","top-rated-from-our-brand"],_O=["sponsored","section-highly-rated","section-sponsored-brand-header","section-sponsored-video","section-trending-now"],EO=["section-highly-rated","section-sponsored-brand-header","section-sponsored-video","section-trending-now"],LO={organic:"organicCount","section-editorial-recommendations":"editorialRecommendationsCount","section-amazons-choice":"amazonsChoiceCount",ppc:"ppcCount","top-rated-from-our-brand":"topRatedFromOurBrandCount"},qO={sponsored:"sponsoredCount","section-highly-rated":"highlyRatedCount","section-sponsored-brand-header":"sponsoredBrandHeaderCount","section-sponsored-video":"sponsoredVideoCount","section-trending-now":"trendingNowCount"},jt=({value:e,label:t,minimumFractionDigits:n,maximumFractionDigits:s})=>e!==void 0?o.jsxs(HO,{children:[o.jsx(KO,{children:t}),o.jsx(UO,{children:N({value:e,minimumFractionDigits:n,maximumFractionDigits:s})})]}):null,HO=c.div`
  display: flex;
  align-items: center;
  margin-top: ${({theme:e})=>e.spacing.sp8};
`,UO=c.span`
  ${St};
  color: ${({theme:e})=>e.systemColors.black};
`,KO=c.span`
  ${fe};
  display: inline-block;
  margin-right: ${({theme:e})=>e.spacing.sp4};
  white-space: nowrap;
`,Hi=({data:e,period:t,status:n="loaded",isHistorical:s=!1,historicalButton:r})=>{const{t:a}=T();return o.jsxs(Vd,{children:[o.jsxs(YO,{children:[o.jsx(Ui,{hasPeriod:t!=null,children:a("cerebro.distribution.title")}),t!=null&&n==="loaded"&&o.jsx(QO,{children:t}),t!=null&&n!=="loaded"&&o.jsx(GO,{}),n==="loaded"?o.jsxs(o.Fragment,{children:[o.jsx(jt,{value:e==null?void 0:e.totalCount,label:a("cerebro.distribution.total")}),o.jsx(jt,{value:e==null?void 0:e.sponsoredCount,label:a("cerebro.distribution.sponsored")}),o.jsx(jt,{value:(e==null?void 0:e.organicCount)!=null?e.organicCount:e==null?void 0:e.contextualCount,label:a("cerebro.distribution.organic")}),o.jsx(jt,{value:(e==null?void 0:e.smart)!=null?e==null?void 0:e.smart:e==null?void 0:e.lexicalCount,label:a("cerebro.distribution.smart")}),!s&&o.jsx(jt,{value:e==null?void 0:e.ppcCount,label:a("cerebro.distribution.amazonRecommended")})]}):o.jsx(ZO,{}),r]}),o.jsx(To,{})]})},GO=()=>o.jsx(JO,{children:o.jsx(XO,{})}),ZO=()=>{const e={size:"medium",bottom:12};return o.jsx(No,{builder:[{...e,width:190},{...e,width:140},{...e,width:165},{...e,width:190}]})},YO=c.div`
  padding-right: ${({theme:e})=>e.spacing.sp24};
  flex: 1;
`,Ui=c.div`
  ${Le};
  display: inline-block;
  margin-bottom: ${({theme:e,hasPeriod:t})=>t?0:e.spacing.sp8};
  white-space: nowrap;
  color: ${({theme:e})=>e.systemColors.black};
`,To=c.div`
  margin-top: ${({theme:e})=>e.spacing.sp4};
  border-right: none;

  ${z.largeDesktop} {
    border-right: 1px solid ${({theme:e})=>e.systemColors.grey200};
  }
`,Vd=c.div`
  display: flex;

  ${To} {
    display: none;

    ${z.laptop} {
      display: block;
    }
  }
`,QO=c.div`
  ${fe};
  margin-bottom: ${e=>e.theme.spacing.sp8};
`,JO=c.div`
  margin-top: 2px;
  margin-bottom: 10px;
`,XO=c(ae)`
  height: 14px;
  max-width: 100px;
`,Ob=h.memo(({data:e,historicalButton:t,status:n="loaded"})=>{const{t:s}=T(),{isDemo:r}=ge(),a=V("AMAZON","historicalSearch")&&!r,i=h.useMemo(()=>NO.map(p=>({id:p,title:s(`historicalData.legend.byTypes.${p}.title`),value:e==null?void 0:e[LO[p]],restricted:a&&VO.includes(p)})),[e,a,s]),l=h.useMemo(()=>i.reduce((p,m)=>p+(m.value||0),0),[i]),u=h.useMemo(()=>_O.map(p=>({id:p,title:s(`historicalData.legend.byTypes.${p}.title`),value:e==null?void 0:e[qO[p]],restricted:a&&EO.includes(p)})),[e,a,s]),d=h.useMemo(()=>u.reduce((p,m)=>p+(m.value||0),0),[u]);return o.jsxs(Vd,{children:[o.jsxs(ez,{children:[o.jsx(tz,{children:s("cerebro.distribution.title")}),o.jsxs(oz,{children:[o.jsx(Eo,{value:e==null?void 0:e.totalCount,label:s("cerebro.distribution.total"),status:n}),o.jsx(hp,{}),o.jsx(Eo,{value:l,label:s("cerebro.distribution.organic"),status:n,detailsTitle:s("cerebro.distribution.organicTooltip"),details:i}),o.jsx(hp,{}),o.jsx(Eo,{value:d,label:s("cerebro.distribution.paid"),status:n,detailsTitle:s("cerebro.distribution.paidTooltip"),details:u})]}),t]}),o.jsx(To,{})]})}),ez=c.div`
  flex: 1;
  padding-left: 0;
  padding-top: ${({theme:e})=>e.spacing.sp16};

  ${z.laptop} {
    padding-left: ${({theme:e})=>e.spacing.sp32};
    padding-top: 0;
  }
`,tz=c.div`
  ${Le};
  display: inline-block;
  white-space: nowrap;
  color: ${({theme:e})=>e.systemColors.black};
`,oz=c.div`
  display: flex;
  align-items: center;
  margin-top: ${({theme:e})=>e.spacing.sp16};
`,hp=c.div`
  margin-left: ${e=>e.theme.spacing.sp8};
  margin-right: ${e=>e.theme.spacing.sp8};
  height: 32px;
  background: ${e=>e.theme.systemColors.grey200};
  flex: 0 0 auto;
  width: 1px;

  ${z.extraDesktop} {
    margin-left: ${e=>e.theme.spacing.sp32};
    margin-right: ${e=>e.theme.spacing.sp32};
  }
`,_s=h.memo(({visible:e})=>{const{t}=T(),n=wi(),s=La("Show Historical Trends"),r=La("Show Historical Trends",!0);return Fk(),e?o.jsx(nz,{children:o.jsxs(sz,{children:[o.jsxs(az,{children:[o.jsx(re,{content:t("cerebro.distribution.showHistoricalTrend.tooltipNew"),colorType:"light",interactive:!0,zIndex:100,children:o.jsx(rz,{children:o.jsx(iz,{buttonType:"secondary",icon:o.jsx(E,{icon:nS}),onClick:s,locked:n.locked,disabled:n.disabled,onLockedClick:r,children:t("cerebro.distribution.showHistoricalTrend.title")})})}),n.locked&&o.jsx(ic,{content:t("cerebro.distribution.showHistoricalTrend.lockedRightTooltip"),colorType:"light"})]}),o.jsx(Ib,{})]})}):null}),nz=c.div`
  margin-top: ${({theme:e})=>e.spacing.sp16};
  margin-bottom: ${({theme:e})=>e.spacing.sp16};

  ${z.laptop} {
    margin-right: ${e=>e.theme.spacing.sp16};
  }
`,sz=c.div`
  display: flex;
  flex-wrap: wrap;
  gap: ${e=>e.theme.spacing.sp16};

  ${z.laptop} {
    flex-wrap: nowrap;
  }
`,rz=c.div`
  align-self: flex-start;
`,az=c.div`
  display: flex;
  align-items: center;
  gap: ${e=>e.theme.spacing.sp8};
`,iz=c(ho)`
  white-space: nowrap;
`,lz=({status:e})=>{const t=b(cz);return o.jsx(Ob,{data:t,historicalButton:o.jsx(_s,{visible:!0}),status:e})},cz=R(ie([yt,J.dataRequest.atom,vt.atom]),([e,t,n])=>{var s,r;return(e?(r=n.content)==null?void 0:r.data.searchResultsCount:(s=t.content)==null?void 0:s.data.searchResultsCount)||null});c.div`
  ${Le};
  display: inline-block;
  white-space: nowrap;
  color: ${({theme:e})=>e.systemColors.black};
`;const dz=async e=>{const{demo:t,...n}=e;return D({url:$(`${I}/api/cerebro/v1/walmart/search/single/${t?"demo/":""}${e.id}/exported-data`,eo({data:n,minmaxFields:ls,isExport:!0}),{arrayFormat:"bracket"}),method:"GET",useSessionAccountId:!0})},uz=async({id:e,demo:t})=>D({url:$(`${I}/api/cerebro/v1/walmart/search/single/${t?"demo/":""}${e}`,{}),method:"GET",useSessionAccountId:!0}),pz=async e=>{const t=e.demo?"demo/":"",n=await D({url:$(`${I}/api/cerebro/v1/walmart/search/single/${t}${e.id}/data`,eo({data:e,minmaxFields:ls,isExport:!1}),{arrayFormat:"bracket"}),method:"GET",useSessionAccountId:!0,showError:!0});return{...n,data:{...n.data,tableData:n.data.tableData.map(r=>({...r,organicScrapedAt:new Date(r.organicScrapedAt+"z").getTime()/1e3,sponsoredScrapedAt:new Date(r.sponsoredScrapedAt+"z").getTime()/1e3}))}}},ve=an({name:"cerebro/walmart/single",table:{getDataQuery:pz,getExportDataQuery:dz,putExportedKeywordsQuery:vi,phraseIdKey:"phraseId",phraseKey:"phrase"},sponsoredColumn:{createTaskQuery:Vi,getTaskDataQuery:_i,getDataQuery:Ei},temporarilyRemovedController:ot,search:{postSelector:Yh.contentSelector,getSearchData:uz},initFilterValue:Ko,minmaxFields:ls,isWalmart:!0,mainProductIdExtractionFunction:e=>e.productId}),gp=R(ve.dataRequest.atom,e=>{var t;return(t=e.content)!=null&&t.data.productDetails?[Ar(e.content.data.productDetails)]:null});R(ve.dataRequest.atom,e=>{var t;return(t=e.content)!=null&&t.data.fbtProducts?e.content.data.fbtProducts.map(Ar):null});const mz=R(ie([ve.dataRequest.atom,ve.selectors.search]),([e,t])=>{var n,s,r,a;return{marketplace:(t==null?void 0:t.marketplace)||"",asinList:(r=(s=(n=e.content)==null?void 0:n.data)==null?void 0:s.productDetails)!=null&&r.asin?[(a=e.content)==null?void 0:a.data.productDetails.asin]:[]}}),hz=R(ve.dataRequest.atom,e=>{var t,n,s;return((s=(n=(t=e.content)==null?void 0:t.data)==null?void 0:n.productDetails)==null?void 0:s.productId)||null}),pa=h.memo(({value:e,title:t,tooltip:n})=>e===void 0?null:o.jsxs(bz,{children:[o.jsx(gz,{children:t}),o.jsxs("div",{children:[o.jsx(xz,{children:N({value:e})}),o.jsx(re,{content:n,colorType:"light",children:o.jsx(E,{icon:Za})})]})]})),gz=c.h4`
  ${fe};
  color: ${({theme:e})=>e.systemColors.grey600};

  ${z.mobile} {
    white-space: nowrap;
  }
`,xz=c.span`
  ${tc};
`,bz=c.div`
  display: flex;
  flex-direction: column;
  gap: ${({theme:e})=>e.spacing.sp4};

  > div {
    display: flex;
    gap: ${({theme:e})=>e.spacing.sp4};
    align-items: center;
  }
`,Ki=h.memo(({isWalmart:e,isMulti:t})=>{const{t:n}=T(),s=yz[`${t?"multi":"single"}${e?"Walmart":"Amazon"}`],r=b(s,u=>{var d;return(d=u.content)==null?void 0:d.data.averageFilteredAmazonSearchVolume},[]),a=b(s,u=>{var d;return(d=u.content)==null?void 0:d.data.averageFilteredQuantitativeSearchVolume},[]),i=b(s,u=>{var d;return(d=u.content)==null?void 0:d.data.totalFilteredAmazonSearchVolume},[]),l=b(s,u=>{var d;return(d=u.content)==null?void 0:d.data.totalFilteredQuantitativeSearchVolume},[]);return o.jsxs(fz,{children:[o.jsxs(Sz,{children:[o.jsxs(xp,{children:[o.jsx(bp,{children:n("cerebro.searchVolume.title.amazon")}),o.jsx(pa,{title:n("cerebro.searchVolume.total.title"),tooltip:n("cerebro.searchVolume.total.tooltip"),value:i}),o.jsx(pa,{title:n("cerebro.searchVolume.average.title"),tooltip:n("cerebro.searchVolume.average.tooltip"),value:r})]}),e&&o.jsxs(xp,{children:[o.jsx(bp,{children:n("cerebro.searchVolume.title.walmart")}),o.jsx(pa,{title:n("cerebro.searchVolume.total.title"),tooltip:n("cerebro.searchVolume.total.tooltip"),value:l}),o.jsx(pa,{title:n("cerebro.searchVolume.average.title"),tooltip:n("cerebro.searchVolume.average.tooltip"),value:a})]})]}),o.jsx(To,{})]})}),fz=c.div`
  display: flex;
  margin-bottom: ${e=>e.theme.spacing.sp12};

  ${z.mobile} {
    margin-bottom: 0;
  }
`,Sz=c.div`
  display: flex;
  gap: ${({theme:e})=>`${e.spacing.sp8} ${e.spacing.sp16}`};

  ${z.mobile} {
    padding-right: ${({theme:e})=>e.spacing.sp16};
  }
`,xp=c.div`
  display: flex;
  flex-direction: column;
  gap: ${({theme:e})=>e.spacing.sp8};
`,bp=c.div`
  ${Le};
  color: ${({theme:e})=>e.systemColors.black};

  ${z.mobile} {
    white-space: nowrap;
  }
`,yz={singleAmazon:oe.dataRequest.atom,singleWalmart:ve.dataRequest.atom,multiAmazon:J.dataRequest.atom,multiWalmart:Ce.dataRequest.atom},jz=({tableSelected:e})=>{const t=b(J.tableFilterRequest.atom),n=C(()=>J.tableFilterRequest.actions.onLockedPagination(),[]),s=wd({}),r=V("AMAZON","pagination"),a=Tx(),i=h.useMemo(()=>({onLock:n,pagination:r,search:r,sort:r,itemsPerPage:r,settingsColumns:{...a}}),[r,n,a]),l=h.useMemo(()=>({...e,getTitleText:s}),[s,e]);return{filter:h.useMemo(()=>({value:t}),[t]),selected:l,locked:i}},Ha=(e,t,n)=>n?te({value:e??0}):e!==null?t.indexOf("organic")!==-1?N({value:e,maximumFractionDigits:0}):"N/A":"-",kz=(e,t,n,s)=>{const{t:r,language:a}=T(),{isElite:i}=ne(),u=V("AMAZON","japanSortingByPhrase")&&(e==null?void 0:e.domain)==="amazon.co.jp",d=b(s),p=V("AMAZON","sorting"),m=!V("WALMART","searchVolumeChart"),g=!V("COMMON","googleTrendChart"),x=Er(),S=wr({type:"multi",moduleId:"cerebro"}),j=Px(),f=Mi({project:"cerebro",platform:"AMAZON",moduleId:"cerebro",marketplace:e}),v=C(()=>{},[p]),k=Vs({marketplace:e,project:"cerebro",onClick:v}),y=h.useMemo(()=>d.map(A=>({title:A,field:"_export_positionsRange",exportValue:W=>{const _=W.positionsRange.filter(({asin:G})=>G===A)[0];return _&&_.position?te({value:_.position,maximumFractionDigits:0}):"-"}})),[d]),w=Oi({platform:"AMAZON",project:"cerebro"}),P=Bx();return h.useMemo(()=>[{title:"",field:"actions",static:32,noHeader:!0,render:A=>o.jsx(Bd,{phrase:A.phrase,marketData:e,tool:"cerebro"}),exportTitle:""},{title:"",field:"pinned",static:32,noHeader:!0,customCSS:On,render:A=>o.jsx(Wn,{data:A,temporarilyRemovedController:ot,platform:e==null?void 0:e.platform}),exportTitle:""},{title:r("cerebro.table.keywordPhrase"),field:"phrase",tooltip:r("cerebro.table.keywordPhraseTooltip"),sortable:!u,disableSorting:p,onClick:v,static:x,responsive:!0,customCSS:cn,render:A=>o.jsx(ln,{tool:"cerebro",phraseId:A.phraseId,phrase:A.phrase,mainAsin:n,amazonChoiceAsin:A.amazonChoice,marketplace:"AMAZON",marketplaceFull:e}),defaultSortDirection:"ASC"},...S,...k,{title:o.jsx(Mx,{children:r("cerebro.table.cerebroIqScore")}),exportTitle:r("cerebro.table.cerebroIqScore"),field:"iq",tooltip:r("cerebro.table.cerebroIqScoreTooltip"),sortable:!0,disableSorting:p,onClick:v,customCSS:X,render:A=>o.jsx(be,{value:A.iq?A.iq:void 0,maximumFractionDigits:0}),exportValue:A=>A.iq?te({value:A.iq,maximumFractionDigits:0}):"-",contentPosition:"right",maxWidth:200},...j,{title:o.jsx(Tz,{children:r("cerebro.table.searchVolume")}),exportTitle:r("cerebro.table.searchVolume"),field:"impressionExact30",tooltip:r("cerebro.filter.searchVolumeTooltip"),sortable:!0,disableSorting:p,onClick:v,customCSS:Yt,render:A=>o.jsx(Zt,{value:A.impressionExact30,phrase:A.phrase,marketplace:e,enabledWalmartSearchVolumeChart:m,enabledGoogleSearchVolumeChar:g}),exportValue:A=>A.impressionExact30!=null&&A.impressionExact30>=0?te({value:A.impressionExact30}):"-",contentPosition:"right",minWidth:114},{title:o.jsx(Xn,{children:r("cerebro.table.searchVolumeTrend")}),exportTitle:r("cerebro.table.searchVolumeTrend"),field:"searchVolumeTrend30",tooltip:r("cerebro.table.searchVolumeTrendTooltip"),sortable:!0,disableSorting:p,onClick:v,render:A=>o.jsx(_r,{value:A.searchVolumeTrend30}),exportValue:({searchVolumeTrend:A})=>A?te({value:A,maximumFractionDigits:0}):"-",contentPosition:"right",maxWidth:200},...f,{title:o.jsx(zi,{children:r("cerebro.table.sponsoredAsins")}),exportTitle:r("cerebro.table.sponsoredAsins"),field:"sponsoredAsins",tooltip:r("cerebro.table.sponsoredAsinsTooltip"),sortable:t,disableSorting:p,onClick:v,customCSS:X,render:A=>o.jsx(be,{value:A.sponsoredAsins,maximumFractionDigits:0}),exportValue:A=>te({value:A.sponsoredAsins,maximumFractionDigits:0}),contentPosition:"right",maxWidth:200},{title:r("cerebro.table.competingProducts"),field:"resultsNumber",tooltip:r("cerebro.table.competingProductsTooltip"),sortable:!0,disableSorting:p,onClick:v,customCSS:X,render:A=>o.jsx(Vr,{value:A.resultsNumber>=0?A.resultsNumber:void 0,over:A.resultsNumberOver}),exportValue:A=>A.resultsNumber>=0?te({value:A.resultsNumber}):"-",contentPosition:"right",maxWidth:200},{title:r("cerebro.table.cpr"),field:"newCprExact",tooltip:r("cerebro.table.cprTooltip"),sortable:!0,disableSorting:p,onClick:v,customCSS:X,render:A=>o.jsx(be,{value:A.newCprExact,maximumFractionDigits:0}),exportValue:A=>te({value:A.newCprExact,maximumFractionDigits:0}),contentPosition:"right",maxWidth:200},{title:o.jsx(Rd,{children:r("cerebro.table.titleDensity")}),exportTitle:r("cerebro.table.titleDensity"),field:"exactTitleMatchProductsCount",tooltip:r("cerebro.table.titleDensityTooltip"),sortable:!0,disableSorting:p,onClick:v,customCSS:X,render:A=>o.jsx(be,{value:A.exactTitleMatchProductsCount,maximumFractionDigits:0}),exportValue:A=>te({value:A.exactTitleMatchProductsCount,maximumFractionDigits:0}),contentPosition:"right",maxWidth:200},{title:r("cerebro.table.matchType"),field:"matchType",tooltip:r("cerebro.table.matchTypeTooltip"),customCSS:In,render:A=>w?o.jsx(Pd,{matchType:A.matchType}):o.jsx(Ns,{matchType:A.matchType,isAmazon:!0}),exportValue:({matchType:A})=>$d({matchType:A,isAmazon:!0}),contentPosition:"right",minWidth:w?155:123},...P,{title:o.jsx(Xn,{dangerouslySetInnerHTML:{__html:r("cerebro.tableWalmart.sponsoredRankAverage")}}),exportTitle:r("cerebro.tableWalmart.sponsoredRankAverage"),field:"sponsoredAvg",tooltip:r("cerebro.tableWalmart.sponsoredRankAverageTooltip"),sortable:!0,disableSorting:p,onClick:v,customCSS:X,render:A=>o.jsx(be,{value:A.sponsoredAvg,maximumFractionDigits:0}),exportValue:A=>te({value:A.sponsoredAvg,maximumFractionDigits:0}),contentPosition:"right",maxWidth:200},{title:o.jsx(Xn,{dangerouslySetInnerHTML:{__html:r("cerebro.tableWalmart.sponsoredRankCount")}}),exportTitle:r("cerebro.tableWalmart.sponsoredRankCount"),field:"sponsoredCount",tooltip:r("cerebro.tableWalmart.sponsoredRankCountTooltip"),sortable:!0,disableSorting:p,onClick:v,customCSS:X,render:A=>o.jsx(be,{value:A.sponsoredCount,tooltip:o.jsx("div",{children:A.sponsoredRange&&A.sponsoredRange.length>0?A.sponsoredRange.map(({asin:W,position:_},G)=>o.jsxs(h.Fragment,{children:[G!==0&&o.jsx("br",{}),`${W} - ${_}`]},W)):r("noDataAvailable")}),maximumFractionDigits:0}),exportValue:A=>te({value:A.sponsoredCount,maximumFractionDigits:0}),contentPosition:"right",maxWidth:200},{title:o.jsx(fp,{dangerouslySetInnerHTML:{__html:r("cerebro.table.amzSuggestedAvgTable")}}),exportTitle:r("cerebro.table.amzSuggestedAvg"),field:"amzSuggestedAvg",tooltip:r("cerebro.table.amzSuggestedAvgTooltip"),sortable:!0,disableSorting:p,onClick:v,render:A=>o.jsx(be,{value:A.amzSuggestedAvg,maximumFractionDigits:0}),exportValue:A=>te({value:A.amzSuggestedAvg,maximumFractionDigits:0}),contentPosition:"right",maxWidth:300},{title:o.jsx(fp,{dangerouslySetInnerHTML:{__html:r("cerebro.table.amzSuggestedCountTable")}}),exportTitle:r("cerebro.table.amzSuggestedCount"),field:"amzSuggestedCount",tooltip:r("cerebro.table.amzSuggestedCountTooltip"),sortable:!0,disableSorting:p,onClick:v,customCSS:X,render:A=>o.jsx(be,{value:A.amzSuggestedCount,tooltip:o.jsx("div",{children:A.amzSuggestedRange&&A.amzSuggestedRange.length>0?A.amzSuggestedRange.map(({asin:W,position:_},G)=>o.jsxs(h.Fragment,{children:[G!==0&&o.jsx("br",{}),`${W} - ${_}`]},W)):r("noDataAvailable")}),maximumFractionDigits:0}),exportValue:A=>te({value:A.amzSuggestedCount}),contentPosition:"right",maxWidth:300},{title:o.jsx(zb,{children:r("cerebro.table.positionRank")}),exportTitle:r("cerebro.table.positionRank"),field:"rank",tooltip:r("cerebro.table.positionRankTooltip"),sortable:!0,disableSorting:p,onClick:v,customCSS:X,render:A=>o.jsx(o.Fragment,{children:Ha(A.rank,A.matchType)}),exportValue:A=>Ha(A.rank,A.matchType,!0),contentPosition:"right",defaultSortDirection:"ASC",maxWidth:200},{title:o.jsx(Nb,{children:r("cerebro.table.relativeRank")}),exportTitle:r("cerebro.table.relativeRank"),field:"relativeRank",tooltip:r("cerebro.table.relativeRankTooltip"),sortable:!0,disableSorting:p,onClick:v,customCSS:X,render:A=>o.jsx(be,{value:A.relativeRank,tooltip:o.jsx("div",{children:A.positionsRange&&(A.positionsRange.length>0||A.rank)?[...A.positionsRange.map(W=>({...W,main:!1})),...A.rank?[{asin:n,position:A.rank,main:!0}]:[]].sort((W,_)=>(W.position||0)-(_.position||0)).map(({asin:W,position:_,main:G},q)=>o.jsxs(h.Fragment,{children:[q!==0&&o.jsx("br",{}),!G&&`${W} - ${_}`,G&&o.jsxs("b",{children:[W," - ",_]})]},W)):r("noDataAvailable")}),maximumFractionDigits:0}),exportValue:A=>te({value:A.relativeRank,maximumFractionDigits:0}),contentPosition:"right",defaultSortDirection:"ASC",maxWidth:200},{title:o.jsx(Vb,{language:a,children:r("cerebro.table.competitorRank")}),exportTitle:r("cerebro.table.competitorRank"),field:"competitiveAvg",tooltip:r("cerebro.table.competitorRankTooltip"),sortable:!0,disableSorting:p,onClick:v,customCSS:X,render:A=>o.jsx(be,{value:A.competitiveAvg,maximumFractionDigits:1}),exportValue:A=>te({value:A.competitiveAvg,maximumFractionDigits:1}),contentPosition:"right",defaultSortDirection:"ASC",maxWidth:200},{title:o.jsx(Ua,{children:r("cerebro.table.rankingCompetitors")}),exportTitle:r("cerebro.table.rankingCompetitors"),field:"rankingCompetitors",tooltip:r("cerebro.table.rankingCompetitorsTooltip"),sortable:!0,disableSorting:p,onClick:v,customCSS:X,render:A=>o.jsx(be,{value:A.rankingCompetitors,maximumFractionDigits:0}),exportValue:A=>te({value:A.rankingCompetitors,maximumFractionDigits:0}),contentPosition:"right",maxWidth:300},{title:o.jsx(Ua,{children:r("cerebro.table.competitorPerformanceScore")}),exportTitle:r("cerebro.table.competitorPerformanceScore"),field:"competitorPerformanceScore",tooltip:r("cerebro.table.competitorPerformanceScoreTooltip"),sortable:!0,disableSorting:p,onClick:v,customCSS:X,render:({competitorPerformanceScore:A})=>o.jsx(o.Fragment,{children:A!=null?`${N({value:A,maximumFractionDigits:1})}/10`:"-"}),exportValue:({competitorPerformanceScore:A})=>A!=null?te({value:A,maximumFractionDigits:1}):"-",contentPosition:"right",maxWidth:300},...y,{title:"",field:"_",responsive:!0,noHeader:!0,noHover:!0}],[S,y,g,m,i,a,n,e,P,k,v,u,f,j,w,t,p,x,r])},Ua=c.div`
  min-width: 112px;
`,fp=c.div`
  min-width: 132px;
`,Tz=c.div`
  min-width: 36px;
`,zb=c.div`
  min-width: 33px;
`,Nb=c.div`
  min-width: 24px;
`,Vb=c.div`
  min-width: 48px;
  ${({language:e})=>(e==="es"||e==="it")&&Z`
      min-width: 88px;
    `}
`,vz=({searchId:e})=>{const{isDemo:t}=ge(),{data:n,onRemove:s,selected:r}=Dn({dataAtom:J.selectors.getSearchDataById,temporarilyRemovedController:ot,refreshDataAction:J.dataRequest.actions.pending,project:"cerebro"}),a=b(J.selectors.searchMarketplaceData),i=b(J.selectors.sortableBySponsoredColumn),{title:l,asin:u,imageSrc:d,exportId:p,mainAsin:m}=b(J.dataRequest.atom,le=>{var Ae,Pe,De,ze,Re,rt,M,B,Y,Q;return{title:((Pe=(Ae=le.content)==null?void 0:Ae.data.productDetails.find(xe=>xe.main))==null?void 0:Pe.title)||"",asin:((ze=(De=le.content)==null?void 0:De.data.productDetails.find(xe=>xe.main))==null?void 0:ze.asin)||"",imageSrc:((rt=(Re=le.content)==null?void 0:Re.data.productDetails.find(xe=>xe.main))==null?void 0:rt.imageUrl)||"",exportId:(B=(M=le.content)==null?void 0:M.data.productDetails.filter(({main:xe})=>xe)[0])==null?void 0:B.asin,mainAsin:((Q=(Y=le.content)==null?void 0:Y.data.productDetails[0])==null?void 0:Q.asin)||""}},[]),{notFreeAndStarter:g}=ne(),x=zs(),S=b(J.selectors.total),j=C(J.tableFilterRequest.actions.set),f=C(J.searchRequest.actions.pending),v=kz(a,i,m,oT),k=C(()=>(ee.getState().setStatus("table"),J.dataRequest.actions.pending({})),[]),y=V("AMAZON","seeMonthlySalesColumn")&&!t,w=id(),P=h.useMemo(()=>[...Cz,...y||a.domain!=="amazon.com"?["monthlySales"]:[],...w],[a.domain,y,w]),A=Os({columns:v,data:n[0],skippedColumnsOnExport:P}),W=bx({title:l,asin:u,imageSrc:d,marketplace:a,onDelete:k,onRemove:s}),_=fx(),{filter:G,locked:q,selected:U}=jz({tableSelected:r});h.useEffect(()=>{setTimeout(()=>f({id:e.toString()}),0)},[e,f]);const ye=h.useMemo(()=>({render:(le,Ae,Pe)=>o.jsx(un,{prepareForExportFunction:pn({columns:A.exportColumns,columnsOrder:Pe,skipOnFiltering:["positionsRange"]}),requestAction:J.exportRequest.actions.pending,putAction:J.putExportedKeywordsRequest.actions.pending,loadingSelector:J.selectors.exportIsLoading,marketplace:a,itemId:p,project:"cerebro"})}),[A.exportColumns,p,a]),pe=h.useMemo(()=>({...Fx,extraSettings:()=>g&&o.jsx(Ts,{showTop10RankedProductsForKeyword:!0})}),[g]);return o.jsx(At,{name:"cerebro-amazon-multiple-"+a.TLDomain,filter:G,behavior:pe,locked:q,dimensions:mn,status:x,columns:A.tableColumns,data:n,total:S,selected:U,onFilter:j,leftActions:W,rightActions:_,export:ye})},Cz=["matchType",ue],Sp=e=>Object.keys(e).sort().reduce((t,n)=>(t[n]=e[n],t),{}),Az=()=>{const e=b(J.dataRequest.atom,t=>{var n;return(((n=t.content)==null?void 0:n.data.productDetails)||[]).length},[]);return{topKeywords:{...Pt,competitiveAvg:[1,40],impressionExact30:[500,null],rankingCompetitors:[wz[e]||1,null]},opportunityKeywords:{...Pt,impressionExact30:[500,null],competitorPerformanceScore:[null,5],considerRankAsin:[1,2],considerRank:[1,15]}}},wz={2:1,3:1,4:2,5:2,6:3,7:4,8:5,9:6,10:6,11:7,12:8,13:9,14:9,15:10,16:11,17:12,18:13,19:13,20:14};c.div`
  display: flex;
  align-items: center;
  flex-wrap: wrap;
  margin-top: ${({theme:e})=>e.spacing.sp6};

  & > :not(:last-child) {
    margin-right: ${({theme:e})=>e.spacing.sp4};
  }
`;const $z=c.div`
  ${Fe};
`;c($z)`
  margin-left: ${({theme:e})=>e.spacing.sp4};
`;const Gi=e=>{const{t}=T(),n=b(e.atom),s=e.market==="AMAZON"&&n&&n.length>1,r=Pz(),a=s&&r?{title:t(`cerebro.filter.presetsTitle.${r}`),subtitle:""}:{title:t("cerebro.productSearch.multi")};return n&&n.length>1?a:{title:t("cerebro.productSearch.single")}},Pz=()=>{const e=Az(),t=b(J.filterRequest.atom);return Object.entries(e).reduce((n,[s,r])=>JSON.stringify(Sp(t))===JSON.stringify(Sp(r))?s:n,void 0)},_b=()=>{const{t:e}=T(),t=b(ed);if(t!=null){const n=$e(new Date(t),"short");return e("historicalData.basedOn",{date:n})}else return e("periodPresets.lastNDays",{N:30})},Bz=()=>{const e=b(Yn),t=(e==null?void 0:e.map(r=>r.asin))||[],{planGroup:n}=ne(),s=Ni({segmentEventProperties:{tool:"cerebro",CurrentPlan:n,Location:"cerebro_trackCompetitor_learnMore",Trigger:"Learn More",UpsellPlan:"Diamond"}});return o.jsx(rr,{competitors:t.slice(0,5),onOpenUpsellModal:s,toolForEvent:"Cerebro",toolForTrackCompetitors:"cerebro",tool:"Cerebro"})},Mz=()=>{const{t:e}=T(),t=b(go);return o.jsxs(Eb,{children:[o.jsx(Rz,{}),o.jsx(Bz,{}),t?o.jsx(F,{onClick:()=>ao.open(),buttonType:"tertiary",children:e("cerebro.boughtTogether.button")}):o.jsx(We,{content:o.jsx(We.Item,{onClick:()=>ao.open(),children:e("cerebro.boughtTogether.button")}),children:o.jsx(Fz,{buttonType:"tertiary",icon:o.jsx(E,{icon:nc})})})]})},Rz=()=>{const e=b(Ue),t=b(It.atom),n=b(J.dataRequest.atom,i=>{var l;return(((l=i.content)==null?void 0:l.data.productDetails)||[]).map(u=>u.asin)},[]),s=b(J.searchRequest.atom,i=>{var l;return((l=i.content)==null?void 0:l.data.marketplace)||null},[]),a=[t!=null,Ic.includes(e)].includes(!0);return o.jsx(ad,{asins:n,marketplaceStore:s,disabled:a})},Fz=c(F)`
  min-width: 32px;

  ${F.ButtonIcon} {
    margin-right: 0;
  }
`,Dz=()=>{const[e,t]=h.useState(""),{marketplaceDomain:n}=J.useSearchTable(),s=b(Yn),r=b(J.searchRequest.atom,g=>{var x;return((x=g.content)==null?void 0:x.data.marketplace)||""},[]),a=b(Rb),i=b(Fb),{title:l,subtitle:u}=Gi({atom:Yn,market:"AMAZON"}),d=h.useCallback(g=>{const x=s==null?void 0:s[g];x&&r&&t(x.asin)},[r,s]);h.useEffect(()=>{var g,x;(g=s==null?void 0:s[0])!=null&&g.asin&&t((x=s==null?void 0:s[0])==null?void 0:x.asin)},[s,t]),h.useEffect(()=>{var x,S;const g=(S=(x=s||[])==null?void 0:x.filter(j=>j.main)[0])==null?void 0:S.asin;t(g)},[s]);const p=_b(),m=Rr({});return o.jsxs(o.Fragment,{children:[m&&o.jsxs(o.Fragment,{children:[o.jsxs(Tp,{children:[o.jsx(kp,{children:l}),o.jsx(jp,{children:u}),p!=null&&o.jsx(vp,{children:p}),p==null&&o.jsx(yp,{})]}),o.jsx("div",{}),o.jsx(Oz,{children:o.jsx(Fi,{marketplaceDomain:n,data:a,status:i})})]}),o.jsxs(Yi,{isElite:m,children:[!m&&o.jsxs(Tp,{children:[o.jsx(kp,{children:l}),o.jsx(jp,{children:u}),p!=null&&o.jsx(vp,{children:p}),p==null&&o.jsx(yp,{})]}),o.jsx(Wi,{atom:Yn,market:"AMAZON",onChange:d,carouselAsin:e}),o.jsx(Mz,{})]})]})},yp=()=>o.jsx(Iz,{children:o.jsx(Wz,{})}),Iz=c.div`
  margin-top: 2px;
  margin-bottom: 2px;
`,Wz=c(ae)`
  height: 14px;
  max-width: 100px;
`,jp=c.div`
  ${fe};
`,kp=c.div`
  ${Le};
  color: ${({theme:e})=>e.systemColors.black};
`,Tp=c.div`
  margin-bottom: ${({theme:e})=>e.spacing.sp16};
`,vp=c.div`
  ${fe};
`,Oz=c.div`
  display: flex;
  flex: 1;
  justify-content: flex-end;
  margin-top: ${({theme:e})=>e.spacing.sp8};
`,zz=()=>{const{isSkeleton:e,searchId:t,marketplaceDomain:n}=J.useSearchTable();ge();const s=b(yt),r=b(J.filterRequest.atom),a=b(Rb),i=b(Fb),l=Rr({}),u=b(J.dataRequest.atom,d=>{var p;return(p=d.content)==null?void 0:p.data.exactAsin},[]);return Ur.set(u),o.jsxs(fn,{children:[o.jsx(iW,{}),o.jsx(Li,{platform:"AMAZON"}),o.jsxs(Sn,{id:"above-table-container",children:[o.jsx(Zi,{isSkeleton:e,isElite:l,children:o.jsxs(nt,{statuses:["loading","filter"],skeleton:o.jsx(on,{}),children:[o.jsx(Dz,{}),o.jsx(lz,{status:i}),o.jsxs(Lb,{children:[o.jsx(Ki,{isMulti:!0,isWalmart:!1}),o.jsx(Io,{data:a,marketplaceDomain:n,currentWord:r.phrase,status:i,project:"cerebro"})]})]})}),s?o.jsx(Mb,{}):o.jsx(vz,{searchId:Number(t)},t)]}),o.jsx(Br,{moduleId:"cerebro"}),o.jsx(Pr,{}),o.jsx(zO,{marketplace:n,searchId:String(t)}),o.jsx(UI,{})]})},Eb=c.div`
  display: flex;
  align-items: center;
  gap: ${({theme:e})=>e.spacing.sp16};
  max-width: 100%;
  flex-wrap: wrap;
`,fn=c.div`
  margin: ${({theme:e})=>e.spacing.sp24} 0;

  div[data-testid="table-settings-popup"] {
    label {
      span + span {
        display: flex;
      }
    }
  }
`,Sn=c.div`
  padding: ${({theme:e})=>e.spacing.sp24} 0;
`,Zi=c(ri)`
  display: grid;
  grid-template-columns: 1fr;
  width: 100%;

  & > :nth-child(2),
  & > :nth-child(3) {
    ${e=>!e.isElite&&Z`
        padding-top: ${({theme:t})=>t.spacing.sp24};
      `}
  }

  & > :nth-child(3) {
    padding-left: 0;
    max-width: none;
  }

  ${z.laptop} {
    grid-template-columns: 1fr 1fr;

    & > :nth-child(2) {
      ${e=>e.isElite&&Z`
          grid-row: 4;
        `}
    }

    & > :nth-child(3) {
      ${e=>!e.isElite&&Z`
          grid-row: 2;
        `}
    }
  }

  ${z.desktop} {
    grid-template-columns: 1fr 1fr;
  }

  ${z.largeDesktop} {
    grid-template-columns: 1fr minmax(auto, 240px) 600px;

    ${e=>e.isElite&&Z`
        grid-template-columns: repeat(3, 1fr);
      `}
    & > :nth-child(3) {
      padding-left: ${({theme:e})=>e.spacing.sp24};
    }

    & > :nth-child(n) {
      grid-column: auto;
      grid-row: auto;
      padding-top: 0;
    }
  }

  ${z.extraDesktop} {
    grid-template-columns: 1fr 234px 630px;
    ${e=>e.isElite&&Z`
        grid-template-columns: repeat(3, 1fr);
      `}
  }

  ${({isSkeleton:e})=>e&&Z`
      display: block;
    `}
`,Lb=c.div`
  display: flex;
  flex-direction: column;
  grid-column: auto;
  margin-top: ${e=>e.theme.spacing.sp16};

  ${z.mobile} {
    flex-direction: row;
  }

  ${z.laptop} {
    grid-column: 1/3;
  }

  ${z.largeDesktop} {
    margin-top: 0;
    padding-left: ${e=>e.theme.spacing.sp16};
    grid-column: auto;
  }
`,Yi=c.div`
  ${e=>e.isElite&&Z`
      border-right: none;
    `}
  flex: 1;
  padding-right: 0;
  max-width: 100%;
  min-width: 0;
  position: relative;

  ${z.laptop} {
    padding-right: ${({theme:e})=>e.spacing.sp32};
    ${e=>e.isElite&&Z`
        border-right: 1px solid ${({theme:t})=>t.systemColors.grey200};
      `}
  }
`,Nz=()=>{var u;const{t:e}=T(),[t]=ao(),[n]=rn(),{request:{atom:s,action:r}}=zd(),a=b(aT),i=b(oe.searchRequest.atom,d=>{var p;return(p=d.content)==null?void 0:p.data.marketplace},[]),l=b(Xh);return h.useEffect(()=>{i&&l&&t&&r({searchId:n,marketplace:i,productId:l})},[t]),o.jsx(Hr,{title:e("cerebro.boughtTogether.title"),description:e("cerebro.boughtTogether.description"),data:((u=s.content)==null?void 0:u.data)||[],status:s.status,market:"AMAZON",referer:"cerebro",blackBox:a})},Vz=()=>{const{isDemo:e}=ge(),t=V("AMAZON","filtering")&&!e,n=b(yt),s=C(Bt.actions.resetPageSilent),{t:r}=T(),a=b(oe.filterRequest.atom),i=lt({defaultValues:Pt}),{watch:l,handleSubmit:u,reset:d,setValue:p,getValues:m}=i;h.useEffect(()=>{d(a)},[a,d]),Tb({values:m()});const[g,x,S]=to({watch:l,getValues:m,atom:oe.filterRequest.atom,minmaxFields:is,initValue:Pt,skippedFields:n?fb:void 0}),j=C(t?oe.filterRequest.actions.set:oe.filterRequest.actions.setWithoutCheck,[t]),f=C(t?oe.filterRequest.actions.setSilent:oe.filterRequest.actions.setSilentWithoutCheck,[t]),v=C(Vt.actions.clear),k=u(Q=>{Q.timePeriod==null?n?(j(Q),v()):j(Q):(H({eventName:"Historical Graph Clicked",eventProperties:{period:ke(Q.timePeriod,"yyyy-MM"),trigger:"Apply Filters Clicked"}}),s(),f(Q)),Cb(Q)}),y=C(oe.filterRequest.actions.reset),w=C(oe.filterRequest.actions.clear),P=h.useCallback(()=>{S&&(n?(w(),v()):y({})),d()},[S,d,n,w,v,y]),A=b(oe.selectors.searchMarketplaceData);Do(p,k);const W=Nd(n),_=wb(),G=Ro(),[q,U]=Kt(),[ye,pe]=Kt("hidden_filters_expanded"),le=C(Q=>sn({afterCheckSuccess:Q,project:"cerebro",isWalmart:!1})),Ae=V("AMAZON","filterLibrary"),Pe=b(oe.selectors.searchMarketplaceDataNullable),De=C(oe.tableFilterRequest.actions.setPartial),ze=qi("AMAZON"),Re=Ab(n),rt=Me(Q=>{var xe;return(xe=Q.checkLogin)==null?void 0:xe.basePlan}),M=rt==="Helium10_Entrepreneur_Cn"||rt==="Helium10_Entrepreneur_Cn_Annual",B=Q=>{pe(()=>{var xe;return(xe=Q==null?void 0:Q.target)==null?void 0:xe.checked})},Y=o.jsx(_d,{onSubmit:k,id:"CerebroFilter",children:o.jsx(nt,{statuses:["loading"],skeleton:o.jsx(hn,{children:o.jsx(nn,{})}),children:o.jsxs(Fo,{dataTestId:"CerebroFilterShowMore",opened:q,onOpenChange:U,rightNode:M?o.jsx($b,{checked:ye,onChange:B,children:r("cerebro.filter.showAllFilters")}):null,title:n?void 0:o.jsx(Bo,{children:o.jsx(bn,{tool:"cerebro",minMaxFields:is,initialFilterValue:Pt,searchType:Ot.Single,marketplace:Pe==null?void 0:Pe.domain,noPaddingBottom:!q,skipFields:ze,executeWithRestriction:le,restricted:Ae,onSubmit:k,setExpanded:U,setTableFilter:De,availableMatchTypes:Re})}),children:[o.jsxs(Is,{id:"CerebroFilterContent",children:[o.jsx(O,{name:"wordsCount",label:r("cerebro.filter.wordCount"),tooltipContent:r("cerebro.filter.wordCountTooltip"),min:0,disabled:t,"data-testid":"wordcount"}),o.jsx(O,{name:"impressionExact30",label:r("cerebro.filter.searchVolume"),tooltipContent:r("cerebro.filter.searchVolumeTooltip"),min:0,disabled:t,"data-testid":"searchvolume"}),!M&&o.jsx(Od,{}),o.jsx(O,{name:"organicPosition",label:r("cerebro.filter.organicRank"),tooltipContent:r("cerebro.filter.organicRankTooltip"),min:0,disabled:t,"data-testid":"organicrank"}),o.jsx(ft,{name:"matchType",label:r("cerebro.filter.matchType"),placeholder:r("cerebro.filter.noneSelected"),tooltipContent:r("cerebro.filter.matchTypeTooltip"),options:W,disabled:t}),o.jsxs("div",{children:[o.jsx(He,{label:r("cerebro.filter.showPhrasesContain"),tooltipContent:r("cerebro.filter.showPhrasesContainTooltip")}),o.jsxs(gn,{children:[o.jsx(Ne,{name:"phrase",placeholder:r("cerebro.filter.showPhrasesContainPlaceholder"),disabled:t}),o.jsx(xn,{children:o.jsx(fo,{name:"same-origin",options:G,disabled:t})})]})]}),!M&&o.jsx(qr,{project:"cerebro",marketplace:A,isHistorical:n,filteringLocked:t}),o.jsx(O,{name:"iq",label:r("cerebro.filter.cerebroIQScore"),tooltipContent:r("cerebro.filter.cerebroIQScoreTooltip"),min:0,disabled:t,showEmptyValue:n,"data-testid":"cerebroiqscore"}),o.jsx(O,{name:"exactTitleMatchProductsCount",label:r("cerebro.filter.titleDensity"),tooltipContent:r("cerebro.filter.titleDensityTooltip"),min:0,disabled:t,showEmptyValue:n,"data-testid":"titledensity"}),o.jsx(O,{name:"resultsNumber",label:r("cerebro.filter.competingProducts"),tooltipContent:r("cerebro.filter.competingProductsTooltip"),min:0,disabled:t,showEmptyValue:n,"data-testid":"competingproducts"}),o.jsx(ft,{name:"amazonOnly",label:r("cerebro.filter.amazonChoice"),placeholder:r("cerebro.filter.noneSelected"),tooltipContent:r("cerebro.filter.amazonChoiceTooltip"),options:_,disabled:t,showEmptyValue:n}),o.jsx(Mo,{locked:t}),o.jsx(Mr,{locked:t}),o.jsx(O,{name:"sponsoredPosition",label:r("cerebro.filter.sponsoredRank"),tooltipContent:r("cerebro.filter.sponsoredRankTooltip"),min:0,disabled:t,"data-testid":"sponsoredrank"}),o.jsx(O,{name:"amzSuggestedPosition",label:r("cerebro.filter.amzSuggestedPosition"),tooltipContent:r("cerebro.filter.amzSuggestedPositionTooltip"),min:0,disabled:t,showEmptyValue:n,"data-testid":"amazonrec.rank"}),o.jsx($r,{moduleId:"cerebro"}),!M&&o.jsx(Ds,{moduleId:"cerebro",project:"cerebro",marketplace:A,platform:"AMAZON",isHistorical:n})]}),o.jsx(vb,{isHistorical:n}),M&&ye&&o.jsx(lb,{marketplace:A}),o.jsx(bo,{onClickReset:P,disabled:g||t,clearDisabled:x||t,locked:t,before:n?void 0:o.jsx(Gt,{})})]})})});return o.jsxs(zt,{...i,children:[o.jsx(ai,{onClick:q?void 0:()=>U(Q=>!Q),icon:o.jsx(E,{icon:mr}),size:"200",children:r("cerebro.floatingButton")}),Y]})},_d=c.form``,qb=R(ie([yt,oe.dataRequest.atom,vt.atom]),([e,t,n])=>{var s,r;return(e?(r=n.content)==null?void 0:r.data.wordFrequency:(s=t.content)==null?void 0:s.data.wordFrequency)||[]}),Hb=R(ie([yt,Yc]),([e,t])=>e?t:"loaded"),_z=({marketplace:e,searchId:t})=>{const n=b(oe.searchRequest.atom,p=>{var m;return((m=p.content)==null?void 0:m.data.marketplace)||null},[]),s=b(oe.dataRequest.atom,p=>{var g,x;const m=(x=(g=p==null?void 0:p.content)==null?void 0:g.data)==null?void 0:x.productDetails;return m?[{asin:m.asin,title:m.title,imageSrc:m.imageUrl,href:n?mo("AM",n,m.asin):void 0,main:!0}]:[]},[n]),r=b(oe.dataRequest.atom,p=>{var m;return(m=p.content)==null?void 0:m.data.exactAsin},[]),a=b(oe.filterRequest.atom),i=b(oe.tableFilterRequest.atom),l=C(oe.filterRequest.actions.setSilent),u=C(oe.filterRequest.actions.setSilentWithoutCheck),{isDemo:d}=ge();return s.length===0?null:o.jsx(Wb,{marketplace:e,products:s,type:"single",filter:a,tableFilter:i,skippedFilterFields:fb,setFilter:l,setFilterWithoutCheck:u,demo:d,searchId:t,excludeVariations:r})},Ez=({status:e})=>{const t=b(Lz);return o.jsx(Ob,{data:t,historicalButton:o.jsx(_s,{visible:!0}),status:e})},Lz=R(ie([yt,oe.dataRequest.atom,vt.atom]),([e,t,n])=>{var s,r;return(e?(r=n.content)==null?void 0:r.data.searchResultsCount:(s=t.content)==null?void 0:s.data.searchResultsCount)||null}),qz=()=>{const e=b(Xh),{planGroup:t}=ne(),n=e?[e]:[],s=Ni({segmentEventProperties:{tool:"cerebro",CurrentPlan:t,Location:th(),Trigger:"Cerebro Track Competitor",UpsellPlan:"Diamond"}});return o.jsx(rr,{competitors:n.slice(0,5),onOpenUpsellModal:s,toolForEvent:"Cerebro",toolForTrackCompetitors:"cerebro",tool:"Cerebro"})},Hz=()=>{const{t:e}=T(),t=b(go);return o.jsxs(Eb,{children:[o.jsx(Uz,{}),o.jsx(qz,{}),t?o.jsx(F,{onClick:()=>ao.open(),buttonType:"tertiary",children:e("cerebro.boughtTogether.button")}):o.jsx(We,{content:o.jsx(We.Item,{onClick:()=>ao.open(),children:e("cerebro.boughtTogether.button")}),children:o.jsx(Kz,{buttonType:"tertiary",icon:o.jsx(E,{icon:nc})})})]})},Uz=()=>{const e=b(Ue),t=b(oe.dataRequest.atom,r=>{var a,i;return(a=r.content)!=null&&a.data.productDetails.asin?[(i=r.content)==null?void 0:i.data.productDetails.asin]:[]},[]),n=b(oe.searchRequest.atom,r=>{var a;return((a=r.content)==null?void 0:a.data.marketplace)||null},[]),s=Ic.includes(e);return o.jsx(ad,{asins:t,marketplaceStore:n,disabled:s})},Kz=c(F)`
  min-width: 32px;

  ${F.ButtonIcon} {
    margin-right: 0;
  }
`,Gz=()=>{const{marketplaceDomain:e}=oe.useSearchTable(),{title:t,subtitle:n}=Gi({atom:hu,market:"AMAZON"}),s=b(qb),r=b(Hb),a=Rr({});return o.jsxs(o.Fragment,{children:[a&&o.jsxs(o.Fragment,{children:[o.jsxs(wp,{children:[o.jsx(Ap,{children:t}),o.jsx(Cp,{children:n})]}),o.jsx("div",{}),o.jsx(Zz,{children:o.jsx(Fi,{marketplaceDomain:e,data:s,status:r})})]}),o.jsxs(Yi,{isElite:a,children:[!a&&o.jsxs(wp,{children:[o.jsx(Ap,{children:t}),o.jsx(Cp,{children:n})]}),o.jsx(Wi,{atom:hu,market:"AMAZON"}),o.jsx(Hz,{})]})]})},Cp=c.div`
  ${fe};
`,Ap=c.div`
  ${Le};
  color: ${({theme:e})=>e.systemColors.black};
`,wp=c.div`
  margin-bottom: ${({theme:e})=>e.spacing.sp16};
`,Zz=c.div`
  display: flex;
  flex: 1;
  justify-content: flex-end;
  margin-top: ${({theme:e})=>e.spacing.sp8};
`,Yz=()=>{const{isSkeleton:e,searchId:t,marketplaceDomain:n}=oe.useSearchTable();ge();const s=b(yt),r=b(oe.filterRequest.atom),a=b(qb),i=b(Hb),l=_b(),u=Rr({}),d=b(oe.dataRequest.atom,p=>{var m;return(m=p.content)==null?void 0:m.data.exactAsin},[]);return Ur.set(d),o.jsxs(fn,{children:[o.jsx(Vz,{}),o.jsx(Li,{platform:"AMAZON"}),o.jsxs(Sn,{id:"above-table-container",children:[o.jsx(Zi,{isSkeleton:e,isElite:u,children:o.jsxs(nt,{statuses:["loading","filter"],skeleton:o.jsx(on,{}),children:[o.jsx(Gz,{}),o.jsx(Ez,{status:i}),o.jsxs(Lb,{children:[o.jsx(Ki,{isMulti:!1,isWalmart:!1}),o.jsx(Io,{data:a,marketplaceDomain:n,currentWord:r.phrase,status:i,period:l,project:"cerebro"})]})]})}),s?o.jsx(Mb,{}):o.jsx(yF,{searchId:Number(t)},t)]}),o.jsx(Br,{moduleId:"cerebro"}),o.jsx(Pr,{}),o.jsx(_z,{marketplace:n,searchId:String(t)}),o.jsx(Nz,{})]})},Ed=({text:e,disabled:t,onOpen:n})=>{const{t:s}=T(),r=C(()=>(n==null||n(),ao.open()),[n]);return o.jsx(F,{buttonType:"tertiary",onClick:r,"data-testid":"viewproductsfrequentlyboughttogether",disabled:t,children:e||s("cerebro.boughtTogether.button")})},Qz=async e=>{const{data:t,...n}=await D({url:$(`${I}/api/cerebro/v1/walmart/frequently-bought-together`,e,{arrayFormat:"bracket"}),method:"GET",useSessionAccountId:!0,showError:!0});return{data:t.map(s=>({walmartItemId:s.walmartItemId,title:s.title,imageSrc:s.imageUrl,href:mo("WM",e.marketplace,s.walmartItemId),id:""})),...n}},Ld=Qt()(fm((e,t)=>({...Ql(e,t,"request",Qz,{initialStatus:"init"})}),{name:"FBT Walmart",enabled:!1}));Ld.getState().request.action;const Ub=()=>{const{t:e}=T();return["organic","sponsored"].map(t=>({label:e(`cerebro.filter.matchTypeOptions.${t}`),value:t}))},Kb=()=>{const{t:e}=T();return["analyzedProduct","otherProduct","noBadges"].map((t,n)=>({label:e(`cerebro.filter.amazonChoiceOptions.${t}`),value:String(n+1)}))},Jz=()=>{const{t:e}=T(),t=b(Ce.filterRequest.atom),n=lt({defaultValues:Ko}),{watch:s,handleSubmit:r,reset:a,setValue:i,getValues:l}=n;h.useEffect(()=>{a(t)},[t,a]);const[u,d,p]=to({watch:s,getValues:l,atom:Ce.filterRequest.atom,minmaxFields:Xs,initValue:Ko}),m=C(Ce.filterRequest.actions.set),g=r(m),x=C(Ce.filterRequest.actions.reset),S=C(()=>{p&&x({}),a()},[p]);Do(i,g);const j=V("WALMART","filtering"),f=Ub(),v=Kb(),k=Ro(),[y,w]=Kt(),P=C(q=>sn({afterCheckSuccess:q,project:"cerebro",isWalmart:!0})),A=V("WALMART","filterLibrary"),W=C(Ce.tableFilterRequest.actions.setPartial),_=qi("WALMART"),G=o.jsx(_d,{onSubmit:g,id:"CerebroFilter",children:o.jsx(nt,{statuses:["loading"],skeleton:o.jsx(hn,{children:o.jsx(nn,{})}),children:o.jsxs(Fo,{dataTestId:"CerebroFilterShowMore",opened:y,onOpenChange:w,title:o.jsx(Bo,{children:o.jsx(bn,{tool:"cerebro",minMaxFields:Xs,initialFilterValue:Ko,searchType:Ot.Multi,marketplace:"walmart.com",noPaddingBottom:!y,skipFields:_,executeWithRestriction:P,restricted:A,onSubmit:g,setExpanded:w,setTableFilter:W})}),children:[o.jsxs(Is,{id:"CerebroFilterContent",children:[o.jsx(O,{name:"quantitativeSearchVolume",label:e("cerebro.filter.walmartSearchVolume"),tooltipContent:e("cerebro.filter.searchVolumeWalmartTooltip"),min:0,disabled:j}),o.jsx(O,{name:"amazonSearchVolume",label:e("cerebro.tableWalmart.amazonSearchVolume"),tooltipContent:e("cerebro.filter.searchVolumeTooltip"),min:0,disabled:j}),o.jsx(O,{name:"rank",label:e("cerebro.tableWalmart.positionRank"),tooltipContent:e("cerebro.tableWalmart.positionRankTooltip"),min:0,disabled:j}),o.jsx(O,{name:"competitorPerformanceScore",label:e("cerebro.tableWalmart.competitorPerformanceScore"),tooltipContent:e("cerebro.tableWalmart.competitorPerformanceScoreTooltip"),min:0,disabled:j}),o.jsxs("div",{children:[o.jsx(He,{label:e("cerebro.filter.showPhrasesContain"),tooltipContent:e("cerebro.filter.showPhrasesContainTooltip")}),o.jsxs(gn,{children:[o.jsx(Ne,{name:"phrase",placeholder:e("cerebro.filter.showPhrasesContainPlaceholder"),disabled:j}),o.jsx(xn,{children:o.jsx(fo,{name:"same-origin",options:k,disabled:j})})]})]}),o.jsx(ft,{name:"matchType",label:e("cerebro.filter.matchType"),placeholder:e("cerebro.filter.noneSelected"),tooltipContent:e("cerebro.filter.matchTypeTooltip"),options:f,disabled:j}),o.jsx(O,{name:"resultsNumber",label:e("cerebro.filter.competingProducts"),tooltipContent:e("cerebro.filter.competingProductsTooltip"),min:0,disabled:j}),o.jsx(O,{name:"wordsCount",label:e("cerebro.filter.wordCount"),tooltipContent:e("cerebro.filter.wordCountTooltip"),min:0,disabled:j}),o.jsx(O,{name:"relativeRank",label:e("cerebro.table.relativeRank"),tooltipContent:e("cerebro.table.relativeRankTooltip"),min:0,disabled:j}),o.jsx(Mo,{locked:j}),o.jsx(O,{name:"sponsoredAvg",label:e("cerebro.table.sponsoredAvg"),tooltipContent:e("cerebro.table.sponsoredAvgTooltip"),min:0,disabled:j}),o.jsx(O,{name:"sponsoredCount",label:e("cerebro.table.sponsoredCount"),tooltipContent:e("cerebro.table.sponsoredCountTooltip"),min:0,disabled:j}),o.jsx(O,{name:"competitiveAvg",label:e("cerebro.table.competitorRankAvg"),tooltipContent:e("cerebro.table.competitorRankAvgTooltip"),min:0,disabled:j}),o.jsx(O,{name:"rankingCompetitors",label:e("cerebro.table.rankingCompetitors"),tooltipContent:e("cerebro.table.rankingCompetitorsTooltip"),min:0,disabled:j}),o.jsx(ft,{name:"bestSeller",label:e("cerebro.filter.bestSeller"),placeholder:e("cerebro.filter.noneSelected"),tooltipContent:e("cerebro.filter.bestSellerTooltip"),options:v,disabled:j}),o.jsx(O,{name:"considerRankProduct",label:e("cerebro.filter.numberOfCompetitors"),tooltipContent:e("cerebro.filter.numberOfCompetitorsTooltip"),min:0,minPlaceholder:e("cerebro.filter.considerRankProductIdMin"),maxPlaceholder:e("cerebro.filter.considerRankProductIdMax"),disabled:j}),o.jsx(O,{name:"considerRank",label:e("cerebro.filter.competitorRank"),tooltipContent:e("cerebro.filter.competitorRankTooltip"),min:0,minPlaceholder:e("cerebro.filter.considerRankMin"),maxPlaceholder:e("cerebro.filter.considerRankMax"),disabled:j})]}),o.jsx(bo,{onClickReset:S,disabled:u||j,clearDisabled:d||j,locked:j,before:o.jsx(Gt,{})})]})})});return o.jsxs(zt,{...n,children:[o.jsx(ai,{onClick:y?void 0:()=>w(q=>!q),icon:o.jsx(E,{icon:mr}),size:"200",children:e("cerebro.floatingButton")}),G]})},Xz=()=>{const e=b(Ce.dataRequest.atom,t=>{var n;return(n=t.content)==null?void 0:n.data.searchResultsCount},[]);return o.jsx(Hi,{data:e,historicalButton:o.jsx(_s,{visible:!1})})},Gb=({marketplace:e,onRemove:t,onDeleteTemporaryRemoved:n,title:s,asin:r,imageSrc:a})=>{const i=b(eN);return h.useCallback(l=>o.jsxs(o.Fragment,{children:[i&&o.jsx(zr,{marketplace:e,onDelete:n,controller:ot}),l.length!==0&&o.jsxs(o.Fragment,{children:[o.jsx(Or,{marketplace:e==null?void 0:e.domain,isWalmart:!0}),o.jsx(Wr,{marketplace:e==null?void 0:e.store,asin:r,title:s,imageSrc:a,moduleId:"cerebro-walmart"}),o.jsx(Ir,{onClick:()=>t(l)})]})]}),[r,i,a,e,n,t,s])},eN=R("hasDeleted",ot.getRequest.atom,e=>{var t;return!!((t=e.content)!=null&&t.data.length)}),tN=({tableSelected:e})=>{const{t}=T(),n=b(Ce.tableFilterRequest.atom),s=C(()=>Ce.tableFilterRequest.actions.onLockedPagination(),[]),r=V("WALMART","pagination"),a=h.useMemo(()=>({onLock:s,pagination:r,search:r,sort:r,itemsPerPage:r}),[r,s]),i=h.useCallback(({items:d,selected:p})=>p?t("cerebro.table.filteredKeywordsSelected",{count:p,value:N({value:p})}):t("cerebro.table.filteredKeywords",{count:d,value:N({value:d})}),[t]),l=h.useMemo(()=>({...e,getTitleText:i}),[i,e]),u=h.useMemo(()=>({value:n}),[n]);return{locked:a,selected:l,filter:u}},oN=(e,t,n,s)=>{const{t:r,language:a}=T(),i=b(n),l=V("WALMART","sorting"),u=!V("COMMON","googleTrendChart"),d=Er(),p=C(()=>{},[l]),m=Vs({marketplace:e,project:"cerebro",onClick:p});return h.useMemo(()=>[{title:"",field:"pinned",static:32,noHeader:!0,customCSS:On,render:g=>o.jsx(Wn,{data:g,temporarilyRemovedController:ot,platform:e==null?void 0:e.platform}),exportTitle:""},{title:r("cerebro.tableWalmart.keywordPhrase"),field:"phrase",tooltip:r("cerebro.tableWalmart.keywordPhraseTooltip"),sortable:!0,disableSorting:l,onClick:p,static:d,responsive:!0,customCSS:cn,render:g=>o.jsx(ln,{simpleTooltip:!0,tool:"cerebro",phraseId:g.phraseId,phrase:g.phrase,marketplace:"WALMART",marketplaceFull:e}),defaultSortDirection:"ASC"},{title:o.jsxs(ar,{children:[r("cerebro.tableWalmart.searchVolumeWalmart"),o.jsx(Yo,{})]}),exportTitle:r("cerebro.tableWalmart.searchVolumeWalmartExport"),field:"quantitativeSearchVolume",tooltip:r("cerebro.filter.searchVolumeWalmartTooltip"),sortable:!0,disableSorting:l,onClick:p,customCSS:Yt,render:g=>o.jsx(Zt,{value:g.quantitativeSearchVolume||void 0,phrase:g.phrase,phraseId:Number(g.id),marketplace:e,isWalmartRestriction:!0,isWalmart:!0,enabledWalmartSearchVolumeChart:!0,enabledGoogleSearchVolumeChar:u}),exportValue:g=>te({value:g.quantitativeSearchVolume,maximumFractionDigits:0}),contentPosition:"right",maxWidth:200},{title:o.jsxs(ar,{children:[r("cerebro.tableWalmart.searchVolume"),o.jsx(Qo,{})]}),exportTitle:r("cerebro.tableWalmart.searchVolumeAmazonExport"),field:"amazonSearchVolume",tooltip:r("cerebro.filter.searchVolumeTooltip"),sortable:!0,disableSorting:l,onClick:p,customCSS:Yt,render:g=>o.jsx(Zt,{value:g.amazonSearchVolume||void 0,phrase:g.phrase,marketplace:e,isWalmartRestriction:!0,enabledWalmartSearchVolumeChart:!0,enabledGoogleSearchVolumeChar:u}),exportValue:g=>g.amazonSearchVolume!=null&&g.amazonSearchVolume>=0?te({value:g.amazonSearchVolume,maximumFractionDigits:0}):"-",contentPosition:"right",maxWidth:200},{title:o.jsx(Xn,{children:r("cerebro.table.searchVolumeTrend")}),exportTitle:r("cerebro.table.searchVolumeTrend"),field:"searchVolumeTrend",tooltip:r("cerebro.table.searchVolumeTrendTooltip"),sortable:!0,disableSorting:l,onClick:p,render:g=>o.jsx(_r,{value:g.searchVolumeTrend}),exportValue:({searchVolumeTrend:g})=>g?te({value:g,maximumFractionDigits:0}):"-",contentPosition:"right",maxWidth:200},{title:o.jsx(nN,{children:r("cerebro.tableWalmart.sponsoredProducts")}),exportTitle:r("cerebro.tableWalmart.sponsoredProducts"),field:"sponsoredProducts",tooltip:r("cerebro.tableWalmart.sponsoredProductsTooltip"),sortable:!0,disableSorting:l,onClick:p,customCSS:X,render:g=>o.jsx(be,{value:g.sponsoredProducts,maximumFractionDigits:0}),exportValue:g=>te({value:g.sponsoredProducts,maximumFractionDigits:0}),contentPosition:"right",maxWidth:200},{title:r("cerebro.tableWalmart.competingProducts"),field:"resultsNumber",tooltip:r("cerebro.tableWalmart.competingProductsTooltip"),sortable:!0,disableSorting:l,onClick:p,customCSS:X,render:g=>o.jsx(Vr,{value:g.resultsNumber>=0?g.resultsNumber:void 0,over:g.resultsNumberOver,maximumFractionDigits:0}),exportValue:g=>g.resultsNumber>=0?te({value:g.resultsNumber,maximumFractionDigits:0}):"-",contentPosition:"right",maxWidth:200},{title:r("cerebro.tableWalmart.matchType"),field:"matchType",tooltip:r("cerebro.tableWalmart.matchTypeTooltip"),customCSS:In,render:g=>o.jsx(Ns,{matchType:g.matchType}),exportValue:({matchType:g})=>$d({matchType:g,isAmazon:!1}),contentPosition:"right",minWidth:90},{title:r("cerebro.table.exportSponsored"),field:"_export_matchType",render:()=>null,exportValue:({matchType:g})=>g.find(x=>x==="sponsored")||g.find(x=>x==="lexical")?1:0},{title:r("cerebro.table.exportOrganic"),field:"_export_matchType",render:()=>null,exportValue:({matchType:g})=>g.find(x=>x==="organic")||g.find(x=>x==="contextual")?1:0},{title:o.jsx($p,{dangerouslySetInnerHTML:{__html:r("cerebro.tableWalmart.sponsoredRankAverage")}}),exportTitle:r("cerebro.tableWalmart.sponsoredRankAverage"),field:"sponsoredAvg",tooltip:r("cerebro.tableWalmart.sponsoredRankAverageTooltip"),sortable:!0,disableSorting:l,onClick:p,customCSS:X,render:g=>o.jsx(be,{value:g.sponsoredAvg,maximumFractionDigits:0}),exportValue:g=>te({value:g.sponsoredAvg,maximumFractionDigits:0}),contentPosition:"right",maxWidth:200},{title:o.jsx($p,{dangerouslySetInnerHTML:{__html:r("cerebro.tableWalmart.sponsoredRankCount")}}),exportTitle:r("cerebro.tableWalmart.sponsoredRankCount"),field:"sponsoredCount",tooltip:r("cerebro.tableWalmart.sponsoredRankCountTooltip"),sortable:!0,disableSorting:l,onClick:p,customCSS:X,render:g=>o.jsx(be,{value:g.sponsoredCount,tooltip:o.jsx("div",{children:g.sponsoredRange&&g.sponsoredRange.length>0?g.sponsoredRange.map(({productId:x,position:S},j)=>o.jsxs(h.Fragment,{children:[j!==0&&o.jsx("br",{}),`${x} - ${S}`]},x)):r("noDataAvailable")}),maximumFractionDigits:0}),exportValue:g=>te({value:g.sponsoredCount,maximumFractionDigits:0}),contentPosition:"right",maxWidth:200},{title:o.jsx(zb,{children:r("cerebro.tableWalmart.positionRank")}),exportTitle:r("cerebro.tableWalmart.positionRank"),field:"rank",tooltip:r("cerebro.tableWalmart.positionRankTooltip"),sortable:!0,disableSorting:l,onClick:p,customCSS:X,render:g=>o.jsx(o.Fragment,{children:Ha(g.rank,g.matchType)}),exportValue:g=>Ha(g.rank,g.matchType,!0),contentPosition:"right",defaultSortDirection:"ASC",maxWidth:200},{title:o.jsx(Nb,{children:r("cerebro.tableWalmart.relativeRank")}),exportTitle:r("cerebro.tableWalmart.relativeRank"),field:"relativeRank",tooltip:r("cerebro.tableWalmart.relativeRankTooltip"),sortable:!0,disableSorting:l,onClick:p,customCSS:X,render:g=>o.jsx(be,{value:g.relativeRank,tooltip:o.jsx("div",{children:g.positionsRange&&(g.positionsRange.length>0||g.rank)?[...g.positionsRange.map(x=>({...x,main:!1})),...g.rank?[{productId:s,position:g.rank,main:!0}]:[]].sort((x,S)=>(x.position||0)-(S.position||0)).map(({productId:x,position:S,main:j},f)=>o.jsxs(h.Fragment,{children:[f!==0&&o.jsx("br",{}),!j&&`${x} - ${S}`,j&&o.jsxs("b",{children:[x," - ",S]})]},x)):r("noDataAvailable")}),maximumFractionDigits:0}),exportValue:g=>te({value:g.relativeRank,maximumFractionDigits:0}),contentPosition:"right",defaultSortDirection:"ASC",maxWidth:200},{title:o.jsx(Vb,{language:a,children:r("cerebro.tableWalmart.competitorRank")}),exportTitle:r("cerebro.tableWalmart.competitorRank"),field:"competitiveAvg",tooltip:r("cerebro.tableWalmart.competitorRankTooltip"),sortable:!0,disableSorting:l,onClick:p,customCSS:X,render:g=>o.jsx(be,{value:g.competitiveAvg,maximumFractionDigits:1}),exportValue:g=>te({value:g.competitiveAvg,maximumFractionDigits:1}),contentPosition:"right",defaultSortDirection:"ASC",maxWidth:200},{title:o.jsx(Ua,{children:r("cerebro.tableWalmart.rankingCompetitors")}),exportTitle:r("cerebro.tableWalmart.rankingCompetitors"),field:"rankingCompetitors",tooltip:r("cerebro.tableWalmart.rankingCompetitorsTooltip"),sortable:!0,disableSorting:l,onClick:p,customCSS:X,render:g=>o.jsx(be,{value:g.rankingCompetitors,maximumFractionDigits:1}),exportValue:g=>te({value:g.rankingCompetitors,maximumFractionDigits:1}),contentPosition:"right",maxWidth:200},{title:o.jsx(Ua,{children:r("cerebro.tableWalmart.competitorPerformanceScore")}),exportTitle:r("cerebro.tableWalmart.competitorPerformanceScore"),field:"competitorPerformanceScore",tooltip:r("cerebro.tableWalmart.competitorPerformanceScoreTooltip"),sortable:!0,disableSorting:l,onClick:p,customCSS:X,render:({competitorPerformanceScore:g})=>o.jsx(o.Fragment,{children:g!=null?`${N({value:g,maximumFractionDigits:1})}/10`:"-"}),exportValue:({competitorPerformanceScore:g})=>g!=null?te({value:g,maximumFractionDigits:1}):"-",contentPosition:"right",maxWidth:300},...i.map(g=>({title:g,field:"_export_positionsRange",render:()=>null,exportValue:x=>{const S=x.positionsRange.filter(({productId:j})=>j===g)[0];return S&&S.position?te({value:S.position,maximumFractionDigits:0}):"-"}})),...m,{title:"",field:"_",responsive:!0,noHeader:!0,noHover:!0}],[u,a,s,e,m,p,i,l,d,r])},$p=c.div`
  min-width: 72px;
`,ar=c.div`
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  justify-content: flex-end;
  text-align: end;
  min-width: 99px;

  & > svg,
  & > img {
    width: 16px;
  }
`,nN=c.div`
  min-width: 48px;
`,sN=({searchId:e})=>{const{data:t,onRemove:n,selected:s}=Dn({dataAtom:Ce.selectors.getSearchDataById,temporarilyRemovedController:ot,refreshDataAction:Ce.dataRequest.actions.pending,project:"cerebro"}),r=b(Ce.selectors.searchMarketplaceData),a=b(Ce.selectors.sortableBySponsoredColumn),i=b(Ce.dataRequest.atom,W=>{var _,G;return((G=(_=W.content)==null?void 0:_.data.productDetails[0])==null?void 0:G.productId)||""},[]),l=zs(),u=b(Ce.selectors.total),{exportId:d,asin:p,title:m,imageSrc:g}=b(Ce.dataRequest.atom,W=>{var _,G,q,U,ye;return{exportId:(_=W.content)==null?void 0:_.data.productDetails.reduce((pe,le)=>le.main?le.productId:pe,""),asin:((q=(G=W.content)==null?void 0:G.data.productDetails[0])==null?void 0:q.productId)||"",title:(U=W.content)==null?void 0:U.data.productDetails.reduce((pe,le)=>le.main?le.title:pe,""),imageSrc:(ye=W.content)==null?void 0:ye.data.productDetails.reduce((pe,le)=>le.main?le.imageUrl:pe,"")}},[]),x=C(Ce.tableFilterRequest.actions.set),S=C(Ce.searchRequest.actions.pending),j=C(()=>(ee.getState().setStatus("table"),Ce.dataRequest.actions.pending({})),[]);h.useEffect(()=>{setTimeout(()=>S({id:e.toString()}),0)},[e,S]);const f=oN(r,a,II,i),v=Os({columns:f,data:t[0],skippedColumnsOnExport:rN}),k=Gb({marketplace:r,onRemove:n,onDeleteTemporaryRemoved:j,asin:p,imageSrc:g,title:m}),{filter:y,locked:w,selected:P}=tN({tableSelected:s}),A=h.useMemo(()=>({render:(W,_,G)=>o.jsx(un,{prepareForExportFunction:pn({columns:v.exportColumns,columnsOrder:G,skipOnFiltering:["positionsRange"]}),requestAction:Ce.exportRequest.actions.pending,putAction:Ce.putExportedKeywordsRequest.actions.pending,loadingSelector:Ce.selectors.exportIsLoading,marketplace:r,project:"cerebro",itemId:d})}),[v.exportColumns,d,r]);return o.jsx(At,{name:"cerebro-walmart-multiple-"+r.TLDomain,filter:y,behavior:zn,locked:w,dimensions:mn,status:l,columns:v.tableColumns,data:t,total:u,selected:P,onFilter:x,leftActions:k,export:A})},rN=["matchType"],aN=()=>{var k;const{t:e}=T(),{isSkeleton:t,searchId:n,wordFrequencyData:s,marketplaceDomain:r}=Ce.useSearchTable();ge();const a=b(FI),{title:i}=Gi({atom:Ca,market:"WALMART"}),l=b(Ce.filterRequest.atom),{request:{atom:u,action:d}}=Ld(),p=b(Ca),[m,g]=h.useState(p==null?void 0:p[0].walmartItemId);h.useEffect(()=>{var w,P;const y=(P=(w=p||[])==null?void 0:w.filter(A=>A.main)[0])==null?void 0:P.walmartItemId;g(y)},[p]);const x=b(Ce.searchRequest.atom,y=>{var w;return(w=y.content)==null?void 0:w.data.marketplace},[]),S=h.useCallback(y=>{const w=p==null?void 0:p[y];w&&x&&g(w.walmartItemId)},[x,p]),j=h.useCallback(()=>{x&&m&&d({searchId:n,marketplace:x,productId:m})},[m,d,x,n]),f=h.useCallback(y=>{x&&m&&d({searchId:n,marketplace:x,productId:y}),g(y)},[m,d,x,n]),v=b(Ce.dataRequest.atom,y=>{var w;return(w=y.content)==null?void 0:w.data.exactProduct},[]);return Ur.set(v),o.jsxs(fn,{children:[o.jsx(Jz,{}),o.jsx(Li,{platform:"WALMART"}),o.jsxs(Sn,{id:"above-table-container",children:[o.jsx(Zi,{isSkeleton:t,children:o.jsxs(nt,{statuses:["loading","filter"],skeleton:o.jsx(on,{}),children:[o.jsxs(Yi,{children:[o.jsx(cN,{children:o.jsx(lN,{children:i})}),o.jsx(Wi,{atom:Ca,market:"WALMART",onChange:S}),o.jsx(Ed,{onOpen:j,disabled:!(x&&m)}),o.jsx(Hr,{title:e("cerebro.boughtTogether.title"),description:e("cerebro.boughtTogether.description"),data:((k=u.content)==null?void 0:k.data)||[],status:u.status,market:"WALMART",referer:"cerebro",blackBox:a,onChangeProduct:f,productId:m})]}),o.jsx(Xz,{}),o.jsxs(iN,{children:[o.jsx(Ki,{isMulti:!0,isWalmart:!0}),o.jsx(Io,{data:s,marketplaceDomain:r,currentWord:l.phrase,project:"cerebro"})]})]})}),o.jsx(sN,{searchId:Number(n)},n)]})]})},iN=c.div`
  display: flex;
  flex-direction: column;

  ${z.laptop} {
    grid-column: 1/3;
    flex-direction: row;
  }
`,lN=c.div`
  ${Le};
  color: ${({theme:e})=>e.systemColors.black};
`,cN=c.div`
  margin-bottom: ${({theme:e})=>e.spacing.sp16};
`,dN=()=>{const{t:e}=T(),{isDemo:t}=ge(),n=V("WALMART","filtering")&&!t,s=b(ve.filterRequest.atom),r=lt({defaultValues:Ko}),{watch:a,handleSubmit:i,reset:l,setValue:u,getValues:d}=r;h.useEffect(()=>{l(s)},[s,l]);const[p,m,g]=to({watch:a,getValues:d,atom:ve.filterRequest.atom,minmaxFields:ls,initValue:Ko}),x=C(n?ve.filterRequest.actions.set:ve.filterRequest.actions.setWithoutCheck,[n]),S=i(x),j=C(ve.filterRequest.actions.reset),f=C(()=>{g&&j({}),l()},[g]);Do(u,S);const v=Ub(),k=Kb(),y=Ro(),[w,P]=Kt(),A=C(U=>sn({afterCheckSuccess:U,project:"cerebro",isWalmart:!0})),W=V("WALMART","filterLibrary"),_=C(ve.tableFilterRequest.actions.setPartial),G=qi("WALMART"),q=o.jsx(_d,{onSubmit:S,id:"CerebroFilter",children:o.jsx(nt,{statuses:["loading"],skeleton:o.jsx(hn,{children:o.jsx(nn,{})}),children:o.jsxs(Fo,{dataTestId:"CerebroFilterShowMore",opened:w,onOpenChange:P,title:o.jsx(Bo,{children:o.jsx(bn,{tool:"cerebro",minMaxFields:ls,initialFilterValue:Ko,searchType:Ot.Single,marketplace:"walmart.com",noPaddingBottom:!w,skipFields:G,executeWithRestriction:A,restricted:W,onSubmit:S,setExpanded:P,setTableFilter:_})}),children:[o.jsxs(Is,{id:"CerebroFilterContent",children:[o.jsx(O,{name:"quantitativeSearchVolume",label:e("cerebro.filter.walmartSearchVolume"),tooltipContent:e("cerebro.filter.searchVolumeWalmartTooltip"),min:0,disabled:n}),o.jsx(O,{name:"amazonSearchVolume",label:e("cerebro.tableWalmart.amazonSearchVolume"),tooltipContent:e("cerebro.filter.searchVolumeTooltip"),min:0,disabled:n}),o.jsx(O,{name:"organicPosition",label:e("cerebro.filter.organicRank"),tooltipContent:e("cerebro.tableWalmart.organicRankTooltip"),min:0,disabled:n}),o.jsx(O,{name:"sponsoredPosition",label:e("cerebro.filter.sponsoredRank"),tooltipContent:e("cerebro.tableWalmart.sponsoredRankTooltip"),min:0,disabled:n}),o.jsxs("div",{children:[o.jsx(He,{label:e("cerebro.filter.showPhrasesContain"),tooltipContent:e("cerebro.filter.showPhrasesContainTooltip")}),o.jsxs(gn,{children:[o.jsx(Ne,{name:"phrase",placeholder:e("cerebro.filter.showPhrasesContainPlaceholder"),disabled:n}),o.jsx(xn,{children:o.jsx(fo,{name:"same-origin",options:y,disabled:n})})]})]}),o.jsx(O,{name:"resultsNumber",label:e("cerebro.filter.competingProducts"),tooltipContent:e("cerebro.filter.competingProductsTooltip"),min:0,disabled:n}),o.jsx(O,{name:"wordsCount",label:e("cerebro.filter.wordCount"),tooltipContent:e("cerebro.filter.wordCountTooltip"),min:0,disabled:n}),o.jsx(ft,{name:"matchType",label:e("cerebro.filter.matchType"),placeholder:e("cerebro.filter.noneSelected"),tooltipContent:e("cerebro.filter.matchTypeTooltip"),options:v,disabled:n}),o.jsx(ft,{name:"bestSeller",label:e("cerebro.filter.bestSeller"),placeholder:e("cerebro.filter.noneSelected"),tooltipContent:e("cerebro.filter.bestSellerTooltip"),options:k,disabled:n}),o.jsx(Mo,{locked:n})]}),o.jsx(bo,{onClickReset:f,disabled:p||n,clearDisabled:m||n,locked:n,before:o.jsx(Gt,{})})]})})});return o.jsxs(zt,{...r,children:[o.jsx(ai,{onClick:w?void 0:()=>P(U=>!U),icon:o.jsx(E,{icon:mr}),size:"200",children:e("cerebro.floatingButton")}),q]})},uN=()=>{const e=b(ve.dataRequest.atom,t=>{var n;return(n=t.content)==null?void 0:n.data.searchResultsCount},[]);return o.jsx(Hi,{data:e,historicalButton:o.jsx(_s,{visible:!1})})},Pp=Date.now(),pN=(e,t)=>{const{t:n}=T(),{isDemo:s}=ge(),r=V("WALMART","sorting")&&!s,a=!V("COMMON","googleTrendChart"),i=Er(),l=C(()=>r?ve.tableFilterRequest.actions.onLockedSorting():void 0,[r]),u=Vs({marketplace:e,project:"cerebro",onClick:l});return h.useMemo(()=>[{title:"",field:"pinned",static:32,noHeader:!0,customCss:On,render:d=>o.jsx(Wn,{data:d,temporarilyRemovedController:ot,platform:e==null?void 0:e.platform}),exportTitle:""},{title:n("cerebro.tableWalmart.keywordPhrase"),field:"phrase",tooltip:n("cerebro.tableWalmart.keywordPhraseTooltip"),sortable:!0,disableSorting:r,onClick:l,static:i,responsive:!0,customCSS:cn,render:d=>o.jsx(ln,{tool:"cerebro",phraseId:d.phraseId,phrase:d.phrase,marketplace:"WALMART",marketplaceFull:e,simpleTooltip:!0}),exportValue:d=>d.phrase,exportTitle:"Product",defaultSortDirection:"ASC"},{title:o.jsxs(ar,{children:[n("cerebro.tableWalmart.searchVolumeWalmart"),o.jsx(Yo,{})]}),exportTitle:n("cerebro.tableWalmart.searchVolumeWalmartExport"),field:"quantitativeSearchVolume",tooltip:n("cerebro.filter.searchVolumeWalmartTooltip"),sortable:!0,disableSorting:r,onClick:l,customCSS:Yt,render:d=>o.jsx(Zt,{value:d.quantitativeSearchVolume||void 0,phrase:d.phrase,phraseId:Number(d.id),marketplace:e,isWalmartRestriction:!0,isWalmart:!0,enabledWalmartSearchVolumeChart:!0,enabledGoogleSearchVolumeChar:a}),exportValue:d=>te({value:d.quantitativeSearchVolume,maximumFractionDigits:0}),contentPosition:"right",maxWidth:200},{title:o.jsxs(ar,{children:[n("cerebro.tableWalmart.searchVolume"),o.jsx(Qo,{})]}),exportTitle:n("cerebro.tableWalmart.searchVolumeAmazonExport"),field:"amazonSearchVolume",tooltip:n("cerebro.filter.searchVolumeTooltip"),sortable:!0,disableSorting:r,onClick:l,customCSS:Yt,render:({phrase:d,amazonSearchVolume:p})=>o.jsx(Zt,{value:p||void 0,phrase:d,marketplace:e,isWalmartRestriction:!0,enabledWalmartSearchVolumeChart:!0,enabledGoogleSearchVolumeChar:a}),exportValue:d=>d.amazonSearchVolume!=null&&d.amazonSearchVolume>=0?te({value:d.amazonSearchVolume,maximumFractionDigits:0}):"-",contentPosition:"right",maxWidth:200},{title:n("cerebro.tableWalmart.competingProducts"),field:"resultsNumber",tooltip:n("cerebro.tableWalmart.competingProductsTooltip"),sortable:!0,disableSorting:r,onClick:l,customCSS:X,render:d=>o.jsx(Vr,{value:d.resultsNumber>=0?d.resultsNumber:void 0,over:d.resultsNumberOver,maximumFractionDigits:0}),exportValue:d=>d.resultsNumber>=0?te({value:d.resultsNumber,maximumFractionDigits:0}):"-",contentPosition:"right",maxWidth:200},{title:n("cerebro.tableWalmart.sponsoredProducts"),field:"sponsoredProducts",tooltip:n("cerebro.tableWalmart.sponsoredProductsTooltip"),sortable:!0,disableSorting:r,onClick:l,customCSS:X,render:d=>o.jsx(be,{value:d.sponsoredProducts,maximumFractionDigits:0}),exportValue:({sponsoredProducts:d})=>d?te({value:d,maximumFractionDigits:0}):"-",contentPosition:"right",maxWidth:200},{title:n("cerebro.tableWalmart.matchType"),field:"matchType",tooltip:n("cerebro.tableWalmart.matchTypeTooltip"),customCSS:In,render:d=>o.jsx(Ns,{matchType:d.matchType}),exportValue:({matchType:d})=>$d({matchType:d,isAmazon:!1}),contentPosition:"right",minWidth:90},{title:n("cerebro.table.exportSponsored"),field:"_export_matchType",render:()=>null,exportValue:({matchType:d})=>d.find(p=>p==="sponsored")||d.find(p=>p==="lexical")?1:0},{title:n("cerebro.table.exportOrganic"),field:"_export_matchType",render:()=>null,exportValue:({matchType:d})=>d.find(p=>p==="organic")||d.find(p=>p==="contextual")?1:0},{title:o.jsx(Fd,{children:n("cerebro.tableWalmart.organicRank")}),exportTitle:n("cerebro.tableWalmart.organicRank"),field:"organicPosition",tooltip:n("cerebro.tableWalmart.organicRankTooltip"),sortable:!0,disableSorting:r,onClick:l,customCSS:X,render:d=>o.jsx(be,{value:d.organicPosition,maximumFractionDigits:0,tooltip:d.organicPosition?d.organicScrapedAt?n(`table.scrapedDate.${Ea(d.organicScrapedAt*1e3,Pp)}`):"-":void 0}),exportValue:({organicPosition:d})=>d?te({value:d,maximumFractionDigits:0}):"-",contentPosition:"right",defaultSortDirection:"ASC",maxWidth:200},{title:o.jsx(zi,{children:n("cerebro.tableWalmart.sponsoredRank")}),exportTitle:n("cerebro.tableWalmart.sponsoredRank"),field:"sponsoredPosition",tooltip:n("cerebro.tableWalmart.sponsoredRankTooltip"),sortable:!0,disableSorting:r,onClick:l,customCSS:X,render:d=>o.jsx(be,{value:d.sponsoredPosition||void 0,maximumFractionDigits:0,tooltip:d.sponsoredPosition?d.sponsoredScrapedAt?n(`table.scrapedDate.${Ea(d.sponsoredScrapedAt*1e3,Pp)}`):"-":void 0}),exportValue:({sponsoredPosition:d})=>d?te({value:d,maximumFractionDigits:0}):"-",contentPosition:"right",defaultSortDirection:"ASC",maxWidth:200},...u,{title:"",field:"_",responsive:!0,noHeader:!0,noHover:!0}],[a,e,u,l,r,i,n])},mN=({tableSelected:e,isDemo:t})=>{const{t:n}=T(),s=b(ve.tableFilterRequest.atom),r=C(()=>ve.tableFilterRequest.actions.onLockedPagination(),[]),a=V("WALMART","pagination")&&!t,i=h.useCallback(({items:p,selected:m})=>m?n("cerebro.table.filteredKeywordsSelected",{count:m,value:N({value:m})}):n("cerebro.table.filteredKeywords",{count:p,value:N({value:p})}),[n]),l=h.useMemo(()=>({onLock:r,pagination:a,search:a,sort:a,itemsPerPage:a}),[a,r]),u=h.useMemo(()=>({...e,getTitleText:i}),[i,e]),d=h.useMemo(()=>({value:s}),[s]);return{locked:l,selected:u,filter:d}},hN=h.memo(({searchId:e})=>{const{isDemo:t}=ge(),{data:n,onRemove:s,selected:r}=Dn({dataAtom:ve.selectors.getSearchDataById,temporarilyRemovedController:ot,refreshDataAction:ve.dataRequest.actions.pending,project:"cerebro"}),a=b(ve.selectors.searchMarketplaceData);b(ve.selectors.sortableBySponsoredColumn);const i=zs(),l=b(ve.selectors.total),{exportId:u,asin:d,title:p,imageSrc:m}=b(ve.dataRequest.atom,A=>{var W,_,G,q;return{exportId:(W=A.content)==null?void 0:W.data.productDetails.productId,asin:((_=A.content)==null?void 0:_.data.productDetails.productId)||"",title:(G=A.content)==null?void 0:G.data.productDetails.title,imageSrc:(q=A.content)==null?void 0:q.data.productDetails.imageUrl}},[]),g=C(t?ve.tableFilterRequest.actions.setWithoutCheck:ve.tableFilterRequest.actions.set,[t]),x=C(ve.searchRequest.actions.pending),S=C(()=>(ee.getState().setStatus("table"),ve.dataRequest.actions.pending({})),[]);h.useEffect(()=>{setTimeout(()=>x({id:e.toString()}),0)},[e,x]);const j=pN(a),f=Os({columns:j,data:n[0],skippedColumnsOnExport:gN}),v=Gb({marketplace:a,asin:d,title:p,imageSrc:m,onRemove:s,onDeleteTemporaryRemoved:S}),{locked:k,selected:y,filter:w}=mN({tableSelected:r,isDemo:t}),P=h.useMemo(()=>({render:(A,W,_)=>o.jsx(un,{prepareForExportFunction:pn({columns:f.exportColumns,columnsOrder:_}),requestAction:ve.exportRequest.actions.pending,putAction:ve.putExportedKeywordsRequest.actions.pending,loadingSelector:ve.selectors.exportIsLoading,marketplace:a,project:"cerebro",itemId:u})}),[f.exportColumns,u,a]);return o.jsx(At,{name:"cerebro-walmart-single-"+a.TLDomain,filter:w,behavior:zn,locked:k,dimensions:mn,status:i,columns:f.tableColumns,data:n,total:l,selected:y,onFilter:g,leftActions:v,export:P})}),gN=["matchType"],xN=()=>{var j;const{t:e}=T(),{isSkeleton:t,searchId:n,wordFrequencyData:s,marketplaceDomain:r}=ve.useSearchTable();ge();const a=b(mz),{title:i,subtitle:l}=Gi({atom:gp,market:"WALMART"}),u=b(ve.filterRequest.atom),{request:{atom:d,action:p}}=Ld(),m=b(hz),g=b(ve.searchRequest.atom,f=>{var v;return(v=f.content)==null?void 0:v.data.marketplace},[]),x=h.useCallback(()=>{g&&m&&p({searchId:n,marketplace:g,productId:m})},[g,m,p,n]),S=b(ve.dataRequest.atom,f=>{var v;return(v=f.content)==null?void 0:v.data.exactProduct},[]);return Ur.set(S),o.jsxs(fn,{children:[o.jsx(dN,{}),o.jsx(Li,{platform:"WALMART"}),o.jsxs(Sn,{id:"above-table-container",children:[o.jsx(Zi,{isSkeleton:t,children:o.jsxs(nt,{statuses:["loading","filter"],skeleton:o.jsx(on,{}),children:[o.jsxs(Yi,{children:[o.jsxs(yN,{children:[o.jsx(SN,{children:i}),o.jsx(fN,{children:l})]}),o.jsx(Wi,{atom:gp,market:"WALMART"}),o.jsx(Ed,{onOpen:x,disabled:!(g&&m)}),o.jsx(Hr,{title:e("cerebro.boughtTogether.title"),description:e("cerebro.boughtTogether.description"),data:((j=d.content)==null?void 0:j.data)||[],status:d.status,market:"WALMART",referer:"cerebro",blackBox:a})]}),o.jsx(uN,{}),o.jsxs(bN,{children:[o.jsx(Ki,{isMulti:!1,isWalmart:!0}),o.jsx(Io,{data:s,marketplaceDomain:r,currentWord:u.phrase,project:"cerebro"})]})]})}),o.jsx(hN,{searchId:Number(n)},n)]})]})},bN=c.div`
  display: flex;
  flex-direction: column;
  gap: ${e=>e.theme.spacing.sp16};

  ${Qn} {
    flex: 0.68;
  }

  ${z.laptop} {
    grid-column: 1/3;
    flex-direction: row;
    gap: 0;
  }
`,fN=c.div`
  ${fe};
`,SN=c.div`
  ${Le};
  color: ${({theme:e})=>e.systemColors.black};
`,yN=c.div`
  margin-bottom: ${({theme:e})=>e.spacing.sp16};
`,jN=h.memo(()=>{const{isDemo:e,hasPlanGroup:t}=ne();return t?o.jsxs(rc,{children:[o.jsx(Ye,{path:"/",element:e?o.jsx(Tl,{}):o.jsx(kl,{})}),o.jsx(Ye,{path:"index-extension",element:e?o.jsx(Tl,{}):o.jsx(kl,{})}),o.jsx(Ye,{path:"index-walmart-extension",element:e?o.jsx(Tl,{}):o.jsx(kl,{})}),o.jsx(Ye,{path:"amazon/view/:id",element:o.jsx(Yz,{})}),o.jsx(Ye,{path:"amazon/view-multi-search/:id",element:o.jsx(zz,{})}),o.jsx(Ye,{path:"walmart/view/:id",element:o.jsx(xN,{})}),o.jsx(Ye,{path:"walmart/view-multi-search/:id",element:o.jsx(aN,{})})]}):null}),qd=c.div`
  cursor: pointer;
  & > :first-child {
    margin-left: ${({theme:e})=>e.spacing.sp4};
    margin-right: ${({theme:e})=>e.spacing.sp4};
    margin-top: 3px;

    & > div:first-child {
      box-shadow: none !important;
      background-color: ${({theme:e})=>e.systemColors.grey100};
      border-color: ${({theme:e})=>e.systemColors.grey100};

      ${({disabled:e})=>e&&Z`
          cursor: not-allowed;
          & > * {
            opacity: 0.5;
          }
        `}
    }
  }
`,Bp=e=>(t,...n)=>e(t.map(s=>s.toLocaleUpperCase().replace("","")),n);var Hl;(function(e){const t=`${ys}/keyword-tracker`;e.validateAsin=async n=>D({url:$(`${t}/validate-asin`,{}),params:n,method:"POST",withCredentials:0})})(Hl||(Hl={}));const Hd=({addTags:e,currentTags:t})=>{const n=Xt();return h.useEffect(()=>n.subscribe(dk,s=>{e(JSON.parse(s))}),[JSON.stringify(t)]),null},kN=({disabled:e,addAsins:t,marketplace:n,asins:s,maxAsins:r,children:a})=>{const i=n==="walmart.com"?"WALMART":"AMAZON",l=V(i||"AMAZON","competitors"),{isDemo:u}=ne(),d=C(()=>we.open({platform:i,restriction:"competitors",project:"cerebro",trigger:'User Click: "Get Competitors Cerebro"'}),[i]);return o.jsx(ty,{disabled:e,onAddAsins:t,marketplace:n,asins:s,maxAsins:r,isDemo:!1,locked:l&&!u,openUpgradeModal:d,type:"cerebro",children:a})},TN=e=>e.split(/[\x09 ,;\n]+/).map(t=>t.trim()).filter(t=>!!t),vN=h.memo(()=>{const{register:e,control:t,handleSubmit:n,setValue:s}=lt({defaultValues:{asins:[],excludeVariations:!1},mode:"all"}),{t:r}=T(),a=b(Ue),i=C(Mn),l=h.useMemo(()=>a?ce("domain",a).platform==="WALMART":!1,[a]),u=b(od.atom,P=>P.status==="loading",[]),d=ee(P=>P.status),{cerebroMaxAsins:p,isDemo:m,notFreeAndStarter:g}=ne(),x=V(l?"WALMART":"AMAZON","multiSearch"),S=Bp(P=>{s("asins",P)}),j=C(Jh),f=n(j),v=C(P=>we.open({platform:a!=="walmart.com"?"AMAZON":"WALMART",restriction:"pagination",trigger:P}),[a]),k=Nr(),y=Ur.get();h.useEffect(()=>{s("excludeVariations",y)},[y,s]);const w=o.jsxs(DN,{children:[o.jsx(IN,{children:r("cerebro.searchBarTooltipTitle")}),o.jsx(WN,{children:r("cerebro.inputPlaceholderNotFree",{maxAsins:p})}),o.jsx(F,{size:"100",onClick:()=>v('User Click: "Asin input"'),children:r("cerebro.searchBarTooltipButton")})]});return o.jsxs(AN,{onSubmit:f,children:[o.jsxs(FN,{children:[o.jsx(tt,{name:"asins",control:t,render:({field:P})=>{const{ref:A,...W}=P,_=P.value,G={placeholder:g?r("cerebro.inputPlaceholderNotFree",{maxAsins:p-_.length}):m?r("cerebro.inputPlaceholderFree"):r("cerebro.inputPlaceholder",{maxAsins:p})},q=x&&_.length>0&&!m?{locked:!0,lockedMessage:r("cerebro.upgradeForMultiSearch")}:{};return o.jsx(Zn,{...W,...q,inputProps:G,loading:d==="loading",size:"200",clearOnError:!0,onChange:Bp(W.onChange),addTagsOnPressKeys:["Comma","Space"],onSeparate:TN,maxTags:x?1:p,disabled:m,validation:U=>Hl.validateAsin({asin:U,marketplace:ce("domain",a||"amazon.com").store,toolPlatform:l?"walmart":"amazon"}).then(ye=>ye.status==="success"),renderBeforeTags:o.jsx(qd,{disabled:d==="loading"||m&&!k,onClick:U=>U.stopPropagation(),children:o.jsx(jc,{options:bi(),value:a,onChange:U=>U!=null&&i(U.value),groupOptions:!0,appendTo:document.body})})})}}),m&&!k&&o.jsx(re,{colorType:"light",content:w,interactive:!0,hideOnClick:!0,offset:-20,maxWidth:304,children:o.jsx(ma,{})})]}),o.jsxs(wN,{children:[o.jsx(tt,{name:"asins",control:t,render:({field:P})=>{const A=P.value,W=u||d==="loading"||A.length===0||A.length>p||m;return o.jsxs($N,{id:"CerebroSearchButtons",children:[o.jsxs(RN,{buttonType:"primary",size:"200",disabled:W,"data-testid":"getkeywords",children:[r("cerebro.getKeywords"),m&&o.jsx(ma,{onClick:()=>v('User Click: "Get Keywords Button"')})]}),o.jsx(kN,{addAsins:S,disabled:W,marketplace:a||"amazon.com",asins:A,maxAsins:p,children:m?o.jsx(ma,{onClick:()=>v('User Click: "Get Competitors Button"')}):null}),o.jsx(Hd,{addTags:S,currentTags:A})]})}}),o.jsxs(PN,{children:[o.jsx(ac,{...e("excludeVariations"),disabled:d==="loading"||m,"data-testid":"excludevariations",children:r("cerebro.excludeVariations")}),!m&&o.jsx(BN,{children:o.jsx(re,{content:r(l?"cerebro.excludeVariationsTooltipWalmart":"cerebro.excludeVariationsTooltipAmazon"),children:o.jsx("div",{children:o.jsx(MN,{icon:Za})})})}),m&&o.jsx(ma,{onClick:()=>v('User Click: "Exclude variations"')})]})]})]})}),CN=Z`
  ${Zn.Input} {
    text-transform: uppercase;

    &::placeholder {
      text-transform: initial;
    }
  }
`,AN=c.form`
  position: relative;
  display: grid;
  grid-template-columns: 1fr;
  grid-gap: ${({theme:e})=>e.spacing.sp8};

  ${CN}
  ${z.desktop} {
    grid-template-columns: 1fr auto;
  }
`,wN=c.div`
  display: grid;
  grid-template-columns: 1fr;
  grid-column-gap: ${({theme:e})=>e.spacing.sp16};
  grid-row-gap: ${({theme:e})=>e.spacing.sp8};
  align-items: flex-start;

  ${z.mobile} {
    grid-template-columns: auto 1fr;
  }
`,$N=c.div`
  flex: 1;
  display: flex;

  ${z.mobile} {
    flex: 0;
  }

  ${F} {
    flex: 1;

    ${z.mobile} {
      flex: 0 0 auto;
    }

    justify-content: center;
  }

  & > :not(:first-child) {
    margin-left: ${({theme:e})=>e.spacing.sp8};
  }
`,PN=c.div`
  display: flex;
  align-items: center;
  height: 40px;
  position: relative;
`,BN=c.div`
  margin-left: 6px;
`,MN=c(E)`
  font-size: 16px;
`,ma=c.div`
  position: absolute;
  left: 0;
  top: 0;
  right: 0;
  bottom: 0;
  z-index: 1;
`,RN=c(F)`
  position: relative;
`,FN=c.div`
  position: relative;
`,DN=c.div`
  display: flex;
  flex-direction: column;
  align-items: center;
`,IN=c.div`
  ${St};
  margin-bottom: ${e=>e.theme.spacing.sp8};
`,WN=c.div`
  ${fe};
  margin-bottom: ${e=>e.theme.spacing.sp16};
`,Zb=()=>{const{t:e}=T(),{isOpen:t}=b(Ra.atom),n=C(Ra.close);return o.jsx(Rt,{isOpen:t,onClickOutside:n,onClose:n,title:e("amazonBrandRegistry.modal.titleNew"),subtitle:o.jsxs("div",{children:[o.jsx("p",{children:e("amazonBrandRegistry.modal.text.part1")}),o.jsxs("p",{children:[o.jsx("span",{children:e("amazonBrandRegistry.modal.text.part2.part1")})," ",o.jsx(Mp,{href:"https://brandservices.amazon.com/",target:"_blank",rel:"noreferrer",children:o.jsx(F,{buttonType:"text",type:"button",size:"100",children:e("amazonBrandRegistry.modal.text.part2.button")})})," ",o.jsx("span",{children:e("amazonBrandRegistry.modal.text.part2.part2")})]}),o.jsx("p",{children:e("amazonBrandRegistry.modal.text.part3")})]}),children:o.jsxs(ON,{children:[o.jsx(F,{buttonType:"secondary",type:"button",size:"200",onClick:n,children:e("buttons.decline")}),o.jsx(Mp,{href:"https://www.helium10.com/blog/amazon-brand-registry-fast/",target:"_blank",rel:"noreferrer",children:o.jsx(F,{buttonType:"primary",type:"button",size:"200",children:e("amazonBrandRegistry.modal.acceptButton")})})]})})},ON=c.div`
  display: flex;
  align-items: center;
  justify-content: flex-end;

  margin-top: ${({theme:e})=>e.spacing.sp32};

  & > :not(:first-child) {
    margin-left: ${({theme:e})=>e.spacing.sp8};
  }
`,Mp=c.a`
  text-decoration: none;

  & > ${F} {
    font-size: 16px;
  }
`,zN=()=>{const{t:e}=T(),{isDemo:t}=ne(),n=b(Pi),s=b(st),r=Cc(s),a=Ka(),i=[`${me()}`,`${me()}/index-extension`,`${me()}/index-walmart-extension`].map(d=>({path:d})),l=!!Aa(i,a.pathname);RD();const u=Nr();return o.jsxs(VN,{children:[o.jsxs(sc,{children:[o.jsx("title",{children:"Cerebro"}),o.jsx("meta",{name:"description",content:"Cerebro"})]}),o.jsx(Lg,{project:"cerebro"}),!l&&o.jsx(Gx,{to:me()}),o.jsx(A2,{}),o.jsx(vN,{}),l&&s&&(!t||u)&&o.jsx(Va,{title:e(s.platform==="AMAZON"?"example.cerebro.amazon":"example.cerebro.walmart"),list:r}),!l&&n&&o.jsx(Zx,{}),o.jsx(jN,{}),o.jsx(hc,{}),o.jsx(NN,{})]})},NN=()=>o.jsxs(o.Fragment,{children:[o.jsx(hi,{project:"cerebro"}),o.jsx(Sd,{}),o.jsx(Zb,{}),o.jsx(ld,{}),o.jsx(vm,{}),o.jsx(mm,{}),o.jsx(fc,{})]}),VN=c.div`
  display: flex;
  flex-direction: column;
  flex: 1;
`,_N=()=>{const{t:e}=T();return o.jsx(ob,{title:e("magnet.title"),description:e("magnet.description"),learnProject:"Magnet",learnTooltip:e("magnet.learnTooltip"),project:"magnet"})},Yb="https://re-cdn.helium10.com/container/static/landing-magnet-HwMYxMeP.svg",EN=["iq","impressionExact30","wordsCount","resultsNumber","phrase","exactTitleMatchProductsCount","matchType","searchVolumeTrend30","exclude","amazonOnly","quantitativeSearchVolume","amazonSearchVolume","bestSeller","includeAny"],LN=["amazonOnly","bestSeller","includeAny"],qN=({tab:e})=>{const{t}=T(),n=e==="single";Xm(EN,LN);const s=C(cs.actions.set),r=C(ds),{marketplace:a,keywords:i}=dr({arrayFormat:"index"}),l=C(nd);return h.useEffect(()=>{i&&a?(s(i.length>1?"multiple":"single"),setTimeout(()=>r(i),0),l({keywords:i,marketplace:a})):ee.getState().setStatus("loaded")},[]),o.jsx(rb,{imageSrc:Yb,title:t(n?"magnet.landingSingleTitle":"magnet.landingMultipleTitle"),description:t(n?"magnet.landingSingleDescription":"magnet.landingMultipleDescription"),project:"magnet",learnProject:"Magnet"})},HN=h.memo(()=>{const{t:e}=T(),t=b(st),n=wc(t);return bb(),o.jsx(xb,{imageSrc:Yb,title1:e("magnet.landingDemo.title1"),title2:e("magnet.landingDemo.title2"),subtitle:e("magnet.landingDemo.subtitle"),description:e("magnet.landingDemo.description"),project:"magnet",learnProject:"Magnet",exampleList:n})}),Qb=e=>{const{t}=T();return o.jsxs(UN,{children:[o.jsxs(KN,{children:[o.jsx(Ui,{children:t("magnet.keywordSummary.title")}),(e==null?void 0:e.totalKeywords)!=null&&o.jsx(jt,{value:e==null?void 0:e.totalKeywords,label:t("magnet.keywordSummary.totalKeywords")}),(e==null?void 0:e.exactAvg)!=null&&o.jsx(jt,{value:e==null?void 0:e.exactAvg,label:t("magnet.keywordSummary.averageSearchVolume")}),(e==null?void 0:e.totalSearchVolume)&&o.jsx(jt,{value:e==null?void 0:e.totalSearchVolume,label:t("magnet.keywordSummary.totalSearchVolume")}),(e==null?void 0:e.amazonSVAvg)!=null&&o.jsx(jt,{value:e==null?void 0:e.amazonSVAvg,label:t("magnet.keywordSummary.averageSearchVolume")}),(e==null?void 0:e.totalAmazonSV)&&o.jsx(jt,{value:e==null?void 0:e.totalAmazonSV,label:t("magnet.keywordSummary.totalAmazonSV")}),(e==null?void 0:e.totalWalmartSV)&&o.jsx(jt,{value:e==null?void 0:e.totalWalmartSV,label:t("magnet.keywordSummary.totalWalmartSV")}),(e==null?void 0:e.iqAvg)!=null&&o.jsx(jt,{value:e==null?void 0:e.iqAvg,label:t("magnet.keywordSummary.averageMagnetIq")}),(e==null?void 0:e.competingAvg)!=null&&o.jsx(jt,{value:e==null?void 0:e.competingAvg,label:t("magnet.keywordSummary.averageCompetingProducts")})]}),o.jsx(To,{})]})},UN=c(Vd)`
  ${To} {
    display: none;

    ${z.laptop} {
      display: block;
    }
  }
`,KN=c.div`
  flex: 1;

  ${z.laptop} {
    padding-right: ${({theme:e})=>e.spacing.sp24};
  }
`,GN=({data:e})=>{const{y:t,color:n,name:s}=e;return o.jsxs(ZN,{children:[o.jsx(YN,{color:n}),o.jsx(QN,{children:s}),o.jsxs(JN,{children:["(",t,")%"]})]})},ZN=c.div`
  display: flex;
  align-items: center;
`,YN=c.div`
  flex: 0 0 auto;
  width: 10px;
  height: 10px;
  border-radius: 5px;
  background-color: ${({color:e})=>e};
`,QN=c.div`
  ${St};
  margin-left: ${({theme:e})=>e.spacing.sp4};

  ${z.mobile} {
    ${Le};
    margin-left: ${({theme:e})=>e.spacing.sp8};
  }

  color: ${({theme:e})=>e.systemColors.black} !important;
  white-space: nowrap;
`,JN=c.div`
  ${fe};
  margin-left: ${({theme:e})=>e.spacing.sp4};

  ${z.mobile} {
    ${Fe};
    margin-left: ${({theme:e})=>e.spacing.sp8};
  }
`,XN=({data:e,isHorizontal:t})=>{const n=t?eV:tV;return o.jsx(n,{children:e.map(s=>o.jsx(GN,{data:s},s.name))})},eV=c.div`
  display: flex;
  flex-wrap: wrap;

  & > * {
    margin-bottom: ${({theme:e})=>e.spacing.sp8};

    :not(:last-child) {
      margin-right: ${({theme:e})=>e.spacing.sp24};
    }
  }
`,tV=c.div`
  & > :not(:first-child) {
    margin-top: ${({theme:e})=>e.spacing.sp8};
  }
`,Jb=({data:e})=>{const{t}=T(),n=iV(e),s=h.useMemo(()=>({chart:{type:"pie",margin:[0,0,0,0],width:165},tooltip:{valueSuffix:"%",enabled:!0},plotOptions:{pie:{borderWidth:0,dataLabels:{enabled:!1},size:117,innerSize:69,states:{hover:{halo:null}}}},series:[{type:"pie",name:t("magnet.searchVolumeDistribution.seriesName"),data:[...n].reverse()}]}),[n,t]);return o.jsxs(oV,{children:[o.jsxs(nV,{children:[o.jsx(sV,{children:t("magnet.searchVolumeDistribution.title")}),o.jsxs(rV,{children:[o.jsx(aV,{children:o.jsx(sy,{options:s,height:117})}),o.jsx(XN,{data:n})]})]}),o.jsx(To,{})]})},oV=c.div`
  display: flex;
  margin-left: -${({theme:e})=>e.spacing.sp24};

  ${z.laptop} {
    margin-left: 0;
  }

  ${To} {
    display: none;
  }

  ${z.largeDesktop} {
    ${To} {
      display: block;
    }
  }
`,nV=c.div`
  ${z.laptop} {
    padding-right: ${({theme:e})=>e.spacing.sp24};
  }

  flex: 1;
`,sV=c(Ui)`
  margin-left: ${({theme:e})=>e.spacing.sp24};
  white-space: nowrap;
`,rV=c.div`
  display: flex;
  align-items: center;
  margin-top: ${({theme:e})=>e.spacing.sp20};
`,aV=c.div`
  min-width: 165px;
  min-height: 117px;
`,iV=e=>{const{t}=T();return h.useMemo(()=>e.map(({name:n,y:s,value:r})=>({y:s!=null?Math.round(100*s)/100:Math.round(100*r)/100,name:t(`magnetChart.options.${n}`),color:lV[n]})).reverse(),[e,t])},lV={">10000":"#a5dbff","5000-10000":"#5cb3ff","1000-5000":"#0a6fe8","<1000":"#003873",very_low:"#a5dbff",low:"#5cb3ff",medium:"#0a6fe8",high:"#0253b6",very_high:"#003873"},Xb=async e=>{const{demo:t,...n}=e,s=t?"/demo":"";return D({url:$(`${I}/api/magnet/v1/walmart/search/multiple/${e.id}/export${s}`,$o({data:n,minmaxFields:tr,isExport:!0}),{arrayFormat:"bracket"}),method:"GET",useSessionAccountId:!0})},ef=async e=>{const{demo:t,...n}=e,s=`/api/magnet/v1/walmart/search/single/${e.id}/export`,r=`/api/magnet/v1/walmart/search/single/demo/${e.id}/exported-data`;return D({url:$(`${I}${t?r:s}`,$o({data:n,minmaxFields:xs,isExport:!0}),{arrayFormat:"bracket"}),method:"GET",useSessionAccountId:!0})},cV=he("exportMagnetAmazonSingle",async e=>ig(e),{fulfilledReaction:({params:{onSuccess:e},result:t})=>{e(t.data)}}),dV=he("exportMagnetAmazonMultiple",async e=>eg(e),{fulfilledReaction:({params:{onSuccess:e},result:t})=>{e(t.data)}}),uV=he("exportMagnetWalmartSingle",async e=>ef(e),{fulfilledReaction:({params:{onSuccess:e},result:t})=>{e(t.data)}}),pV=he("exportMagnetWalmartMultiple",async e=>Xb(e),{fulfilledReaction:({params:{onSuccess:e},result:t})=>{e(t.data)}}),Qi=({name:e,label:t,lineLabel:n,tooltip:s,onChangeValue:r,disabled:a})=>{const{control:i}=_e();return o.jsx(tt,{name:e,control:i,shouldUnregister:!1,render:l=>o.jsxs("div",{children:[t&&o.jsx(He,{label:t,tooltipContent:s}),o.jsxs(mV,{children:[o.jsx(ac,{...l.field,value:l.field.value,defaultValue:l.field.value,checked:l.field.value===!0||l.field.value===1,onChange:u=>{l.field.onChange(u),r==null||r(!l.field.value)},disabled:a}),o.jsx(hV,{label:n})]})]})})},mV=c.div`
  display: flex;
  align-items: center;
  min-height: 32px;

  & > :first-child > span {
    margin-top: 0;
  }
`,hV=c(He)`
  margin: 0 0 0 4px;
`,Ji=e=>{const t=Tr(),n=V(e,"brandAnalytics")||!t,s=V(e,lo),r=V(e,"seeMonthlySalesColumn");return h.useMemo(()=>[...n?["clickShareRate","conversionShareRate","searchFrequencyRank"]:[],"searchFrequencyRank",...s?[ue]:[],...r?["monthlySales"]:[]],[n,r,s])},gV=({isSingle:e})=>{const{t}=T(),n=b(Qe.filterRequest.atom),s=lt({defaultValues:Go}),{register:r,watch:a,handleSubmit:i,reset:l,setValue:u,getValues:d}=s;h.useEffect(()=>{l(n)},[n,l]);const[p,m,g]=to({watch:a,getValues:d,atom:Qe.filterRequest.atom,minmaxFields:gs,initValue:Go}),x=C(Qe.filterRequest.actions.set),S=i(x),j=C(Qe.filterRequest.actions.reset),f=C(()=>{g&&j({}),l()},[g]);Do(u,S);const v=V("AMAZON","filtering"),k=b(Qe.selectors.searchMarketplaceData),y=Ro(),[w,P]=Kt(),A=C(U=>sn({afterCheckSuccess:U,project:"magnet",isWalmart:!1})),W=V("AMAZON","filterLibrary"),_=b(Qe.selectors.searchMarketplaceDataNullable),G=C(Qe.tableFilterRequest.actions.setPartial),q=Ji("AMAZON");return o.jsx(zt,{...s,children:o.jsx(xV,{onSubmit:S,children:o.jsx(nt,{statuses:["loading"],skeleton:o.jsx(hn,{children:o.jsx(nn,{})}),children:o.jsxs(Fo,{opened:w,onOpenChange:P,title:o.jsx(Bo,{children:o.jsx(bn,{tool:"magnet",minMaxFields:gs,initialFilterValue:Go,searchType:Ot.Multi,marketplace:_==null?void 0:_.domain,noPaddingBottom:!w,skipFields:q,executeWithRestriction:A,restricted:W,onSubmit:S,setExpanded:P,setTableFilter:G})}),children:[o.jsxs(tf,{children:[o.jsx(O,{name:"iq",label:t("magnet.keywordSearchSummary.magnetIQScore"),tooltipContent:t("cerebro.filter.cerebroIQScoreTooltip"),min:0,disabled:v,"data-testid":"magnetiqscore"}),o.jsx(O,{name:"impressionExact30",label:t("cerebro.filter.searchVolume"),tooltipContent:t("cerebro.filter.searchVolumeTooltip"),min:0,disabled:v,"data-testid":"searchvolume"}),o.jsx(O,{name:"wordsCount",label:t("cerebro.filter.wordCount"),tooltipContent:t("cerebro.filter.wordCountTooltip"),min:0,disabled:v,"data-testid":"wordcount"}),o.jsx(O,{name:"resultsNumber",label:t("cerebro.filter.competingProducts"),tooltipContent:t("cerebro.filter.competingProductsTooltip"),min:0,disabled:v,"data-testid":"competingproducts"}),o.jsxs("div",{children:[o.jsx(He,{label:t("cerebro.filter.showPhrasesContain"),tooltipContent:t("cerebro.filter.showPhrasesContainTooltip")}),o.jsxs(gn,{children:[o.jsx(Ne,{name:"phrase",placeholder:t("cerebro.filter.showPhrasesContainPlaceholder"),disabled:v,"data-testid":"phrasescontaining"}),o.jsx(xn,{children:o.jsx(fo,{name:"same-origin",options:y,disabled:v})})]})]}),o.jsx(qr,{project:"magnet",marketplace:k,isHistorical:!1,filteringLocked:v}),o.jsx(O,{name:"exactTitleMatchProductsCount",label:t("cerebro.filter.titleDensity"),tooltipContent:t("cerebro.filter.titleDensityTooltip"),min:0,disabled:v,"data-testid":"titledensity"}),o.jsx(Mr,{locked:v}),o.jsx(Mo,{locked:v}),o.jsx(Qi,{...r("amazonOnly"),label:t("cerebro.filter.amazonChoice"),tooltip:t("cerebro.filter.amazonChoiceTooltip"),lineLabel:t("cerebro.filter.amazonChoiceOnly"),disabled:v}),o.jsx($r,{moduleId:"keywordresearch"}),o.jsx(Ds,{moduleId:"keywordresearch",project:"magnet",marketplace:k,platform:"AMAZON",isHistorical:!1})]}),o.jsx(bo,{onClickReset:f,disabled:p||v,clearDisabled:m||v,locked:v,before:o.jsx(Gt,{})})]})})})})},xV=c.form``,tf=c.div`
  margin-top: ${({theme:e})=>e.spacing.sp16};

  display: grid;
  grid-gap: 32px;
  align-items: flex-end;

  grid-template-columns: 1fr;

  ${z.mobile} {
    grid-template-columns: repeat(2, 1fr);
  }

  ${z.laptop} {
    grid-template-columns: repeat(3, 1fr);
  }

  ${z.largeDesktop} {
    grid-template-columns: repeat(5, 1fr);
  }

  ${z.extraDesktop} {
    grid-template-columns: repeat(5, 1fr);
  }
`;c(tf)`
  padding: ${({theme:e})=>e.spacing.sp32} 0 ${({theme:e})=>e.spacing.sp16};
`;const bV=Z`
  display: flex;
  justify-content: flex-end;
  align-items: center;
  width: 100%;
  color: ${({theme:e})=>e.systemColors.grey600};
`;c(E)`
  cursor: pointer;
  margin-left: ${({theme:e})=>e.spacing.sp8};
  color: ${({theme:e})=>e.systemColors.blue600};
  width: 16px;
  height: 16px;
`;const fV=(e,t,n,s)=>{const{t:r}=T(),{isDemo:a}=ge(),l=V("AMAZON","japanSortingByPhrase")&&(e==null?void 0:e.domain)==="amazon.co.jp",u=V("AMAZON","sorting")&&!a,d=!V("WALMART","searchVolumeChart"),p=!V("COMMON","googleTrendChart"),m=h.useMemo(()=>({amazon:r("magnet.choiseBadge.amazon")}),[r]),g=C(()=>u?s():void 0,[u,s]),x=Vs({marketplace:e,project:"magnet",onClick:g}),S=wr({type:n?"multi":"single",moduleId:"keywordresearch"}),j=Mi({project:"magnet",platform:"AMAZON",moduleId:"keywordresearch",marketplace:e});return h.useMemo(()=>[{title:"",field:"actions",static:32,noHeader:!0,render:f=>o.jsx(Bd,{phrase:f.phrase,marketData:e,tool:"magnet"}),exportTitle:""},{title:"",field:"pinned",static:32,noHeader:!0,customCSS:On,render:f=>o.jsx(Wn,{data:f,temporarilyRemovedController:Tt,platform:e==null?void 0:e.platform}),exportTitle:""},{title:r("cerebro.table.keywordPhrase"),field:"phrase",tooltip:r("cerebro.table.keywordPhraseTooltip"),sortable:!l,disableSorting:u,onClick:g,type:"text",static:230,responsive:!0,customCSS:cn,render:f=>o.jsx(ln,{tool:"magnet",phraseId:f.phraseId,phrase:f.phrase,marketplace:"AMAZON",mainAsin:f.amazonChoice,amazonChoiceAsin:f.amazonChoice&&f.amazonChoice!=="N/A"?f.amazonChoice:void 0,marketplaceFull:e,tooltips:m})},...S,...x,{title:o.jsx(SV,{children:r("magnet.keywordSearchSummary.magnetIQScore")}),exportTitle:r("magnet.keywordSearchSummary.magnetIQScore"),field:"iq",tooltip:r("magnet.keywordSearchSummary.magnetIQScoreTooltip"),sortable:!0,disableSorting:u,onClick:g,type:"number",customCSS:X,render:f=>o.jsx(be,{value:f.iq,maximumFractionDigits:0}),exportValue:f=>N({value:f.iq,maximumFractionDigits:0}),contentPosition:"right",maxWidth:200},{title:r("cerebro.table.searchVolume"),field:"impressionExact30",tooltip:r("cerebro.filter.searchVolumeTooltip"),sortable:!0,disableSorting:u,onClick:g,type:"number",customCSS:Yt,render:f=>o.jsx(Zt,{value:f.impressionExact30,phrase:f.phrase,marketplace:e,moduleId:"keywordresearch",enabledWalmartSearchVolumeChart:d,enabledGoogleSearchVolumeChar:p}),exportValue:f=>N({value:f.impressionExact30}),contentPosition:"right",minWidth:123},{title:o.jsx(yV,{children:r("cerebro.table.searchVolumeTrend")}),exportTitle:r("cerebro.table.searchVolumeTrend"),field:"searchVolumeTrend30",tooltip:r("cerebro.table.searchVolumeTrendTooltip"),sortable:!0,disableSorting:u,onClick:g,type:"number",render:f=>o.jsx(_r,{value:f.searchVolumeTrend30}),exportValue:f=>N({value:f.searchVolumeTrend30}),contentPosition:"right",maxWidth:200},...j,{title:o.jsx(zi,{children:r("cerebro.table.sponsoredAsins")}),exportTitle:r("cerebro.table.sponsoredAsins"),field:"sponsoredAsins",tooltip:r("cerebro.table.sponsoredAsinsTooltip"),sortable:t,disableSorting:u,onClick:g,type:"number",customCSS:X,render:f=>o.jsx(be,{value:f.sponsoredAsins}),exportValue:f=>N({value:f.sponsoredAsins}),contentPosition:"right",maxWidth:200},{title:r("cerebro.table.competingProducts"),field:"resultsNumber",tooltip:r("cerebro.table.competingProductsTooltip"),sortable:!0,disableSorting:u,onClick:g,type:"number",customCSS:X,render:f=>o.jsx(Vr,{value:f.resultsNumber,over:f.resultsNumberOver}),exportValue:f=>(f.resultsNumberOver?">":"")+N({value:f.resultsNumber}),contentPosition:"right",maxWidth:200},{title:o.jsx(jV,{children:r("cerebro.table.cprSimple")}),exportTitle:r("cerebro.table.cprSimple"),field:"newCprExact",tooltip:r("cerebro.table.cprTooltip"),sortable:!0,disableSorting:u,onClick:g,type:"number",customCSS:bV,render:f=>o.jsx(be,{value:f.newCprExact,maximumFractionDigits:0}),exportValue:f=>N({value:f.newCprExact,maximumFractionDigits:0}),contentPosition:"right",maxWidth:200},{title:r("cerebro.table.matchType"),field:"matchType",tooltip:r("cerebro.table.matchTypeTooltip"),customCSS:In,render:f=>o.jsx(Ns,{matchType:f.matchType,isAmazon:!0,project:"magnet"}),exportValue:f=>(f.matchType||[]).reduce((v,k)=>`${v}${k.slice(0,1).toLocaleUpperCase()}`,""),contentPosition:"right",minWidth:123},{title:o.jsx(Rd,{children:r("cerebro.table.titleDensity")}),exportTitle:r("cerebro.table.titleDensity"),field:"exactTitleMatchProductsCount",tooltip:r("cerebro.table.titleDensityTooltip"),sortable:!0,disableSorting:u,onClick:g,type:"number",customCSS:X,render:f=>o.jsx(be,{value:f.exactTitleMatchProductsCount}),exportValue:f=>N({value:f.exactTitleMatchProductsCount}),contentPosition:"right",maxWidth:200},{title:r("cerebro.table.exportOrganic"),field:"_export_matchType",render:()=>null,exportValue:({matchType:f})=>(f||[]).find(v=>v==="organic")||(f||[]).find(v=>v==="contextual")?1:0},{title:r("cerebro.table.smartComplete"),field:"_export_matchType",render:()=>null,exportValue:({matchType:f})=>(f||[]).find(v=>v==="sponsored")||(f||[]).find(v=>v==="lexical")?1:0},{title:r("cerebro.table.exportAmazonRecommended"),field:"_export_matchType",render:()=>null,exportValue:({matchType:f})=>(f||[]).find(v=>v==="ppc")?1:0},{title:"",field:"_",responsive:!0,noHeader:!0,noHover:!0},{title:"",field:"__filler__",responsive:!0,noHeader:!0}],[S,m,p,d,e,x,g,l,j,t,u,r])},SV=c.div`
  min-width: 60px;
`,yV=c.div`
  min-width: 84px;
`,jV=c.div`
  -width: 48 x;
`,of=({dataAtom:e,isMultiple:t,searchId:n})=>{const{t:s}=T(),r=h.useMemo(()=>t?Qe:Ee,[t]),a=h.useCallback(({items:Re,selected:rt})=>rt?s("cerebro.table.filteredKeywordsSelected",{count:rt,value:N({value:rt})}):s("cerebro.table.filteredKeywords",{count:Re,value:N({value:Re})}),[s]),{data:i,onRemove:l,selected:u}=Dn({dataAtom:e,temporarilyRemovedController:Tt,refreshDataAction:r.dataRequest.actions.pending,project:"magnet"}),{isDemo:d}=ge(),p=b(r.selectors.searchMarketplaceData),m=b(r.selectors.sortableBySponsoredColumn),{notFreeAndStarter:g}=ne(),x=fV(p,m,t??!1,r.tableFilterRequest.actions.onLockedSorting),S=V("AMAZON","seeMonthlySalesColumn")&&!d,j=id(),f=h.useMemo(()=>[...kV,...S||p.domain!=="amazon.com"?["monthlySales"]:[],...j],[p.domain,S,j]),v=Os({columns:x,data:i[0],skippedColumnsOnExport:f,noCheckEmptyOnExport:!0}),k=C(d?r.tableFilterRequest.actions.setWithoutCheck:r.tableFilterRequest.actions.set,[d]),y=V("AMAZON","pagination")&&!d,w=C(()=>r.tableFilterRequest.actions.onLockedPagination(),[]),P=zs(),A=C(Ee.searchRequest.actions.pending),W=C(Qe.searchRequest.actions.pending);h.useEffect(()=>{const Re=t?W:A;setTimeout(()=>Re({id:n.toString()}),0)},[n,A,W,t]);const _=b(r.selectors.total),G=b(Tt.getRequest.atom,Re=>{var rt;return!!((rt=Re.content)!=null&&rt.data.length)},[]),q=C(()=>(ee.getState().setStatus("table"),r.dataRequest.actions.pending({})),[]),U=b(Cs,Re=>Re,[]),ye=h.useCallback(Re=>o.jsxs(o.Fragment,{children:[G&&o.jsx(zr,{marketplace:p,controller:Tt,onDelete:q}),Re.length!==0&&o.jsxs(o.Fragment,{children:[o.jsx(Or,{marketplace:p==null?void 0:p.domain}),o.jsx(Wr,{marketplace:p==null?void 0:p.store,moduleId:"keywordresearch"}),o.jsx(Ir,{onClick:()=>l(Re)}),o.jsx(ti,{params:{type:"keywords",keywords:U,marketplace:p==null?void 0:p.store,source:ss.SOURCE.MAGNET,seSource:"magnet"}})]})]}),[G,p,q,l,U]),pe=h.useMemo(()=>({render:(Re,rt,M)=>o.jsx(un,{prepareForExportFunction:pn({columns:v.exportColumns,columnsOrder:M}),requestAction:r.exportRequest.actions.pending,putAction:r.putExportedKeywordsRequest.actions.pending,loadingSelector:r.selectors.exportIsLoading,marketplace:p,project:"magnet"})}),[v.exportColumns,r.exportRequest.actions.pending,r.putExportedKeywordsRequest.actions.pending,r.selectors.exportIsLoading,p]),le=h.useMemo(()=>({onLock:w,pagination:y,search:y,sort:y,itemsPerPage:y}),[y,w]),Ae=h.useMemo(()=>({...u,getTitleText:a}),[a,u]),Pe=b(r.tableFilterRequest.atom),De=h.useMemo(()=>({value:Pe}),[Pe]),ze=h.useMemo(()=>({...zn,extraSettings:()=>g&&o.jsx(Ts,{showTop10RankedProductsForKeyword:!0})}),[g]);return o.jsx(At,{name:"magnet-amazon-"+p.TLDomain,filter:De,behavior:ze,locked:le,dimensions:mn,status:P,columns:v.tableColumns,data:i,total:_,selected:Ae,onFilter:k,leftActions:ye,export:pe})},kV=["matchType",ue],TV=()=>{const{isSkeleton:e,searchId:t,wordFrequencyData:n,marketplaceDomain:s}=Qe.useSearchTable();ge();const r=b(mT),a=b(hT),i=b(Qe.filterRequest.atom);return o.jsxs(fn,{children:[o.jsx(gV,{}),o.jsxs(Sn,{id:"above-table-container",children:[o.jsx(nf,{isSkeleton:e,children:o.jsxs(nt,{statuses:["loading","filter"],skeleton:o.jsx(on,{}),children:[o.jsx(Qb,{...r}),o.jsx(Jb,{data:a}),o.jsx(Io,{data:n,marketplaceDomain:s,currentWord:i.phrase,project:"magnet"})]})}),o.jsx(of,{searchId:Number(t),dataAtom:Qe.selectors.getSearchDataById,exportDataRequest:dV.actions.pending,isMultiple:!0},t)]}),o.jsx(Br,{moduleId:"keywordresearch"}),o.jsx(Pr,{})]})},nf=c(ri)`
  display: grid;
  grid-row-gap: ${({theme:e})=>e.spacing.sp24};

  & > :last-child {
    max-width: none;
  }

  grid-template-columns: 1fr;

  ${z.laptop} {
    grid-template-columns: 1fr 1fr;
  }

  ${z.largeDesktop} {
    grid-template-columns: 1fr 430px 1fr;
  }

  ${z.extraDesktop} {
    grid-template-columns: 1fr 1fr 1fr;
  }

  ${Qn} {
    padding-left: 0;
  }

  ${z.laptop} {
    ${Qn} {
      grid-column: 1/3;
    }
  }

  ${z.largeDesktop} {
    ${Qn} {
      grid-column: auto;
      padding-left: ${({theme:e})=>e.spacing.sp24};
    }
  }

  ${({isSkeleton:e})=>e&&Z`
      display: block;
    `}
`,ha=({value:e,stringValue:t,color:n,title:s,keyword:r,marketplace:a,maximumFractionDigits:i,amazon:l=!0,isWalmart:u})=>{const d=!V("WALMART","searchVolumeChart"),p=!V("COMMON","googleTrendChart"),m=C(Hm),g=j=>{m({afterCheckSuccess:j,isWalmart:u})},x=a?ce("store",a).TLDomain:"com",S=h.useMemo(()=>({disabled:e==null}),[e]);return o.jsxs(vV,{children:[o.jsxs(CV,{children:[o.jsx(AV,{color:n,children:t||N({value:e,maximumFractionDigits:i})}),r&&o.jsx(dm,{keyword:r,marketplace:x,moduleId:"keywordresearch",onClick:g,buttonProps:S,platformOptions:{platform:l?"AMAZON":"WALMART",disabledPlatforms:{WALMART:x!=="com"||!d,GOOGLE:!p}}})]}),o.jsx(wV,{children:s})]})},vV=c.div`
  margin-top: ${({theme:e})=>e.spacing.sp12};
`,CV=c.div`
  display: flex;
  align-items: center;
`,AV=c.div`
  ${Ya};
  margin-right: ${({theme:e})=>e.spacing.sp8};
  ${({color:e})=>e&&Z`
      color: ${e};
    `}
`,wV=c.div`
  ${fe};
  white-space: nowrap;
`,sf=({keywordSearchSummaryAtom:e,topProductsAtom:t,blackBoxAtom:n,marketplaceSelector:s,market:r})=>{const{t:a}=T(),i=b(n),{cpr:l,keyword:u,magnetIQScore:d,searchVolume:p,searchVolumeWalmartQuantative:m}=b(e),g=b(s),x=b(t);return o.jsxs($V,{children:[o.jsxs(PV,{children:[o.jsx(Ui,{children:a("magnet.keywordSearchSummary.title")}),o.jsxs(BV,{children:["",o.jsx(MV,{children:u}),""]}),o.jsxs(FV,{children:[o.jsxs(RV,{children:[o.jsx(Ed,{text:a("magnet.keywordSearchSummary.viewTopProducts")}),o.jsx(Hr,{title:a("magnet.boughtTogether.title"),description:a("magnet.boughtTogether.description"),data:x||[],market:r,referer:"magnet",blackBox:i,marketplace:g})]}),o.jsxs(DV,{children:[r==="WALMART"&&o.jsxs($l,{children:[o.jsx(ha,{keyword:u,value:p,stringValue:m!=null?N({value:m,maximumFractionDigits:0}):"N/A",title:o.jsxs(Rp,{children:[o.jsx(Yo,{}),o.jsx("div",{children:a("magnet.keywordSearchSummary.searchVolume")})]}),amazon:!1,isWalmart:!0,marketplace:g}),o.jsx(wl,{})]}),o.jsxs($l,{children:[o.jsx(ha,{keyword:u,value:p,title:o.jsxs(Rp,{children:[r==="WALMART"&&o.jsx(Qo,{}),o.jsx("div",{children:a("magnet.keywordSearchSummary.searchVolume")})]}),isWalmart:r==="WALMART",marketplace:g}),r==="AMAZON"&&o.jsx(wl,{})]}),r==="AMAZON"&&o.jsxs($l,{children:[o.jsx(ha,{value:d,title:a("magnet.keywordSearchSummary.magnetIQScore"),maximumFractionDigits:0,isWalmart:!1,marketplace:g}),o.jsx(wl,{})]}),r==="AMAZON"&&o.jsx(ha,{value:l,title:a("magnet.keywordSearchSummary.cpr"),maximumFractionDigits:0,isWalmart:!1,marketplace:g})]})]})]}),o.jsx(IV,{})]})},$V=c.div`
  display: flex;
  flex: 1;
  min-width: 0;

  grid-column: 1/3;

  ${z.extraDesktop} {
    grid-column: 1;
  }
`,PV=c.div`
  flex: 1;
  min-width: 0;
`,BV=c.div`
  ${Xa};
  white-space: nowrap;
  display: flex;
  margin-top: ${({theme:e})=>e.spacing.sp16};
`,MV=c.div`
  overflow: hidden;
  text-overflow: ellipsis;
`,RV=c.div`
  margin-right: 76px;
  margin-top: ${({theme:e})=>e.spacing.sp12};

  & > ${F} {
    white-space: nowrap;
  }
`,FV=c.div`
  display: flex;
  align-items: flex-end;
  flex-wrap: wrap;
`,DV=c.div`
  display: flex;
  flex-wrap: wrap;
`,IV=c.div`
  margin-top: ${({theme:e})=>e.spacing.sp4};
  margin-left: ${({theme:e})=>e.spacing.sp24};
  margin-right: ${({theme:e})=>e.spacing.sp24};

  border-right: none;

  ${z.extraDesktop} {
    border-right: 1px solid ${({theme:e})=>e.systemColors.grey200};
  }
`,wl=c.div`
  margin-top: ${({theme:e})=>e.spacing.sp12};
  align-self: stretch;
  border-right: 1px solid ${({theme:e})=>e.systemColors.grey200};
  margin-left: ${({theme:e})=>e.spacing.sp24};
  margin-right: ${({theme:e})=>e.spacing.sp24};
`,$l=c.div`
  display: flex;
  align-items: flex-end;
`,Rp=c.div`
  display: flex;
  align-items: center;

  & > :not(:first-child) {
    margin-left: ${({theme:e})=>e.spacing.sp4};
  }
`,rf=({isWalmart:e})=>{const{t}=T();return(e?OV:WV).map(n=>({label:t(`cerebro.filter.matchTypeOptions.${n}`),value:n}))},WV=["contextual","lexical","ppc"],OV=["contextual","lexical"],zV=({isSingle:e})=>{const{t}=T(),{isDemo:n}=ge(),s=V("AMAZON","filtering")&&!n,r=b(Ee.filterRequest.atom),a=lt({defaultValues:Go}),{register:i,watch:l,handleSubmit:u,reset:d,setValue:p,getValues:m}=a;h.useEffect(()=>{d(r)},[r,d]);const[g,x,S]=to({watch:l,getValues:m,atom:Ee.filterRequest.atom,minmaxFields:er,initValue:Go}),j=C(s?Ee.filterRequest.actions.set:Ee.filterRequest.actions.setWithoutCheck,[s]),f=u(j),v=C(Ee.filterRequest.actions.reset),k=C(()=>{S&&v({}),d()},[S]);Do(p,f);const y=b(Ee.selectors.searchMarketplaceData),w=rf({isWalmart:!1}),P=Ro(),[A,W]=Kt(),_=C(pe=>sn({afterCheckSuccess:pe,project:"magnet",isWalmart:!1})),G=V("AMAZON","filterLibrary"),q=b(Ee.selectors.searchMarketplaceDataNullable),U=C(Ee.tableFilterRequest.actions.setPartial),ye=Ji("AMAZON");return o.jsx(zt,{...a,children:o.jsx(NV,{onSubmit:f,children:o.jsx(nt,{statuses:["loading"],skeleton:o.jsx(hn,{children:o.jsx(nn,{})}),children:o.jsxs(Fo,{opened:A,onOpenChange:W,title:o.jsx(Bo,{children:o.jsx(bn,{tool:"magnet",minMaxFields:er,initialFilterValue:Go,searchType:Ot.Single,marketplace:q==null?void 0:q.domain,noPaddingBottom:!A,skipFields:ye,executeWithRestriction:_,restricted:G,onSubmit:f,setExpanded:W,setTableFilter:U})}),children:[o.jsxs(Xi,{children:[o.jsx(O,{name:"iq",label:t("magnet.keywordSearchSummary.magnetIQScore"),tooltipContent:t("magnet.keywordSearchSummary.magnetIQScoreTooltip"),min:0,disabled:s,"data-testid":"magnetiqscore"}),o.jsx(O,{name:"impressionExact30",label:t("cerebro.filter.searchVolume"),tooltipContent:t("cerebro.filter.searchVolumeTooltip"),min:0,disabled:s,"data-testid":"searchvolume"}),o.jsx(O,{name:"wordsCount",label:t("cerebro.filter.wordCount"),tooltipContent:t("cerebro.filter.wordCountTooltip"),min:0,disabled:s,"data-testid":"wordcount"}),o.jsx(O,{name:"resultsNumber",label:t("cerebro.filter.competingProducts"),tooltipContent:t("cerebro.filter.competingProductsTooltip"),min:0,disabled:s,"data-testid":"competingproducts"}),o.jsxs("div",{children:[o.jsx(He,{label:t("cerebro.filter.showPhrasesContain"),tooltipContent:t("cerebro.filter.showPhrasesContainTooltip")}),o.jsxs(gn,{children:[o.jsx(Ne,{name:"phrase",placeholder:t("cerebro.filter.showPhrasesContainPlaceholder"),disabled:s,"data-testid":"phrasescontaining"}),o.jsx(xn,{children:o.jsx(fo,{name:"same-origin",options:P,disabled:s})})]})]}),o.jsx(qr,{project:"magnet",marketplace:y,isHistorical:!1,filteringLocked:s}),o.jsx(O,{name:"exactTitleMatchProductsCount",label:t("cerebro.filter.titleDensity"),tooltipContent:t("cerebro.filter.titleDensityTooltip"),min:0,disabled:s,"data-testid":"titledensity"}),o.jsx(ft,{name:"matchType",label:t("cerebro.filter.matchType"),placeholder:t("cerebro.filter.noneSelected"),tooltipContent:t("cerebro.filter.matchTypeTooltip"),options:w,disabled:s}),o.jsx(Mr,{locked:s}),o.jsx(Mo,{locked:s}),o.jsx(Qi,{...i("amazonOnly"),label:t("cerebro.filter.amazonChoice"),tooltip:t("cerebro.filter.amazonChoiceTooltip"),lineLabel:t("cerebro.filter.amazonChoiceOnly"),disabled:s}),o.jsx($r,{moduleId:"keywordresearch"}),o.jsx(Ds,{moduleId:"keywordresearch",project:"magnet",marketplace:y,platform:"AMAZON",isHistorical:!1})]}),o.jsx(bo,{onClickReset:k,disabled:g||s,clearDisabled:x||s,locked:s,before:o.jsx(Gt,{})})]})})})})},NV=c.form``,Xi=c.div`
  margin-top: ${({theme:e})=>e.spacing.sp16};
  display: grid;
  grid-gap: 32px;
  align-items: flex-end;

  grid-template-columns: 1fr;

  ${z.mobile} {
    grid-template-columns: repeat(2, 1fr);
  }

  ${z.laptop} {
    grid-template-columns: repeat(3, 1fr);
  }

  ${z.largeDesktop} {
    grid-template-columns: repeat(5, 1fr);
  }

  ${z.extraDesktop} {
    grid-template-columns: repeat(5, 1fr);
  }
`;c(Xi)`
  padding: ${({theme:e})=>e.spacing.sp32} 0 ${({theme:e})=>e.spacing.sp16};
`;const VV=()=>{const{isSkeleton:e,searchId:t,wordFrequencyData:n,marketplaceDomain:s}=Ee.useSearchTable();ge();const r=b(ST),a=b(Ee.filterRequest.atom);return o.jsxs(fn,{children:[o.jsx(zV,{isSingle:!0}),o.jsxs(Sn,{id:"above-table-container",children:[o.jsx(af,{isSkeleton:e,children:o.jsxs(nt,{statuses:["loading","filter"],skeleton:o.jsx(on,{}),children:[o.jsx(sf,{keywordSearchSummaryAtom:bT,topProductsAtom:fT,blackBoxAtom:jT,marketplaceSelector:yT,market:"AMAZON"}),o.jsx(Hi,{data:r,historicalButton:o.jsx(_s,{visible:!1})}),o.jsx(Io,{data:n,marketplaceDomain:s,currentWord:a.phrase,project:"magnet"})]})}),o.jsx(of,{searchId:Number(t),dataAtom:Ee.selectors.getSearchDataById,exportDataRequest:cV.actions.pending},t)]}),o.jsx(Br,{moduleId:"keywordresearch"}),o.jsx(Pr,{})]})},af=c(ri)`
  display: grid;
  grid-row-gap: ${({theme:e})=>e.spacing.sp24};

  grid-template-columns: 1fr;

  ${z.laptop} {
    grid-template-columns: 1fr 1fr;
  }

  ${z.extraDesktop} {
    grid-template-columns: 1fr 270px 432px;
  }

  ${Qn} {
    max-width: none;
    grid-column: 1;
    padding-left: 0;

    ${z.laptop} {
      grid-column: auto;
      padding-left: ${({theme:e})=>e.spacing.sp24};
    }

    ${z.largeDesktop} {
      grid-column: auto;
    }
  }

  ${({isSkeleton:e})=>e&&Z`
      display: block;
    `}
`,_V=async({id:e,demo:t})=>D({url:$(`${I}/api/magnet/v1/walmart/search/multiple/${t?"demo/":""}${e}`,{}),method:"GET",useSessionAccountId:!0}),EV=async e=>{const t=e.demo?"/demo":"";return D({url:$(`${I}/api/magnet/v1/walmart/search/multiple/${e.id}/results${t}`,$o({data:e,minmaxFields:tr,isExport:!1}),{arrayFormat:"bracket"}),method:"GET",useSessionAccountId:!0})},xt=an({name:"magnet/walmart/multiple",table:{getDataQuery:EV,getExportDataQuery:Xb,putExportedKeywordsQuery:Bi,phraseIdKey:"phraseId",phraseKey:"phrase"},sponsoredColumn:{createTaskQuery:Vi,getTaskDataQuery:_i,getDataQuery:Ei},search:{postSelector:ag.contentSelector,getSearchData:_V},temporarilyRemovedController:Tt,isMagnet:!0,initFilterValue:Zo,minmaxFields:tr,isWalmart:!0}),LV=R(xt.dataRequest.atom,e=>{var t,n,s,r;return{...((t=e.content)==null?void 0:t.data.avgValues)||{},totalKeywords:(n=e.content)==null?void 0:n.data.totalCount,totalAmazonSV:(s=e.content)==null?void 0:s.data.totalAmazonSV,totalWalmartSV:(r=e.content)==null?void 0:r.data.totalWalmartSV}}),qV=R(xt.dataRequest.atom,e=>{var t;return((t=e.content)==null?void 0:t.data.chartData)||[]});R(ie([xt.dataRequest.atom,xt.selectors.search]),([e,t])=>{var n;return{marketplace:(t==null?void 0:t.marketplace)||"",asinList:((n=e.content)==null?void 0:n.data.productDetails.map(({productId:s})=>s))||[]}});const HV=({isSingle:e})=>{const{t}=T(),n=b(xt.filterRequest.atom),s=lt({defaultValues:Zo}),{register:r,watch:a,handleSubmit:i,reset:l,setValue:u,getValues:d}=s;h.useEffect(()=>{l(n)},[n,l]);const[p,m,g]=to({watch:a,getValues:d,atom:xt.filterRequest.atom,minmaxFields:tr,initValue:Zo}),x=C(xt.filterRequest.actions.set),S=i(x),j=C(xt.filterRequest.actions.reset),f=C(()=>{g&&j({}),l()},[g]);Do(u,S);const v=V("WALMART","filtering"),k=Ro(),[y,w]=Kt(),P=C(G=>sn({afterCheckSuccess:G,project:"magnet",isWalmart:!0})),A=V("WALMART","filterLibrary"),W=C(xt.tableFilterRequest.actions.setPartial),_=Ji("WALMART");return o.jsx(zt,{...s,children:o.jsx(UV,{onSubmit:S,children:o.jsx(nt,{statuses:["loading"],skeleton:o.jsx(hn,{children:o.jsx(nn,{})}),children:o.jsxs(Fo,{opened:y,onOpenChange:w,title:o.jsx(Bo,{children:o.jsx(bn,{tool:"magnet",minMaxFields:tr,initialFilterValue:Zo,searchType:Ot.Multi,marketplace:"walmart.com",noPaddingBottom:!y,skipFields:_,executeWithRestriction:P,restricted:A,onSubmit:S,setExpanded:w,setTableFilter:W})}),children:[o.jsxs(Xi,{children:[o.jsx(O,{name:"quantitativeSearchVolume",label:o.jsxs(Fp,{children:[t("cerebro.filter.searchVolume"),o.jsx(Yo,{})]}),tooltipContent:t("cerebro.filter.searchVolumeWalmartTooltip"),min:0,disabled:v,"data-testid":"searchvolumewalmart"}),o.jsx(O,{name:"amazonSearchVolume",label:o.jsxs(Fp,{children:[t("cerebro.filter.searchVolume"),o.jsx(Qo,{})]}),tooltipContent:t("cerebro.filter.searchVolumeTooltip"),min:0,disabled:v,"data-testid":"searchvolumeamazon"}),o.jsx(O,{name:"wordsCount",label:t("cerebro.filter.wordCount"),tooltipContent:t("cerebro.filter.wordCountTooltip"),min:0,disabled:v,"data-testid":"wordcount"}),o.jsx(O,{name:"resultsNumber",label:t("cerebro.filter.competingProducts"),tooltipContent:t("cerebro.filter.competingProductsTooltip"),min:0,disabled:v,"data-testid":"competingproducts"}),o.jsxs("div",{children:[o.jsx(He,{label:t("cerebro.filter.showPhrasesContain"),tooltipContent:t("cerebro.filter.showPhrasesContainTooltip")}),o.jsxs(gn,{children:[o.jsx(Ne,{name:"phrase",placeholder:t("cerebro.filter.showPhrasesContainPlaceholder"),disabled:v,"data-testid":"phrasescontaining"}),o.jsx(xn,{children:o.jsx(fo,{name:"same-origin",options:k,disabled:v})})]})]}),o.jsx(Mo,{locked:v}),o.jsx(Qi,{...r("bestSeller"),label:t("cerebro.filter.bestSeller"),tooltip:t("cerebro.filter.bestSellerOnlyTooltip"),lineLabel:t("cerebro.filter.bestSellerOnly"),disabled:v,children:t("cerebro.filter.bestSellerOnly")})]}),o.jsx(bo,{onClickReset:f,disabled:p||v,clearDisabled:m||v,locked:v,before:o.jsx(Gt,{})})]})})})})},UV=c.form``,Fp=c.div`
  display: flex;
  align-items: flex-start;

  & > svg {
    margin-left: ${({theme:e})=>e.spacing.sp4};
    height: 18px;
  }
`,KV=async({id:e,demo:t})=>D({url:$(`${I}/api/magnet/v1/walmart/search/single/${t?"demo/":""}${e}`,{}),method:"GET",useSessionAccountId:!0}),GV=async e=>{const t=`/api/magnet/v1/walmart/search/single/${e.id}/results`,n=`/api/magnet/v1/walmart/search/single/demo/${e.id}/data`,s=e.demo?n:t;return D({url:$(`${I}${s}`,$o({data:e,minmaxFields:xs,isExport:!1}),{arrayFormat:"bracket"}),method:"GET",useSessionAccountId:!0})},et=an({name:"magnet/walmart/single",table:{getDataQuery:GV,getExportDataQuery:ef,putExportedKeywordsQuery:Bi,phraseIdKey:"phraseId",phraseKey:"phrase"},sponsoredColumn:{createTaskQuery:Vi,getTaskDataQuery:_i,getDataQuery:Ei},search:{postSelector:rg.contentSelector,getSearchData:KV},temporarilyRemovedController:Tt,isMagnet:!0,initFilterValue:Zo,minmaxFields:xs,isWalmart:!0}),ZV=R(et.dataRequest.atom,e=>{var t,n,s,r,a,i,l;return(t=e.content)!=null&&t.data.seedKeyword?{keyword:(n=e.content)==null?void 0:n.data.seedKeyword.phrase,searchVolume:(s=e.content)==null?void 0:s.data.seedKeyword.amazonSearchVolume,searchVolumeWalmart:(r=e.content)==null?void 0:r.data.seedKeyword.searchVolume,magnetIQScore:(a=e.content)==null?void 0:a.data.seedKeyword.iq,cpr:(i=e.content)==null?void 0:i.data.seedKeyword.newCprExact,searchVolumeWalmartQuantative:(l=e.content)==null?void 0:l.data.seedKeyword.quantitativeSearchVolume}:{}}),YV=R(et.dataRequest.atom,e=>{var t,n,s;return(t=e.content)!=null&&t.data.top3Products?(((s=(n=e.content)==null?void 0:n.data)==null?void 0:s.top3Products)||[]).map(({imageUrl:r,productId:a,title:i})=>({walmartItemId:a,productId:a,asin:a,imageUrl:r,title:i})).map(Ar):null}),QV=R(et.dataRequest.atom,e=>{var t;return((t=e.content)==null?void 0:t.data.searchResultCounts)||{}}),JV=R(et.searchRequest.atom,e=>{var t;return((t=e.content)==null?void 0:t.data.marketplace)||bt("WM","domain","walmart.com").store}),XV=R(ie([et.dataRequest.atom,et.selectors.search]),([e,t])=>{var n,s,r,a;return{marketplace:(t==null?void 0:t.marketplace)||"",asinList:(r=(s=(n=e.content)==null?void 0:n.data)==null?void 0:s.productDetails)!=null&&r.productId?[(a=e.content)==null?void 0:a.data.productDetails.productId]:[]}}),e_=(e,t,n)=>{const{t:s}=T(),{isDemo:r}=ge(),a=V("WALMART","sorting")&&!r,i=!V("COMMON","googleTrendChart"),l=h.useMemo(()=>({walmart:s("magnet.choiseBadge.walmart")}),[s]),u=C(()=>a?n():void 0,[a]),d=Vs({marketplace:e,project:"magnet",onClick:u});return h.useMemo(()=>[{title:"",field:"pinned",static:32,noHeader:!0,customCSS:On,render:p=>o.jsx(Wn,{data:p,temporarilyRemovedController:Tt,platform:e==null?void 0:e.platform}),exportTitle:""},{title:s("cerebro.tableWalmart.keywordPhrase"),field:"phrase",tooltip:s("cerebro.tableWalmart.keywordPhraseTooltip"),sortable:!0,disableSorting:a,onClick:u,static:230,responsive:!0,customCSS:cn,render:p=>o.jsx(ln,{simpleTooltip:!0,tool:"magnet",phraseId:p.phraseId,phrase:p.phrase,marketplace:"WALMART",mainAsin:p.bestSeller&&p.bestSeller.length>0?"ASIN":null,amazonChoiceAsin:p.bestSeller&&p.bestSeller.length>0?"ASIN":null,marketplaceFull:e,tooltips:l})},{title:o.jsxs(Dp,{children:[s("cerebro.tableWalmart.searchVolumeWalmart"),o.jsx(Yo,{})]}),exportTitle:s("cerebro.tableWalmart.searchVolumeWalmartExport"),field:"quantitativeSearchVolume",tooltip:s("cerebro.filter.searchVolumeWalmartTooltip"),sortable:!0,disableSorting:a,onClick:u,customCSS:Yt,render:p=>o.jsx(Zt,{value:p.quantitativeSearchVolume||void 0,phrase:p.phrase,phraseId:Number(p.id),marketplace:e,moduleId:"keywordresearch",isWalmartRestriction:!0,isWalmart:!0,enabledWalmartSearchVolumeChart:!0,enabledGoogleSearchVolumeChar:i}),exportValue:p=>te({value:p.quantitativeSearchVolume,maximumFractionDigits:0}),contentPosition:"right",maxWidth:200},{title:o.jsxs(Dp,{children:[s("cerebro.tableWalmart.searchVolume"),o.jsx(Qo,{})]}),exportTitle:s("cerebro.tableWalmart.searchVolumeAmazonExport"),field:"amazonSearchVolume",tooltip:s("cerebro.filter.searchVolumeTooltip"),sortable:!0,disableSorting:a,onClick:u,type:"number",customCSS:Yt,render:({amazonSearchVolume:p,phrase:m})=>o.jsx(Zt,{value:p||void 0,phrase:m,marketplace:e,moduleId:"keywordresearch",isWalmartRestriction:!0,enabledWalmartSearchVolumeChart:!0,enabledGoogleSearchVolumeChar:i}),exportValue:({amazonSearchVolume:p})=>p?N({value:p}):"-",contentPosition:"right",maxWidth:200},{title:s("cerebro.tableWalmart.competingProducts"),field:"resultsNumber",tooltip:s("cerebro.tableWalmart.competingProductsTooltip"),sortable:!0,disableSorting:a,onClick:u,type:"number",customCSS:X,render:p=>o.jsx(be,{value:p.resultsNumber}),exportValue:p=>N({value:p.resultsNumber}),contentPosition:"right",maxWidth:200},{title:o.jsx(t_,{children:s("cerebro.tableWalmart.sponsoredProducts")}),exportTitle:s("cerebro.tableWalmart.sponsoredProducts"),field:"sponsoredProducts",tooltip:s("cerebro.tableWalmart.sponsoredProductsTooltip"),sortable:t,disableSorting:a,onClick:u,type:"number",customCSS:X,render:p=>o.jsx(be,{value:p.sponsoredProducts}),exportValue:p=>N({value:p.sponsoredProducts}),contentPosition:"right",maxWidth:200},{title:s("cerebro.tableWalmart.matchType"),field:"matchType",tooltip:s("cerebro.tableWalmart.matchTypeTooltip"),customCSS:In,render:p=>o.jsx(Ns,{matchType:p.matchType,project:"magnet"}),contentPosition:"right",maxWidth:200},{title:s("cerebro.table.exportOrganic"),field:"_export_matchType",render:()=>null,exportValue:({matchType:p})=>(p||[]).find(m=>m==="organic")||(p||[]).find(m=>m==="contextual")?1:0},{title:s("cerebro.table.smartComplete"),field:"_export_matchType",render:()=>null,exportValue:({matchType:p})=>(p||[]).find(m=>m==="sponsored")||(p||[]).find(m=>m==="lexical")?1:0},...d,{title:"",field:"_",responsive:!0,noHeader:!0,noHover:!0}],[l,i,e,d,u,t,a,s])},Dp=c(ar)`
  flex-direction: row;
  align-items: center;

  & > svg {
    margin: 0 0 0 8px;
  }
`,t_=c.div`
  min-width: 48px;
`,lf=({dataAtom:e,isMultiple:t,searchId:n})=>{const{isDemo:s}=ge(),{t:r}=T(),a=h.useMemo(()=>t?xt:et,[t]),i=h.useCallback(({items:pe,selected:le})=>le?r("cerebro.table.filteredKeywordsSelected",{count:le,value:N({value:le})}):r("cerebro.table.filteredKeywords",{count:pe,value:N({value:pe})}),[r]),l=b(e,pe=>{var le;return(le=pe.content)!=null&&le.data.tableData?pe.content.data.tableData.map(({phraseId:Ae,...Pe})=>({id:Ae.toString(),phraseId:Ae,...Pe})):[]},[]),{onRemove:u,selected:d}=Dn({dataAtom:a.selectors.getSearchDataById,temporarilyRemovedController:Tt,refreshDataAction:a.dataRequest.actions.pending,project:"magnet"}),p=b(a.selectors.searchMarketplaceData),m=b(a.selectors.sortableBySponsoredColumn),g=e_(p,m,a.tableFilterRequest.actions.onLockedSorting),x=Os({columns:g,data:l[0],skippedColumnsOnExport:o_,noCheckEmptyOnExport:!0}),S=C(s?a.tableFilterRequest.actions.setWithoutCheck:a.tableFilterRequest.actions.set,[s]),j=C(()=>a.tableFilterRequest.actions.onLockedPagination(),[]),f=zs(),v=V("WALMART","pagination")&&!s,k=C(et.searchRequest.actions.pending),y=C(xt.searchRequest.actions.pending);h.useEffect(()=>{const pe=t?y:k;setTimeout(()=>pe({id:n.toString()}),0)},[n,k,y,t]);const w=b(a.selectors.total),P=b(Tt.getRequest.atom,pe=>{var le;return!!((le=pe.content)!=null&&le.data.length)},[]),A=C(()=>(ee.getState().setStatus("table"),a.dataRequest.actions.pending({})),[t]),W=h.useCallback(pe=>o.jsxs(o.Fragment,{children:[P&&o.jsx(zr,{marketplace:p,controller:Tt,onDelete:A}),pe.length!==0&&o.jsxs(o.Fragment,{children:[o.jsx(Or,{marketplace:p==null?void 0:p.domain,isWalmart:!0}),o.jsx(Wr,{marketplace:p==null?void 0:p.store,moduleId:"keywordresearch-walmart"}),o.jsx(Ir,{onClick:()=>u(pe)})]})]}),[P,p,A,u]),_=h.useMemo(()=>({render:(pe,le,Ae)=>o.jsx(un,{prepareForExportFunction:pn({columns:x.exportColumns,columnsOrder:Ae}),requestAction:a.exportRequest.actions.pending,putAction:a.putExportedKeywordsRequest.actions.pending,loadingSelector:a.selectors.exportIsLoading,marketplace:p,project:"magnet"})}),[x.exportColumns,a.exportRequest.actions.pending,a.putExportedKeywordsRequest.actions.pending,a.selectors.exportIsLoading,p]),G=h.useMemo(()=>({onLock:j,pagination:v,search:v,sort:v,itemsPerPage:v}),[v,j]),q=h.useMemo(()=>({...d,getTitleText:i}),[i,d]),U=b(a.tableFilterRequest.atom),ye=h.useMemo(()=>({value:U}),[U]);return o.jsx(At,{name:"magnet-walmart-"+p.TLDomain,filter:ye,behavior:zn,locked:G,dimensions:mn,status:f,columns:x.tableColumns,data:l,total:w,selected:q,onFilter:S,leftActions:W,export:_})},o_=["matchType"],n_=()=>{const{isSkeleton:e,searchId:t,wordFrequencyData:n,marketplaceDomain:s}=xt.useSearchTable();ge();const r=b(LV),a=b(qV),i=b(xt.filterRequest.atom);return o.jsxs(fn,{children:[o.jsx(HV,{}),o.jsxs(Sn,{id:"above-table-container",children:[o.jsx(nf,{isSkeleton:e,children:o.jsxs(nt,{statuses:["loading","filter"],skeleton:o.jsx(on,{}),children:[o.jsx(Qb,{...r}),o.jsx(Jb,{data:a}),o.jsx(Io,{data:n,marketplaceDomain:s,currentWord:i.phrase,project:"magnet"})]})}),o.jsx(lf,{searchId:Number(t),dataAtom:xt.dataRequest.atom,exportDataRequest:pV.actions.pending,isMultiple:!0},t)]})]})},s_=({isSingle:e})=>{const{t}=T(),{isDemo:n}=ge(),s=V("WALMART","filtering")&&!n,r=b(et.filterRequest.atom),a=lt({defaultValues:Zo}),{register:i,watch:l,handleSubmit:u,reset:d,setValue:p,getValues:m}=a;h.useEffect(()=>{d(r)},[r,d]);const[g,x,S]=to({watch:l,getValues:m,atom:et.filterRequest.atom,minmaxFields:xs,initValue:Zo}),j=C(s?et.filterRequest.actions.set:et.filterRequest.actions.setWithoutCheck,[s]),f=u(j),v=C(et.filterRequest.actions.reset),k=C(()=>{S&&v({}),d()},[S]);Do(p,f);const y=rf({isWalmart:!0}),w=Ro(),[P,A]=Kt(),W=C(U=>sn({afterCheckSuccess:U,project:"magnet",isWalmart:!0})),_=V("WALMART","filterLibrary"),G=C(et.tableFilterRequest.actions.setPartial),q=Ji("WALMART");return o.jsx(zt,{...a,children:o.jsx(r_,{onSubmit:f,children:o.jsx(nt,{statuses:["loading"],skeleton:o.jsx(hn,{children:o.jsx(nn,{})}),children:o.jsxs(Fo,{opened:P,onOpenChange:A,title:o.jsx(Bo,{children:o.jsx(bn,{tool:"magnet",minMaxFields:xs,initialFilterValue:Zo,searchType:Ot.Single,marketplace:"walmart.com",noPaddingBottom:!P,skipFields:q,executeWithRestriction:W,restricted:_,onSubmit:f,setExpanded:A,setTableFilter:G})}),children:[o.jsxs(Xi,{children:[o.jsx(O,{name:"quantitativeSearchVolume",label:o.jsxs(Ip,{children:[t("cerebro.filter.searchVolume"),o.jsx(Yo,{})]}),tooltipContent:t("cerebro.filter.searchVolumeWalmartTooltip"),min:0,disabled:s,"data-testid":"searchvolumewalmart"}),o.jsx(O,{name:"amazonSearchVolume",label:o.jsxs(Ip,{children:[t("cerebro.filter.searchVolume"),o.jsx(Qo,{})]}),tooltipContent:t("cerebro.filter.searchVolumeTooltip"),min:0,disabled:s,"data-testid":"searchvolumeamazon"}),o.jsx(O,{name:"wordsCount",label:t("cerebro.filter.wordCount"),tooltipContent:t("cerebro.filter.wordCountTooltip"),min:0,disabled:s,"data-testid":"wordcount"}),o.jsx(O,{name:"resultsNumber",label:t("cerebro.filter.competingProducts"),tooltipContent:t("cerebro.filter.competingProductsTooltip"),min:0,disabled:s,"data-testid":"competingproducts"}),o.jsxs("div",{children:[o.jsx(He,{label:t("cerebro.filter.showPhrasesContain"),tooltipContent:t("cerebro.filter.showPhrasesContainTooltip")}),o.jsxs(gn,{children:[o.jsx(Ne,{name:"phrase",placeholder:t("cerebro.filter.showPhrasesContainPlaceholder"),disabled:s,"data-testid":"phrasescontaining"}),o.jsx(xn,{children:o.jsx(fo,{name:"same-origin",options:w,disabled:s})})]})]}),o.jsx(ft,{name:"matchType",label:t("cerebro.filter.matchType"),placeholder:t("cerebro.filter.noneSelected"),tooltipContent:t("cerebro.filter.matchTypeTooltip"),options:y,disabled:s}),o.jsx(Qi,{...i("bestSeller"),label:t("cerebro.filter.bestSeller"),tooltip:t("cerebro.filter.bestSellerOnlyTooltip"),lineLabel:t("cerebro.filter.bestSellerOnly"),disabled:s,children:t("cerebro.filter.bestSellerOnly")}),o.jsx(Mo,{locked:s})]}),o.jsx(bo,{onClickReset:k,disabled:g||s,clearDisabled:x||s,locked:s,before:o.jsx(Gt,{})})]})})})})},r_=c.form``,Ip=c.div`
  display: flex;
  align-items: flex-start;

  & > svg {
    margin-left: ${({theme:e})=>e.spacing.sp4};
    height: 18px;
  }
`,a_=()=>{const{isSkeleton:e,searchId:t,wordFrequencyData:n,marketplaceDomain:s}=et.useSearchTable();ge();const r=b(QV),a=b(et.filterRequest.atom);return o.jsxs(fn,{children:[o.jsx(s_,{isSingle:!0}),o.jsxs(Sn,{id:"above-table-container",children:[o.jsx(af,{isSkeleton:e,children:o.jsxs(nt,{statuses:["loading","filter"],skeleton:o.jsx(on,{}),children:[o.jsx(sf,{keywordSearchSummaryAtom:ZV,topProductsAtom:YV,blackBoxAtom:XV,marketplaceSelector:JV,market:"WALMART"}),o.jsx(Hi,{data:r,historicalButton:o.jsx(_s,{visible:!1})}),o.jsx(Io,{data:n,marketplaceDomain:s,currentWord:a.phrase,project:"magnet"})]})}),o.jsx(lf,{searchId:Number(t),dataAtom:et.dataRequest.atom,exportDataRequest:uV.actions.pending},t)]})]})},i_=({tab:e})=>{const{isDemo:t}=ne();return o.jsxs(rc,{children:[o.jsx(Ye,{path:"/",element:t?o.jsx(HN,{}):o.jsx(qN,{tab:e})}),o.jsx(Ye,{path:"amazon/view/:id",element:o.jsx(VV,{})}),o.jsx(Ye,{path:"amazon/view-multi-search/:id",element:o.jsx(TV,{})}),o.jsx(Ye,{path:"walmart/view/:id",element:o.jsx(a_,{})}),o.jsx(Ye,{path:"walmart/view-multi-search/:id",element:o.jsx(n_,{})})]})},cf=c(Zn)`
  ${Zn.DropdownWrapper} {
    max-height: 400px;
  }
  ${Zn.Tags} {
    min-width: 0;
  }
`,df=e=>e.filter((t,n)=>e.indexOf(t)===n),l_=async e=>D({url:$(`${kt}/api/v1/common/autosuggestion`,e),method:"GET",withCredentials:0}),ir=he("getAutosuggestion",async e=>l_(e),{initialStatus:"init"}),c_=R(ir.atom,e=>{var t;return(((t=e.content)==null?void 0:t.results)||[]).map(n=>({label:n,value:n}))}),d_=R(ir.atom,e=>e.status==="loading"),uf=()=>{const e=C(ir.actions.clear);h.useEffect(e,[e]);const t=eh(),n=C(ir.actions.pending),s=h.useCallback(l=>{l&&t.store!=="WALMART_US"&&n({query:l.trim().toLowerCase(),marketplace:t.store})},[n,t.store]),r=b(c_),a=b(d_),i=h.useMemo(()=>o.jsxs(u_,{children:[o.jsx(ae,{$size:"medium"}),o.jsx(ae,{$size:"medium"}),o.jsx(ae,{$size:"medium"}),o.jsx(ae,{$size:"medium"}),o.jsx(ae,{$size:"medium"})]}),[]);return{options:r,onSearch:s,renderNoOptions:a?i:void 0,hasDropdown:t.store!=="WALMART_US"}},u_=c.div`
  max-width: 200px;
  padding: 8px 16px;

  & > :not(:first-child) {
    margin-top: 8px;
  }
`,p_=({marketplace:e,setMarketplace:t})=>{const{t:n}=T(),{isDemo:s}=ne(),{control:r,handleSubmit:a,setValue:i}=lt({defaultValues:{keywords:[]},mode:"all"}),l=h.useCallback(y=>{i("keywords",df(y.map(w=>w.toLowerCase())))},[i]),u=h.useCallback(y=>{l(y)},[l]),[d,p]=h.useState(""),m=h.useRef(null),g=C(y=>{var P;const w=d.trim()===""||y.keywords.indexOf(d)!==-1?y.keywords:[...y.keywords,d];return d.trim()&&(l(w),(P=m.current)==null||P.clearInput()),nd({...y,keywords:w})},[d]),x=a(g),S=ee(y=>y.status),j=uf(),f=h.useRef(null),v=()=>{f.current&&setTimeout(()=>{var y,w;(y=f.current)==null||y.focus(),(w=f.current)==null||w.click()},0)},k=C(()=>we.open({platform:e!=="walmart.com"?"AMAZON":"WALMART",restriction:"pagination",trigger:'User Click: "Keywords Input"'}),[e]);return o.jsxs(m_,{onSubmit:x,children:[o.jsx(tt,{name:"keywords",control:r,render:({field:y})=>{const w=y.value,P=w.length;return o.jsxs(o.Fragment,{children:[o.jsx(cf,{...y,ref:m,hasDropdown:!0,...j,onSearchImmediately:p,inputProps:{placeholder:P===0?n("magnet.inputPlaceholderSingle"):""},onChangeInput:p,loading:S==="loading",onEnter:v,size:"200",clearOnError:!0,addTagsOnPressKeys:["Comma"],onSeparate:pf(P,1),maxTags:1,findSuggestionsMode:!0,disabled:s,renderBeforeTags:o.jsx(qd,{disabled:S==="loading"||s,onClick:A=>A.stopPropagation(),children:o.jsx(jc,{size:"100",value:e,onChange:A=>A!=null&&t(A.value),options:bi(),dropdownAutoWidth:!0,disabled:S==="loading"||s,groupOptions:!0,appendTo:document.body})})}),o.jsx(F,{ref:f,buttonType:"primary",size:"200",type:"submit",disabled:S==="loading"||P===0&&d.trim()===""||s,"data-testid":"getkeywords",children:n("cerebro.getKeywords")}),o.jsx(Hd,{addTags:u,currentTags:w})]})}}),s&&o.jsx(h_,{onClick:k})]})},pf=(e,t)=>n=>{const s=n.split(/[\x09,;\n]+/).map(r=>r.trim()).filter(r=>!!r);return t-e>0?s.slice(0,t-e):[]},m_=c.form`
  position: relative;
  margin-top: ${({theme:e})=>e.spacing.sp24};
  display: grid;
  grid-template-columns: 1fr;

  ${z.mobile} {
    grid-template-columns: 1fr auto;
  }

  grid-gap: ${({theme:e})=>e.spacing.sp8};
  align-items: center;

  & > :first-child {
    height: 40px;
  }
`,h_=c.div`
  position: absolute;
  left: 0;
  top: 0;
  right: 0;
  bottom: 0;
  z-index: 1;
`,Pl=200,g_=({marketplace:e,setMarketplace:t})=>{const{t:n}=T(),s=Xt(),r=()=>s.getState(Cs),{control:a,setValue:i,handleSubmit:l}=lt({defaultValues:{keywords:[],excludeVariations:!1},mode:"all"}),u=h.useCallback(W=>{i("keywords",df(W.map(_=>_.trim().toLowerCase())))},[i]),d=h.useCallback(W=>{u(W)},[u]),[p,m]=h.useState(""),g=h.useRef(null),x=C(W=>{var G;const _=p.trim()===""||W.keywords.indexOf(p)!==-1?W.keywords:[...W.keywords,p];return p.trim()&&(u(_),(G=g.current)==null||G.clearInput()),nd({...W,keywords:_})},[p]),S=l(x),j=ee(W=>W.status),f=uf(),v=C(ir.actions.clear),k=b(st,W=>(W==null?void 0:W.platform)||"AMAZON",[]),y=V(k,"myList"),w=C(()=>we.open({platform:k,restriction:"myList",trigger:'User Click: "Add to My List Button"'}),[k]),P=h.useRef(null),A=()=>{P.current&&setTimeout(()=>{var W,_;(W=P.current)==null||W.focus(),(_=P.current)==null||_.click()},0)};return o.jsx(x_,{onSubmit:S,children:o.jsx(tt,{name:"keywords",control:a,render:({field:W})=>{const _=W.value,G=_.length,q={placeholder:n("magnet.inputPlaceholderMultiple",{number:200-G})};return o.jsxs(o.Fragment,{children:[o.jsx(cf,{...W,onChange:u,ref:g,hasDropdown:!0,...f,onSearchImmediately:m,onChangeInput:m,expanded:!0,inputProps:q,disabled:j==="loading",onEnter:A,size:"200",clearOnError:!0,addTagsOnPressKeys:["Comma"],onSeparate:pf(G,200),maxTags:Pl,renderBeforeTags:o.jsx(qd,{disabled:j==="loading",onClick:U=>U.stopPropagation(),children:o.jsx(jc,{size:"100",value:e,onChange:U=>{U!=null&&t(U.value),v()},options:bi(),dropdownAutoWidth:!0,disabled:j==="loading",groupOptions:!0,appendTo:document.body})})}),o.jsxs(b_,{children:[o.jsx(f_,{children:o.jsx(Tc,{marketplace:e||"amazon.com",notification:Be,getSelectedKeywords:r,type:"dropdown",CustomButton:U=>o.jsx(ho,{...U,buttonType:"tertiary",size:"200",type:"button",disabled:j==="loading",locked:y,onLockedClick:w,"data-testid":"addfrommylist",children:n("magnet.addFromMyList")}),direction:"from",onAddFromMyList:U=>{u([..._,...U].slice(0,Pl))}})}),o.jsxs(S_,{children:[o.jsx(F,{buttonType:"secondary",size:"200",type:"button",disabled:j==="loading"||G===0,onClick:()=>u([]),"data-testid":"clear",children:n("common.clear")}),o.jsx(F,{ref:P,buttonType:"primary",size:"200",type:"submit",disabled:j==="loading"||(G<1||G>Pl)&&p.trim()==="","data-testid":"analyzekeywords",children:n("magnet.tabMultiple")})]})]}),o.jsx(Hd,{addTags:d,currentTags:_})]})}})})},x_=c.form`
  margin-top: ${({theme:e})=>e.spacing.sp24};
`,b_=c.div`
  margin-top: ${({theme:e})=>e.spacing.sp8};
  display: grid;
  grid-gap: ${({theme:e})=>e.spacing.sp8};
  align-items: center;
  justify-content: space-between;

  grid-template-columns: 1fr;

  ${z.mobile} {
    grid-template-columns: 1fr auto;
  }
`,f_=c.div`
  display: flex;
  align-items: center;

  & > :not(:first-child) {
    margin-left: ${({theme:e})=>e.spacing.sp16};
    margin-top: 0;
  }

  ${z.desktop} {
    & > :last-child {
      display: flex;
    }
  }

  grid-row: 2;

  ${z.mobile} {
    grid-row: 1;
  }

  & > :first-child {
    width: 100%;

    & > button {
      width: 100%;
    }
  }

  ${z.mobile} {
    & > :first-child {
      width: auto;

      & > button {
        width: auto;
      }
    }
  }
`,S_=c.div`
  display: grid;
  grid-gap: ${({theme:e})=>e.spacing.sp8};

  grid-template-columns: 1fr 1fr;

  ${z.mobile} {
    grid-template-columns: auto auto;
  }
`,y_=({Example:e})=>{const{t}=T(),n=en(),s=Ka(),{isDemo:r}=ne(),a=ee(y=>y.status),i=b(cs.atom),l=C(cs.actions.set),u=b(Ue),d=C(Mn),p=b(st,y=>(y==null?void 0:y.platform)||"AMAZON",[]),m=V(p,"multiSearch"),g=[me(),`${me()}/index-extension`,`${me()}/index-walmart-extension`].map(y=>({path:y})),x=!!Aa(g,s.pathname),S=[`${me()}/amazon/view-multi-search/:id`,`${me()}/walmart/view-multi-search/:id`].map(y=>({path:y})),j=!!Aa(S,s.pathname),f=C(()=>m||r?we.open({platform:p,restriction:"multiSearch",trigger:'User Click: "Multiple Search Tab"'}):void 0,[p,r,m]),v=h.useMemo(()=>[{tabId:"single",title:t("magnet.tabSingle"),tooltip:t("magnet.tabSingleTooltip")},{tabId:"multiple",title:o.jsxs(k_,{onClick:f,children:[o.jsx("div",{children:t("magnet.tabMultiple")}),(m||r)&&o.jsx(qp,{type:"tertiary"})]}),disabled:m||r,tooltip:t("magnet.tabMultipleTooltip")}],[r,m,f,t]);h.useEffect(()=>{j&&l("multiple")},[j,l]);const k=h.useCallback(y=>{r||(l(y),x||n($(me(),{})))},[n,r,x,l]);return o.jsxs(j_,{children:[o.jsx(ga,{clickable:!0,activeTab:i,tabs:v,onTabChange:k,disabled:a==="loading"&&!r}),i==="single"&&o.jsxs(o.Fragment,{children:[o.jsx(p_,{marketplace:u,setMarketplace:d}),o.jsx(e,{})]}),i==="multiple"&&o.jsx(g_,{marketplace:u,setMarketplace:d,Example:e})]})},j_=c.div``,k_=c.div`
  display: flex;
  align-items: center;
  padding-bottom: ${({theme:e})=>e.spacing.sp12};
  margin-bottom: -${({theme:e})=>e.spacing.sp12};

  & > :not(:first-child) {
    margin-left: ${({theme:e})=>e.spacing.sp4};
  }
`,T_=()=>{const{t:e}=T(),t=Ka(),{isDemo:n}=ne(),s=b(cs.atom),r=b(Pi),a=b(Ue,m=>m==null?void 0:m.startsWith("amazon"),[]),i=b(st),l=wc(i),u=[`${me()}`,`${me()}/index-extension`,`${me()}/index-walmart-extension`].map(m=>({path:m})),d=!!Aa(u,t.pathname),p=h.useCallback(()=>o.jsx(o.Fragment,{children:d&&i&&!n&&o.jsx(Va,{title:e(a?"example.magnet.amazon":"example.magnet.walmart"),list:l})}),[a,n,d,l,i,e]);return o.jsxs(v_,{children:[o.jsxs(sc,{children:[o.jsx("title",{children:"Magnet"}),o.jsx("meta",{name:"description",content:"Magnet"})]}),o.jsx(Lg,{project:"magnet"}),o.jsx(hi,{project:"magnet"}),!d&&o.jsx(Gx,{to:me()}),o.jsx(_N,{}),o.jsx(y_,{Example:p}),!d&&r&&o.jsx(Zx,{}),o.jsx(i_,{tab:s}),o.jsx(hc,{}),o.jsx(Sd,{}),o.jsx(Zb,{}),o.jsx(ld,{}),o.jsx(fc,{})]})},v_=c.div`
  display: flex;
  flex-direction: column;
  flex: 1;
`,C_=h.memo(()=>{const e=sS("");return h.useLayoutEffect(()=>{dS.setState({rootPath:e.pathname})},[e.pathname]),null}),A_=h.lazy(()=>Hp(()=>import("./EliteAnalyticsPage-LDKOHlsY.js"),__vite__mapDeps([88,1,70,4,3,10,11,68,34,13,40,75,15,9,12,7,14,16,17,18,67,2,19,20,57,71,72,73,74,25,66,27,76,77,38,78,79,80,81,29,24,5,22,23,21,26,28,37,82,83,51,84,32,85,41,50,52,86,87,69,49,53])).then(e=>({default:e.EliteAnalyticsPage}))),w_=()=>{const e=T();return h.useEffect(()=>{uS.set(e)},[e]),null},el=h.memo(({children:e,tool:t})=>{b(b0,()=>null,[]);const n=rS([t]);return o.jsxs(o.Fragment,{children:[o.jsx(C_,{}),o.jsxs(am,{children:[o.jsx(w_,{}),n&&o.jsx(R_,{children:e}),n!==null&&!n&&o.jsx(ry,{}),o.jsx(ay,{position:"bottom-right",autoClose:5e3,closeOnClick:!1,limit:3,style:{zIndex:2147483647}})]})]})}),$_=()=>{const{token:e,loaded:t}=li("cerebro");return b(Um,()=>null,[]),o.jsx(el,{tool:"cerebro",children:o.jsx(ei,{status:e&&t?"loaded":"loading",children:o.jsx(zN,{})})})},P_=()=>{const{token:e,loaded:t}=li("magnet");return b(p0,()=>null,[]),o.jsx(el,{tool:"magnet",children:o.jsx(ei,{status:e&&t?"loaded":"loading",children:o.jsx(T_,{})})})},B_=()=>{const{token:e,loaded:t}=li("blackBoxProducts");return b(Um,()=>null,[]),o.jsx(el,{tool:"blackbox",children:o.jsx(ei,{status:e&&t?"loaded":"loading",children:o.jsx(AD,{})})})},M_=()=>{const{token:e,loaded:t}=li("eliteAnalytics");return o.jsx(el,{tool:"blackbox",children:o.jsx(ei,{status:e&&t?"loaded":"loading",children:o.jsx(A_,{})})})},R_=c.div`
  display: flex;
  flex: 1;
  flex-direction: column;
  background-color: white;

  ${z.desktop} {
    padding: 0 40px 32px 40px;
  }

  ${z.desktopBefore} {
    padding: 0 16px 32px;
  }
`,wE=Object.freeze(Object.defineProperty({__proto__:null,BlackBoxRoutes:B_,CategoryBSRCellProduct:Wx,CerebroRoutes:$_,ChartButton:xo,EliteAnalyticsRoutes:M_,LastYearSalesCellBlackBoxProduct:Nx,MagnetRoutes:P_,ModalGraph:rm,MonthlySalesCellBlackBoxProduct:Vx,PriceCellBlackBoxProduct:Dx,ProductCellBlackBoxProduct:Ex,ResearchToolsTranslateProvider:am,ReviewsCellBlackBoxProduct:Lx,SellerCellBlackBoxProduct:qx,ShippingDetailsBlackBoxProduct:Ux,StorageFeeCellBlackBoxProduct:Kx,restrictedActionsRequest:rs,useChartModalStore:sm,usePlanCredentials:ne},Symbol.toStringTag,{value:"Module"}));export{Or as A,ui as B,nh as C,Ir as D,ws as E,hn as F,Ho as G,ky as H,ai as I,wm as J,xy as K,$m as L,O as M,be as N,AE as O,Wn as P,wE as Q,nt as S,Di as T,Iy as W,Hc as a,gt as b,Zm as c,Mc as d,tb as e,to as f,Kt as g,nn as h,na as i,bo as j,Os as k,un as l,pn as m,X as n,Zt as o,Ti as p,_r as q,vx as r,Gm as s,zr as t,ee as u,zn as v,mn as w,XN as x,rn as y,k0 as z};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["static/index-JeTAV08u.js","static/index-tEWTe_cM.js","static/ShowMore-8vjsJqT8.js","static/Learn-ZI4QJ8Ms.js","static/useAutoPlay-8WOcIzK4.js","static/ActionTitle-X3AI22EE.js","static/AirTable-Gyhy-mr-.js","static/NewRadio-DIL_Ez7J.js","static/BannerContainer-XVALgnXf.js","static/SearchGraphModal-8Lh4F5Sv.js","static/use-onclickoutside.browser.esm-BisD5Fdu.js","static/use-latest.esm-33sMI_t6.js","static/AddToMyListDropdown-lgmjWp6o.js","static/middleware-6VZ1FcKb.js","static/MarketplaceSingleSelect-J9Q4NESj.js","static/OptimalData-cuY_CBe9.js","static/getUpsellData-siUtjfVt.js","static/ExtendedProductSummary-Rm3yeme_.js","static/redirectToSubscribe-S6QlkQEz.js","static/ChartExport-1KlP8bAy.js","static/LineGraphSkeleton-_OzzpDE4.js","static/highcharts-react.min-X0EFkdtl.js","static/Chart-x9jYX_B3.js","static/highcharts-BYqkL6me.js","static/server.browser-DFoAq_e7.js","static/mergeRefs-97mQYrgp.js","static/merge-3VaFHwlg.js","static/_initCloneObject-4LlVOojD.js","static/isPlainObject-C3MJmmC-.js","static/useChartLegend-7ulLO1yV.js","static/NewSimpleTable-j7rvWp6o.js","static/Sparkline-z4suwkUd.js","static/ChoiceBadge-QiiTIx6Y.js","static/ACoSCell-0oe9F3NF.js","static/WidthLimitedTagsValue-Gph_9FLc.js","static/GaugeDiagram-1wpkGvHA.js","static/headers-8sHwoXD_.js","static/Minmax-3Xn6G6oy.js","static/index-ECFt0NIj.js","static/FloatingModal-hTV4MxiT.js","static/cjs-j4gHiI0m.js","static/useWindowSize-Dk6_GUbk.js","static/LoadFiles-q--ChE33.js","static/NumberIndicator-y1X_2mLN.js","static/StorageFeeCell-r2gKXA5Z.js","static/ProductCard-Uy2CH03D.js","static/RangeInput-baNwUCiR.js","static/getCountryName-v6ucg-51.js","static/Stepper-3m3iwsBE.js","static/SubAccountDoNotHaveAccess-W5XV8oJ4.js","static/AboveTable-n7zPUc2F.js","static/LockedTitle-zD5OrXLs.js","static/useTableComponents-2Hwd8mSP.js","static/ToastContainer-G5qnX7eh.js","static/TokenInfo-6hAtjS2W.js","static/InputChip-EsmexWuB.js","static/useUSelectAutocomplete-0avZfEpJ.js","static/IconMarketplaceSelect-LFYJVjQs.js","static/CategoricalTagsMultiSelect-S9YKyQEc.js","static/WidthAndHeightLimitedItems-85B_6p1x.js","static/CategoricalChip-xPMVgK7q.js","static/ProductMultiSelect-fq0DxkcP.js","static/TagsMultiSelect-ZI09vsgf.js","static/FilterButton-NLqylZQe.js","static/useChartSelect-vPM3sLxi.js","static/ProductChip-Hw6al7Eb.js","static/StatusChip-EV3h8ZPz.js","static/hooks-dSElEgEV.js","static/leitenGridLayout-f7Tvr_TN.js","static/AboveTableSkeleton-Lgx9__nY.js","static/ModalGraph-hPaCunFZ.js","static/store-716jCCs7.js","static/RecommendedPlanUpsellButton-l-ByuByL.js","static/EditProductIdeaName-KItQ9rLb.js","static/configuration-lN8dg8r2.js","static/IDASHUpsellModal-9iMRBwwd.js","static/index-7v7JHEmS.js","static/index-LRGnzDUH.js","static/index-Odw5cPaJ.js","static/index-jbA-UQjt.js","static/index-kbVOAPQe.js","static/index-Ca0BkoYE.js","static/omit-4vqdCSiw.js","static/_baseSlice-dEb6GWcI.js","static/lodash-X79ICV_1.js","static/index-JL-77yQX.js","static/react-alice-carousel-QMWN8gi9.js","static/useTrackCompetitorsOnClick-DO7Nu69z.js","static/EliteAnalyticsPage-LDKOHlsY.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
//# sourceMappingURL=index-Bl5uxQKE.js.map
