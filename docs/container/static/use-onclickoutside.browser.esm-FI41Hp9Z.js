import{d as g,F as h,gg as w,b as j,r as m,bm as A}from"./index-3WWdADc-.js";import{u as C}from"./use-latest.esm-1HraH-At.js";const U=()=>{const o=m.useContext(A);if(!o)throw new Error("[reatom] The provider is not defined");return o};function O(o,i,n){const s=g(o+"/fulfilled",...n!=null&&n.fulfilledReaction?[n.fulfilledReaction]:[]),u=g(o+"/rejected",...n!=null&&n.rejectedReaction?[n.rejectedReaction]:[]),R=g(o+"/resolved",...n!=null&&n.resolvedReaction?[n.resolvedReaction]:[]),t=g(o+"/aborted",...n!=null&&n.abortReaction?[n.abortReaction]:[]);let l=new AbortController,e=l.signal;const c=g(`${o}/clear`,()=>{l.abort(),l=new AbortController,e=l.signal});return{pending:g(o+"/pending",async(f,v)=>{try{const r=await i(f,v,{signal:e});v.dispatch(s({result:r,params:f}))}catch(r){r instanceof h&&r.message==="The user aborted a request."?v.dispatch(t({params:f})):r instanceof h?v.dispatch(u({params:f,error:r.message,fetchError:r})):r instanceof Error?v.dispatch(u({params:f,error:r.message})):v.dispatch(u({params:f,error:"Unknown Failure"}))}finally{n!=null&&n.resolvedReaction&&v.dispatch(R({params:f}))}}),fulfilled:s,rejected:u,clear:c,aborted:t}}function k(o,i,n){const s=O(`${o}Request`,i,{fulfilledReaction:n==null?void 0:n.fulfilledReaction,rejectedReaction:n==null?void 0:n.rejectedReaction,abortReaction:n==null?void 0:n.abortReaction}),u=w((n==null?void 0:n.initialContent)||null,n==null?void 0:n.initialStatus),R=j(`${o}Request`,u,t=>{var l;t(s.pending,(e,c)=>{var d;return{...e,content:(d=n==null?void 0:n.contentReducers)!=null&&d.pending?n.contentReducers.pending(e,c):e.content,error:null,fetchError:void 0,status:"loading",payload:c}}),t(s.fulfilled,(e,c)=>{var d;return{...e,status:"loaded",content:((d=n==null?void 0:n.contentReducers)!=null&&d.fulfilled?n.contentReducers.fulfilled(e,c):c.result)||null}}),t(s.rejected,(e,c)=>{var d;return{...e,content:(d=n==null?void 0:n.contentReducers)!=null&&d.rejected?n.contentReducers.rejected(e,c):e.content,status:"error",error:c.error,fetchError:c.fetchError}}),t(s.aborted,(e,c)=>{var d;return{...e,content:(d=n==null?void 0:n.contentReducers)!=null&&d.aborted?n.contentReducers.aborted(e,c):null,status:(n==null?void 0:n.initialStatus)||"loading",error:null,fetchError:void 0}}),t(s.clear,()=>u),(l=n==null?void 0:n.reducers)==null||l.call(n,t)});return{actions:s,atom:R}}var E;function S(){if(E!==void 0)return E;var o=!1,i={get passive(){o=!0}},n=function(){};return window.addEventListener("t",n,i),window.removeEventListener("t",n,i),E=o,o}var L="mousedown",p="touchstart",b=[L,p],T=function(i){if(i===p&&S())return{passive:!0}},q=document;function D(o,i,n){var s=n===void 0?{}:n,u=s.document,R=u===void 0?q:u,t=C(i);m.useEffect(function(){if(i){var l=function(c){!o.current||!t.current||o.current.contains(c.target)||t.current(c)};return b.forEach(function(e){R.addEventListener(e,l,T(e))}),function(){b.forEach(function(e){R.removeEventListener(e,l)})}}},[!i])}export{O as a,U as b,k as d,D as u};
//# sourceMappingURL=use-onclickoutside.browser.esm-FI41Hp9Z.js.map
