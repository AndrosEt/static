import{bK as k,bL as T,bM as C}from"./index-tEWTe_cM.js";var d={exports:{}};(function(g,p){Object.defineProperty(p,"__esModule",{value:!0});var P=function(){function n(r,o){for(var e=0;e<o.length;e++){var t=o[e];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(r,t.key,t)}}return function(r,o,e){return o&&n(r.prototype,o),e&&n(r,e),r}}(),v=k(),S=m(v),b=T,i=m(b);function m(n){return n&&n.__esModule?n:{default:n}}function E(n,r){var o={};for(var e in n)r.indexOf(e)>=0||Object.prototype.hasOwnProperty.call(n,e)&&(o[e]=n[e]);return o}function _(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function O(n,r){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r&&(typeof r=="object"||typeof r=="function")?r:n}function M(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof r);n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(n,r):n.__proto__=r)}var f=function(n){M(r,n);function r(o){_(this,r);var e=O(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,o));return e.scrollListener=e.scrollListener.bind(e),e.eventListenerOptions=e.eventListenerOptions.bind(e),e.mousewheelListener=e.mousewheelListener.bind(e),e}return P(r,[{key:"componentDidMount",value:function(){this.pageLoaded=this.props.pageStart,this.options=this.eventListenerOptions(),this.attachScrollListener()}},{key:"componentDidUpdate",value:function(){if(this.props.isReverse&&this.loadMore){var e=this.getParentElement(this.scrollComponent);e.scrollTop=e.scrollHeight-this.beforeScrollHeight+this.beforeScrollTop,this.loadMore=!1}this.attachScrollListener()}},{key:"componentWillUnmount",value:function(){this.detachScrollListener(),this.detachMousewheelListener()}},{key:"isPassiveSupported",value:function(){var e=!1,t={get passive(){e=!0}};try{document.addEventListener("test",null,t),document.removeEventListener("test",null,t)}catch{}return e}},{key:"eventListenerOptions",value:function(){var e=this.props.useCapture;return this.isPassiveSupported()?e={useCapture:this.props.useCapture,passive:!0}:e={passive:!1},e}},{key:"setDefaultLoader",value:function(e){this.defaultLoader=e}},{key:"detachMousewheelListener",value:function(){var e=window;this.props.useWindow===!1&&(e=this.scrollComponent.parentNode),e.removeEventListener("mousewheel",this.mousewheelListener,this.options?this.options:this.props.useCapture)}},{key:"detachScrollListener",value:function(){var e=window;this.props.useWindow===!1&&(e=this.getParentElement(this.scrollComponent)),e.removeEventListener("scroll",this.scrollListener,this.options?this.options:this.props.useCapture),e.removeEventListener("resize",this.scrollListener,this.options?this.options:this.props.useCapture)}},{key:"getParentElement",value:function(e){var t=this.props.getScrollParent&&this.props.getScrollParent();return t??(e&&e.parentNode)}},{key:"filterProps",value:function(e){return e}},{key:"attachScrollListener",value:function(){var e=this.getParentElement(this.scrollComponent);if(!(!this.props.hasMore||!e)){var t=window;this.props.useWindow===!1&&(t=e),t.addEventListener("mousewheel",this.mousewheelListener,this.options?this.options:this.props.useCapture),t.addEventListener("scroll",this.scrollListener,this.options?this.options:this.props.useCapture),t.addEventListener("resize",this.scrollListener,this.options?this.options:this.props.useCapture),this.props.initialLoad&&this.scrollListener()}}},{key:"mousewheelListener",value:function(e){e.deltaY===1&&!this.isPassiveSupported()&&e.preventDefault()}},{key:"scrollListener",value:function(){var e=this.scrollComponent,t=window,s=this.getParentElement(e),l=void 0;if(this.props.useWindow){var c=document.documentElement||document.body.parentNode||document.body,a=t.pageYOffset!==void 0?t.pageYOffset:c.scrollTop;this.props.isReverse?l=a:l=this.calculateOffset(e,a)}else this.props.isReverse?l=s.scrollTop:l=e.scrollHeight-s.scrollTop-s.clientHeight;l<Number(this.props.threshold)&&e&&e.offsetParent!==null&&(this.detachScrollListener(),this.beforeScrollHeight=s.scrollHeight,this.beforeScrollTop=s.scrollTop,typeof this.props.loadMore=="function"&&(this.props.loadMore(this.pageLoaded+=1),this.loadMore=!0))}},{key:"calculateOffset",value:function(e,t){return e?this.calculateTopPosition(e)+(e.offsetHeight-t-window.innerHeight):0}},{key:"calculateTopPosition",value:function(e){return e?e.offsetTop+this.calculateTopPosition(e.offsetParent):0}},{key:"render",value:function(){var e=this,t=this.filterProps(this.props),s=t.children,l=t.element,c=t.hasMore;t.initialLoad;var a=t.isReverse,h=t.loader;t.loadMore,t.pageStart;var L=t.ref;t.threshold,t.useCapture,t.useWindow,t.getScrollParent;var y=E(t,["children","element","hasMore","initialLoad","isReverse","loader","loadMore","pageStart","ref","threshold","useCapture","useWindow","getScrollParent"]);y.ref=function(w){e.scrollComponent=w,L&&L(w)};var u=[s];return c&&(h?a?u.unshift(h):u.push(h):this.defaultLoader&&(a?u.unshift(this.defaultLoader):u.push(this.defaultLoader))),S.default.createElement(l,y,u)}}]),r}(v.Component);f.propTypes={children:i.default.node.isRequired,element:i.default.node,hasMore:i.default.bool,initialLoad:i.default.bool,isReverse:i.default.bool,loader:i.default.node,loadMore:i.default.func.isRequired,pageStart:i.default.number,ref:i.default.func,getScrollParent:i.default.func,threshold:i.default.number,useCapture:i.default.bool,useWindow:i.default.bool},f.defaultProps={element:"div",hasMore:!1,initialLoad:!0,pageStart:0,ref:null,threshold:250,useWindow:!0,isReverse:!1,useCapture:!1,loader:null,getScrollParent:null},p.default=f,g.exports=p.default})(d,d.exports);var R=d.exports,W=R;const x=C(W);export{x as I};
//# sourceMappingURL=index-MvZws23r.js.map
